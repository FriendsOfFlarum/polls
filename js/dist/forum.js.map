{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@fof/polls/./src/forum/addComposerItems.tsx","webpack://@fof/polls/./src/forum/addDiscussionBadge.tsx","webpack://@fof/polls/./src/forum/addNavItem.ts","webpack://@fof/polls/./src/forum/addPollsToPost.tsx","webpack://@fof/polls/./src/forum/addPostControls.tsx","webpack://@fof/polls/./src/forum/components/AbstractPollPage.tsx","webpack://@fof/polls/./src/forum/components/ComposePollHero.tsx","webpack://@fof/polls/./src/forum/components/ComposePollPage.tsx","webpack://@fof/polls/./src/forum/components/CreatePollModal.tsx","webpack://@fof/polls/./src/forum/components/EditPollModal.tsx","webpack://@fof/polls/./src/forum/components/ListVotersModal.tsx","webpack://@fof/polls/./src/forum/components/Poll/PollImage.tsx","webpack://@fof/polls/./src/forum/components/Poll/PollList.tsx","webpack://@fof/polls/./src/forum/components/Poll/PollListItem.tsx","webpack://@fof/polls/./src/forum/components/Poll/PollOption.tsx","webpack://@fof/polls/./src/forum/components/Poll/PollOptions.tsx","webpack://@fof/polls/./src/forum/components/Poll/PollSubmitButton.tsx","webpack://@fof/polls/./src/forum/components/Poll/PollSubtitle.tsx","webpack://@fof/polls/./src/forum/components/Poll/PollTitle.tsx","webpack://@fof/polls/./src/forum/components/PollForm.tsx","webpack://@fof/polls/./src/forum/components/PollPageHero.tsx","webpack://@fof/polls/./src/forum/components/PollShowcase.tsx","webpack://@fof/polls/./src/forum/components/PollShowcaseItem.tsx","webpack://@fof/polls/./src/forum/components/PollView.tsx","webpack://@fof/polls/./src/forum/components/PollViewPage.tsx","webpack://@fof/polls/./src/forum/components/PollsPage.tsx","webpack://@fof/polls/./src/forum/components/PollsShowcasePage.tsx","webpack://@fof/polls/./src/forum/components/PostPoll.tsx","webpack://@fof/polls/./src/forum/components/UploadPollImageButton.tsx","webpack://@fof/polls/./src/forum/components/form/FormError.tsx","webpack://@fof/polls/./src/forum/components/index.ts","webpack://@fof/polls/./src/forum/extend.ts","webpack://@fof/polls/./src/forum/index.ts","webpack://@fof/polls/./src/forum/models/Poll.ts","webpack://@fof/polls/./src/forum/models/PollOption.ts","webpack://@fof/polls/./src/forum/models/PollVote.ts","webpack://@fof/polls/./src/forum/models/index.ts","webpack://@fof/polls/./src/forum/states/PollFormState.ts","webpack://@fof/polls/./src/forum/states/PollListState.ts","webpack://@fof/polls/./src/forum/states/PollState.ts","webpack://@fof/polls/./src/forum/states/index.ts","webpack://@fof/polls/./src/forum/utils/PollControls.tsx","webpack://@fof/polls/./src/forum/utils/index.ts","webpack://@fof/polls/external root \"flarum.core.compat['common/Component']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/Model']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Badge']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Dropdown']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Link']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Page']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Placeholder']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/SelectDropdown']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Separator']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Switch']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Tooltip']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/extend']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/extenders']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/helpers/avatar']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/helpers/highlight']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/helpers/listItems']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/helpers/username']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/models/Discussion']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/models/Forum']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/models/Post']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/states/PaginatedListState']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/EventEmitter']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/SubtreeRetainer']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/abbreviateNumber']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/computed']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/string']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/app']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/components/DiscussionComposer']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/components/DiscussionList']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/components/DiscussionPage']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/components/LogInModal']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/components/ReplyComposer']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/utils/PostControls']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/utils/slidable']\"","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/typeof.js","webpack://@fof/polls/./node_modules/@babel/runtime/regenerator/index.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/construct.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack://@fof/polls/webpack/bootstrap","webpack://@fof/polls/webpack/runtime/compat get default export","webpack://@fof/polls/webpack/runtime/define property getters","webpack://@fof/polls/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/polls/webpack/runtime/make namespace object","webpack://@fof/polls/./forum.ts"],"sourcesContent":["import app from 'flarum/forum/app';\n\nimport { extend } from 'flarum/common/extend';\nimport classList from 'flarum/common/utils/classList';\nimport DiscussionComposer from 'flarum/forum/components/DiscussionComposer';\nimport ReplyComposer from 'flarum/forum/components/ReplyComposer';\nimport CreatePollModal from './components/CreatePollModal';\nimport Poll from './models/Poll';\nimport PollOption from './models/PollOption';\nimport { ModelAttributes } from 'flarum/common/Model';\nimport PollModelAttributes from './models/PollModelAttributes';\n\nfunction toPoll(data: PollModelAttributes) {\n  if (data) {\n    const poll = app.store.createRecord<Poll>('polls');\n\n    poll.tempOptions = data.options.map((option: ModelAttributes) => {\n      const pollOption = app.store.createRecord<PollOption>('poll_options');\n      pollOption.pushAttributes(option);\n      return pollOption;\n    });\n    poll.pushAttributes(data);\n\n    return poll;\n  }\n  return data;\n}\n\nexport const addToComposer = (composer: ComponentClass) => {\n  // @ts-ignore\n  composer.prototype.addPoll = function () {\n    app.modal.show(CreatePollModal, {\n      poll: toPoll(this.composer.fields.poll),\n      onsubmit: (poll: PollModelAttributes) => (this.composer.fields.poll = poll),\n    });\n  };\n\n  // Add button to DiscussionComposer header\n  extend(composer.prototype, 'headerItems', function (items) {\n    const discussion = this.composer.body?.attrs?.discussion;\n\n    // @ts-ignore\n    const canStartPoll = discussion?.canStartPoll() ?? app.forum.canStartPolls();\n\n    if (canStartPoll) {\n      items.add(\n        'polls',\n        <a className=\"ComposerBody-poll\" onclick={this.addPoll.bind(this)}>\n          <span className={classList('PollLabel', !this.composer.fields.poll && 'none')}>\n            {app.translator.trans(`fof-polls.forum.composer_discussion.${this.composer.fields.poll ? 'edit' : 'add'}_poll`)}\n          </span>\n        </a>,\n        1\n      );\n    }\n  });\n\n  extend(composer.prototype, 'data', function (data) {\n    if (this.composer.fields.poll) {\n      data.poll = this.composer.fields.poll;\n    }\n  });\n};\n\nexport default () => {\n  addToComposer(DiscussionComposer);\n  addToComposer(ReplyComposer);\n};\n","import app from 'flarum/forum/app';\n\nimport { extend } from 'flarum/common/extend';\nimport Badge from 'flarum/common/components/Badge';\nimport DiscussionList from 'flarum/forum/components/DiscussionList';\nimport Discussion from 'flarum/common/models/Discussion';\nimport { PaginatedListRequestParams } from 'flarum/common/states/PaginatedListState';\n\nexport default () => {\n  // @ts-ignore\n  extend(DiscussionList.prototype, 'requestParams', (params: PaginatedListRequestParams) => {\n    (params.include as string[]).push('poll');\n  });\n\n  extend(Discussion.prototype, 'badges', function (badges) {\n    // @ts-ignore\n    if (this.hasPoll()) {\n      badges.add(\n        'poll',\n        Badge.component({\n          type: 'poll',\n          label: app.translator.trans('fof-polls.forum.tooltip.badge'),\n          icon: 'fas fa-poll',\n        }),\n        5\n      );\n    }\n  });\n};\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport LinkButton from 'flarum/common/components/LinkButton';\n\nexport default function addNavItem() {\n  extend(IndexPage.prototype, 'navItems', (items) => {\n    if (!app.forum.attribute<boolean>('globalPollsEnabled')) {\n      return;\n    }\n\n    items.add(\n      'fof-polls-showcase',\n      LinkButton.component(\n        {\n          href: app.route('fof.polls.showcase'),\n          icon: 'fas fa-poll',\n        },\n        app.translator.trans('fof-polls.forum.page.nav')\n      ),\n      35\n    );\n\n    const showAllGlobalPolls = app.forum.attribute<boolean>('canStartGlobalPolls');\n\n    if (showAllGlobalPolls) {\n      items.add(\n        'fof-polls-list',\n        LinkButton.component(\n          {\n            href: app.route('fof.polls.list'),\n            icon: 'fas fa-list',\n          },\n          app.translator.trans('fof-polls.forum.page.nav-all')\n        ),\n        32\n      );\n    }\n  });\n}\n","import app from 'flarum/forum/app';\n\nimport { extend } from 'flarum/common/extend';\nimport CommentPost from 'flarum/forum/components/CommentPost';\nimport PollView from './components/PollView';\nimport DiscussionPage from 'flarum/forum/components/DiscussionPage';\nimport Poll from './models/Poll';\nimport Post from 'flarum/common/models/Post';\nimport PollOption from './models/PollOption';\n\ninterface PollPost extends Post {\n  polls: () => Poll[];\n}\n\ninterface PusherPollDto {\n  pollId: string;\n  pollVoteCount: number;\n  options: { [key: string]: number };\n}\n\nexport default () => {\n  extend(CommentPost.prototype, 'content', function (content) {\n    const post = this.attrs.post as PollPost;\n\n    if ((!post.isHidden() || this.revealContent) && post.polls()) {\n      for (const poll of post.polls()) {\n        if (poll) {\n          content.push(<PollView poll={poll} />);\n        }\n      }\n    }\n  });\n\n  extend(CommentPost.prototype, 'oninit', function () {\n    this.subtree.check(() => {\n      const polls = (this.attrs.post as PollPost).polls();\n\n      const checks = polls?.map?.(\n        (poll) =>\n          poll && [\n            poll.data?.attributes,\n            poll.options().map?.((option) => option?.data?.attributes),\n            poll.myVotes().map?.((vote) => vote.option()?.id()),\n          ]\n      );\n\n      return JSON.stringify(checks);\n    });\n  });\n\n  extend(DiscussionPage.prototype, 'oncreate', function () {\n    // @ts-ignore\n    if (app.pusher) {\n      // @ts-ignore\n      app.pusher.then((binding) => {\n        // We will listen for updates to all polls and options\n        // Even if that model is not in the current discussion, it doesn't really matter\n        binding.channels.main.bind('updatedPollOptions', (data: PusherPollDto) => {\n          const poll = app.store.getById<Poll>('polls', data['pollId']);\n\n          if (poll) {\n            poll.pushAttributes({\n              voteCount: data['pollVoteCount'],\n            });\n\n            // Not redrawing here, as the option below should trigger the redraw already\n          }\n\n          const changedOptions = data['options'];\n\n          for (const optionId in changedOptions) {\n            const option = app.store.getById<PollOption>('poll_options', optionId);\n\n            if (option && option.voteCount() !== undefined) {\n              option.pushAttributes({\n                voteCount: changedOptions[optionId],\n              });\n            }\n          }\n\n          m.redraw();\n        });\n      });\n    }\n  });\n\n  extend(DiscussionPage.prototype, 'onremove', function () {\n    // @ts-ignore\n    if (app.pusher) {\n      // @ts-ignore\n      app.pusher.then((binding) => {\n        binding.channels.main.unbind('updatedPollOptions');\n      });\n    }\n  });\n};\n","import app from 'flarum/forum/app';\n\nimport { extend } from 'flarum/common/extend';\nimport PostControls from 'flarum/forum/utils/PostControls';\nimport CreatePollModal from './components/CreatePollModal';\nimport Button from 'flarum/common/components/Button';\nimport Post from 'flarum/common/models/Post';\nimport PollModelAttributes from './models/PollModelAttributes';\n\nexport default () => {\n  const createPoll = (post: Post) =>\n    app.modal.show(CreatePollModal, {\n      onsubmit: (data: PollModelAttributes) =>\n        app.store\n          .createRecord('polls')\n          .save(\n            {\n              ...data,\n              relationships: {\n                post,\n              },\n            },\n            {\n              data: {\n                include: 'options,myVotes,myVotes.option',\n              },\n            }\n          )\n          .then((poll) => {\n            // @ts-ignore\n            post.rawRelationship('polls')?.push?.({ type: 'polls', id: poll.id() });\n\n            return poll;\n          }),\n    });\n\n  extend(PostControls, 'moderationControls', function (items, post) {\n    // @ts-ignore\n    if (!post.isHidden() && post.canStartPoll()) {\n      items.add(\n        'addPoll',\n        <Button icon=\"fas fa-poll\" onclick={createPoll.bind(this, post)}>\n          {app.translator.trans('fof-polls.forum.moderation.add')}\n        </Button>\n      );\n    }\n  });\n};\n","import Page, { IPageAttrs } from 'flarum/common/components/Page';\nimport PollListState from '../states/PollListState';\nimport Poll from '../models/Poll';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport type Mithril from 'mithril';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport listItems from 'flarum/common/helpers/listItems';\nimport app from 'flarum/forum/app';\nimport SelectDropdown from 'flarum/common/components/SelectDropdown';\nimport IndexPageHero from './PollPageHero';\n\nexport abstract class AbstractPollPage extends Page<IPageAttrs, PollListState> {\n  loading: boolean = false;\n  poll: Poll | null | undefined = null;\n  polls: Poll[] = [];\n\n  view(): Mithril.Children {\n    return <div className=\"PollsPage\">{this.pageContent().toArray()}</div>;\n  }\n\n  pageContent(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add('hero', this.hero(), 100);\n    items.add('main', <div className=\"container\">{this.mainContent().toArray()}</div>, 10);\n\n    return items;\n  }\n\n  mainContent(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add('sidebar', this.sidebar(), 100);\n    items.add('content', this.content(), 10);\n\n    return items;\n  }\n\n  content(): Mithril.Children {\n    return <div className=\"PollsPage-content sideNavOffset\">{this.contentItems().toArray()}</div>;\n  }\n\n  contentItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    if (this.loading) {\n      items.add('loading', <LoadingIndicator />);\n    }\n\n    return items;\n  }\n\n  hero(): Mithril.Children {\n    return <IndexPageHero />;\n  }\n\n  sidebar(): Mithril.Children {\n    return (\n      <nav className=\"PollsPage-nav IndexPage-nav sideNav\">\n        <ul>{listItems(this.sidebarItems().toArray())}</ul>\n      </nav>\n    );\n  }\n\n  sidebarItems(): ItemList<Mithril.Children> {\n    const items = IndexPage.prototype.sidebarItems();\n\n    items.setContent(\n      'nav',\n      <SelectDropdown\n        buttonClassName=\"Button\"\n        className=\"App-titleControl\"\n        accessibleToggleLabel={app.translator.trans('core.forum.index.toggle_sidenav_dropdown_accessible_label')}\n      >\n        {this.navItems().toArray()}\n      </SelectDropdown>\n    );\n\n    return items;\n  }\n\n  navItems(): ItemList<Mithril.Children> {\n    const items = IndexPage.prototype.navItems();\n\n    if (app.initializers.has('flarum-tags')) {\n      // remove the tags from the nav items\n      items.remove('separator');\n      items.remove('moreTags');\n\n      // each tag is added using the key \"tag{id}\". We need to remove all of them\n      for (const key in items.toObject()) {\n        if (key.startsWith('tag') && key !== 'tags') {\n          items.remove(key);\n        }\n      }\n    }\n\n    return items;\n  }\n}\n","import Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport Poll from '../models/Poll';\nimport ItemList from 'flarum/common/utils/ItemList';\n\nexport interface ComposePollHeroAttrs extends ComponentAttrs {\n  poll: Poll;\n}\n\nexport default class ComposePollHero extends Component<ComposePollHeroAttrs> {\n  poll!: Poll;\n\n  oninit(vnode: Mithril.Vnode<ComposePollHeroAttrs>): void {\n    super.oninit(vnode);\n\n    this.poll = this.attrs.poll;\n  }\n\n  view(): Mithril.Children {\n    return (\n      <div className=\"ComposePollHero Hero\">\n        <div className=\"container\">\n          <div className=\"containerNarrow\">\n            <h2 className=\"Hero-title\">{app.translator.trans(`fof-polls.forum.compose.${!!this.poll.id() ? 'edit' : 'add'}_title`)}</h2>\n            <div className=\"ComposePollHero-controls\">{this.controlItems().toArray()}</div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  controlItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add(\n      'edit',\n      <LinkButton\n        icon=\"far fa-edit\"\n        className=\"Button Button--secondary GlobalPollListLink\"\n        itemClassName=\"App-primaryControl\"\n        href={app.route('fof.polls.list')}\n      >\n        {app.translator.trans('fof-polls.forum.compose.polls_manager')}\n      </LinkButton>\n    );\n\n    if (this.poll.exists) {\n      items.add(\n        'view',\n        <LinkButton\n          icon=\"far fa-arrow-up-right-from-square\"\n          className=\"Button Button--secondary PollPreviewLink\"\n          itemClassName=\"App-primaryControl\"\n          href={app.route('fof.polls.view', { id: this.poll.id() })}\n        >\n          {app.translator.trans('fof-polls.forum.compose.polls_preview')}\n        </LinkButton>\n      );\n    }\n\n    return items;\n  }\n}\n","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport Page from 'flarum/common/components/Page';\nimport Poll from '../models/Poll';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport PollForm from './PollForm';\nimport PollFormState from '../states/PollFormState';\nimport ComposePollHero from './ComposePollHero';\nimport Button from 'flarum/common/components/Button';\nimport listItems from 'flarum/common/helpers/listItems';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport SelectDropdown from 'flarum/common/components/SelectDropdown';\nimport IndexPage from 'flarum/forum/components/IndexPage';\n\nexport default class ComposePollPage extends Page {\n  poll: Poll | null | undefined = null;\n\n  loading: boolean = false;\n\n  oninit(vnode: Mithril.Vnode) {\n    super.oninit(vnode);\n\n    if (!app.forum.attribute<boolean>('globalPollsEnabled')) {\n      m.route.set('/');\n      return;\n    }\n\n    // Get the `edit` parameter from the URL\n    const editId = m.route.param('id');\n    if (editId) {\n      this.poll = app.store.getById<Poll>('poll', editId);\n\n      if (!this.poll) {\n        this.loading = true;\n\n        app.store.find<Poll>('fof/polls', editId).then((item) => {\n          this.poll = item;\n          this.loading = false;\n          app.setTitle(app.translator.trans(`fof-polls.forum.compose.${!!this.poll?.id() ? 'edit' : 'add'}_title`) as string);\n          m.redraw();\n        });\n      }\n    } else {\n      this.poll = PollFormState.createNewPoll();\n    }\n\n    app.history.push('compose-poll', app.translator.trans(`fof-polls.forum.compose.${!!this.poll?.id() ? 'edit' : 'add'}_title`) as string);\n    this.bodyClass = 'App--compose-poll';\n    app.setTitle(app.translator.trans(`fof-polls.forum.compose.${!!this.poll?.id() ? 'edit' : 'add'}_title`) as string);\n  }\n\n  view(): Mithril.Children {\n    // prevent users from accessing the page if they can't start global polls\n    if (!app.forum.attribute<boolean>('canStartGlobalPolls')) {\n      m.route.set('/');\n      return;\n    }\n\n    if (this.loading) {\n      return <LoadingIndicator />;\n    }\n\n    return (\n      <div className=\"ComposePollPage\">\n        <ComposePollHero poll={this.poll} />\n        <div className=\"container\">\n          <div className=\"sideNavContainer\">\n            <nav className=\"PollsPage-nav sideNav\">\n              <ul>{listItems(this.sidebarItems().toArray())}</ul>\n            </nav>\n            <div className=\"sideNavOffset\">\n              <PollForm poll={this.poll} onsubmit={this.onsubmit.bind(this)} />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  async onsubmit(data: Object, state: PollFormState) {\n    const isNew = state.poll.id() === undefined;\n    await state.save(data);\n\n    const alertAttrs = isNew\n      ? {\n          type: 'success',\n          controls: [\n            <Button\n              className=\"Button Button--link\"\n              onclick={() =>\n                m.route.set(\n                  app.route('fof.polls.compose', {\n                    id: state.poll.id(),\n                  })\n                )\n              }\n            >\n              {app.translator.trans('fof-polls.forum.compose.continue_editing')}\n            </Button>,\n          ],\n        }\n      : {\n          type: 'success',\n        };\n\n    // Show success alert\n    const alertId = app.alerts.show(alertAttrs, app.translator.trans('fof-polls.forum.compose.success'));\n\n    // Hide alert after 10 seconds\n    setTimeout(() => app.alerts.dismiss(alertId), 10000);\n\n    if (isNew) {\n      m.route.set(app.route('fof.polls.list'));\n    }\n  }\n\n  sidebarItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add(\n      'nav',\n      <SelectDropdown\n        buttonClassName=\"Button\"\n        className=\"App-titleControl\"\n        accessibleToggleLabel={app.translator.trans('core.forum.index.toggle_sidenav_dropdown_accessible_label')}\n      >\n        {this.navItems().toArray()}\n      </SelectDropdown>\n    );\n\n    return items;\n  }\n\n  navItems() {\n    return IndexPage.prototype.navItems();\n  }\n}\n","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport Modal, { IInternalModalAttrs } from 'flarum/common/components/Modal';\nimport PollForm from './PollForm';\nimport PollModel from '../models/Poll';\nimport PollFormState from '../states/PollFormState';\n\ninterface CreatePollModalAttrs extends IInternalModalAttrs {\n  poll: PollModel;\n  onsubmit: (data: object) => Promise<void>;\n}\n\nexport default class CreatePollModal extends Modal<CreatePollModalAttrs> {\n  title(): Mithril.Children {\n    return app.translator.trans('fof-polls.forum.modal.add_title');\n  }\n\n  className(): string {\n    return 'PollDiscussionModal Modal--medium';\n  }\n\n  content(): Mithril.Children {\n    return [\n      <div className=\"Modal-body\">\n        <PollForm poll={this.attrs.poll} onsubmit={this.onFormSubmit.bind(this)}></PollForm>\n      </div>,\n    ];\n  }\n\n  async onFormSubmit(data: object, state: PollFormState): Promise<void> {\n    this.hide();\n    await this.attrs.onsubmit(data);\n  }\n}\n","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport CreatePollModal from './CreatePollModal';\nimport PollFormState from '../states/PollFormState';\n\nexport default class EditPollModal extends CreatePollModal {\n  title(): Mithril.Children {\n    return app.translator.trans('fof-polls.forum.modal.edit_title');\n  }\n\n  async onFormSubmit(data: object, state: PollFormState): Promise<void> {\n    await state.save(data);\n\n    // Show success alert\n    const alertId = app.alerts.show(\n      {\n        type: 'success',\n      },\n      app.translator.trans('fof-polls.forum.compose.success')\n    );\n\n    // Hide alert after 10 seconds\n    setTimeout(() => app.alerts.dismiss(alertId), 10000);\n  }\n}\n","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport Modal, { IInternalModalAttrs } from 'flarum/common/components/Modal';\nimport avatar from 'flarum/common/helpers/avatar';\nimport username from 'flarum/common/helpers/username';\nimport Link from 'flarum/common/components/Link';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport PollModel from '../models/Poll';\nimport PollVote from '../models/PollVote';\nimport User from 'flarum/common/models/User';\nimport PollOption from '../models/PollOption';\n\ninterface ListVotersModalAttrs extends IInternalModalAttrs {\n  poll: PollModel;\n  onsubmit: (data: object) => Promise<void>;\n}\n\nexport default class ListVotersModal extends Modal<ListVotersModalAttrs> {\n  oninit(vnode: Mithril.Vnode): void {\n    super.oninit(vnode);\n\n    this.loading = true;\n\n    app.store\n      .find('fof/polls', this.attrs.poll.id()!, {\n        include: 'votes,votes.user,votes.option',\n      })\n      .then(() => (this.loading = false))\n      .finally(() => m.redraw());\n  }\n\n  className(): string {\n    return 'Modal--medium VotesModal';\n  }\n\n  title(): Mithril.Children {\n    return app.translator.trans('fof-polls.forum.votes_modal.title');\n  }\n\n  content(): Mithril.Children {\n    const options = this.attrs.poll.options() as PollOption[];\n    return <div className=\"Modal-body\">{this.loading ? <LoadingIndicator /> : options.map(this.optionContent.bind(this))}</div>;\n  }\n\n  optionContent(opt: PollOption): Mithril.Children {\n    const votes = (this.attrs.poll.votes() || []).filter((v) => opt.id() === v!.option()!.id()) as PollVote[];\n\n    return (\n      <div className=\"VotesModal-option\">\n        <h2>{opt.answer()! + ':'}</h2>\n\n        {votes.length ? (\n          <div className=\"VotesModal-list\">{votes.map(this.voteContent.bind(this))}</div>\n        ) : (\n          <h4>{app.translator.trans('fof-polls.forum.modal.no_voters')}</h4>\n        )}\n      </div>\n    );\n  }\n\n  voteContent(vote: PollVote): Mithril.Children {\n    const user = vote.user() as User;\n    const attrs = user && { href: app.route.user(user) };\n\n    return (\n      <Link {...attrs}>\n        {avatar(user)} {username(user)}\n      </Link>\n    );\n  }\n}\n","import type Mithril from 'mithril';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport Poll from 'src/forum/models/Poll';\nimport ItemList from 'flarum/common/utils/ItemList';\n\ninterface PollImageAttrs extends ComponentAttrs {\n  poll: Poll;\n}\n\nexport default class PollImage extends Component<PollImageAttrs> {\n  imageUrl: string | null = null;\n  imageAlt: string | null = null;\n\n  oninit(vnode: Mithril.Vnode<PollImageAttrs, this>) {\n    super.oninit(vnode);\n\n    this.imageUrl = this.attrs.poll.imageUrl();\n    this.imageAlt = this.attrs.poll.imageAlt();\n  }\n\n  view(): Mithril.Children {\n    if (!this.imageUrl) {\n      return;\n    }\n\n    return <div className=\"PollImage\">{this.imageItems().toArray()}</div>;\n  }\n\n  imageItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add('image', <img src={this.imageUrl} alt={this.imageAlt ?? ''} className=\"PollImage-image\" loading=\"lazy\" />);\n\n    return items;\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport PollListItem from './PollListItem';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Placeholder from 'flarum/common/components/Placeholder';\nimport classList from 'flarum/common/utils/classList';\nimport PollListState from '../../states/PollListState';\n\nexport interface PollListAttrs extends ComponentAttrs {\n  state: PollListState;\n}\n\n/**\n * The `PollList` component displays a list of polls.\n */\nexport default class PollList extends Component<PollListAttrs> {\n  view() {\n    const state = this.attrs.state;\n    const params = state.getParams();\n    const isLoading = state.isInitialLoading() || state.isLoadingNext();\n\n    let loading;\n\n    if (isLoading) {\n      loading = <LoadingIndicator />;\n    } else if (state.hasNext()) {\n      loading = (\n        <Button className=\"Button\" onclick={state.loadNext.bind(state)}>\n          {app.translator.trans('fof-polls.forum.polls_list.load_more_button')}\n        </Button>\n      );\n    }\n\n    if (state.isEmpty()) {\n      const text = app.translator.trans('fof-polls.forum.polls_list.empty_text');\n      return (\n        <div className=\"PollList\">\n          <Placeholder text={text} />\n        </div>\n      );\n    }\n\n    return (\n      <div className={classList('PollList', { 'PollList--searchResults': state.isSearchResults() })}>\n        <ul aria-busy={isLoading} className=\"PollList-polls\">\n          {state.getPages().map((pg) => {\n            return pg.items.map((poll) => (\n              <li key={poll.id()} data-id={poll.id()}>\n                <PollListItem poll={poll} params={params} />\n              </li>\n            ));\n          })}\n        </ul>\n        <div className=\"PollList-loadMore\">{loading}</div>\n      </div>\n    );\n  }\n}\n","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport type { PollListParams } from '../../states/PollListState';\nimport SubtreeRetainer from 'flarum/common/utils/SubtreeRetainer';\nimport classList from 'flarum/common/utils/classList';\nimport Dropdown from 'flarum/common/components/Dropdown';\nimport Link from 'flarum/common/components/Link';\nimport highlight from 'flarum/common/helpers/highlight';\nimport slidable from 'flarum/forum/utils/slidable';\nimport icon from 'flarum/common/helpers/icon';\nimport abbreviateNumber from 'flarum/common/utils/abbreviateNumber';\nimport Poll from '../../models/Poll';\nimport PollControls from '../../utils/PollControls';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport listItems from 'flarum/common/helpers/listItems';\nimport PollViewPage from '../PollViewPage';\n\nexport interface IPollListItemAttrs extends ComponentAttrs {\n  poll: Poll;\n  params: PollListParams;\n}\n\n/**\n * The `PollListItem` component shows a single poll in the\n * poll list.\n */\nexport default class PollListItem<CustomAttrs extends IPollListItemAttrs = IPollListItemAttrs> extends Component<CustomAttrs> {\n  /**\n   * Ensures that the poll will not be redrawn\n   * unless new data comes in.\n   */\n  subtree!: SubtreeRetainer;\n  poll!: Poll;\n\n  highlightRegExp?: RegExp;\n\n  oninit(vnode: Mithril.Vnode<CustomAttrs, this>) {\n    super.oninit(vnode);\n\n    this.poll = this.attrs.poll;\n\n    this.subtree = new SubtreeRetainer(\n      () => this.poll.freshness,\n      () => {\n        const time = app.session.user && app.session.user.markedAllAsReadAt();\n        return time && time.getTime();\n      },\n      () => this.active()\n    );\n  }\n\n  elementAttrs() {\n    return {\n      className: classList('PollListItem', {\n        active: this.active(),\n        'PollListItem--hidden': this.poll.isHidden(),\n        Slidable: 'ontouchstart' in window,\n      }),\n    };\n  }\n\n  view() {\n    const controls = PollControls.controls(this.poll, this).toArray();\n    const attrs = this.elementAttrs();\n\n    return (\n      <div {...attrs}>\n        {this.controlsView(controls)}\n        {this.contentView()}\n        {this.slidableUnderneathView()}\n      </div>\n    );\n  }\n\n  controlsView(controls: Mithril.ChildArray): Mithril.Children {\n    return (\n      !!controls.length && (\n        <Dropdown\n          icon=\"fas fa-ellipsis-v\"\n          className=\"PollListItem-controls\"\n          menuClassName=\"Dropdown-menu--right\"\n          buttonClassName=\"Button Button--icon Button--flat\"\n          accessibleToggleLabel={app.translator.trans('fof-polls.forum.poll_controls.toggle_dropdown_accessible_label')}\n        >\n          {controls}\n        </Dropdown>\n      )\n    );\n  }\n\n  slidableUnderneathView(): Mithril.Children {\n    const isUnread = this.poll.isUnread();\n\n    return (\n      <span\n        className={classList('Slidable-underneath Slidable-underneath--left Slidable-underneath--elastic', { disabled: !isUnread })}\n        onclick={this.markAsRead.bind(this)}\n      >\n        {icon('fas fa-check')}\n      </span>\n    );\n  }\n\n  contentView(): Mithril.Children {\n    // const isUnread = this.poll.isUnread();\n    // const isRead = this.poll.isRead();\n\n    return (\n      //   <div className={classList('PollListItem-content', 'Slidable-content', { unread: isUnread, read: isRead })}>\n      <div className={classList('PollListItem-content')}>{this.mainView()}</div>\n    );\n  }\n\n  mainView(): Mithril.Children {\n    return (\n      <Link href={app.route('fof.polls.view', { id: this.poll.id() })} className=\"PollListItem-main\">\n        <h2 className=\"PollListItem-title\">{highlight(this.poll.question(), this.highlightRegExp)}</h2>\n        {this.poll.subtitle() && <p className=\"PollListItem-subtitle helpText\">{this.poll.subtitle()}</p>}\n        <ul className=\"PollListItem-info\">{listItems(this.infoItems().toArray())}</ul>\n      </Link>\n    );\n  }\n\n  // infoView() {\n  //   return (\n  //     <div>\n  //       {this.poll.subtitle() && <p className=\"PollListItem-subtitle helpText\">{this.poll.subtitle()}</p>}\n  //       <ul className=\"PollListItem-info\">{listItems(this.infoItems().toArray())}</ul>\n  //     </div>\n  //   );\n  // }\n\n  oncreate(vnode: Mithril.VnodeDOM<CustomAttrs, this>) {\n    super.oncreate(vnode);\n\n    // If we're on a touch device, set up the discussion row to be slidable.\n    // This allows the user to drag the row to either side of the screen to\n    // reveal controls.\n    if ('ontouchstart' in window) {\n      const slidableInstance = slidable(this.element);\n\n      this.$('.PollListItem-controls').on('hidden.bs.dropdown', () => slidableInstance.reset());\n    }\n  }\n\n  onbeforeupdate(vnode: Mithril.VnodeDOM<CustomAttrs, this>) {\n    super.onbeforeupdate(vnode);\n\n    return this.subtree.needsRebuild();\n  }\n\n  /**\n   * Determine whether or not the discussion is currently being viewed.\n   */\n  active() {\n    return app.current.matches(PollViewPage, { poll: this.poll });\n  }\n\n  /**\n   * Mark the poll as read.\n   */\n  markAsRead() {\n    if (this.poll.isUnread()) {\n      this.poll.save({ lastVotedNumber: this.poll.voteCount() });\n      m.redraw();\n    }\n  }\n\n  infoItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n    const active = !this.poll.hasEnded();\n    const activeView = this.poll.endDate()\n      ? [\n          icon('fas fa-clock'),\n          ' ',\n          active\n            ? app.translator.trans('fof-polls.forum.days_remaining', { time: dayjs(this.poll.endDate()).fromNow() })\n            : app.translator.trans('fof-polls.forum.poll_ended'),\n        ]\n      : [icon('fas fa-infinity'), ' ', app.translator.trans('fof-polls.forum.poll_never_ends')];\n\n    items.add('active', <span className={classList('PollListItem-endStatus', { active })}>{activeView}</span>);\n\n    const voteCount = this.poll.voteCount();\n    if (voteCount !== undefined) {\n      items.add(\n        'voteCount',\n        <span>\n          {icon('fas fa-poll fa-fw')}\n          {[\n            ' ',\n            app.translator.trans('fof-polls.forum.polls_count', {\n              count: abbreviateNumber(voteCount),\n            }),\n          ]}\n        </span>,\n        70\n      );\n    }\n\n    return items;\n  }\n}\n","import app from 'flarum/forum/app';\nimport Mithril from 'mithril';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport PollOptionModel from '../../models/PollOption';\nimport PollState from '../../states/PollState';\nimport Tooltip, { TooltipAttrs } from 'flarum/common/components/Tooltip';\nimport icon from 'flarum/common/helpers/icon';\nimport classList from 'flarum/common/utils/classList';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Poll from '../../models/Poll';\n\ninterface PollOptionAttrs extends ComponentAttrs {\n  option: PollOptionModel;\n  name: string;\n  state: PollState;\n}\n\nexport default class PollOption extends Component<PollOptionAttrs, PollState> {\n  option!: PollOptionModel;\n  name!: string;\n  state!: PollState;\n  hasVoted: boolean = false;\n  totalVotes: number = 0;\n  votes: number = 0;\n  voted: boolean = false;\n  poll!: Poll;\n  canSeeVoteCount: boolean = false;\n  answer!: string;\n\n  oninit(vnode: Mithril.Vnode<PollOptionAttrs, PollState>) {\n    super.oninit(vnode);\n\n    this.option = this.attrs.option;\n    this.name = this.attrs.name;\n    this.state = this.attrs.state;\n    this.hasVoted = this.state.hasVoted();\n    this.totalVotes = this.state.overallVoteCount();\n    this.votes = this.option.voteCount();\n    this.voted = this.state.hasVotedFor(this.option);\n    this.poll = this.state.poll;\n\n    // isNaN(null) is false, so we have to check type directly now that API always returns the field\n    this.canSeeVoteCount = typeof this.votes === 'number';\n\n    this.answer = this.option.answer();\n  }\n\n  percent(): number {\n    return this.totalVotes > 0 ? Math.round((this.votes / this.totalVotes) * 100) : 0;\n  }\n\n  view(): Mithril.Children {\n    const isDisabled = this.state.loadingOptions || (this.hasVoted && !this.poll.canChangeVote());\n    const width = this.canSeeVoteCount ? this.percent() : (Number(this.voted) / (this.poll.myVotes()?.length || 1)) * 100;\n\n    const bar = (\n      <div className=\"PollBar\" data-selected={!!this.voted} style={`--poll-option-width: ${width}%`}>\n        {this.state.showCheckMarks && (\n          <label className=\"PollAnswer-checkbox checkbox\">\n            <input onchange={this.state.changeVote.bind(this.state, this.option)} type=\"checkbox\" checked={this.voted} disabled={isDisabled} />\n            <span className=\"checkmark\" />\n          </label>\n        )}\n\n        <div className=\"PollAnswer-text\">{this.optionDisplayItems().toArray()}</div>\n\n        {this.option.imageUrl() ? <img className=\"PollAnswer-image\" src={this.option.imageUrl()} alt={this.option.answer()} /> : null}\n      </div>\n    );\n\n    return (\n      <div\n        className={classList('PollOption', this.hasVoted && 'PollVoted', this.option.imageUrl() && 'PollOption-hasImage')}\n        data-id={this.option.id()}\n      >\n        {this.canSeeVoteCount ? (\n          <Tooltip text={app.translator.trans('fof-polls.forum.tooltip.votes', { count: this.votes })} onremove={this.hideOptionTooltip}>\n            {bar}\n          </Tooltip>\n        ) : (\n          bar\n        )}\n      </div>\n    );\n  }\n\n  /**\n   * Attempting to use the `tooltipVisible` attr on the Tooltip component set to 'false' when no vote count\n   * caused the tooltip to break on click. This is a workaround to hide the tooltip when no vote count is available,\n   * called on 'onremove' of the Tooltip component. It doesn't always work as intended either, but it does the job.\n   */\n  hideOptionTooltip(vnode: Mithril.Vnode<TooltipAttrs, Tooltip>) {\n    vnode.attrs.tooltipVisible = false;\n\n    // @ts-ignore\n    vnode.state.updateVisibility();\n  }\n\n  optionDisplayItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add('answer', <span className=\"PollAnswer-text-answer\">{this.answer}</span>);\n\n    this.voted && !this.state.showCheckMarks && items.add('check', icon('fas fa-check-circle', { className: 'PollAnswer-check' }));\n\n    this.canSeeVoteCount &&\n      items.add('percent', <span className={classList('PollPercent', this.percent() !== 100 && 'PollPercent--option')}>{this.percent()}%</span>);\n\n    return items;\n  }\n}\n","import type Mithril from 'mithril';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport PollOption from './PollOption';\nimport PollOptionModel from '../../models/PollOption';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport PollState from '../../states/PollState';\n\ninterface PollOptionsAttrs extends ComponentAttrs {\n  options: PollOptionModel[];\n  name: String;\n  state: PollState;\n}\n\nexport default class PollOptions extends Component<PollOptionsAttrs> {\n  view(): Mithril.Children {\n    return <div className=\"Poll-options list-layout\">{this.pollOptions().toArray()}</div>;\n  }\n\n  pollOptions(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    this.attrs.options.forEach((option: PollOptionModel): void => {\n      items.add('option' + option.id(), this.createOptionView(option));\n    });\n\n    return items;\n  }\n\n  createOptionView(option: PollOptionModel): Mithril.Children {\n    return <PollOption name={this.attrs.name} option={option} state={this.attrs.state} />;\n  }\n}\n","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport PollState from '../../states/PollState';\n\ninterface PollSubmitButtonAttrs extends ComponentAttrs {\n  state: PollState;\n}\n\nexport default class PollSubmitButton extends Component<PollSubmitButtonAttrs> {\n  view(): Mithril.Children {\n    const state = this.attrs.state;\n    return (\n      <Button\n        className=\"Button Button--primary Poll-submit\"\n        loading={state.loadingOptions}\n        onclick={(event: Event) => this.pollButtonSubmit(state, event)}\n        disabled={!state.hasSelectedOptions()}\n      >\n        {app.translator.trans('fof-polls.forum.poll.submit_button')}\n      </Button>\n    );\n  }\n\n  /**\n   * Event handler for submit button being clicked\n   */\n\n  pollButtonSubmit(state: PollState, event: Event): void {\n    state.onsubmit();\n  }\n}\n","import Component, { ComponentAttrs } from 'flarum/common/Component';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Poll from 'src/forum/models/Poll';\nimport Mithril from 'mithril';\n\nexport interface PollSubtitleAttrs extends ComponentAttrs {\n  poll: Poll;\n}\n\nexport default class PollSubtitle extends Component<PollSubtitleAttrs> {\n  view() {\n    if (!this.attrs.poll.subtitle()) {\n      return;\n    }\n\n    return <div className=\"Poll-subtitle-component\">{this.pollSubtitleItems().toArray()}</div>;\n  }\n\n  pollSubtitleItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add('subtitle', <p className=\"Poll-subtitle\">{this.attrs.poll.subtitle()}</p>);\n\n    return items;\n  }\n}\n","import Component, { ComponentAttrs } from 'flarum/common/Component';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Poll from 'src/forum/models/Poll';\nimport Mithril from 'mithril';\n\nexport interface PollTitleAttrs extends ComponentAttrs {\n  poll: Poll;\n}\n\nexport default class PollTitle extends Component<PollTitleAttrs> {\n  view() {\n    return <div className=\"Poll-title-component\">{this.pollTitleItems().toArray()}</div>;\n  }\n\n  pollTitleItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add('title', <h2 className=\"Poll-title\">{this.attrs.poll.question()}</h2>);\n\n    return items;\n  }\n}\n","import Component, { ComponentAttrs } from 'flarum/common/Component';\nimport Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport Button from 'flarum/common/components/Button';\nimport Switch from 'flarum/common/components/Switch';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Stream from 'flarum/common/utils/Stream';\nimport extractText from 'flarum/common/utils/extractText';\nimport FormError from './form/FormError';\nimport PollFormState from '../states/PollFormState';\nimport PollControls from '../utils/PollControls';\nimport PollModel from '../models/Poll';\nimport PollOption from '../models/PollOption';\nimport UploadPollImageButton from './UploadPollImageButton';\nimport Poll from '../models/Poll';\nimport Tooltip from 'flarum/common/components/Tooltip';\n\ninterface PollFormAttrs extends ComponentAttrs {\n  poll: PollModel;\n  onsubmit: (data: object, state: PollFormState) => Promise<void>;\n}\n\nexport default class PollForm extends Component<PollFormAttrs, PollFormState> {\n  protected options: PollOption[] = [];\n  protected optionAnswers: Stream<string>[] = [];\n  protected optionImageUrls: Stream<string>[] = [];\n  protected question: Stream<string>;\n  protected subtitle: Stream<string>;\n  protected image: Stream<string | null>;\n  protected imageAlt: Stream<string | null>;\n  protected endDate: Stream<string | null>;\n  protected publicPoll: Stream<boolean>;\n  protected allowMultipleVotes: Stream<boolean>;\n  protected hideVotes: Stream<boolean>;\n  protected allowChangeVote: Stream<boolean>;\n  protected maxVotes: Stream<number>;\n  protected datepickerMinDate: string = '';\n\n  oninit(vnode: Mithril.Vnode): void {\n    super.oninit(vnode);\n    this.state = new PollFormState(this.attrs.poll);\n\n    // state handles poll initialization\n    const poll = this.state.poll;\n\n    this.options = (poll.tempOptions ?? poll.options()) as PollOption[];\n    this.optionAnswers = this.options.map((o) => Stream(o.answer()));\n    this.optionImageUrls = this.options.map((o) => Stream(o.imageUrl()));\n\n    this.question = Stream(poll.question());\n    this.subtitle = Stream(poll.subtitle());\n    this.image = Stream(poll.image());\n    this.imageAlt = Stream(poll.imageAlt());\n    this.endDate = Stream(this.formatDate(poll.endDate()));\n    this.publicPoll = Stream(poll.publicPoll());\n    this.allowMultipleVotes = Stream(poll.allowMultipleVotes());\n    this.hideVotes = Stream(poll.hideVotes());\n    this.allowChangeVote = Stream(poll.allowChangeVote());\n    this.maxVotes = Stream(poll.maxVotes() || 0);\n\n    // Set minimum date for datepicker to current date\n    this.datepickerMinDate = this.formatDate() as string;\n\n    // Replace minimum of 'today' for poll end date only if the poll is not already closed\n    if (this.endDate() && dayjs(poll.endDate).isAfter(dayjs())) {\n      // We know that endDate is set, so we can safely cast the result to string\n      this.datepickerMinDate = this.formatDate(poll.endDate()) as string;\n    }\n  }\n\n  view(): Mithril.Children {\n    return (\n      <form onsubmit={this.onsubmit.bind(this)}>\n        <div className=\"PollDiscussionModal-form\">{this.fields().toArray()}</div>\n      </form>\n    );\n  }\n\n  fields(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add(\n      'question',\n      <div className=\"Form-group\">\n        <label className=\"label\">{app.translator.trans('fof-polls.forum.modal.question_placeholder')}</label>\n\n        <input type=\"text\" name=\"question\" className=\"FormControl\" bidi={this.question} />\n      </div>,\n      100\n    );\n\n    items.add(\n      'subtitle',\n      <div className=\"Form-group\">\n        <label className=\"label\">{app.translator.trans('fof-polls.forum.modal.subtitle_placeholder')}</label>\n\n        <input type=\"text\" name=\"subtitle\" className=\"FormControl\" bidi={this.subtitle} />\n      </div>,\n      95\n    );\n\n    items.add(\n      'poll_image',\n      <div className=\"Form-group\">\n        <label className=\"label\">{app.translator.trans('fof-polls.forum.modal.poll_image.label')}</label>\n        <p className=\"helpText\">{app.translator.trans('fof-polls.forum.modal.poll_image.help')}</p>\n        <UploadPollImageButton name=\"pollImage\" poll={this.state.poll} onUpload={this.pollImageUploadSuccess.bind(this)} />\n        <input type=\"hidden\" name=\"pollImage\" value={this.image()} />\n      </div>,\n      90\n    );\n\n    if (this.image()) {\n      items.add(\n        'poll_image_alt',\n        <div className=\"Form-group\">\n          <label className=\"label\">{app.translator.trans('fof-polls.forum.modal.poll_image.alt_label')}</label>\n\n          <input type=\"text\" required name=\"imageAlt\" className=\"FormControl\" bidi={this.imageAlt} />\n\n          <p className=\"helpText\">{app.translator.trans('fof-polls.forum.modal.poll_image.alt_help_text')}</p>\n        </div>,\n        90\n      );\n    }\n\n    items.add(\n      'answers',\n      <div className=\"PollModal--answers Form-group\">\n        <label className=\"label PollModal--answers-title\">\n          <span>{app.translator.trans('fof-polls.forum.modal.options_label')}</span>\n        </label>\n\n        {this.displayOptions().toArray()}\n\n        <Tooltip text={app.translator.trans('fof-polls.forum.modal.tooltip.options.add-button')}>\n          <Button className=\"Button PollModal--button Button--icon PollModal--add-button\" icon=\"fas fa-plus\" onclick={this.addOption.bind(this)} />\n        </Tooltip>\n      </div>,\n      80\n    );\n\n    items.add(\n      'date',\n      <div className=\"Form-group\">\n        <label className=\"label\">{app.translator.trans('fof-polls.forum.modal.date_placeholder')}</label>\n\n        <div className=\"PollModal--date\">\n          <input\n            className=\"FormControl\"\n            type=\"datetime-local\"\n            name=\"date\"\n            bidi={this.endDate}\n            min={this.datepickerMinDate}\n            max={this.formatDate('2038')}\n          />\n          {Button.component({\n            className: 'Button PollModal--button Button--icon',\n            icon: 'fas fa-times',\n            onclick: this.endDate.bind(this, null),\n          })}\n        </div>\n\n        {this.endDate() && (\n          <p className=\"helpText\">\n            <i class=\"icon fas fa-clock\" />\n            &nbsp;\n            {dayjs(this.endDate()).isBefore(dayjs())\n              ? app.translator.trans('fof-polls.forum.poll_ended')\n              : app.translator.trans('fof-polls.forum.days_remaining', { time: dayjs(this.endDate()).fromNow() })}\n          </p>\n        )}\n      </div>,\n      40\n    );\n\n    items.add(\n      'public',\n      <div className=\"Form-group\">\n        {Switch.component(\n          {\n            state: this.publicPoll() || false,\n            onchange: this.publicPoll,\n          },\n          app.translator.trans('fof-polls.forum.modal.public_poll_label')\n        )}\n      </div>,\n      20\n    );\n\n    items.add(\n      'hide-votes',\n      <div className=\"Form-group\">\n        <Switch state={this.endDate() && this.hideVotes()} onchange={this.hideVotes} disabled={!this.endDate()}>\n          {app.translator.trans('fof-polls.forum.modal.hide_votes_label')}\n        </Switch>\n      </div>,\n      20\n    );\n\n    items.add(\n      'allow-change-vote',\n      <div className=\"Form-group\">\n        <Switch state={this.allowChangeVote()} onchange={this.allowChangeVote}>\n          {app.translator.trans('fof-polls.forum.modal.allow_change_vote_label')}\n        </Switch>\n      </div>,\n      20\n    );\n\n    items.add(\n      'allow-multiple-votes',\n      <div className=\"Form-group\">\n        {Switch.component(\n          {\n            state: this.allowMultipleVotes() || false,\n            onchange: this.allowMultipleVotes,\n          },\n          app.translator.trans('fof-polls.forum.modal.allow_multiple_votes_label')\n        )}\n      </div>,\n      15\n    );\n\n    if (this.allowMultipleVotes()) {\n      items.add(\n        'max-votes',\n        <div className=\"Form-group\">\n          <label className=\"label\">{app.translator.trans('fof-polls.forum.modal.max_votes_label')}</label>\n\n          <input type=\"number\" min=\"0\" max={this.options.length} name=\"maxVotes\" className=\"FormControl\" bidi={this.maxVotes} />\n\n          <p className=\"helpText\">{app.translator.trans('fof-polls.forum.modal.max_votes_help')}</p>\n        </div>,\n        15\n      );\n    }\n\n    items.add(\n      'submit',\n      <div className=\"Form-group\">\n        <Button type=\"submit\" className=\"Button Button--primary PollModal-SubmitButton\" icon=\"fas fa-save\" loading={this.state.loading}>\n          {app.translator.trans('fof-polls.forum.modal.submit')}\n        </Button>\n        {this.state.poll.exists && (\n          <Button\n            className=\"Button Button--secondary PollModal-deleteButton\"\n            icon=\"fas fa-trash-alt\"\n            loading={this.state.deleting}\n            onclick={this.delete.bind(this)}\n          >\n            {app.translator.trans('fof-polls.forum.modal.delete')}\n          </Button>\n        )}\n      </div>,\n      -10\n    );\n\n    return items;\n  }\n\n  displayOptions(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    this.options.forEach((option, i) => {\n      items.add(\n        'option-' + i,\n        <div className=\"Form-group\">\n          <fieldset className=\"Poll-answer-input\">\n            <input\n              className=\"FormControl\"\n              type=\"text\"\n              name={'answer' + (i + 1)}\n              bidi={this.optionAnswers[i]}\n              placeholder={app.translator.trans('fof-polls.forum.modal.option_placeholder') + ' #' + (i + 1)}\n            />\n            {app.forum.attribute<boolean>('allowPollOptionImage') && (\n              <div className=\"Poll-answer-image\">\n                <label className=\"label\">{app.translator.trans('fof-polls.forum.modal.poll_option_image.label')}</label>\n                <p className=\"helpText\">{app.translator.trans('fof-polls.forum.modal.poll_option_image.help')}</p>\n                <UploadPollImageButton name=\"pollOptionImage\" option={option} onUpload={this.pollOptionImageUploadSuccess.bind(this, i)} />\n                <input type=\"hidden\" name={'answerImage' + (i + 1)} value={this.optionImageUrls[i]()} />\n              </div>\n            )}\n          </fieldset>\n          {i >= 2\n            ? Button.component({\n                type: 'button',\n                className: 'Button PollModal--button Button--icon',\n                icon: 'fas fa-minus',\n                onclick: i >= 2 ? this.removeOption.bind(this, i) : '',\n              })\n            : ''}\n        </div>\n      );\n    });\n\n    return items;\n  }\n\n  addOption() {\n    const max = Math.max(app.forum.attribute('pollMaxOptions'), 2);\n\n    if (this.options.length < max) {\n      this.options.push(app.store.createRecord('poll_options'));\n      this.optionAnswers.push(Stream(''));\n      this.optionImageUrls.push(Stream(''));\n    } else {\n      alert(extractText(app.translator.trans('fof-polls.forum.modal.max', { max })));\n    }\n  }\n\n  removeOption(i: number): void {\n    this.options.splice(i, 1);\n    this.optionAnswers.splice(i, 1);\n    this.optionImageUrls.splice(i, 1);\n  }\n\n  data(): object {\n    if (this.question() === '') {\n      throw new FormError(app.translator.trans('fof-polls.forum.modal.include_question'));\n    }\n\n    if (this.options.length < 2) {\n      throw new FormError(app.translator.trans('fof-polls.forum.modal.min'));\n    }\n\n    const pollExists = this.state.poll.exists;\n    const options = this.options.map((option, i) => {\n      option.pushAttributes({\n        answer: this.optionAnswers[i](),\n        imageUrl: this.optionImageUrls[i](),\n      });\n\n      return pollExists ? option.data : option.data.attributes;\n    });\n\n    return {\n      question: this.question(),\n      subtitle: this.subtitle(),\n      pollImage: this.image(),\n      imageAlt: this.imageAlt(),\n      endDate: this.dateToTimestamp(this.endDate()) ?? false,\n      publicPoll: this.publicPoll(),\n      hideVotes: this.hideVotes(),\n      allowChangeVote: this.allowChangeVote(),\n      allowMultipleVotes: this.allowMultipleVotes(),\n      maxVotes: this.maxVotes(),\n      options,\n    };\n  }\n\n  async onsubmit(event: Event) {\n    event.preventDefault();\n\n    try {\n      await this.attrs.onsubmit(this.data(), this.state);\n    } catch (error) {\n      if (error instanceof FormError) {\n        app.alerts.show({ type: 'error' }, error.message);\n      } else {\n        console.error(error);\n        // Show error alert\n        app.alerts.show({ type: 'error' }, app.translator.trans('fof-polls.forum.modal.error'));\n      }\n    }\n  }\n\n  async delete(): Promise<void> {\n    this.state.loading = true;\n    try {\n      await PollControls.deleteAction(this.state.poll);\n      this.state.deleting = true;\n    } finally {\n      this.state.loading = false;\n      m.redraw();\n    }\n  }\n\n  formatDate(date: Date | string | false | undefined | null = undefined, def: Date | false = false): string | false {\n    const dayjsDate = dayjs(date);\n\n    if (date === false || !dayjsDate.isValid()) return def !== false ? this.formatDate(def) : false;\n\n    return dayjsDate.format('YYYY-MM-DDTHH:mm');\n  }\n\n  dateToTimestamp(date: Date | false): string | null {\n    const dayjsDate = dayjs(date);\n\n    if (!date || !dayjsDate.isValid()) return null;\n\n    return dayjsDate.format();\n  }\n\n  pollImageUploadSuccess(fileName: string | null | undefined): void {\n    this.image(fileName);\n  }\n\n  pollOptionImageUploadSuccess(index: number, fileName: string | null | undefined): void {\n    this.optionImageUrls[index] = Stream(fileName);\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport classList from 'flarum/common/utils/classList';\nimport icon from 'flarum/common/helpers/icon';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport type Mithril from 'mithril';\n\ninterface PollPageHeroAttrs extends ComponentAttrs {\n  icon?: string;\n  title?: string;\n}\n\nexport default class PollPageHero extends Component<PollPageHeroAttrs> {\n  oninit(vnode: Mithril.Vnode) {\n    super.oninit(vnode);\n  }\n\n  get classNames(): string {\n    return classList({\n      PollPageHero: true,\n      Hero: true,\n    });\n  }\n\n  get wrapperClasses(): string {\n    return classList({\n      'PollPageHero--wrapper': true,\n    });\n  }\n\n  oncreate(vnode: Mithril.Vnode): void {\n    super.oncreate(vnode);\n  }\n\n  get title() {\n    return this.attrs.title || app.translator.trans('fof-polls.forum.polls_page.title');\n  }\n\n  get icon() {\n    return this.attrs.icon || 'fas fa-poll';\n  }\n\n  view() {\n    return (\n      <div className={this.wrapperClasses}>\n        <header className={this.classNames}>\n          <div className=\"container\">\n            <div className=\"containerNarrow\">{this.items().toArray()}</div>\n          </div>\n        </header>\n      </div>\n    );\n  }\n\n  items() {\n    const items = new ItemList();\n    items.add('title', <h2 className=\"Hero-title\">{[icon(this.icon), ' ', this.title]}</h2>, 50);\n\n    return items;\n  }\n}\n","import Component, { ComponentAttrs } from 'flarum/common/Component';\nimport PollListState from '../states/PollListState';\nimport type Mithril from 'mithril';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport PollShowcaseItem from './PollShowcaseItem';\nimport Placeholder from 'flarum/common/components/Placeholder';\nimport app from 'flarum/forum/app';\n\nexport interface PollListAttrs extends ComponentAttrs {\n  state: PollListState;\n}\n\nexport default class PollShowcase extends Component<PollListAttrs, PollListState> {\n  oninit(vnode: Mithril.Vnode) {\n    super.oninit(vnode);\n\n    this.attrs.state.refresh();\n  }\n\n  view(): Mithril.Children {\n    return (\n      <div className=\"PollShowcase\">\n        <div className=\"PollShowcase-featured\">\n          <h3>{app.translator.trans('fof-polls.forum.showcase.active-polls')}</h3>\n          {this.showcaseItems().toArray()}\n          {this.showcaseItems().toArray().length === 0 && <Placeholder text={app.translator.trans('fof-polls.forum.showcase.no-active-polls')} />}\n        </div>\n        <div className=\"PollShowcase-ended\">\n          <h3>{app.translator.trans('fof-polls.forum.showcase.ended-polls')}</h3>\n          {this.endedItems().toArray()}\n          {this.endedItems().toArray().length === 0 && <Placeholder text={app.translator.trans('fof-polls.forum.showcase.no-recent-polls')} />}\n        </div>\n      </div>\n    );\n  }\n\n  showcaseItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    this.attrs.state.getPages().map((page) => {\n      page.items.map((poll) => {\n        if (!poll.hasEnded()) {\n          items.add('poll-active-' + poll.id(), <PollShowcaseItem poll={poll} />);\n        }\n      });\n    });\n\n    return items;\n  }\n\n  endedItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    this.attrs.state.getPages().map((page) => {\n      page.items.map((poll) => {\n        if (poll.hasEnded()) {\n          items.add('poll-ended-' + poll.id(), <PollShowcaseItem poll={poll} />);\n        }\n      });\n    });\n\n    return items;\n  }\n}\n","import Component, { ComponentAttrs } from 'flarum/common/Component';\nimport Poll from '../models/Poll';\nimport type Mithril from 'mithril';\nimport PollView from './PollView';\n\nexport interface PollShowcaseItemAttrs extends ComponentAttrs {\n  poll: Poll;\n}\n\nexport default class PollShowcaseItem extends Component<PollShowcaseItemAttrs> {\n  poll!: Poll;\n\n  oninit(vnode: Mithril.Vnode) {\n    super.oninit(vnode);\n\n    this.poll = this.attrs.poll;\n  }\n\n  view() {\n    return (\n      <div className=\"PollShowcase--item\">\n        <PollView poll={this.poll} />\n      </div>\n    );\n  }\n}\n","import Mithril from 'mithril';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport app from 'flarum/forum/app';\nimport PollOptions from './Poll/PollOptions';\nimport PollImage from './Poll/PollImage';\nimport PollModel from '../models/Poll';\nimport PollState from '../states/PollState';\nimport Button from 'flarum/common/components/Button';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport PollControls from '../utils/PollControls';\nimport Dropdown from 'flarum/common/components/Dropdown';\nimport PollSubmitButton from './Poll/PollSubmitButton';\nimport { slug } from 'flarum/common/utils/string';\nimport classList from 'flarum/common/utils/classList';\nimport PollTitle from './Poll/PollTitle';\nimport PollSubtitle from './Poll/PollSubtitle';\n\ninterface PollAttrs extends ComponentAttrs {\n  poll: PollModel;\n}\n\nexport default class PollView extends Component<PollAttrs, PollState> {\n  state!: PollState;\n\n  oninit(vnode: Mithril.Vnode<PollAttrs, this>) {\n    super.oninit(vnode);\n    this.state = new PollState(this.attrs.poll);\n  }\n\n  oncreate(vnode: Mithril.Vnode<PollAttrs, this>) {\n    super.oncreate(vnode);\n\n    this.preventClose = this.preventClose.bind(this);\n    window.addEventListener('beforeunload', this.preventClose);\n  }\n\n  onremove(vnode: Mithril.Vnode<PollAttrs, this>) {\n    super.onremove(vnode);\n\n    window.removeEventListener('beforeunload', this.preventClose);\n  }\n\n  view(): Mithril.Children {\n    const poll = this.attrs.poll;\n    const state = this.state;\n    const controls = PollControls.controls(poll, this);\n\n    (poll.publicPoll() || poll.canEdit()) &&\n      controls.add(\n        'view',\n        <Button onclick={state.showVoters} icon=\"fas fa-poll\">\n          {app.translator.trans('fof-polls.forum.public_poll')}\n        </Button>\n      );\n\n    return (\n      <div className={classList('Poll', poll.imageUrl() && 'Poll--image')} data-id={poll.id()}>\n        {this.controlsView(controls.toArray())}\n        <div className=\"Poll-wrapper\">{this.createMainView().toArray()}</div>\n      </div>\n    );\n  }\n\n  createMainView(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add('header', <div className=\"Poll-header\">{this.createPollHeader().toArray()}</div>);\n    items.add('content', <div className=\"Poll-content\">{this.createPollContent().toArray()}</div>);\n    items.add('footer', <div className=\"Poll-footer\">{this.createPollFooter().toArray()}</div>);\n\n    return items;\n  }\n\n  createPollHeader(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n    const poll = this.attrs.poll;\n\n    items.add('title', <PollTitle poll={poll} />);\n    if (poll.subtitle()) items.add('subtitle', <PollSubtitle poll={poll} />);\n\n    return items;\n  }\n\n  createPollContent(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n    const poll = this.attrs.poll;\n\n    if (poll.imageUrl()) {\n      items.add('image', <PollImage poll={poll} />);\n    }\n\n    items.add('form', <form className=\"Poll-form\">{this.createFormItems().toArray()}</form>);\n\n    return items;\n  }\n\n  createPollFooter(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n    const state = this.state;\n\n    const infoItems = this.infoItems(state.getMaxVotes());\n\n    items.add(\n      'sticky',\n      <div className=\"Poll-sticky\">\n        {!infoItems.isEmpty() && <div className=\"helpText PollInfoText\">{infoItems.toArray()}</div>}\n        {state.showButton() && <PollSubmitButton state={state} />}\n      </div>\n    );\n\n    return items;\n  }\n\n  createFormItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n    const poll = this.attrs.poll;\n    const state = this.state;\n    const questionSlug = slug(poll.question());\n\n    items.add(\n      'elements',\n      <fieldset>\n        <legend className=\"sr-only\">{poll.question()}</legend>\n        <PollOptions name={questionSlug} options={poll.options()} state={state} />\n      </fieldset>\n    );\n\n    return items;\n  }\n\n  controlsView(controls: Mithril.ChildArray): Mithril.Children {\n    return (\n      !!controls.length && (\n        <Dropdown\n          icon=\"fas fa-ellipsis-v\"\n          className=\"PollListItem-controls\"\n          menuClassName=\"Dropdown-menu--right\"\n          buttonClassName=\"Button Button--icon Button--flat\"\n          accessibleToggleLabel={app.translator.trans('fof-polls.forum.poll_controls.toggle_dropdown_accessible_label')}\n        >\n          {controls}\n        </Dropdown>\n      )\n    );\n  }\n\n  infoItems(maxVotes: number) {\n    const items = new ItemList<Mithril.Children>();\n    const poll = this.attrs.poll;\n\n    if (app.session.user && !poll.canVote() && !poll.hasEnded()) {\n      items.add(\n        'no-permission',\n        <span>\n          <i className=\"icon fas fa-times-circle fa-fw\" />\n          {app.translator.trans('fof-polls.forum.no_permission')}\n        </span>\n      );\n    }\n\n    if (poll.endDate()) {\n      items.add(\n        'end-date',\n        <span>\n          <i class=\"icon fas fa-clock fa-fw\" />\n          {poll.hasEnded()\n            ? app.translator.trans('fof-polls.forum.poll_ended')\n            : app.translator.trans('fof-polls.forum.days_remaining', { time: dayjs(poll.endDate()).fromNow() })}\n        </span>\n      );\n    }\n\n    if (poll.canVote()) {\n      items.add(\n        'max-votes',\n        <span>\n          <i className=\"icon fas fa-poll fa-fw\" />\n          {app.translator.trans('fof-polls.forum.max_votes_allowed', { max: maxVotes })}\n        </span>\n      );\n\n      if (!poll.canChangeVote()) {\n        items.add(\n          'cannot-change-vote',\n          <span>\n            <i className={`icon fas fa-${this.state.hasVoted() ? 'times' : 'exclamation'}-circle fa-fw`} />\n            {app.translator.trans('fof-polls.forum.poll.cannot_change_vote')}\n          </span>\n        );\n      }\n    }\n\n    return items;\n  }\n\n  /**\n   * Alert before navigating away using browser's 'beforeunload' event\n   */\n  preventClose = (e: Event): boolean | void => {\n    if (this.state.hasSelectedOptions()) {\n      e.preventDefault();\n      return true;\n    }\n  };\n}\n","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport PollModel from '../models/Poll';\nimport PollView from './PollView';\nimport { AbstractPollPage } from './AbstractPollPage';\nimport ItemList from 'flarum/common/utils/ItemList';\n\nexport default class PollViewPage extends AbstractPollPage {\n  oninit(vnode: Mithril.Vnode) {\n    super.oninit(vnode);\n\n    if (!app.forum.attribute<boolean>('globalPollsEnabled')) {\n      m.route.set('/');\n      return;\n    }\n\n    const editId = m.route.param('id');\n    this.poll = app.store.getById<PollModel>('poll', editId);\n\n    if (!this.poll) {\n      this.loading = true;\n\n      app.store.find<PollModel>('fof/polls', editId).then((item) => {\n        this.poll = item;\n        this.loading = false;\n        app.setTitle(this.poll.question());\n        m.redraw();\n      });\n    }\n  }\n\n  contentItems(): ItemList<Mithril.Children> {\n    const items = super.contentItems();\n\n    if (!this.loading) {\n      items.add('poll', <PollView poll={this.poll} />);\n    }\n\n    return items;\n  }\n}\n","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport listItems from 'flarum/common/helpers/listItems';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Page, { IPageAttrs } from 'flarum/common/components/Page';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport PollList from './Poll/PollList';\nimport LogInModal from 'flarum/forum/components/LogInModal';\nimport extractText from 'flarum/common/utils/extractText';\nimport PollListState from '../states/PollListState';\nimport Button from 'flarum/common/components/Button';\nimport SelectDropdown from 'flarum/common/components/SelectDropdown';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport PollModel from '../models/Poll';\nimport PollView from './PollView';\nimport { AbstractPollPage } from './AbstractPollPage';\n\nexport default class PollsPage extends AbstractPollPage {\n  oninit(vnode: Mithril.Vnode) {\n    super.oninit(vnode);\n\n    if (!app.forum.attribute<boolean>('globalPollsEnabled')) {\n      m.route.set('/');\n      return;\n    }\n\n    this.state = new PollListState({\n      sort: m.route.param('sort'),\n      filter: m.route.param('filter'),\n    });\n\n    this.state.refresh();\n\n    app.setTitle(extractText(app.translator.trans('fof-polls.forum.page.nav')));\n  }\n\n  view(): Mithril.Children {\n    if (this.loading) {\n      return <LoadingIndicator />;\n    }\n\n    if (this.poll) {\n      return (\n        <div className=\"PollsListPage\">\n          <div className=\"container\">\n            <PollView poll={this.poll} />\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"PollsListPage\">\n        {super.hero()}\n        <div className=\"container\">\n          <div className=\"sideNavContainer\">\n            <nav className=\"PollsListPage-nav sideNav\">\n              <ul>{listItems(this.sidebarItems().toArray())}</ul>\n            </nav>\n            <div className=\"PollsPage-results sideNavOffset\">\n              <div className=\"IndexPage-toolbar\">\n                <ul className=\"IndexPage-toolbar-view\">{listItems(this.viewItems().toArray())}</ul>\n                <ul className=\"IndexPage-toolbar-action\">{listItems(this.actionItems().toArray())}</ul>\n              </div>\n              <PollList state={this.state} />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  sidebarItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n    const canStartPoll = app.forum.attribute<boolean>('canStartGlobalPolls');\n\n    items.add(\n      'newGlobalPoll',\n      <Button\n        icon=\"fas fa-edit\"\n        className=\"Button Button--primary App-primaryControl PollsPage-newPoll\"\n        itemClassName=\"App-primaryControl\"\n        onclick={() => {\n          this.newPollAction();\n        }}\n        disabled={!canStartPoll}\n      >\n        {app.translator.trans(`fof-polls.forum.poll.${canStartPoll ? 'start_poll_button' : 'cannot_start_poll_button'}`)}\n      </Button>\n    );\n\n    items.add(\n      'nav',\n      <SelectDropdown\n        buttonClassName=\"Button\"\n        className=\"App-titleControl\"\n        accessibleToggleLabel={app.translator.trans('core.forum.index.toggle_sidenav_dropdown_accessible_label')}\n      >\n        {this.navItems().toArray()}\n      </SelectDropdown>\n    );\n\n    return items;\n  }\n\n  actionItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add(\n      'refresh',\n      Button.component({\n        title: app.translator.trans('fof-polls.forum.page.refresh_tooltip'),\n        icon: 'fas fa-sync',\n        className: 'Button Button--icon',\n        onclick: () => {\n          this.state.refresh();\n        },\n      })\n    );\n\n    return items;\n  }\n\n  viewItems() {\n    return IndexPage.prototype.viewItems();\n  }\n\n  navItems() {\n    return IndexPage.prototype.navItems();\n  }\n\n  /**\n   * Change to create new poll page\n   */\n  newPollAction(): void {\n    if (!app.session.user) {\n      app.modal.show(LogInModal);\n      return;\n    }\n\n    m.route.set(app.route('fof.polls.compose'));\n  }\n}\n","import app from 'flarum/forum/app';\nimport { IPageAttrs } from 'flarum/common/components/Page';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Mithril from 'mithril';\nimport PollListState from '../states/PollListState';\nimport extractText from 'flarum/common/utils/extractText';\nimport Button from 'flarum/common/components/Button';\nimport LogInModal from 'flarum/forum/components/LogInModal';\nimport { AbstractPollPage } from './AbstractPollPage';\nimport PollShowcase from './PollShowcase';\n\nexport default class PollsShowcasePage extends AbstractPollPage {\n  oninit(vnode: Mithril.Vnode<IPageAttrs, PollListState>) {\n    super.oninit(vnode);\n\n    if (!app.forum.attribute<boolean>('globalPollsEnabled')) {\n      m.route.set('/');\n      return;\n    }\n\n    this.state = new PollListState({\n      sort: m.route.param('sort'),\n      filter: m.route.param('filter'),\n      include: this.includeParams(),\n    });\n\n    this.state.refresh();\n\n    app.setTitle(extractText(app.translator.trans('fof-polls.forum.page.nav')));\n  }\n\n  includeParams(): string[] {\n    return ['options', 'votes', 'myVotes', 'myVotes.option'];\n  }\n\n  contentItems(): ItemList<Mithril.Children> {\n    const items = super.contentItems();\n\n    if (!this.loading) {\n      items.add('poll-showcase', <PollShowcase state={this.state} />);\n    }\n\n    return items;\n  }\n\n  sidebarItems(): ItemList<Mithril.Children> {\n    const items = super.sidebarItems();\n    const canStartPoll = app.forum.attribute<boolean>('canStartGlobalPolls');\n\n    if (canStartPoll) {\n      items.remove('newDiscussion');\n      items.add(\n        'newGlobalPoll',\n        <Button\n          icon=\"fas fa-edit\"\n          className=\"Button Button--primary App-primaryControl PollsPage-newPoll\"\n          itemClassName=\"App-primaryControl\"\n          onclick={() => {\n            this.newPollAction();\n          }}\n          disabled={!canStartPoll}\n        >\n          {app.translator.trans(`fof-polls.forum.poll.${canStartPoll ? 'start_poll_button' : 'cannot_start_poll_button'}`)}\n        </Button>,\n        100\n      );\n    }\n\n    return items;\n  }\n\n  newPollAction(): void {\n    if (!app.session.user) {\n      app.modal.show(LogInModal);\n      return;\n    }\n\n    m.route.set(app.route('fof.polls.compose'));\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport LogInModal from 'flarum/forum/components/LogInModal';\nimport ListVotersModal from './ListVotersModal';\nimport classList from 'flarum/common/utils/classList';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport icon from 'flarum/common/helpers/icon';\nimport EditPollModal from './EditPollModal';\nimport Poll from '../models/Poll';\nimport type Mithril from 'mithril';\nimport PollOption from '../models/PollOption';\nimport Post from 'flarum/common/models/Post';\nimport extractText from 'flarum/common/utils/extractText';\n\nexport interface PostPollAttrs extends ComponentAttrs {\n  poll: Poll;\n  post?: Post;\n}\n\nexport default class PostPoll extends Component<PostPollAttrs> {\n  loadingOptions: boolean = false;\n  useSubmitUI!: boolean;\n  pendingSubmit: boolean = false;\n  pendingOptions: any;\n\n  oninit(vnode: Mithril.Vnode<PostPollAttrs, this>) {\n    super.oninit(vnode);\n\n    this.useSubmitUI = !this.attrs.poll?.canChangeVote() && this.attrs.poll?.allowMultipleVotes();\n    this.pendingOptions = null;\n  }\n\n  oncreate(vnode: Mithril.Vnode<PostPollAttrs, this>) {\n    super.oncreate(vnode);\n\n    this.preventClose = this.preventClose.bind(this);\n    window.addEventListener('beforeunload', this.preventClose);\n  }\n\n  onremove(vnode: Mithril.Vnode<PostPollAttrs, this>) {\n    super.onremove(vnode);\n\n    window.removeEventListener('beforeunload', this.preventClose);\n  }\n\n  view() {\n    const poll = this.attrs.poll;\n    const options = poll.options() || [];\n    let maxVotes = poll.allowMultipleVotes() ? poll.maxVotes() : 1;\n\n    if (maxVotes === 0) maxVotes = options.length;\n\n    const infoItems = this.infoItems(maxVotes);\n\n    return (\n      <div className=\"Post-poll\" data-id={poll.id()}>\n        <div className=\"PollHeading\">\n          <div className=\"PollHeading-title-container\">\n            <h3 className=\"PollHeading-title\">{poll.question()}</h3>\n            {poll.subtitle() && <p className=\"helpText PollHeading-subtitle\">{poll.subtitle()}</p>}\n          </div>\n\n          <div className=\"PollHeading-actions\">\n            {poll.canSeeVoters() && (\n              <Tooltip text={app.translator.trans('fof-polls.forum.public_poll')}>\n                <Button className=\"Button PollHeading-voters\" onclick={this.showVoters.bind(this)} icon=\"fas fa-poll\" />\n              </Tooltip>\n            )}\n\n            {poll.canEdit() && (\n              <Tooltip text={app.translator.trans('fof-polls.forum.moderation.edit')}>\n                <Button className=\"Button PollHeading-edit\" onclick={app.modal.show.bind(app.modal, EditPollModal, { poll })} icon=\"fas fa-pen\" />\n              </Tooltip>\n            )}\n            {poll.canDelete() && (\n              <Tooltip text={app.translator.trans('fof-polls.forum.moderation.delete')}>\n                <Button className=\"Button PollHeading-delete\" onclick={this.deletePoll.bind(this)} icon=\"fas fa-trash\" />\n              </Tooltip>\n            )}\n          </div>\n        </div>\n\n        <div>\n          <div className=\"PollOptions\">{options.map(this.viewOption.bind(this))}</div>\n\n          <div className=\"Poll-sticky\">\n            {!infoItems.isEmpty() && <div className=\"helpText PollInfoText\">{infoItems.toArray()}</div>}\n\n            {this.useSubmitUI && this.pendingSubmit && (\n              <Button className=\"Button Button--primary Poll-submit\" loading={this.loadingOptions} onclick={this.onsubmit.bind(this)}>\n                {app.translator.trans('fof-polls.forum.poll.submit_button')}\n              </Button>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  infoItems(maxVotes: number) {\n    const items = new ItemList();\n    const poll = this.attrs.poll;\n    const hasVoted = poll.myVotes()?.length > 0;\n\n    if (app.session.user && !poll.canVote() && !poll.hasEnded()) {\n      items.add(\n        'no-permission',\n        <span>\n          <i className=\"icon fas fa-times-circle fa-fw\" />\n          {app.translator.trans('fof-polls.forum.no_permission')}\n        </span>\n      );\n    }\n\n    if (poll.endDate()) {\n      items.add(\n        'end-date',\n        <span>\n          <i class=\"icon fas fa-clock fa-fw\" />\n          {poll.hasEnded()\n            ? app.translator.trans('fof-polls.forum.poll_ended')\n            : app.translator.trans('fof-polls.forum.days_remaining', { time: dayjs(poll.endDate()).fromNow() })}\n        </span>\n      );\n    }\n\n    if (poll.canVote()) {\n      items.add(\n        'max-votes',\n        <span>\n          <i className=\"icon fas fa-poll fa-fw\" />\n          {app.translator.trans('fof-polls.forum.max_votes_allowed', { max: maxVotes })}\n        </span>\n      );\n\n      if (!poll.canChangeVote()) {\n        items.add(\n          'cannot-change-vote',\n          <span>\n            <i className={`icon fas fa-${hasVoted ? 'times' : 'exclamation'}-circle fa-fw`} />\n            {app.translator.trans('fof-polls.forum.poll.cannot_change_vote')}\n          </span>\n        );\n      }\n    }\n\n    return items;\n  }\n\n  viewOption(opt: PollOption) {\n    const poll = this.attrs.poll;\n    const hasVoted = poll.myVotes()?.length > 0;\n    const totalVotes = poll.voteCount();\n\n    const voted = this.pendingOptions ? this.pendingOptions.has(opt.id()) : poll.myVotes()?.some?.((vote) => vote.option() === opt);\n    const votes = opt.voteCount();\n    const percent = totalVotes > 0 ? Math.round((votes / totalVotes) * 100) : 0;\n\n    // isNaN(null) is false, so we have to check type directly now that API always returns the field\n    const canSeeVoteCount = typeof votes === 'number';\n    const isDisabled = this.loadingOptions || (hasVoted && !poll.canChangeVote());\n    const width = canSeeVoteCount ? percent : (Number(voted) / (poll.myVotes()?.length || 1)) * 100;\n\n    const showCheckmark = !app.session.user || (!poll.hasEnded() && poll.canVote() && (!hasVoted || poll.canChangeVote()));\n\n    const bar = (\n      <div className=\"PollBar\" data-selected={!!voted} style={`--poll-option-width: ${width}%`}>\n        {showCheckmark && (\n          <label className=\"PollAnswer-checkbox checkbox\">\n            <input onchange={this.changeVote.bind(this, opt)} type=\"checkbox\" checked={voted} disabled={isDisabled} />\n            <span className=\"checkmark\" />\n          </label>\n        )}\n\n        <div className=\"PollAnswer-text\">\n          <span className=\"PollAnswer-text-answer\">{opt.answer()}</span>\n          {voted && !showCheckmark && icon('fas fa-check-circle', { className: 'PollAnswer-check' })}\n          {canSeeVoteCount && <span className={classList('PollPercent', percent !== 100 && 'PollPercent--option')}>{percent}%</span>}\n        </div>\n\n        {opt.imageUrl() ? <img className=\"PollAnswer-image\" src={opt.imageUrl()} alt={opt.answer()} /> : null}\n      </div>\n    );\n\n    return (\n      <div\n        className={classList('PollOption', hasVoted && 'PollVoted', poll.hasEnded() && 'PollEnded', opt.imageUrl() && 'PollOption-hasImage')}\n        data-id={opt.id()}\n      >\n        {canSeeVoteCount ? (\n          <Tooltip text={app.translator.trans('fof-polls.forum.tooltip.votes', { count: votes })} onremove={this.hideOptionTooltip}>\n            {bar}\n          </Tooltip>\n        ) : (\n          bar\n        )}\n      </div>\n    );\n  }\n\n  changeVote(option: PollOption, evt: Event) {\n    if (!app.session.user) {\n      app.modal.show(LogInModal);\n      evt.target.checked = false;\n      return;\n    }\n\n    const optionIds = this.pendingOptions || new Set(this.attrs.poll.myVotes().map?.((v) => v.option().id()));\n    const isUnvoting = optionIds.delete(option.id());\n    const allowsMultiple = this.attrs.poll.allowMultipleVotes();\n\n    if (!allowsMultiple) {\n      optionIds.clear();\n    }\n\n    if (!isUnvoting) {\n      optionIds.add(option.id());\n    }\n\n    if (this.useSubmitUI) {\n      this.pendingOptions = optionIds.size ? optionIds : null;\n      this.pendingSubmit = !!this.pendingOptions;\n      return;\n    }\n\n    return this.submit(optionIds, null, () => (evt.target.checked = isUnvoting));\n  }\n\n  onsubmit() {\n    return this.submit(this.pendingOptions, () => {\n      this.pendingOptions = null;\n      this.pendingSubmit = false;\n    });\n  }\n\n  submit(optionIds, cb, onerror) {\n    this.loadingOptions = true;\n    m.redraw();\n\n    return app\n      .request({\n        method: 'PATCH',\n        url: `${app.forum.attribute('apiUrl')}/fof/polls/${this.attrs.poll.id()}/votes`,\n        body: {\n          data: {\n            optionIds: Array.from(optionIds),\n          },\n        },\n      })\n      .then((res) => {\n        app.store.pushPayload(res);\n        cb?.();\n      })\n      .catch((err) => {\n        onerror?.(err);\n      })\n      .finally(() => {\n        this.loadingOptions = false;\n\n        m.redraw();\n      });\n  }\n\n  showVoters() {\n    // Load all the votes only when opening the votes list\n    app.modal.show(ListVotersModal, {\n      poll: this.attrs.poll,\n      post: this.attrs.post,\n    });\n  }\n\n  deletePoll() {\n    if (confirm(extractText(app.translator.trans('fof-polls.forum.moderation.delete_confirm')))) {\n      this.attrs.poll.delete().then(() => {\n        m.redraw.sync();\n      });\n    }\n  }\n\n  /**\n   * Attempting to use the `tooltipVisible` attr on the Tooltip component set to 'false' when no vote count\n   * caused the tooltip to break on click. This is a workaround to hide the tooltip when no vote count is available,\n   * called on 'onremove' of the Tooltip component. It doesn't always work as intended either, but it does the job.\n   */\n  hideOptionTooltip(vnode: Mithril.Vnode<PostPollAttrs, this>) {\n    vnode.attrs.tooltipVisible = false;\n    vnode.state.updateVisibility();\n  }\n\n  /**\n   * Alert before navigating away using browser's 'beforeunload' event\n   */\n  preventClose(e) {\n    if (this.pendingOptions) {\n      e.preventDefault();\n      return true;\n    }\n  }\n}\n","import app from 'flarum/forum/app';\nimport Button, { IButtonAttrs } from 'flarum/common/components/Button';\nimport classList from 'flarum/common/utils/classList';\nimport type Mithril from 'mithril';\nimport Poll from '../models/Poll';\nimport PollOption from '../models/PollOption';\n\nexport interface UploadPollImageButtonAttrs extends IButtonAttrs {\n  className?: string;\n  loading?: boolean;\n  name: string;\n  onclick: () => void;\n  poll?: Poll | null;\n  option?: PollOption | null;\n  onUpload: (fileName: string | null | undefined) => void;\n}\n\nexport interface PollUploadObject {\n  fileUrl: string;\n  fileName: string;\n}\n\nexport default class UploadPollImageButton extends Button<UploadPollImageButtonAttrs> {\n  loading: boolean = false;\n  uploadedImageUrl: string | undefined | false = false;\n  fileName: string | undefined = undefined;\n  $input: JQuery<HTMLElement> | undefined;\n\n  view(vnode: Mithril.Vnode<UploadPollImageButtonAttrs>) {\n    this.attrs.loading = this.loading;\n    this.attrs.className = classList(this.attrs.className, 'Button');\n\n    const imageUrl = this.getImageUrl();\n\n    if (imageUrl) {\n      this.attrs.onclick = this.remove.bind(this);\n\n      return (\n        <div>\n          <p>\n            <img src={imageUrl} alt=\"\" />\n          </p>\n          <p>{super.view({ ...vnode, children: app.translator.trans('fof-polls.forum.upload_image.remove_button') })}</p>\n        </div>\n      );\n    } else {\n      this.attrs.onclick = this.upload.bind(this);\n    }\n\n    return super.view({ ...vnode, children: app.translator.trans('fof-polls.forum.upload_image.upload_button') });\n  }\n\n  /**\n   * Prompt the user to upload an image.\n   */\n  upload() {\n    if (this.loading) return;\n\n    this.$input = $('<input type=\"file\">');\n\n    this.$input\n      .appendTo('body')\n      .hide()\n      .trigger('click')\n      .on('change', (e) => {\n        const body = new FormData();\n        body.append(this.attrs.name, $(e.target)[0].files[0]);\n\n        this.loading = true;\n        m.redraw();\n\n        app\n          .request<PollUploadObject>({\n            method: 'POST',\n            url: this.resourceUrl(),\n            serialize: (raw) => raw,\n            body,\n          })\n          .then(this.success.bind(this), this.failure.bind(this));\n      });\n  }\n\n  /**\n   * Remove the image.\n   */\n  remove() {\n    this.loading = true;\n    m.redraw();\n\n    app\n      .request<PollUploadObject>({\n        method: 'DELETE',\n        url: this.resourceUrl(),\n      })\n      .then(this.success.bind(this), this.failure.bind(this));\n  }\n\n  resourceUrl() {\n    let url = app.forum.attribute('apiUrl') + '/fof/polls/' + this.attrs.name;\n    const poll = this.attrs.poll;\n    const option = this.attrs.option;\n\n    if (poll?.exists) url += '/' + poll?.id();\n    if (option?.exists) url += '/' + option?.id();\n\n    return url;\n  }\n\n  getImageUrl() {\n    if (this.uploadedImageUrl !== false) {\n      return this.uploadedImageUrl;\n    }\n\n    return this.attrs.poll?.imageUrl() || this.attrs.option?.imageUrl();\n  }\n\n  /**\n   * After a successful upload/removal, redraw the page.\n   *\n   * @param {PollUploadObject} response\n   * @protected\n   */\n  success(response: PollUploadObject | null) {\n    this.loading = false;\n    this.uploadedImageUrl = response?.fileUrl;\n    this.fileName = response?.fileName;\n\n    this.attrs.onUpload?.(response?.fileName);\n    m.redraw();\n    this.$input?.remove();\n  }\n\n  /**\n   * If upload/removal fails, stop loading.\n   *\n   * @param {object} response\n   * @protected\n   */\n  failure(response: object) {\n    this.loading = false;\n    m.redraw();\n    this.$input?.remove();\n  }\n}\n","import { NestedStringArray } from '@askvortsov/rich-icu-message-formatter';\n\nexport default class FormError extends Error {\n  constructor(props: NestedStringArray | string) {\n    super(props + '');\n  }\n}\n","import CreatePollModal from './CreatePollModal';\nimport PostPoll from './PostPoll';\nimport EditPollModal from './EditPollModal';\nimport ListVotersModal from './ListVotersModal';\nimport PollForm from './PollForm';\nimport ComposePollHero from './ComposePollHero';\nimport ComposePollPage from './ComposePollPage';\nimport PollsPage from './PollsPage';\nimport PollView from './PollView';\nimport PollViewPage from './PollViewPage';\nimport PollSubmitButton from './Poll/PollSubmitButton';\nimport PollOption from './Poll/PollOption';\nimport PollOptions from './Poll/PollOptions';\nimport PollsShowcasePage from './PollsShowcasePage';\nimport PollShowcase from './PollShowcase';\nimport PollShowcaseItem from './PollShowcaseItem';\nimport { AbstractPollPage } from './AbstractPollPage';\nimport PollTitle from './Poll/PollTitle';\nimport PollSubtitle from './Poll/PollSubtitle';\nimport PollImage from './Poll/PollImage';\n\nexport const components = {\n  CreatePollModal,\n  PostPoll,\n  EditPollModal,\n  ListVotersModal,\n  PollForm,\n  ComposePollHero,\n  ComposePollPage,\n  PollsPage,\n  PollView,\n  PollViewPage,\n  PollSubmitButton,\n  PollOption,\n  PollOptions,\n  PollsShowcasePage,\n  PollShowcase,\n  PollShowcaseItem,\n  AbstractPollPage,\n  PollTitle,\n  PollSubtitle,\n  PollImage,\n};\n","import Extend from 'flarum/common/extenders';\nimport Post from 'flarum/common/models/Post';\nimport Forum from 'flarum/common/models/Forum';\nimport Discussion from 'flarum/common/models/Discussion';\nimport Poll from './models/Poll';\nimport PollOption from './models/PollOption';\nimport PollVote from './models/PollVote';\nimport PollsPage from './components/PollsPage';\nimport ComposePollPage from './components/ComposePollPage';\nimport PollViewPage from './components/PollViewPage';\nimport PollsShowcasePage from './components/PollsShowcasePage';\n\nexport default [\n  new Extend.Routes() //\n    .add('fof.polls.showcase', '/polls', PollsShowcasePage)\n    .add('fof.polls.list', '/polls/all', PollsPage)\n    .add('fof.polls.view', '/polls/view/:id', PollViewPage)\n    .add('fof.polls.compose', '/polls/composer', ComposePollPage),\n\n  new Extend.Store() //\n    .add('polls', Poll)\n    .add('poll_options', PollOption)\n    .add('poll_votes', PollVote),\n\n  new Extend.Model(Post) //\n    .hasMany<Poll>('polls')\n    .attribute<boolean>('canStartPoll'),\n\n  new Extend.Model(Forum) //\n    .attribute<boolean>('canStartPolls'),\n\n  new Extend.Model(Discussion) //\n    .attribute<boolean>('hasPoll')\n    .attribute<boolean>('canStartPoll'),\n];\n","import app from 'flarum/forum/app';\n\nimport addDiscussionBadge from './addDiscussionBadge';\nimport addComposerItems from './addComposerItems';\nimport addPollsToPost from './addPollsToPost';\nimport addPostControls from './addPostControls';\nimport addNavItem from './addNavItem';\n\nexport * from './components';\nexport * from './models';\nexport * from './states';\nexport * from './utils';\n\napp.initializers.add('fof/polls', () => {\n  addDiscussionBadge();\n  addComposerItems();\n  addPollsToPost();\n  addPostControls();\n  addNavItem();\n});\n\nexport { default as extend } from './extend';\n","import Model from 'flarum/common/Model';\nimport PollOption from './PollOption';\nimport PollVote from './PollVote';\nimport computed from 'flarum/common/utils/computed';\n\nexport default class Poll extends Model {\n  public tempOptions: PollOption[] | undefined;\n\n  question() {\n    return Model.attribute<string>('question').call(this);\n  }\n\n  subtitle() {\n    return Model.attribute<string | null>('subtitle').call(this);\n  }\n\n  image() {\n    return Model.attribute<string | null>('image').call(this);\n  }\n\n  imageUrl() {\n    return Model.attribute<string | null>('imageUrl').call(this);\n  }\n\n  imageAlt() {\n    return Model.attribute<string | null>('imageAlt').call(this);\n  }\n\n  hasEnded() {\n    return Model.attribute<boolean>('hasEnded').call(this);\n  }\n\n  endDate() {\n    return Model.attribute('endDate', Model.transformDate).call(this);\n  }\n\n  publicPoll() {\n    return Model.attribute<boolean>('publicPoll').call(this);\n  }\n\n  hideVotes() {\n    return Model.attribute<boolean>('hideVotes').call(this);\n  }\n\n  allowChangeVote() {\n    return Model.attribute<boolean>('allowChangeVote').call(this);\n  }\n\n  allowMultipleVotes() {\n    return Model.attribute<boolean>('allowMultipleVotes').call(this);\n  }\n\n  maxVotes() {\n    return Model.attribute<number>('maxVotes').call(this);\n  }\n\n  voteCount() {\n    return Model.attribute<number>('voteCount').call(this);\n  }\n\n  canVote() {\n    return Model.attribute<boolean>('canVote').call(this);\n  }\n\n  canEdit() {\n    return Model.attribute<boolean>('canEdit').call(this);\n  }\n\n  canDelete() {\n    return Model.attribute<boolean>('canDelete').call(this);\n  }\n\n  canSeeVoters() {\n    return Model.attribute<boolean>('canSeeVoters').call(this);\n  }\n\n  canChangeVote() {\n    return Model.attribute<boolean>('canChangeVote').call(this);\n  }\n\n  options() {\n    const options = Model.hasMany<PollOption>('options').call(this);\n    return options ? (options as PollOption[]) : [];\n  }\n\n  votes() {\n    return Model.hasMany<PollVote>('votes').call(this);\n  }\n\n  myVotes(): PollVote[] {\n    const myVotes = Model.hasMany<PollVote>('myVotes').call(this);\n    return myVotes ? (myVotes as PollVote[]) : [];\n  }\n\n  isGlobal() {\n    return Model.attribute<boolean>('isGlobal').call(this);\n  }\n\n  isHidden() {\n    return computed<boolean, this>('hiddenAt', (hiddenAt) => !!hiddenAt).call(this);\n  }\n\n  // TODO: These two don't make sense as of now\n  isUnread() {\n    return false;\n  }\n\n  apiEndpoint() {\n    /** @ts-ignore */\n    return `/fof/polls${this.exists ? `/${this.data.id}` : ''}`;\n  }\n}\n","import Model from 'flarum/common/Model';\nimport Poll from './Poll';\nimport PollVote from './PollVote';\n\nexport default class PollOption extends Model {\n  answer() {\n    return Model.attribute<string>('answer').call(this);\n  }\n\n  imageUrl() {\n    return Model.attribute<string | null>('imageUrl').call(this);\n  }\n\n  voteCount() {\n    return Model.attribute<number>('voteCount').call(this);\n  }\n\n  poll() {\n    return Model.hasOne<Poll>('polls').call(this);\n  }\n\n  votes() {\n    return Model.hasMany<PollVote>('votes').call(this);\n  }\n\n  apiEndpoint() {\n    /** @ts-ignore */\n    return `/fof/polls/answers${this.exists ? `/${this.data.id}` : ''}`;\n  }\n}\n","import Model from 'flarum/common/Model';\nimport Poll from './Poll';\nimport PollOption from './PollOption';\nimport User from 'flarum/common/models/User';\n\nexport default class PollVote extends Model {\n  poll() {\n    return Model.hasOne<Poll>('poll').call(this);\n  }\n\n  option() {\n    const result = Model.hasOne<PollOption>('option').call(this);\n    return result === false ? null : result;\n  }\n\n  user() {\n    return Model.hasOne<User>('user').call(this);\n  }\n\n  pollId() {\n    return Model.attribute<number>('pollId').call(this);\n  }\n\n  optionId() {\n    return Model.attribute<number>('optionId').call(this);\n  }\n\n  apiEndpoint() {\n    return `/fof/polls/${this.pollId()}/vote`;\n  }\n}\n","import Poll from './Poll';\nimport PollOption from './PollOption';\nimport PollVote from './PollVote';\n\nexport const models = {\n  Poll,\n  PollOption,\n  PollVote,\n};\n","import app from 'flarum/forum/app';\nimport Poll from '../models/Poll';\nimport PollOption from '../models/PollOption';\n\nexport default class PollFormState {\n  poll: Poll;\n  loading: boolean;\n  deleting: boolean;\n  expandedGroup: string;\n\n  static createNewPoll() {\n    const poll = app.store.createRecord<Poll>('polls');\n\n    poll.pushAttributes({\n      question: '',\n      endDate: '',\n      publicPoll: false,\n      allowMultipleVotes: false,\n      hideVotes: false,\n      allowChangeVote: false,\n      maxVotes: 0,\n    });\n\n    poll.tempOptions = [app.store.createRecord<PollOption>('poll_options'), app.store.createRecord<PollOption>('poll_options')];\n\n    return poll;\n  }\n\n  constructor(poll: Poll) {\n    if (!poll) {\n      poll = PollFormState.createNewPoll();\n    }\n\n    this.loading = false;\n    this.deleting = false;\n    this.poll = poll;\n    this.expandedGroup = 'setup';\n  }\n\n  isExpanded(groupKey: string) {\n    return this.expandedGroup === groupKey;\n  }\n\n  expand(groupKey: string) {\n    this.expandedGroup = groupKey;\n    m.redraw();\n  }\n\n  async save(data: any) {\n    this.loading = true;\n    m.redraw();\n\n    try {\n      this.poll = await this.poll.save(data);\n      /**\n       * Cleanup attributes:\n       * For the saving process, we add the options directly to the attributes.\n       * As we currently cannot add new PollOptions as relationships.\n       */\n      delete this.poll!.data!.attributes!.options;\n    } finally {\n      this.loading = false;\n      m.redraw();\n    }\n  }\n\n  async delete() {\n    this.loading = true;\n    m.redraw();\n\n    try {\n      await this.poll.delete();\n      this.deleting = true;\n    } finally {\n      this.loading = false;\n      m.redraw();\n    }\n  }\n}\n","import app from 'flarum/forum/app';\nimport PaginatedListState, { Page, PaginatedListParams, PaginatedListRequestParams } from 'flarum/common/states/PaginatedListState';\nimport Poll from '../models/Poll';\nimport { ApiResponsePlural } from 'flarum/common/Store';\nimport EventEmitter from 'flarum/common/utils/EventEmitter';\n\nexport interface PollListParams extends PaginatedListParams {\n  sort?: string;\n}\n\nconst globalEventEmitter = new EventEmitter();\n\nexport default class PollListState<P extends PollListParams = PollListParams> extends PaginatedListState<Poll, P> {\n  protected extraPolls: Poll[] = [];\n  protected eventEmitter: EventEmitter;\n\n  constructor(params: P, page: number = 1) {\n    super(params, page, 20);\n\n    this.eventEmitter = globalEventEmitter.on('poll.deleted', this.deletePoll.bind(this));\n  }\n\n  get type(): string {\n    return 'fof/polls';\n  }\n\n  requestParams(): PaginatedListRequestParams {\n    const params = {\n      include: this.params.include || ['options', 'votes'],\n      filter: this.params.filter || {},\n      sort: this.sortMap()[this.params.sort ?? ''],\n    };\n\n    if (this.params.q) {\n      params.filter.q = this.params.q;\n    }\n\n    return params;\n  }\n\n  protected loadPage(page: number = 1): Promise<ApiResponsePlural<Poll>> {\n    const preloadedPolls = app.preloadedApiDocument<Poll[]>();\n\n    if (preloadedPolls) {\n      this.initialLoading = false;\n\n      return Promise.resolve(preloadedPolls);\n    }\n\n    return super.loadPage(page);\n  }\n\n  clear(): void {\n    super.clear();\n\n    this.extraPolls = [];\n  }\n\n  /**\n   * Get a map of sort keys (which appear in the URL, and are used for\n   * translation) to the API sort value that they represent.\n   */\n  sortMap() {\n    const map: any = {};\n\n    if (this.params.q) {\n      map.relevance = '';\n    }\n    map.newest = '-createdAt';\n    map.oldest = 'createdAt';\n\n    return map;\n  }\n\n  /**\n   * In the last request, has the user searched for a poll?\n   */\n  isSearchResults(): boolean {\n    return !!this.params.q;\n  }\n\n  removePoll(poll: Poll): void {\n    this.eventEmitter.emit('poll.deleted', poll);\n  }\n\n  deletePoll(poll: Poll): void {\n    for (const page of this.pages) {\n      const index = page.items.indexOf(poll);\n\n      if (index !== -1) {\n        page.items.splice(index, 1);\n        break;\n      }\n    }\n\n    const index = this.extraPolls.indexOf(poll);\n\n    if (index !== -1) {\n      this.extraPolls.splice(index);\n    }\n\n    m.redraw();\n  }\n\n  /**\n   * Add a poll to the top of the list.\n   */\n  addPoll(poll: Poll): void {\n    this.removePoll(poll);\n    this.extraPolls.unshift(poll);\n\n    m.redraw();\n  }\n\n  protected getAllItems(): Poll[] {\n    return this.extraPolls.concat(super.getAllItems());\n  }\n\n  public getPages(): Page<Poll>[] {\n    const pages = super.getPages();\n\n    if (this.extraPolls.length) {\n      return [\n        {\n          number: -1,\n          items: this.extraPolls,\n        },\n        ...pages,\n      ];\n    }\n\n    return pages;\n  }\n}\n","import app from 'flarum/forum/app';\nimport Poll from '../models/Poll';\nimport LogInModal from 'flarum/forum/components/LogInModal';\nimport PollOption from '../models/PollOption';\nimport PollVote from '../models/PollVote';\nimport ListVotersModal from '../components/ListVotersModal';\nimport { ApiPayloadSingle } from 'flarum/common/Store';\n\nexport default class PollState {\n  public poll: Poll;\n  protected pendingSubmit: boolean = false;\n  protected pendingOptions: Set<string> | null = null;\n  public loadingOptions: boolean = false;\n  public useSubmitUI: boolean;\n  public showCheckMarks: boolean;\n  public canSeeVoteCount: boolean;\n\n  constructor(poll: Poll) {\n    this.poll = poll;\n    this.useSubmitUI = !poll?.canChangeVote() && poll?.allowMultipleVotes();\n    this.showCheckMarks = !app.session.user || (!poll.hasEnded() && poll.canVote() && (!this.hasVoted() || poll.canChangeVote()));\n    this.canSeeVoteCount = typeof poll.voteCount() === 'number';\n    this.init();\n  }\n\n  /**\n   * used as en extendable entry point for init customizations\n   */\n  init(): void {}\n\n  isShowResult(): boolean {\n    return this.poll.hasEnded() || (this.canSeeVoteCount && !!app.session.user && this.hasVoted());\n  }\n\n  hasVoted(): boolean {\n    return this.poll.myVotes().length > 0;\n  }\n\n  overallVoteCount(): number {\n    return this.poll.voteCount();\n  }\n\n  hasVotedFor(option: PollOption): boolean {\n    return this.pendingOptions ? this.pendingOptions.has(option.id()!) : this.poll.myVotes().some((vote: PollVote) => vote.option() === option);\n  }\n\n  getMaxVotes(): number {\n    const poll = this.poll;\n    let maxVotes = poll.allowMultipleVotes() ? poll.maxVotes() : 1;\n    if (maxVotes === 0) maxVotes = poll.options().length;\n    return maxVotes;\n  }\n\n  showButton(): boolean {\n    return this.useSubmitUI && this.pendingSubmit;\n  }\n\n  changeVote(option: PollOption, evt: Event): void {\n    const target = evt.target as HTMLInputElement;\n\n    if (!app.session.user) {\n      app.modal.show(LogInModal);\n      target.checked = false;\n      return;\n    }\n\n    const optionIds = this.pendingOptions || new Set(this.poll.myVotes().map((v: PollVote) => v.option()!.id()!));\n    const isUnvoting = optionIds.delete(option.id()!);\n    const allowsMultiple = this.poll.allowMultipleVotes();\n\n    if (!allowsMultiple) {\n      optionIds.clear();\n    }\n\n    if (!isUnvoting) {\n      optionIds.add(option.id()!);\n    }\n\n    this.pendingOptions = optionIds.size ? optionIds : null;\n    this.pendingSubmit = !!this.pendingOptions;\n\n    if (this.useSubmitUI) {\n      this.pendingOptions = optionIds.size ? optionIds : null;\n      this.pendingSubmit = !!this.pendingOptions;\n      m.redraw();\n      return;\n    }\n\n    this.submit(optionIds, null, () => (target.checked = isUnvoting));\n  }\n\n  hasSelectedOptions(): boolean {\n    return this.pendingSubmit;\n  }\n\n  onsubmit(): Promise<void> {\n    return this.submit(this.pendingOptions!, () => {\n      this.pendingOptions = null;\n      this.pendingSubmit = false;\n    });\n  }\n\n  submit(optionIds: Set<string>, cb: Function | null, onerror: Function | null = null) {\n    this.loadingOptions = true;\n    m.redraw();\n\n    return app\n      .request<ApiPayloadSingle>({\n        method: 'PATCH',\n        url: `${app.forum.attribute('apiUrl')}/fof/polls/${this.poll.id()}/votes`,\n        body: {\n          data: {\n            optionIds: Array.from(optionIds),\n          },\n        },\n      })\n      .then((res: ApiPayloadSingle) => {\n        app.store.pushPayload(res);\n        cb?.();\n      })\n      .catch((err) => {\n        onerror?.(err);\n      })\n      .finally(() => {\n        this.loadingOptions = false;\n        this.canSeeVoteCount = typeof this.poll.voteCount() === 'number';\n        m.redraw();\n      });\n  }\n\n  showVoters = () => {\n    // Load all the votes only when opening the votes list\n    app.modal.show(ListVotersModal, {\n      poll: this.poll,\n    });\n  };\n}\n","import PollFormState from './PollFormState';\nimport PollListState from './PollListState';\nimport PollState from './PollState';\n\nexport const states = {\n  PollFormState,\n  PollListState,\n  PollState,\n};\n","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport Poll from '../models/Poll';\nimport Component from 'flarum/common/Component';\nimport ComposePollPage from '../components/ComposePollPage';\nimport PollsPage from '../components/PollsPage';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Separator from 'flarum/common/components/Separator';\nimport Button from 'flarum/common/components/Button';\n\n/**\n * The `UserControls` utility constructs a list of buttons for a user which\n * perform actions on it.\n */\nexport default {\n  /**\n   * Get a list of controls for a user.\n   */\n  controls(poll: Poll, context: Component): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    ['poll', 'moderation', 'destructive'].forEach((section) => {\n      const controls = (this[section + 'Controls'](poll, context) as ItemList<Mithril.Children>).toArray();\n      if (controls.length) {\n        controls.forEach((item) => items.add(item.itemName, item));\n        items.add(section + 'Separator', <Separator />);\n      }\n    });\n\n    return items;\n  },\n\n  /**\n   * Get controls for direct modifcation actions on polls (e.g. vote, view voters).\n   */\n  pollControls(poll: Poll, context: Component): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    return items;\n  },\n\n  /**\n   * Get controls for a user pertaining to moderation (e.g. suspend, edit).\n   */\n  moderationControls(poll: Poll, context: Component): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    if (poll.canEdit()) {\n      items.add(\n        'edit',\n        <Button icon=\"fas fa-pencil-alt\" onclick={this.editAction.bind(this, poll)}>\n          {app.translator.trans(`fof-polls.forum.poll_controls.edit_label`)}\n        </Button>\n      );\n    }\n\n    return items;\n  },\n\n  /**\n   * Get controls for a user which are destructive (e.g. delete).\n   * @protected\n   */\n  destructiveControls(poll: Poll, context: Component): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    if (poll.canDelete()) {\n      items.add(\n        'delete',\n        <Button icon=\"far fa-trash-alt\" onclick={this.deleteAction.bind(this, poll)}>\n          {app.translator.trans(`fof-polls.forum.poll_controls.delete_label`)}\n        </Button>\n      );\n    }\n\n    return items;\n  },\n\n  /**\n   * Delete the poll.\n   */\n  async deleteAction(poll: Poll): Promise<void> {\n    if (!confirm(app.translator.trans(`fof-polls.forum.poll_controls.delete_confirmation`) as string)) {\n      return;\n    }\n\n    return poll\n      .delete()\n      .then(() => {\n        this.showDeletionAlert(poll, 'success');\n        if (app.current.matches(ComposePollPage, { id: poll.id() }) || app.current.matches(PollsPage, { id: poll.id() })) {\n          app.history.back();\n        } else {\n          window.location.reload();\n        }\n      })\n      .catch(() => this.showDeletionAlert(poll, 'error'));\n  },\n\n  /**\n   * Show deletion alert of poll\n   */\n  showDeletionAlert(poll: Poll, type: string): void {\n    const message = {\n      success: `fof-polls.forum.poll_controls.delete_success_message`,\n      error: `fof-polls.forum.poll_controls.delete_error_message`,\n    }[type]!;\n\n    app.alerts.show({ type }, app.translator.trans(message, { poll: poll }));\n  },\n\n  /**\n   * Edit the poll.\n   */\n  editAction(poll: Poll): void {\n    m.route.set(app.route('fof.polls.compose', { id: poll.id() }));\n  },\n};\n","import PollControls from './PollControls';\n\nexport const utils = {\n  PollControls,\n};\n","module.exports = flarum.core.compat['common/Component'];","module.exports = flarum.core.compat['common/Model'];","module.exports = flarum.core.compat['common/components/Badge'];","module.exports = flarum.core.compat['common/components/Button'];","module.exports = flarum.core.compat['common/components/Dropdown'];","module.exports = flarum.core.compat['common/components/Link'];","module.exports = flarum.core.compat['common/components/LinkButton'];","module.exports = flarum.core.compat['common/components/LoadingIndicator'];","module.exports = flarum.core.compat['common/components/Modal'];","module.exports = flarum.core.compat['common/components/Page'];","module.exports = flarum.core.compat['common/components/Placeholder'];","module.exports = flarum.core.compat['common/components/SelectDropdown'];","module.exports = flarum.core.compat['common/components/Separator'];","module.exports = flarum.core.compat['common/components/Switch'];","module.exports = flarum.core.compat['common/components/Tooltip'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['common/extenders'];","module.exports = flarum.core.compat['common/helpers/avatar'];","module.exports = flarum.core.compat['common/helpers/highlight'];","module.exports = flarum.core.compat['common/helpers/icon'];","module.exports = flarum.core.compat['common/helpers/listItems'];","module.exports = flarum.core.compat['common/helpers/username'];","module.exports = flarum.core.compat['common/models/Discussion'];","module.exports = flarum.core.compat['common/models/Forum'];","module.exports = flarum.core.compat['common/models/Post'];","module.exports = flarum.core.compat['common/states/PaginatedListState'];","module.exports = flarum.core.compat['common/utils/EventEmitter'];","module.exports = flarum.core.compat['common/utils/ItemList'];","module.exports = flarum.core.compat['common/utils/Stream'];","module.exports = flarum.core.compat['common/utils/SubtreeRetainer'];","module.exports = flarum.core.compat['common/utils/abbreviateNumber'];","module.exports = flarum.core.compat['common/utils/classList'];","module.exports = flarum.core.compat['common/utils/computed'];","module.exports = flarum.core.compat['common/utils/extractText'];","module.exports = flarum.core.compat['common/utils/string'];","module.exports = flarum.core.compat['forum/app'];","module.exports = flarum.core.compat['forum/components/CommentPost'];","module.exports = flarum.core.compat['forum/components/DiscussionComposer'];","module.exports = flarum.core.compat['forum/components/DiscussionList'];","module.exports = flarum.core.compat['forum/components/DiscussionPage'];","module.exports = flarum.core.compat['forum/components/IndexPage'];","module.exports = flarum.core.compat['forum/components/LogInModal'];","module.exports = flarum.core.compat['forum/components/ReplyComposer'];","module.exports = flarum.core.compat['forum/utils/PostControls'];","module.exports = flarum.core.compat['forum/utils/slidable'];","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return e;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var t,\n    e = {},\n    r = Object.prototype,\n    n = r.hasOwnProperty,\n    o = Object.defineProperty || function (t, e, r) {\n      t[e] = r.value;\n    },\n    i = \"function\" == typeof Symbol ? Symbol : {},\n    a = i.iterator || \"@@iterator\",\n    c = i.asyncIterator || \"@@asyncIterator\",\n    u = i.toStringTag || \"@@toStringTag\";\n  function define(t, e, r) {\n    return Object.defineProperty(t, e, {\n      value: r,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), t[e];\n  }\n  try {\n    define({}, \"\");\n  } catch (t) {\n    define = function define(t, e, r) {\n      return t[e] = r;\n    };\n  }\n  function wrap(t, e, r, n) {\n    var i = e && e.prototype instanceof Generator ? e : Generator,\n      a = Object.create(i.prototype),\n      c = new Context(n || []);\n    return o(a, \"_invoke\", {\n      value: makeInvokeMethod(t, r, c)\n    }), a;\n  }\n  function tryCatch(t, e, r) {\n    try {\n      return {\n        type: \"normal\",\n        arg: t.call(e, r)\n      };\n    } catch (t) {\n      return {\n        type: \"throw\",\n        arg: t\n      };\n    }\n  }\n  e.wrap = wrap;\n  var h = \"suspendedStart\",\n    l = \"suspendedYield\",\n    f = \"executing\",\n    s = \"completed\",\n    y = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var p = {};\n  define(p, a, function () {\n    return this;\n  });\n  var d = Object.getPrototypeOf,\n    v = d && d(d(values([])));\n  v && v !== r && n.call(v, a) && (p = v);\n  var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p);\n  function defineIteratorMethods(t) {\n    [\"next\", \"throw\", \"return\"].forEach(function (e) {\n      define(t, e, function (t) {\n        return this._invoke(e, t);\n      });\n    });\n  }\n  function AsyncIterator(t, e) {\n    function invoke(r, o, i, a) {\n      var c = tryCatch(t[r], t, o);\n      if (\"throw\" !== c.type) {\n        var u = c.arg,\n          h = u.value;\n        return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) {\n          invoke(\"next\", t, i, a);\n        }, function (t) {\n          invoke(\"throw\", t, i, a);\n        }) : e.resolve(h).then(function (t) {\n          u.value = t, i(u);\n        }, function (t) {\n          return invoke(\"throw\", t, i, a);\n        });\n      }\n      a(c.arg);\n    }\n    var r;\n    o(this, \"_invoke\", {\n      value: function value(t, n) {\n        function callInvokeWithMethodAndArg() {\n          return new e(function (e, r) {\n            invoke(t, n, e, r);\n          });\n        }\n        return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(e, r, n) {\n    var o = h;\n    return function (i, a) {\n      if (o === f) throw new Error(\"Generator is already running\");\n      if (o === s) {\n        if (\"throw\" === i) throw a;\n        return {\n          value: t,\n          done: !0\n        };\n      }\n      for (n.method = i, n.arg = a;;) {\n        var c = n.delegate;\n        if (c) {\n          var u = maybeInvokeDelegate(c, n);\n          if (u) {\n            if (u === y) continue;\n            return u;\n          }\n        }\n        if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) {\n          if (o === h) throw o = s, n.arg;\n          n.dispatchException(n.arg);\n        } else \"return\" === n.method && n.abrupt(\"return\", n.arg);\n        o = f;\n        var p = tryCatch(e, r, n);\n        if (\"normal\" === p.type) {\n          if (o = n.done ? s : l, p.arg === y) continue;\n          return {\n            value: p.arg,\n            done: n.done\n          };\n        }\n        \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(e, r) {\n    var n = r.method,\n      o = e.iterator[n];\n    if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y;\n    var i = tryCatch(o, e.iterator, r.arg);\n    if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y;\n    var a = i.arg;\n    return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y);\n  }\n  function pushTryEntry(t) {\n    var e = {\n      tryLoc: t[0]\n    };\n    1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e);\n  }\n  function resetTryEntry(t) {\n    var e = t.completion || {};\n    e.type = \"normal\", delete e.arg, t.completion = e;\n  }\n  function Context(t) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], t.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(e) {\n    if (e || \"\" === e) {\n      var r = e[a];\n      if (r) return r.call(e);\n      if (\"function\" == typeof e.next) return e;\n      if (!isNaN(e.length)) {\n        var o = -1,\n          i = function next() {\n            for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next;\n            return next.value = t, next.done = !0, next;\n          };\n        return i.next = i;\n      }\n    }\n    throw new TypeError(_typeof(e) + \" is not iterable\");\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), o(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) {\n    var e = \"function\" == typeof t && t.constructor;\n    return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name));\n  }, e.mark = function (t) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t;\n  }, e.awrap = function (t) {\n    return {\n      __await: t\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () {\n    return this;\n  }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) {\n    void 0 === i && (i = Promise);\n    var a = new AsyncIterator(wrap(t, r, n, o), i);\n    return e.isGeneratorFunction(r) ? a : a.next().then(function (t) {\n      return t.done ? t.value : a.next();\n    });\n  }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () {\n    return this;\n  }), define(g, \"toString\", function () {\n    return \"[object Generator]\";\n  }), e.keys = function (t) {\n    var e = Object(t),\n      r = [];\n    for (var n in e) r.push(n);\n    return r.reverse(), function next() {\n      for (; r.length;) {\n        var t = r.pop();\n        if (t in e) return next.value = t, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, e.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(e) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var t = this.tryEntries[0].completion;\n      if (\"throw\" === t.type) throw t.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(e) {\n      if (this.done) throw e;\n      var r = this;\n      function handle(n, o) {\n        return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o;\n      }\n      for (var o = this.tryEntries.length - 1; o >= 0; --o) {\n        var i = this.tryEntries[o],\n          a = i.completion;\n        if (\"root\" === i.tryLoc) return handle(\"end\");\n        if (i.tryLoc <= this.prev) {\n          var c = n.call(i, \"catchLoc\"),\n            u = n.call(i, \"finallyLoc\");\n          if (c && u) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          } else if (c) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n          } else {\n            if (!u) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(t, e) {\n      for (var r = this.tryEntries.length - 1; r >= 0; --r) {\n        var o = this.tryEntries[r];\n        if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) {\n          var i = o;\n          break;\n        }\n      }\n      i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null);\n      var a = i ? i.completion : {};\n      return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a);\n    },\n    complete: function complete(t, e) {\n      if (\"throw\" === t.type) throw t.arg;\n      return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y;\n    },\n    finish: function finish(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y;\n      }\n    },\n    \"catch\": function _catch(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.tryLoc === t) {\n          var n = r.completion;\n          if (\"throw\" === n.type) {\n            var o = n.arg;\n            resetTryEntry(r);\n          }\n          return o;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(e, r, n) {\n      return this.delegate = {\n        iterator: values(e),\n        resultName: r,\n        nextLoc: n\n      }, \"next\" === this.method && (this.arg = t), y;\n    }\n  }, e;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(t, e, r) {\n  if (isNativeReflectConstruct()) return Reflect.construct.apply(null, arguments);\n  var o = [null];\n  o.push.apply(o, e);\n  var p = new (t.bind.apply(t, o))();\n  return r && setPrototypeOf(p, r.prototype), p;\n}","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _isNativeFunction(fn) {\n  try {\n    return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n  } catch (e) {\n    return typeof fn === \"function\";\n  }\n}","export default function _isNativeReflectConstruct() {\n  try {\n    var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n  } catch (t) {}\n  return (_isNativeReflectConstruct = function _isNativeReflectConstruct() {\n    return !!t;\n  })();\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import _typeof from \"./typeof.js\";\nexport default function toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : String(i);\n}","export default function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n      _cache.set(Class, Wrapper);\n    }\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n  return _wrapNativeSuper(Class);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export * from './src/forum';\n"],"names":["app","extend","classList","DiscussionComposer","ReplyComposer","CreatePollModal","toPoll","data","poll","store","createRecord","tempOptions","options","map","option","pollOption","pushAttributes","addToComposer","composer","prototype","addPoll","_this","modal","show","fields","onsubmit","items","_this$composer$body","_discussion$canStartP","discussion","body","attrs","canStartPoll","forum","canStartPolls","add","m","className","onclick","bind","translator","trans","Badge","DiscussionList","Discussion","params","include","push","badges","hasPoll","component","type","label","icon","IndexPage","LinkButton","addNavItem","attribute","href","route","showAllGlobalPolls","CommentPost","PollView","DiscussionPage","content","post","isHidden","revealContent","polls","_iterator","_createForOfIteratorHelperLoose","_step","done","value","subtree","check","checks","_poll$data","_poll$options$map","_poll$options","_poll$myVotes$map","_poll$myVotes","attributes","call","_option$data","myVotes","vote","_vote$option","id","JSON","stringify","pusher","then","binding","channels","main","getById","voteCount","changedOptions","optionId","undefined","redraw","unbind","PostControls","Button","createPoll","save","_extends","relationships","_post$rawRelationship","rawRelationship","Page","ItemList","LoadingIndicator","listItems","SelectDropdown","IndexPageHero","AbstractPollPage","_Page","_inheritsLoose","_len","arguments","length","args","Array","_key","apply","concat","loading","_proto","view","pageContent","toArray","hero","mainContent","sidebar","contentItems","sidebarItems","setContent","buttonClassName","accessibleToggleLabel","navItems","initializers","has","remove","key","toObject","startsWith","Component","ComposePollHero","_Component","oninit","vnode","controlItems","itemClassName","exists","default","PollForm","PollFormState","ComposePollPage","_this2","_this$poll","_this$poll2","set","editId","param","find","item","_this2$poll","setTitle","createNewPoll","history","bodyClass","_onsubmit","_asyncToGenerator","_regeneratorRuntime","mark","_callee","state","isNew","alertAttrs","alertId","wrap","_callee$","_context","prev","next","controls","alerts","setTimeout","dismiss","stop","_x","_x2","Modal","_Modal","title","onFormSubmit","_onFormSubmit","hide","EditPollModal","_CreatePollModal","avatar","username","Link","ListVotersModal","optionContent","opt","votes","filter","v","answer","voteContent","user","PollImage","imageUrl","imageAlt","imageItems","_this$imageAlt","src","alt","PollListItem","Placeholder","PollList","getParams","isLoading","isInitialLoading","isLoadingNext","hasNext","loadNext","isEmpty","text","isSearchResults","getPages","pg","SubtreeRetainer","Dropdown","highlight","slidable","abbreviateNumber","PollControls","PollViewPage","highlightRegExp","freshness","time","session","markedAllAsReadAt","getTime","active","elementAttrs","Slidable","window","controlsView","contentView","slidableUnderneathView","menuClassName","isUnread","disabled","markAsRead","mainView","question","subtitle","infoItems","oncreate","slidableInstance","element","$","on","reset","onbeforeupdate","needsRebuild","current","matches","lastVotedNumber","hasEnded","activeView","endDate","dayjs","fromNow","count","Tooltip","PollOption","name","hasVoted","totalVotes","voted","canSeeVoteCount","overallVoteCount","hasVotedFor","percent","Math","round","_this$poll$myVotes","isDisabled","loadingOptions","canChangeVote","width","Number","bar","style","showCheckMarks","onchange","changeVote","checked","optionDisplayItems","onremove","hideOptionTooltip","tooltipVisible","updateVisibility","PollOptions","pollOptions","forEach","createOptionView","PollSubmitButton","event","pollButtonSubmit","hasSelectedOptions","PollSubtitle","pollSubtitleItems","PollTitle","pollTitleItems","Switch","Stream","extractText","FormError","UploadPollImageButton","optionAnswers","optionImageUrls","image","publicPoll","allowMultipleVotes","hideVotes","allowChangeVote","maxVotes","datepickerMinDate","_poll$tempOptions","o","formatDate","isAfter","bidi","onUpload","pollImageUploadSuccess","required","displayOptions","addOption","min","max","isBefore","deleting","i","placeholder","pollOptionImageUploadSuccess","removeOption","alert","splice","_this3","_this$dateToTimestamp","pollExists","pollImage","dateToTimestamp","preventDefault","t0","message","console","error","_delete2","_callee2","_callee2$","_context2","deleteAction","finish","_delete","date","def","dayjsDate","isValid","format","fileName","index","PollPageHero","wrapperClasses","classNames","_createClass","get","Hero","PollShowcaseItem","PollShowcase","refresh","showcaseItems","endedItems","page","PollState","slug","preventClose","e","addEventListener","removeEventListener","canEdit","showVoters","createMainView","createPollHeader","createPollContent","createPollFooter","createFormItems","getMaxVotes","showButton","questionSlug","canVote","_AbstractPollPage","LogInModal","PollListState","PollsPage","sort","viewItems","actionItems","newPollAction","PollsShowcasePage","includeParams","PostPoll","useSubmitUI","pendingSubmit","pendingOptions","_this$attrs$poll","_this$attrs$poll2","canSeeVoters","canDelete","deletePoll","viewOption","_poll$myVotes2","_poll$myVotes3","_poll$myVotes4","some","showCheckmark","evt","_this$attrs$poll$myVo","_this$attrs$poll$myVo2","target","optionIds","Set","isUnvoting","allowsMultiple","clear","size","submit","cb","onerror","request","method","url","from","res","pushPayload","err","confirm","sync","_Button","uploadedImageUrl","$input","getImageUrl","children","upload","appendTo","trigger","FormData","append","files","resourceUrl","serialize","raw","success","failure","_this$attrs$option","response","_this$attrs$onUpload","_this$attrs","_this$$input","fileUrl","_this$$input2","_Error","props","_wrapNativeSuper","Error","components","Extend","Post","Forum","Poll","PollVote","Routes","Store","Model","hasMany","addDiscussionBadge","addComposerItems","addPollsToPost","addPostControls","computed","_Model","transformDate","isGlobal","hiddenAt","apiEndpoint","hasOne","result","pollId","models","expandedGroup","isExpanded","groupKey","expand","_save","sent","PaginatedListState","EventEmitter","globalEventEmitter","_PaginatedListState","extraPolls","eventEmitter","_assertThisInitialized","requestParams","_this$params$sort","sortMap","q","loadPage","preloadedPolls","preloadedApiDocument","initialLoading","Promise","resolve","relevance","newest","oldest","removePoll","emit","pages","indexOf","unshift","getAllItems","number","init","isShowResult","states","Separator","context","section","itemName","pollControls","moderationControls","editAction","destructiveControls","abrupt","showDeletionAlert","back","location","reload","utils","_typeof","require","module","exports","__esModule","t","r","Object","n","hasOwnProperty","defineProperty","Symbol","a","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","Generator","create","Context","makeInvokeMethod","tryCatch","arg","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","values","g","defineIteratorMethods","_invoke","AsyncIterator","invoke","__await","callInvokeWithMethodAndArg","delegate","maybeInvokeDelegate","_sent","dispatchException","TypeError","resultName","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","isNaN","displayName","isGeneratorFunction","constructor","setPrototypeOf","__proto__","awrap","async","keys","reverse","pop","charAt","slice","rval","handle","complete","_catch","delegateYield","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","Function","self","ReferenceError","asyncGeneratorStep","gen","reject","_next","_throw","info","fn","isNativeReflectConstruct","_construct","Reflect","construct","toPropertyKey","_defineProperties","descriptor","Constructor","protoProps","staticProps","assign","source","_getPrototypeOf","subClass","superClass","_isNativeFunction","toString","_isNativeReflectConstruct","Boolean","valueOf","_setPrototypeOf","toPrimitive","String","isNativeFunction","Class","_cache","Map","Wrapper"],"sourceRoot":""}