{"version":3,"file":"forum.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAmC;AAEW;AACQ;AACsB;AACV;AAEP;AAEpD,IAAMM,aAAa,GAAG,SAAhBA,aAAaA,CAAIC,QAAQ,EAAK;EACzCA,QAAQ,CAACC,SAAS,CAACC,OAAO,GAAG,YAAY;IAAA,IAAAC,KAAA;IACvCV,6DAAS,CAACY,IAAI,CAACP,mEAAe,EAAE;MAC9BQ,IAAI,EAAE,IAAI,CAACN,QAAQ,CAACO,MAAM,CAACD,IAAI;MAC/BE,QAAQ,EAAE,SAAAA,SAACF,IAAI;QAAA,OAAMH,KAAI,CAACH,QAAQ,CAACO,MAAM,CAACD,IAAI,GAAGA,IAAI;MAAA;IACvD,CAAC,CAAC;EACJ,CAAC;;EAED;EACAZ,4DAAM,CAACM,QAAQ,CAACC,SAAS,EAAE,aAAa,EAAE,UAAUQ,KAAK,EAAE;IAAA,IAAAC,mBAAA,EAAAC,qBAAA,EAAAC,qBAAA;IACzD,IAAMC,UAAU,IAAAH,mBAAA,GAAG,IAAI,CAACV,QAAQ,CAACc,IAAI,sBAAAH,qBAAA,GAAlBD,mBAAA,CAAoBK,KAAK,qBAAzBJ,qBAAA,CAA2BE,UAAU;IACxD,IAAMG,YAAY,IAAAJ,qBAAA,GAAGC,UAAU,oBAAVA,UAAU,CAAEG,YAAY,CAAC,CAAC,YAAAJ,qBAAA,GAAInB,6DAAS,CAACyB,aAAa,CAAC,CAAC;IAE5E,IAAIF,YAAY,EAAE;MAChBP,KAAK,CAACU,GAAG,CACP,OAAO,EACPC,CAAA;QAAGC,SAAS,EAAC,mBAAmB;QAACC,OAAO,EAAE,IAAI,CAACpB,OAAO,CAACqB,IAAI,CAAC,IAAI;MAAE,GAChEH,CAAA;QAAMC,SAAS,EAAE1B,oEAAS,CAAC,WAAW,EAAE,CAAC,IAAI,CAACK,QAAQ,CAACO,MAAM,CAACD,IAAI,IAAI,MAAM;MAAE,GAC3Eb,kEAAc,CAACgC,KAAK,2CAAwC,IAAI,CAACzB,QAAQ,CAACO,MAAM,CAACD,IAAI,GAAG,MAAM,GAAG,KAAK,WAAO,CAC1G,CACL,CAAC,EACJ,CACF,CAAC;IACH;EACF,CAAC,CAAC;EAEFZ,4DAAM,CAACM,QAAQ,CAACC,SAAS,EAAE,MAAM,EAAE,UAAUyB,IAAI,EAAE;IACjD,IAAI,IAAI,CAAC1B,QAAQ,CAACO,MAAM,CAACD,IAAI,EAAE;MAC7BoB,IAAI,CAACpB,IAAI,GAAG,IAAI,CAACN,QAAQ,CAACO,MAAM,CAACD,IAAI;IACvC;EACF,CAAC,CAAC;AACJ,CAAC;AAED,iEAAe,YAAM;EACnBP,aAAa,CAACH,mFAAkB,CAAC;EACjCG,aAAa,CAACF,8EAAa,CAAC;AAC9B,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AC7CkC;AAEW;AACK;AACiB;AACX;AAEzD,iEAAe,YAAM;EACnBH,4DAAM,CAACkC,yFAAwB,EAAE,eAAe,EAAE,UAACE,MAAM,EAAK;IAC5DA,MAAM,CAACC,OAAO,CAACC,IAAI,CAAC,MAAM,CAAC;EAC7B,CAAC,CAAC;EAEFtC,4DAAM,CAACmC,kFAAoB,EAAE,QAAQ,EAAE,UAAUI,MAAM,EAAE;IACvD,IAAI,IAAI,CAACC,OAAO,CAAC,CAAC,EAAE;MAClBD,MAAM,CAACd,GAAG,CACR,MAAM,EACNQ,+EAAe,CAAC;QACdS,IAAI,EAAE,MAAM;QACZC,KAAK,EAAE5C,kEAAc,CAACgC,KAAK,CAAC,+BAA+B,CAAC;QAC5Da,IAAI,EAAE;MACR,CAAC,CAAC,EACF,CACF,CAAC;IACH;EACF,CAAC,CAAC;AACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;ACzBkC;AACW;AACY;AACG;AAE9C,SAASG,UAAUA,CAAA,EAAG;EACnC/C,4DAAM,CAAC6C,oFAAmB,EAAE,UAAU,EAAE,UAAC9B,KAAK,EAAK;IACjDA,KAAK,CAACU,GAAG,CACP,gBAAgB,EAChBqB,oFAAoB,CAClB;MACEE,IAAI,EAAEjD,6DAAS,CAAC,gBAAgB,CAAC;MACjC6C,IAAI,EAAE;IACR,CAAC,EACD7C,kEAAc,CAACgC,KAAK,CAAC,0BAA0B,CACjD,CAAC,EACD,EACF,CAAC;EACH,CAAC,CAAC;AACJ;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnBmC;AAEW;AACgB;AACjB;AACuB;AAEpE,iEAAe,YAAM;EACnB/B,4DAAM,CAACkD,sFAAqB,EAAE,SAAS,EAAE,UAAUG,OAAO,EAAE;IAC1D,IAAMC,IAAI,GAAG,IAAI,CAACjC,KAAK,CAACiC,IAAI;IAE5B,IAAI,CAAC,CAACA,IAAI,CAACC,QAAQ,CAAC,CAAC,IAAI,IAAI,CAACC,aAAa,KAAKF,IAAI,CAACG,KAAK,CAAC,CAAC,EAAE;MAC5D,SAAAC,SAAA,GAAAC,+BAAA,CAAmBL,IAAI,CAACG,KAAK,CAAC,CAAC,GAAAG,KAAA,IAAAA,KAAA,GAAAF,SAAA,IAAAG,IAAA,GAAE;QAAA,IAAtBjD,IAAI,GAAAgD,KAAA,CAAAE,KAAA;QACb,IAAIlD,IAAI,EAAE;UACRyC,OAAO,CAACf,IAAI,CAACZ,CAAA,CAACyB,4DAAQ;YAACG,IAAI,EAAEA,IAAK;YAAC1C,IAAI,EAAEA;UAAK,CAAE,CAAC,CAAC;QACpD;MACF;IACF;EACF,CAAC,CAAC;EAEFZ,4DAAM,CAACkD,sFAAqB,EAAE,QAAQ,EAAE,YAAY;IAAA,IAAAzC,KAAA;IAClD,IAAI,CAACsD,OAAO,CAACC,KAAK,CAAC,YAAM;MACvB,IAAMP,KAAK,GAAGhD,KAAI,CAACY,KAAK,CAACiC,IAAI,CAACG,KAAK,CAAC,CAAC;MAErC,IAAMQ,MAAM,GAAGR,KAAK,oBAALA,KAAK,CAAES,GAAG,oBAAVT,KAAK,CAAES,GAAG,CACvB,UAACtD,IAAI;QAAA,IAAAuD,UAAA,EAAAC,iBAAA,EAAAC,aAAA,EAAAC,iBAAA,EAAAC,aAAA;QAAA,OACH3D,IAAI,IAAI,EAAAuD,UAAA,GACNvD,IAAI,CAACoB,IAAI,qBAATmC,UAAA,CAAWK,UAAU,GAAAJ,iBAAA,GACrB,CAAAC,aAAA,GAAAzD,IAAI,CAAC6D,OAAO,CAAC,CAAC,EAACP,GAAG,qBAAlBE,iBAAA,CAAAM,IAAA,CAAAL,aAAA,EAAqB,UAACM,MAAM;UAAA,IAAAC,YAAA;UAAA,OAAKD,MAAM,qBAAAC,YAAA,GAAND,MAAM,CAAE3C,IAAI,qBAAZ4C,YAAA,CAAcJ,UAAU;QAAA,EAAC,GAAAF,iBAAA,GAC1D,CAAAC,aAAA,GAAA3D,IAAI,CAACiE,OAAO,CAAC,CAAC,EAACX,GAAG,qBAAlBI,iBAAA,CAAAI,IAAA,CAAAH,aAAA,EAAqB,UAACO,IAAI;UAAA,IAAAC,YAAA;UAAA,QAAAA,YAAA,GAAKD,IAAI,CAACH,MAAM,CAAC,CAAC,qBAAbI,YAAA,CAAeC,EAAE,CAAC,CAAC;QAAA,EAAC,CACpD;MAAA,CACL,CAAC;MAED,OAAOC,IAAI,CAACC,SAAS,CAACjB,MAAM,CAAC;IAC/B,CAAC,CAAC;EACJ,CAAC,CAAC;EAEFjE,4DAAM,CAACoD,yFAAwB,EAAE,UAAU,EAAE,YAAY;IACvD,IAAIrD,gEAAU,EAAE;MACdA,8DAAU,CAACqF,IAAI,CAAC,UAACC,OAAO,EAAK;QAC3B;QACA;QACAA,OAAO,CAACC,QAAQ,CAACC,IAAI,CAAC1D,IAAI,CAAC,oBAAoB,EAAE,UAACG,IAAI,EAAK;UACzD,IAAMpB,IAAI,GAAGb,6DAAS,CAAC0F,OAAO,CAAC,OAAO,EAAEzD,IAAI,CAAC,QAAQ,CAAC,CAAC;UAEvD,IAAIpB,IAAI,EAAE;YACRA,IAAI,CAAC8E,cAAc,CAAC;cAClBC,SAAS,EAAE3D,IAAI,CAAC,eAAe;YACjC,CAAC,CAAC;;YAEF;UACF;;UAEA,IAAM4D,cAAc,GAAG5D,IAAI,CAAC,SAAS,CAAC;UAEtC,KAAK,IAAM6D,QAAQ,IAAID,cAAc,EAAE;YACrC,IAAMjB,MAAM,GAAG5E,6DAAS,CAAC0F,OAAO,CAAC,cAAc,EAAEI,QAAQ,CAAC;YAE1D,IAAIlB,MAAM,IAAIA,MAAM,CAACgB,SAAS,CAAC,CAAC,KAAKG,SAAS,EAAE;cAC9CnB,MAAM,CAACe,cAAc,CAAC;gBACpBC,SAAS,EAAEC,cAAc,CAACC,QAAQ;cACpC,CAAC,CAAC;YACJ;UACF;UAEAnE,CAAC,CAACqE,MAAM,CAAC,CAAC;QACZ,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ;EACF,CAAC,CAAC;EAEF/F,4DAAM,CAACoD,yFAAwB,EAAE,UAAU,EAAE,YAAY;IACvD,IAAIrD,gEAAU,EAAE;MACdA,8DAAU,CAACqF,IAAI,CAAC,UAACC,OAAO,EAAK;QAC3BA,OAAO,CAACC,QAAQ,CAACC,IAAI,CAACS,MAAM,CAAC,oBAAoB,CAAC;MACpD,CAAC,CAAC;IACJ;EACF,CAAC,CAAC;AACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;AC9EkC;AAEW;AACa;AACA;AACN;AAErD,iEAAe,YAAM;EACnB,IAAMG,UAAU,GAAG,SAAbA,UAAUA,CAAI7C,IAAI;IAAA,OACtBvD,6DAAS,CAACY,IAAI,CAACP,mEAAe,EAAE;MAC9BU,QAAQ,EAAE,SAAAA,SAACkB,IAAI;QAAA,OACbjC,6DAAS,CACNqG,YAAY,CAAC,OAAO,CAAC,CACrBC,IAAI,CAAAC,8EAAA,KAEEtE,IAAI;UACPuE,aAAa,EAAE;YACbjD,IAAI,EAAJA;UACF;QAAC,IAEH;UACEtB,IAAI,EAAE;YACJK,OAAO,EAAE;UACX;QACF,CACF,CAAC,CACA+C,IAAI,CAAC,UAACxE,IAAI,EAAK;UAAA,IAAA4F,qBAAA;UACd,CAAAA,qBAAA,GAAAlD,IAAI,CAACmD,eAAe,CAAC,OAAO,CAAC,qBAA7BD,qBAAA,CAA+BlE,IAAI,oBAAnCkE,qBAAA,CAA+BlE,IAAI,CAAG;YAAEI,IAAI,EAAE,OAAO;YAAEsC,EAAE,EAAEpE,IAAI,CAACoE,EAAE,CAAC;UAAE,CAAC,CAAC;UAEvE,OAAOpE,IAAI;QACb,CAAC,CAAC;MAAA;IACR,CAAC,CAAC;EAAA;EAEJZ,4DAAM,CAACiG,wEAAY,EAAE,oBAAoB,EAAE,UAAUlF,KAAK,EAAEuC,IAAI,EAAE;IAChE,IAAI,CAACA,IAAI,CAACC,QAAQ,CAAC,CAAC,IAAID,IAAI,CAAChC,YAAY,CAAC,CAAC,EAAE;MAC3CP,KAAK,CAACU,GAAG,CACP,SAAS,EACTC,CAAA,CAACwE,wEAAM;QAACtD,IAAI,EAAC,aAAa;QAAChB,OAAO,EAAEuE,UAAU,CAACtE,IAAI,CAAC,IAAI,EAAEyB,IAAI;MAAE,GAC7DvD,kEAAc,CAACgC,KAAK,CAAC,gCAAgC,CAChD,CACV,CAAC;IACH;EACF,CAAC,CAAC;AACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AC1CkC;AACiC;AACP;AAET;AAAA,IAM/B6E,eAAe,0BAAAC,UAAA;EAAAC,oFAAA,CAAAF,eAAA,EAAAC,UAAA;EAAA,SAAAD,gBAAA;IAAA,IAAAnG,KAAA;IAAA,SAAAsG,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAAAC,IAAA,OAAAC,KAAA,CAAAJ,IAAA,GAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;MAAAF,IAAA,CAAAE,IAAA,IAAAJ,SAAA,CAAAI,IAAA;IAAA;IAAA3G,KAAA,GAAAoG,UAAA,CAAAnC,IAAA,CAAA2C,KAAA,CAAAR,UAAA,SAAAS,MAAA,CAAAJ,IAAA;IAAAzG,KAAA,CAClCG,IAAI;IAAA,OAAAH,KAAA;EAAA;EAAA,IAAA8G,MAAA,GAAAX,eAAA,CAAArG,SAAA;EAAAgH,MAAA,CAEJC,MAAM,GAAN,SAAAA,OAAOC,KAA0C,EAAQ;IACvDZ,UAAA,CAAAtG,SAAA,CAAMiH,MAAM,CAAA9C,IAAA,OAAC+C,KAAK;IAElB,IAAI,CAAC7G,IAAI,GAAG,IAAI,CAACS,KAAK,CAACT,IAAI;EAC7B,CAAC;EAAA2G,MAAA,CAEDG,IAAI,GAAJ,SAAAA,KAAA,EAAyB;IACvB,OACEhG,CAAA;MAAKC,SAAS,EAAC;IAAgD,GAC7DD,CAAA;MAAKC,SAAS,EAAC;IAAW,GACxBD,CAAA;MAAKC,SAAS,EAAC;IAAiB,GAC9BD,CAAA;MAAIC,SAAS,EAAC;IAAY,GAAE5B,kEAAc,CAACgC,KAAK,+BAA4B,CAAC,CAAC,IAAI,CAACnB,IAAI,CAACoE,EAAE,CAAC,CAAC,GAAG,MAAM,GAAG,KAAK,YAAQ,CAAM,CAAC,EAC5HtD,CAAA;MAAKC,SAAS,EAAC;IAAwB,GAAE,IAAI,CAACgG,YAAY,CAAC,CAAC,CAACC,OAAO,CAAC,CAAO,CACzE,CACF,CACF,CAAC;EAEV,CAAC;EAAAL,MAAA,CAEDI,YAAY,GAAZ,SAAAA,aAAA,EAA2C;IACzC,IAAM5G,KAAK,GAAG,IAAI4F,qEAAQ,CAAmB,CAAC;IAE9C5F,KAAK,CAACU,GAAG,CACP,MAAM,EACNC,CAAA,CAACoB,4EAAU;MACTF,IAAI,EAAC,aAAa;MAClBjB,SAAS,EAAC,qEAAqE;MAC/EkG,aAAa,EAAC,oBAAoB;MAClC7E,IAAI,EAAEjD,6DAAS,CAAC,gBAAgB;IAAE,GAEjCA,kEAAc,CAACgC,KAAK,CAAC,uCAAuC,CACnD,CACd,CAAC;IAED,IAAI,IAAI,CAACnB,IAAI,CAACkH,MAAM,EAAE;MACpB/G,KAAK,CAACU,GAAG,CACP,MAAM,EACNC,CAAA,CAACoB,4EAAU;QACTF,IAAI,EAAC,mCAAmC;QACxCjB,SAAS,EAAC,oEAAoE;QAC9EkG,aAAa,EAAC,oBAAoB;QAClC7E,IAAI,EAAEjD,6DAAS,CAAC,gBAAgB,EAAE;UAAEiF,EAAE,EAAE,IAAI,CAACpE,IAAI,CAACoE,EAAE,CAAC;QAAE,CAAC;MAAE,GAEzDjF,kEAAc,CAACgC,KAAK,CAAC,uCAAuC,CACnD,CACd,CAAC;IACH;IAEA,OAAOhB,KAAK;EACd,CAAC;EAAA,OAAA6F,eAAA;AAAA,EApD0CF,gEAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVnB;AACc;AAEwB;AACvC;AACkB;AACJ;AACK;AACG;AACJ;AACiB;AACX;AAAA,IAErC4B,eAAe,0BAAAC,KAAA;EAAAzB,oFAAA,CAAAwB,eAAA,EAAAC,KAAA;EAAA,SAAAD,gBAAA;IAAA,IAAA7H,KAAA;IAAA,SAAAsG,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAAAC,IAAA,OAAAC,KAAA,CAAAJ,IAAA,GAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;MAAAF,IAAA,CAAAE,IAAA,IAAAJ,SAAA,CAAAI,IAAA;IAAA;IAAA3G,KAAA,GAAA8H,KAAA,CAAA7D,IAAA,CAAA2C,KAAA,CAAAkB,KAAA,SAAAjB,MAAA,CAAAJ,IAAA;IAAAzG,KAAA,CAClCG,IAAI,GAA4B,IAAI;IAAAH,KAAA,CAEpC+H,OAAO,GAAY,KAAK;IAAA,OAAA/H,KAAA;EAAA;EAAA,IAAA8G,MAAA,GAAAe,eAAA,CAAA/H,SAAA;EAAAgH,MAAA,CAExBC,MAAM,GAAN,SAAAA,OAAOC,KAAoB,EAAE;IAAA,IAAAgB,MAAA;MAAAC,UAAA;MAAAC,WAAA;IAC3BJ,KAAA,CAAAhI,SAAA,CAAMiH,MAAM,CAAA9C,IAAA,OAAC+C,KAAK;;IAElB;IACA,IAAMmB,MAAM,GAAGlH,CAAC,CAACuB,KAAK,CAAC4F,KAAK,CAAC,IAAI,CAAC;IAClC,IAAID,MAAM,EAAE;MACV,IAAI,CAAChI,IAAI,GAAGb,6DAAS,CAAC0F,OAAO,CAAO,MAAM,EAAEmD,MAAM,CAAC;MAEnD,IAAI,CAAC,IAAI,CAAChI,IAAI,EAAE;QACd,IAAI,CAAC4H,OAAO,GAAG,IAAI;QAEnBzI,6DAAS,CAAC+I,IAAI,CAAO,WAAW,EAAEF,MAAM,CAAC,CAACxD,IAAI,CAAC,UAAC2D,IAAI,EAAK;UAAA,IAAAC,WAAA;UACvDP,MAAI,CAAC7H,IAAI,GAAGmI,IAAI;UAChBN,MAAI,CAACD,OAAO,GAAG,KAAK;UACpBzI,gEAAY,CAACA,kEAAc,CAACgC,KAAK,+BAA4B,CAAC,GAAAiH,WAAA,GAACP,MAAI,CAAC7H,IAAI,aAAToI,WAAA,CAAWhE,EAAE,CAAC,CAAC,IAAG,MAAM,GAAG,KAAK,YAAQ,CAAW,CAAC;UACnHtD,CAAC,CAACqE,MAAM,CAAC,CAAC;QACZ,CAAC,CAAC;MACJ;IACF,CAAC,MAAM;MACL,IAAI,CAACnF,IAAI,GAAGuH,6DAAa,CAACe,aAAa,CAAC,CAAC;IAC3C;IAEAnJ,+DAAW,CAACuC,IAAI,CAAC,cAAc,EAAEvC,kEAAc,CAACgC,KAAK,+BAA4B,CAAC,GAAA2G,UAAA,GAAC,IAAI,CAAC9H,IAAI,aAAT8H,UAAA,CAAW1D,EAAE,CAAC,CAAC,IAAG,MAAM,GAAG,KAAK,YAAQ,CAAW,CAAC;IACvI,IAAI,CAACoE,SAAS,GAAG,mBAAmB;IACpCrJ,gEAAY,CAACA,kEAAc,CAACgC,KAAK,+BAA4B,CAAC,GAAA4G,WAAA,GAAC,IAAI,CAAC/H,IAAI,aAAT+H,WAAA,CAAW3D,EAAE,CAAC,CAAC,IAAG,MAAM,GAAG,KAAK,YAAQ,CAAW,CAAC;EACrH,CAAC;EAAAuC,MAAA,CAEDG,IAAI,GAAJ,SAAAA,KAAA,EAAyB;IACvB;IACA,IAAI,CAAC3H,6DAAS,CAACsJ,SAAS,CAAU,qBAAqB,CAAC,EAAE;MACxD3H,CAAC,CAACuB,KAAK,CAACqG,GAAG,CAAC,GAAG,CAAC;MAChB;IACF;IAEA,IAAI,IAAI,CAACd,OAAO,EAAE;MAChB,OAAO9G,CAAA,CAACuG,kFAAgB,MAAE,CAAC;IAC7B;IAEA,OACEvG,CAAA;MAAKC,SAAS,EAAC;IAA2B,GACxCD,CAAA,CAACkF,wDAAe;MAAChG,IAAI,EAAE,IAAI,CAACA;IAAK,CAAE,CAAC,EACpCc,CAAA;MAAKC,SAAS,EAAC;IAAW,GACxBD,CAAA;MAAKC,SAAS,EAAC;IAAkB,GAC/BD,CAAA;MAAKC,SAAS,EAAC;IAAuB,GACpCD,CAAA,aAAK0G,uEAAS,CAAC,IAAI,CAACmB,YAAY,CAAC,CAAC,CAAC3B,OAAO,CAAC,CAAC,CAAM,CAC/C,CAAC,EACNlG,CAAA;MAAKC,SAAS,EAAC;IAAe,GAC5BD,CAAA,CAACwG,iDAAQ;MAACtH,IAAI,EAAE,IAAI,CAACA,IAAK;MAACE,QAAQ,EAAE,IAAI,CAACA,QAAQ,CAACe,IAAI,CAAC,IAAI;IAAE,CAAE,CAC7D,CACF,CACF,CACF,CAAC;EAEV,CAAC;EAAA0F,MAAA,CAEKzG,QAAQ;IAAA,IAAA0I,SAAA,GAAAC,uFAAA,eAAAC,sEAAA,CAAd,SAAAE,QAAe5H,IAAY,EAAE6H,KAAoB;MAAA,IAAAC,KAAA,EAAAC,UAAA,EAAAC,OAAA;MAAA,OAAAN,sEAAA,UAAAQ,SAAAC,QAAA;QAAA;UAAA,QAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cACzCP,KAAK,GAAGD,KAAK,CAACjJ,IAAI,CAACoE,EAAE,CAAC,CAAC,KAAKc,SAAS;cAAAqE,QAAA,CAAAE,IAAA;cAAA,OACrCR,KAAK,CAACxD,IAAI,CAACrE,IAAI,CAAC;YAAA;cAEhB+H,UAAU,GAAGD,KAAK,GACpB;gBACEpH,IAAI,EAAE,SAAS;gBACf4H,QAAQ,EAAE,CACR5I,CAAA,CAACwE,wEAAM;kBACLvE,SAAS,EAAC,qBAAqB;kBAC/BC,OAAO,EAAE,SAAAA,QAAA;oBAAA,OACPF,CAAC,CAACuB,KAAK,CAACqG,GAAG,CACTvJ,6DAAS,CAAC,mBAAmB,EAAE;sBAC7BiF,EAAE,EAAE6E,KAAK,CAACjJ,IAAI,CAACoE,EAAE,CAAC;oBACpB,CAAC,CACH,CAAC;kBAAA;gBACF,GAEAjF,kEAAc,CAACgC,KAAK,CAAC,0CAA0C,CAC1D,CAAC;cAEb,CAAC,GACD;gBACEW,IAAI,EAAE;cACR,CAAC,EAEL;cACMsH,OAAO,GAAGjK,8DAAU,CAACY,IAAI,CAACoJ,UAAU,EAAEhK,kEAAc,CAACgC,KAAK,CAAC,iCAAiC,CAAC,CAAC,EAEpG;cACAyI,UAAU,CAAC;gBAAA,OAAMzK,8DAAU,CAAC0K,OAAO,CAACT,OAAO,CAAC;cAAA,GAAE,KAAK,CAAC;cAEpD,IAAIF,KAAK,EAAE;gBACTpI,CAAC,CAACuB,KAAK,CAACqG,GAAG,CAACvJ,6DAAS,CAAC,gBAAgB,CAAC,CAAC;cAC1C;YAAC;YAAA;cAAA,OAAAoK,QAAA,CAAAO,IAAA;UAAA;QAAA;MAAA,GAAAd,OAAA;IAAA,CACF;IAAA,SAAA9I,SAAA6J,EAAA,EAAAC,GAAA;MAAA,OAAApB,SAAA,CAAAnC,KAAA,OAAAL,SAAA;IAAA;IAAA,OAAAlG,QAAA;EAAA;EAAAyG,MAAA,CAEDgC,YAAY,GAAZ,SAAAA,aAAA,EAA2C;IACzC,IAAMxI,KAAK,GAAG,IAAI4F,sEAAQ,CAAmB,CAAC;IAE9C5F,KAAK,CAACU,GAAG,CACP,KAAK,EACLC,CAAA,CAAC2G,iFAAc;MACbwC,eAAe,EAAC,QAAQ;MACxBlJ,SAAS,EAAC,kBAAkB;MAC5BmJ,qBAAqB,EAAE/K,kEAAc,CAACgC,KAAK,CAAC,2DAA2D;IAAE,GAExG,IAAI,CAACgJ,QAAQ,CAAC,CAAC,CAACnD,OAAO,CAAC,CACX,CAClB,CAAC;IAED,OAAO7G,KAAK;EACd,CAAC;EAAAwG,MAAA,CAEDwD,QAAQ,GAAR,SAAAA,SAAA,EAAW;IACT,OAAOlI,mFAAmB,CAACkI,QAAQ,CAAC,CAAC;EACvC,CAAC;EAAA,OAAAzC,eAAA;AAAA,EApH0CN,sEAAI;;;;;;;;;;;;;;;;;;;;;;;ACdd;AACgB;AACjB;AAAA,IAEb5H,eAAe,0BAAA6K,MAAA;EAAAnE,oFAAA,CAAA1G,eAAA,EAAA6K,MAAA;EAAA,SAAA7K,gBAAA;IAAA,OAAA6K,MAAA,CAAA5D,KAAA,OAAAL,SAAA;EAAA;EAAA,IAAAO,MAAA,GAAAnH,eAAA,CAAAG,SAAA;EAAAgH,MAAA,CAClC2D,KAAK,GAAL,SAAAA,MAAA,EAAQ;IACN,OAAOnL,kEAAc,CAACgC,KAAK,CAAC,iCAAiC,CAAC;EAChE,CAAC;EAAAwF,MAAA,CAED5F,SAAS,GAAT,SAAAA,UAAA,EAAY;IACV,OAAO,mCAAmC;EAC5C,CAAC;EAAA4F,MAAA,CAEDlE,OAAO,GAAP,SAAAA,QAAA,EAAU;IACR,OAAO,CACL3B,CAAA;MAAKC,SAAS,EAAC;IAAY,GACzBD,CAAA,CAACwG,iDAAQ;MAACtH,IAAI,EAAE,IAAI,CAACS,KAAK,CAACT,IAAK;MAACE,QAAQ,EAAE,IAAI,CAACA,QAAQ,CAACe,IAAI,CAAC,IAAI;IAAE,CAAW,CAC5E,CAAC,CACP;EACH,CAAC;EAAA0F,MAAA,CAEDzG,QAAQ,GAAR,SAAAA,SAASkB,IAAI,EAAE;IACb,IAAI,CAACmJ,IAAI,CAAC,CAAC;IACX,IAAI,CAAC9J,KAAK,CAACP,QAAQ,CAACkB,IAAI,CAAC;EAC3B,CAAC;EAAA,OAAA5B,eAAA;AAAA,EApB0C4K,uEAAK;;;;;;;;;;;;;;;;;;;;;;;;;;ACJf;AACa;AAAA,IAE3BI,aAAa,0BAAAC,gBAAA;EAAAvE,oFAAA,CAAAsE,aAAA,EAAAC,gBAAA;EAAA,SAAAD,cAAA;IAAA,OAAAC,gBAAA,CAAAhE,KAAA,OAAAL,SAAA;EAAA;EAAA,IAAAO,MAAA,GAAA6D,aAAA,CAAA7K,SAAA;EAAAgH,MAAA,CAChC2D,KAAK,GAAL,SAAAA,MAAA,EAAQ;IACN,OAAOnL,kEAAc,CAACgC,KAAK,CAAC,kCAAkC,CAAC;EACjE,CAAC;EAAAwF,MAAA,CAEKzG,QAAQ;IAAA,IAAA0I,SAAA,GAAAC,uFAAA,eAAAC,sEAAA,CAAd,SAAAE,QAAe5H,IAAI,EAAE6H,KAAK;MAAA,IAAAG,OAAA;MAAA,OAAAN,sEAAA,UAAAQ,SAAAC,QAAA;QAAA;UAAA,QAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAAF,QAAA,CAAAE,IAAA;cAAA,OAClBR,KAAK,CAACxD,IAAI,CAACrE,IAAI,CAAC;YAAA;cAEtB;cACMgI,OAAO,GAAGjK,8DAAU,CAACY,IAAI,CAC7B;gBACE+B,IAAI,EAAE;cACR,CAAC,EACD3C,kEAAc,CAACgC,KAAK,CAAC,iCAAiC,CACxD,CAAC,EAED;cACAyI,UAAU,CAAC;gBAAA,OAAMzK,8DAAU,CAAC0K,OAAO,CAACT,OAAO,CAAC;cAAA,GAAE,KAAK,CAAC;YAAC;YAAA;cAAA,OAAAG,QAAA,CAAAO,IAAA;UAAA;QAAA;MAAA,GAAAd,OAAA;IAAA,CACtD;IAAA,SAAA9I,SAAA6J,EAAA,EAAAC,GAAA;MAAA,OAAApB,SAAA,CAAAnC,KAAA,OAAAL,SAAA;IAAA;IAAA,OAAAlG,QAAA;EAAA;EAAA,OAAAsK,aAAA;AAAA,EAlBwChL,wDAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHvB;AAEgB;AACD;AACI;AACL;AACD;AACyB;AAAA,IAEpDsL,eAAe,0BAAAT,MAAA;EAAAnE,oFAAA,CAAA4E,eAAA,EAAAT,MAAA;EAAA,SAAAS,gBAAA;IAAA,OAAAT,MAAA,CAAA5D,KAAA,OAAAL,SAAA;EAAA;EAAA,IAAAO,MAAA,GAAAmE,eAAA,CAAAnL,SAAA;EAAAgH,MAAA,CAClCC,MAAM,GAAN,SAAAA,OAAOC,KAAK,EAAE;IAAA,IAAAhH,KAAA;IACZwK,MAAA,CAAA1K,SAAA,CAAMiH,MAAM,CAAA9C,IAAA,OAAC+C,KAAK;IAElB,IAAI,CAACe,OAAO,GAAGiD,iEAAM,CAAC,IAAI,CAAC;IAE3B1L,6DAAS,CACN+I,IAAI,CAAC,WAAW,EAAE,IAAI,CAACzH,KAAK,CAACT,IAAI,CAACoE,EAAE,CAAC,CAAC,EAAE;MACvC3C,OAAO,EAAE;IACX,CAAC,CAAC,CACD+C,IAAI,CAAC;MAAA,OAAM3E,KAAI,CAAC+H,OAAO,CAAC,KAAK,CAAC;IAAA,EAAC,WACxB,CAAC;MAAA,OAAM9G,CAAC,CAACqE,MAAM,CAAC,CAAC;IAAA,EAAC;EAC9B,CAAC;EAAAwB,MAAA,CAED5F,SAAS,GAAT,SAAAA,UAAA,EAAY;IACV,OAAO,0BAA0B;EACnC,CAAC;EAAA4F,MAAA,CAED2D,KAAK,GAAL,SAAAA,MAAA,EAAQ;IACN,OAAOnL,kEAAc,CAACgC,KAAK,CAAC,mCAAmC,CAAC;EAClE,CAAC;EAAAwF,MAAA,CAEDlE,OAAO,GAAP,SAAAA,QAAA,EAAU;IACR,OAAO3B,CAAA;MAAKC,SAAS,EAAC;IAAY,GAAE,IAAI,CAAC6G,OAAO,CAAC,CAAC,GAAG9G,CAAA,CAACuG,kFAAgB,MAAE,CAAC,GAAG,IAAI,CAAC5G,KAAK,CAACT,IAAI,CAAC6D,OAAO,CAAC,CAAC,CAACP,GAAG,CAAC,IAAI,CAACyH,aAAa,CAAC9J,IAAI,CAAC,IAAI,CAAC,CAAO,CAAC;EACjJ,CAAC;EAAA0F,MAAA,CAEDoE,aAAa,GAAb,SAAAA,cAAcC,GAAG,EAAE;IACjB,IAAMC,KAAK,GAAG,CAAC,IAAI,CAACxK,KAAK,CAACT,IAAI,CAACiL,KAAK,CAAC,CAAC,IAAI,EAAE,EAAEC,MAAM,CAAC,UAACC,CAAC;MAAA,OAAKH,GAAG,CAAC5G,EAAE,CAAC,CAAC,KAAK+G,CAAC,CAACpH,MAAM,CAAC,CAAC,CAACK,EAAE,CAAC,CAAC;IAAA,EAAC;IAEzF,OACEtD,CAAA;MAAKC,SAAS,EAAC;IAAmB,GAChCD,CAAA,aAAKkK,GAAG,CAACI,MAAM,CAAC,CAAC,GAAG,GAAQ,CAAC,EAE5BH,KAAK,CAAC5E,MAAM,GACXvF,CAAA;MAAKC,SAAS,EAAC;IAAiB,GAAEkK,KAAK,CAAC3H,GAAG,CAAC,IAAI,CAAC+H,WAAW,CAACpK,IAAI,CAAC,IAAI,CAAC,CAAO,CAAC,GAE/EH,CAAA,aAAK3B,kEAAc,CAACgC,KAAK,CAAC,iCAAiC,CAAM,CAEhE,CAAC;EAEV,CAAC;EAAAwF,MAAA,CAED0E,WAAW,GAAX,SAAAA,YAAYnH,IAAI,EAAE;IAChB,IAAMoH,IAAI,GAAGpH,IAAI,CAACoH,IAAI,CAAC,CAAC;IACxB,IAAM7K,KAAK,GAAG6K,IAAI,IAAI;MAAElJ,IAAI,EAAEjD,6DAAS,CAACmM,IAAI,CAACA,IAAI;IAAE,CAAC;IAEpD,OACExK,CAAA,CAAC8J,sEAAI,EAAKnK,KAAK,EACZiK,mEAAM,CAACY,IAAI,CAAC,EAAC,GAAC,EAACX,qEAAQ,CAACW,IAAI,CACzB,CAAC;EAEX,CAAC;EAAA,OAAAR,eAAA;AAAA,EAnD0CV,uEAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACTf;AACa;AACN;AACW;AACoB;AACV;AACT;;AAEtD;AACA;AACA;AAFA,IAGqBqB,QAAQ,0BAAAxF,UAAA;EAAAC,oFAAA,CAAAuF,QAAA,EAAAxF,UAAA;EAAA,SAAAwF,SAAA;IAAA,OAAAxF,UAAA,CAAAQ,KAAA,OAAAL,SAAA;EAAA;EAAA,IAAAO,MAAA,GAAA8E,QAAA,CAAA9L,SAAA;EAAAgH,MAAA,CAC3BG,IAAI,GAAJ,SAAAA,KAAA,EAAO;IACL;AACJ;AACA;IACI,IAAMmC,KAAK,GAAG,IAAI,CAACxI,KAAK,CAACwI,KAAK;IAC9B,IAAMzH,MAAM,GAAGyH,KAAK,CAACyC,SAAS,CAAC,CAAC;IAChC,IAAMC,SAAS,GAAG1C,KAAK,CAAC2C,gBAAgB,CAAC,CAAC,IAAI3C,KAAK,CAAC4C,aAAa,CAAC,CAAC;IAEnE,IAAIjE,OAAO;IAEX,IAAI+D,SAAS,EAAE;MACb/D,OAAO,GAAG9G,CAAA,CAACuG,kFAAgB,MAAE,CAAC;IAChC,CAAC,MAAM,IAAI4B,KAAK,CAAC6C,OAAO,CAAC,CAAC,EAAE;MAC1BlE,OAAO,GACL9G,CAAA,CAACwE,wEAAM;QAACvE,SAAS,EAAC,QAAQ;QAACC,OAAO,EAAEiI,KAAK,CAAC8C,QAAQ,CAAC9K,IAAI,CAACgI,KAAK;MAAE,GAC5D9J,kEAAc,CAACgC,KAAK,CAAC,6CAA6C,CAC7D,CACT;IACH;IAEA,IAAI8H,KAAK,CAAC+C,OAAO,CAAC,CAAC,EAAE;MACnB,IAAMC,IAAI,GAAG9M,kEAAc,CAACgC,KAAK,CAAC,uCAAuC,CAAC;MAC1E,OACEL,CAAA;QAAKC,SAAS,EAAC;MAAU,GACvBD,CAAA,CAAC0K,6EAAW;QAACS,IAAI,EAAEA;MAAK,CAAE,CACvB,CAAC;IAEV;IAEA,IAAMC,QAAQ,GAAGjD,KAAK,CAACiD,QAAQ;IAE/B,OACEpL,CAAA;MAAKC,SAAS,EAAE1B,oEAAS,CAAC,UAAU,EAAE;QAAE,yBAAyB,EAAE4J,KAAK,CAACkD,eAAe,CAAC;MAAE,CAAC;IAAE,GAC5FrL,CAAA;MAAI,aAAW6K,SAAU;MAAC5K,SAAS,EAAC;IAAgB,GACjDkI,KAAK,CAACmD,QAAQ,CAAC,CAAC,CAAC9I,GAAG,CAAC,UAAC+I,EAAE,EAAK;MAC5B,OAAOA,EAAE,CAAClM,KAAK,CAACmD,GAAG,CAAC,UAACtD,IAAI;QAAA,OACvBc,CAAA;UAAIwL,GAAG,EAAEtM,IAAI,CAACoE,EAAE,CAAC,CAAE;UAAC,WAASpE,IAAI,CAACoE,EAAE,CAAC;QAAE,GACrCtD,CAAA,CAACyK,qDAAY;UAACvL,IAAI,EAAEA,IAAK;UAACwB,MAAM,EAAEA;QAAO,CAAE,CACzC,CAAC;MAAA,CACN,CAAC;IACJ,CAAC,CACC,CAAC,EACLV,CAAA;MAAKC,SAAS,EAAC;IAAmB,GAAE6G,OAAa,CAC9C,CAAC;EAEV,CAAC;EAAA,OAAA6D,QAAA;AAAA,EA9CmC3F,gEAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVZ;AACiC;AAEF;AACZ;AACG;AACR;AACO;AACL;AACL;AACZ;AACkC;AAEhB;AACA;AACI;AAOxD;AACA;AACA;AACA;AAHA,IAIqByF,YAAY,0BAAAtF,UAAA;EAAAC,oFAAA,CAAAqF,YAAA,EAAAtF,UAAA;EAAA,SAAAsF,aAAA;IAAA,IAAA1L,KAAA;IAAA,SAAAsG,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAAAC,IAAA,OAAAC,KAAA,CAAAJ,IAAA,GAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;MAAAF,IAAA,CAAAE,IAAA,IAAAJ,SAAA,CAAAI,IAAA;IAAA;IAAA3G,KAAA,GAAAoG,UAAA,CAAAnC,IAAA,CAAA2C,KAAA,CAAAR,UAAA,SAAAS,MAAA,CAAAJ,IAAA;IAAAzG,KAAA,CAK/BsD,OAAO;IAAAtD,KAAA,CACPG,IAAI;IAAAH,KAAA,CAEJiN,eAAe;IAAA,OAAAjN,KAAA;EAAA;EAPf;AACF;AACA;AACA;EAHE,IAAA8G,MAAA,GAAA4E,YAAA,CAAA5L,SAAA;EAAAgH,MAAA,CASAC,MAAM,GAAN,SAAAA,OAAOC,KAAuC,EAAE;IAAA,IAAAgB,MAAA;IAC9C5B,UAAA,CAAAtG,SAAA,CAAMiH,MAAM,CAAA9C,IAAA,OAAC+C,KAAK;IAElB,IAAI,CAAC7G,IAAI,GAAG,IAAI,CAACS,KAAK,CAACT,IAAI;IAE3B,IAAI,CAACmD,OAAO,GAAG,IAAIoJ,4EAAe,CAChC;MAAA,OAAM1E,MAAI,CAAC7H,IAAI,CAAC+M,SAAS;IAAA,GACzB,YAAM;MACJ,IAAMC,IAAI,GAAG7N,iEAAW,CAACmM,IAAI,IAAInM,+DAAW,CAACmM,IAAI,CAAC4B,iBAAiB,CAAC,CAAC;MACrE,OAAOF,IAAI,IAAIA,IAAI,CAACG,OAAO,CAAC,CAAC;IAC/B,CAAC,EACD;MAAA,OAAMtF,MAAI,CAACuF,MAAM,CAAC,CAAC;IAAA,CACrB,CAAC;EACH,CAAC;EAAAzG,MAAA,CAED0G,YAAY,GAAZ,SAAAA,aAAA,EAAe;IACb,OAAO;MACLtM,SAAS,EAAE1B,oEAAS,CAAC,cAAc,EAAE;QACnC+N,MAAM,EAAE,IAAI,CAACA,MAAM,CAAC,CAAC;QACrB,sBAAsB,EAAE,IAAI,CAACpN,IAAI,CAAC2C,QAAQ,CAAC,CAAC;QAC5C2K,QAAQ,EAAE,cAAc,IAAIC;MAC9B,CAAC;IACH,CAAC;EACH,CAAC;EAAA5G,MAAA,CAEDG,IAAI,GAAJ,SAAAA,KAAA,EAAO;IACL,IAAM4C,QAAQ,GAAGmD,4DAAY,CAACnD,QAAQ,CAAC,IAAI,CAAC1J,IAAI,EAAE,IAAI,CAAC,CAACgH,OAAO,CAAC,CAAC;IACjE,IAAMvG,KAAK,GAAG,IAAI,CAAC4M,YAAY,CAAC,CAAC;IAEjC,OACEvM,CAAA,QAASL,KAAK,EACX,IAAI,CAAC+M,YAAY,CAAC9D,QAAQ,CAAC,EAC3B,IAAI,CAAC+D,WAAW,CAAC,CAAC,EAClB,IAAI,CAACC,sBAAsB,CAAC,CAC1B,CAAC;EAEV,CAAC;EAAA/G,MAAA,CAED6G,YAAY,GAAZ,SAAAA,aAAa9D,QAA4B,EAAoB;IAC3D,OACE,CAAC,CAACA,QAAQ,CAACrD,MAAM,IACfvF,CAAA,CAAC0L,0EAAQ;MACPxK,IAAI,EAAC,mBAAmB;MACxBjB,SAAS,EAAC,uBAAuB;MACjC4M,aAAa,EAAC,sBAAsB;MACpC1D,eAAe,EAAC,kCAAkC;MAClDC,qBAAqB,EAAE/K,kEAAc,CAACgC,KAAK,CAAC,gEAAgE;IAAE,GAE7GuI,QACO,CACX;EAEL,CAAC;EAAA/C,MAAA,CAED+G,sBAAsB,GAAtB,SAAAA,uBAAA,EAA2C;IACzC,IAAME,QAAQ,GAAG,IAAI,CAAC5N,IAAI,CAAC4N,QAAQ,CAAC,CAAC;IAErC,OACE9M,CAAA;MACEC,SAAS,EAAE1B,oEAAS,CAAC,4EAA4E,EAAE;QAAEwO,QAAQ,EAAE,CAACD;MAAS,CAAC,CAAE;MAC5H5M,OAAO,EAAE,IAAI,CAAC8M,UAAU,CAAC7M,IAAI,CAAC,IAAI;IAAE,GAEnCe,iEAAI,CAAC,cAAc,CAChB,CAAC;EAEX,CAAC;EAAA2E,MAAA,CAED8G,WAAW,GAAX,SAAAA,YAAA,EAAgC;IAC9B;IACA;;IAEA;MACE;MACA3M,CAAA;QAAKC,SAAS,EAAE1B,oEAAS,CAAC,sBAAsB;MAAE,GAAE,IAAI,CAAC0O,QAAQ,CAAC,CAAO;IAAC;EAE9E,CAAC;EAAApH,MAAA,CAEDoH,QAAQ,GAAR,SAAAA,SAAA,EAA6B;IAC3B,OACEjN,CAAA,CAAC8J,sEAAI;MAACxI,IAAI,EAAEjD,6DAAS,CAAC,gBAAgB,EAAE;QAAEiF,EAAE,EAAE,IAAI,CAACpE,IAAI,CAACoE,EAAE,CAAC;MAAE,CAAC,CAAE;MAACrD,SAAS,EAAC;IAAmB,GAC5FD,CAAA;MAAIC,SAAS,EAAC;IAAoB,GAAE0L,sEAAS,CAAC,IAAI,CAACzM,IAAI,CAACgO,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAClB,eAAe,CAAM,CAAC,EAC9F,IAAI,CAAC9M,IAAI,CAACiO,QAAQ,CAAC,CAAC,IAAInN,CAAA;MAAGC,SAAS,EAAC;IAAgC,GAAE,IAAI,CAACf,IAAI,CAACiO,QAAQ,CAAC,CAAK,CAAC,EACjGnN,CAAA;MAAIC,SAAS,EAAC;IAAmB,GAAEyG,uEAAS,CAAC,IAAI,CAAC0G,SAAS,CAAC,CAAC,CAAClH,OAAO,CAAC,CAAC,CAAM,CACzE,CAAC;EAEX;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAAA;EAAAL,MAAA,CAEAwH,QAAQ,GAAR,SAAAA,SAAStH,KAA0C,EAAE;IACnDZ,UAAA,CAAAtG,SAAA,CAAMwO,QAAQ,CAAArK,IAAA,OAAC+C,KAAK;;IAEpB;IACA;IACA;IACA,IAAI,cAAc,IAAI0G,MAAM,EAAE;MAC5B,IAAMa,gBAAgB,GAAG1B,kEAAQ,CAAC,IAAI,CAAC2B,OAAO,CAAC;MAE/C,IAAI,CAACC,CAAC,CAAC,wBAAwB,CAAC,CAACC,EAAE,CAAC,oBAAoB,EAAE;QAAA,OAAMH,gBAAgB,CAACI,KAAK,CAAC,CAAC;MAAA,EAAC;IAC3F;EACF,CAAC;EAAA7H,MAAA,CAED8H,cAAc,GAAd,SAAAA,eAAe5H,KAA0C,EAAE;IACzDZ,UAAA,CAAAtG,SAAA,CAAM8O,cAAc,CAAA3K,IAAA,OAAC+C,KAAK;IAE1B,OAAO,IAAI,CAAC1D,OAAO,CAACuL,YAAY,CAAC,CAAC;EACpC;;EAEA;AACF;AACA,KAFE;EAAA/H,MAAA,CAGAyG,MAAM,GAAN,SAAAA,OAAA,EAAS;IACP,OAAOjO,+DAAW,CAACyP,OAAO,CAACjC,kDAAQ,EAAE;MAAE3M,IAAI,EAAE,IAAI,CAACA;IAAK,CAAC,CAAC;EAC3D;;EAEA;AACF;AACA,KAFE;EAAA2G,MAAA,CAGAmH,UAAU,GAAV,SAAAA,WAAA,EAAa;IACX,IAAI,IAAI,CAAC9N,IAAI,CAAC4N,QAAQ,CAAC,CAAC,EAAE;MACxB,IAAI,CAAC5N,IAAI,CAACyF,IAAI,CAAC;QAAEoJ,eAAe,EAAE,IAAI,CAAC7O,IAAI,CAAC+E,SAAS,CAAC;MAAE,CAAC,CAAC;MAC1DjE,CAAC,CAACqE,MAAM,CAAC,CAAC;IACZ;EACF,CAAC;EAAAwB,MAAA,CAEDuH,SAAS,GAAT,SAAAA,UAAA,EAAwC;IACtC,IAAM/N,KAAK,GAAG,IAAI4F,sEAAQ,CAAmB,CAAC;IAC9C,IAAMqH,MAAM,GAAG,CAAC,IAAI,CAACpN,IAAI,CAAC8O,QAAQ,CAAC,CAAC;IACpC,IAAMC,UAAU,GAAG,IAAI,CAAC/O,IAAI,CAACgP,OAAO,CAAC,CAAC,GAClC,CACEhN,iEAAI,CAAC,cAAc,CAAC,EACpB,GAAG,EACHoL,MAAM,GACFjO,kEAAc,CAACgC,KAAK,CAAC,gCAAgC,EAAE;MAAE6L,IAAI,EAAEiC,KAAK,CAAC,IAAI,CAACjP,IAAI,CAACgP,OAAO,CAAC,CAAC,CAAC,CAACE,OAAO,CAAC;IAAE,CAAC,CAAC,GACtG/P,kEAAc,CAACgC,KAAK,CAAC,4BAA4B,CAAC,CACvD,GACD,CAACa,iEAAI,CAAC,iBAAiB,CAAC,EAAE,GAAG,EAAE7C,kEAAc,CAACgC,KAAK,CAAC,iCAAiC,CAAC,CAAC;IAE3FhB,KAAK,CAACU,GAAG,CAAC,QAAQ,EAAEC,CAAA;MAAMC,SAAS,EAAE1B,oEAAS,CAAC,wBAAwB,EAAE;QAAE+N,MAAM,EAANA;MAAO,CAAC;IAAE,GAAE2B,UAAiB,CAAC,CAAC;IAE1G,IAAMhK,SAAS,GAAG,IAAI,CAAC/E,IAAI,CAAC+E,SAAS,CAAC,CAAC;IACvC,IAAIA,SAAS,KAAKG,SAAS,EAAE;MAC3B/E,KAAK,CAACU,GAAG,CACP,WAAW,EACXC,CAAA,eACGkB,iEAAI,CAAC,mBAAmB,CAAC,EACzB,CACC,GAAG,EACH7C,kEAAc,CAACgC,KAAK,CAAC,6BAA6B,EAAE;QAClDgO,KAAK,EAAEvC,4EAAgB,CAAC7H,SAAS;MACnC,CAAC,CAAC,CAEA,CAAC,EACP,EACF,CAAC;IACH;IAEA,OAAO5E,KAAK;EACd,CAAC;EAAA,OAAAoL,YAAA;AAAA,EA/KoGzF,gEAAS;;;;;;;;;;;;;;;;;;;;;;AC1B5C;AACpB;AACA;AAAA,IAQ3BwJ,UAAU,0BAAArJ,UAAA;EAAAC,oFAAA,CAAAoJ,UAAA,EAAArJ,UAAA;EAAA,SAAAqJ,WAAA;IAAA,OAAArJ,UAAA,CAAAQ,KAAA,OAAAL,SAAA;EAAA;EAAA,IAAAO,MAAA,GAAA2I,UAAA,CAAA3P,SAAA;EAAAgH,MAAA,CAC7BG,IAAI,GAAJ,SAAAA,KAAA,EAAyB;IACvB,IAAM/C,MAAM,GAAG,IAAI,CAACtD,KAAK,CAACsD,MAAM;IAChC,OACEjD,CAAA;MAAOC,SAAS,EAAC;IAAY,GAC3BD,CAAA,CAACuO,wDAAe;MAACjL,EAAE,EAAEL,MAAM,CAACK,EAAE,CAAC,CAAE;MAACmL,QAAQ,EAAE,KAAM;MAACC,IAAI,EAAC,MAAM;MAACtM,KAAK,EAAC,sBAAsB;MAACuM,QAAQ,EAAE,IAAI,CAAChP,KAAK,CAACgP;IAAS,CAAE,CAAC,EAC7H3O,CAAA;MAAMC,SAAS,EAAC;IAAwB,GACtCD,CAAA,CAACsO,wDAAe;MAAChL,EAAE,EAAEL,MAAM,CAACK,EAAE,CAAC,CAAE;MAAC6H,IAAI,EAAElI,MAAM,CAACqH,MAAM,CAAC;IAAE,CAAE,CACtD,CACD,CAAC;EAEZ,CAAC;EAAA,OAAAkE,UAAA;AAAA,EAXqCxJ,gEAAS;;;;;;;;;;;;;;;;;;;;ACVmB;AAAA,IAU/CuJ,eAAe,0BAAApJ,UAAA;EAAAC,oFAAA,CAAAmJ,eAAA,EAAApJ,UAAA;EAAA,SAAAoJ,gBAAA;IAAA,OAAApJ,UAAA,CAAAQ,KAAA,OAAAL,SAAA;EAAA;EAAA,IAAAO,MAAA,GAAA0I,eAAA,CAAA1P,SAAA;EAAAgH,MAAA,CAClCG,IAAI,GAAJ,SAAAA,KAAA,EAAyB;IACvB,IAAQyI,QAAQ,GAAK,IAAI,CAAC9O,KAAK,CAAvB8O,QAAQ;IAChB,OACEzO,CAAA;MACEgB,IAAI,EAAC,OAAO;MACZ0N,IAAI,EAAE,IAAI,CAAC/O,KAAK,CAAC+O,IAAK;MACtBtM,KAAK,EAAE,IAAI,CAACzC,KAAK,CAACyC,KAAM;MACxBwM,KAAK,EAAE;QAAEC,OAAO,EAAEJ,QAAQ,GAAG,CAAC,GAAG;MAAE,CAAE;MACrCxO,SAAS,EAAC,kBAAkB;MAC5B,mBAAoB,IAAI,CAACN,KAAK,CAAC+O,IAAI,SAAI,IAAI,CAAC/O,KAAK,CAAC2D,EAAE,WAAS;MAC7D,oBAAqB,IAAI,CAAC3D,KAAK,CAAC+O,IAAI,SAAI,IAAI,CAAC/O,KAAK,CAAC2D,EAAE,iBAAe;MACpEqL,QAAQ,EAAE,IAAI,CAAChP,KAAK,CAACgP;IAAS,CAC/B,CAAC;EAEN,CAAC;EAAA,OAAAJ,eAAA;AAAA,EAf0CvJ,gEAAS;;;;;;;;;;;;;;;;;;;;ACVc;AAAA,IAO/CsJ,eAAe,0BAAAnJ,UAAA;EAAAC,oFAAA,CAAAkJ,eAAA,EAAAnJ,UAAA;EAAA,SAAAmJ,gBAAA;IAAA,OAAAnJ,UAAA,CAAAQ,KAAA,OAAAL,SAAA;EAAA;EAAA,IAAAO,MAAA,GAAAyI,eAAA,CAAAzP,SAAA;EAAAgH,MAAA,CAClCG,IAAI,GAAJ,SAAAA,KAAA,EAAyB;IACvB,OACEhG,CAAA;MAAMsD,EAAE,YAAU,IAAI,CAAC3D,KAAK,CAAC2D,EAAE,WAAS;MAACrD,SAAS,EAAC;IAAkB,GAClE,IAAI,CAACN,KAAK,CAACwL,IACR,CAAC;EAEX,CAAC;EAAA,OAAAmD,eAAA;AAAA,EAP0CtJ,gEAAS;;;;;;;;;;;;;;;;;;;;;;;;ACPc;AAC9B;AAEA;AACc;AAAA,IAQ/B+J,WAAW,0BAAA5J,UAAA;EAAAC,oFAAA,CAAA2J,WAAA,EAAA5J,UAAA;EAAA,SAAA4J,YAAA;IAAA,OAAA5J,UAAA,CAAAQ,KAAA,OAAAL,SAAA;EAAA;EAAA,IAAAO,MAAA,GAAAkJ,WAAA,CAAAlQ,SAAA;EAAAgH,MAAA,CAC9BG,IAAI,GAAJ,SAAAA,KAAA,EAAyB;IACvB,OAAOhG,CAAA;MAAKC,SAAS,EAAC;IAA0B,GAAE,IAAI,CAAC+O,WAAW,CAAC,CAAC,CAAC9I,OAAO,CAAC,CAAO,CAAC;EACvF,CAAC;EAAAL,MAAA,CAEDmJ,WAAW,GAAX,SAAAA,YAAA,EAA0C;IACxC,IAAM3P,KAAK,GAAG,IAAI4F,qEAAQ,CAAmB,CAAC;IAC9C,IAAMkD,KAAK,GAAG,IAAI,CAACxI,KAAK,CAACwI,KAAK;IAE9B,IAAIA,KAAK,CAAC8G,cAAc,EAAE;MACxB,IAAI,CAACtP,KAAK,CAACoD,OAAO,CAACmM,OAAO,CAAC,UAACjM,MAAuB,EAAW;QAC5D5D,KAAK,CAACU,GAAG,CAAC,QAAQ,GAAGkD,MAAM,CAACK,EAAE,CAAC,CAAC,EAAEtD,CAAA,CAACwO,mDAAU;UAACvL,MAAM,EAAEA,MAAO;UAAC0L,QAAQ,EAAExG,KAAK,CAACgH,UAAU,CAAChP,IAAI,CAACgI,KAAK,EAAElF,MAAM;QAAE,CAAE,CAAC,CAAC;MACnH,CAAC,CAAC;IACJ,CAAC,MAAM;MACL,IAAI,CAACtD,KAAK,CAACoD,OAAO,CAACmM,OAAO,CAAC,UAACjM,MAAuB,EAAW;QAC5D5D,KAAK,CAACU,GAAG,CAAC,QAAQ,GAAGkD,MAAM,CAACK,EAAE,CAAC,CAAC,EAAEtD,CAAA,CAAC8O,mDAAU;UAAC7L,MAAM,EAAEA,MAAO;UAACkF,KAAK,EAAEA;QAAM,CAAE,CAAC,CAAC;MACjF,CAAC,CAAC;IACJ;IAEA,OAAO9I,KAAK;EACd,CAAC;EAAA,OAAA0P,WAAA;AAAA,EApBsC/J,gEAAS;;;;;;;;;;;;;;;;;;;;ACXD;AAAA,IAE5B6G,QAAQ,0BAAAhF,KAAA;EAAAzB,oFAAA,CAAAyG,QAAA,EAAAhF,KAAA;EAAA,SAAAgF,SAAA;IAAA,OAAAhF,KAAA,CAAAlB,KAAA,OAAAL,SAAA;EAAA;EAAA,IAAAO,MAAA,GAAAgG,QAAA,CAAAhN,SAAA;EAAAgH,MAAA,CAC3BG,IAAI,GAAJ,SAAAA,KAAA,EAAyB;IACvB,OAAOhG,CAAA,YAAG,UAAW,CAAC;EACxB,CAAC;EAAA,OAAA6L,QAAA;AAAA,EAHmCvF,sEAAI;;;;;;;;;;;;;;;;;;;;;;;;;ACH0B;AACpB;AACG;AACH;AAGoB;AAAA,IAO/C+I,WAAW,0BAAAlK,UAAA;EAAAC,oFAAA,CAAAiK,WAAA,EAAAlK,UAAA;EAAA,SAAAkK,YAAA;IAAA,OAAAlK,UAAA,CAAAQ,KAAA,OAAAL,SAAA;EAAA;EAAA,IAAAO,MAAA,GAAAwJ,WAAA,CAAAxQ,SAAA;EAAAgH,MAAA,CAC9BG,IAAI,GAAJ,SAAAA,KAAA,EAAyB;IACvB,IAAM/C,MAAM,GAAG,IAAI,CAACtD,KAAK,CAACsD,MAAM;IAChC,IAAMkF,KAAK,GAAG,IAAI,CAACxI,KAAK,CAACwI,KAAK;IAC9B,IAAIlE,SAAS,GAAGhB,MAAM,CAACgB,SAAS,CAAC,CAAC;IAClC,IAAI,CAACA,SAAS,EAAE;MACdA,SAAS,GAAG,CAAC;IACf,CAAC,MAAM;MACLA,SAAS,GAAIA,SAAS,GAAG,GAAG,GAAIkE,KAAK,CAACmH,gBAAgB,CAAC,CAAC;IAC1D;IAEA,OACEtP,CAAA;MAAOC,SAAS,EAAC;IAAY,GAC3BD,CAAA,CAACuO,wDAAe;MAACjL,EAAE,EAAEL,MAAM,CAACK,EAAE,CAAC,CAAE;MAACmL,QAAQ,EAAE,KAAM;MAACC,IAAI,EAAC,MAAM;MAACtM,KAAK,EAAC;IAAsB,CAAE,CAAC,EAC9FpC,CAAA;MAAMC,SAAS,EAAC;IAAwB,GACtCD,CAAA;MAAKC,SAAS,EAAC;IAAgB,GAC7BD,CAAA,CAACsO,wDAAe;MAACnD,IAAI,EAAElI,MAAM,CAACqH,MAAM,CAAC;IAAE,CAAE,CAAC,EAC1CtK,CAAA,CAACoP,yDAAiB;MAACG,MAAM,EAAEzD,2EAAgB,CAAC7H,SAAS;IAAE,CAAE,CACtD,CAAC,EAENjE,CAAA;MAAUgB,IAAI,EAAC,OAAO;MAACwO,GAAG,EAAC,GAAG;MAACC,GAAG,EAAEtH,KAAK,CAACmH,gBAAgB,CAAC,CAAE;MAAClN,KAAK,EAAE6B,SAAU;MAAChE,SAAS,EAAC;IAAgB,CAAE,CACxG,CACD,CAAC;EAEZ,CAAC;EAAA,OAAAoP,WAAA;AAAA,EAxBsCrK,gEAAS;;;;;;;;;;;;;;;;;;;;ACbkB;AAAA,IAM/CoK,iBAAiB,0BAAAjK,UAAA;EAAAC,oFAAA,CAAAgK,iBAAA,EAAAjK,UAAA;EAAA,SAAAiK,kBAAA;IAAA,OAAAjK,UAAA,CAAAQ,KAAA,OAAAL,SAAA;EAAA;EAAA,IAAAO,MAAA,GAAAuJ,iBAAA,CAAAvQ,SAAA;EAAAgH,MAAA,CACpCG,IAAI,GAAJ,SAAAA,KAAA,EAAyB;IACvB,OAAOhG,CAAA;MAAMC,SAAS,EAAC;IAAmB,GAAE,IAAI,CAACN,KAAK,CAAC4P,MAAM,EAAC,IAAQ,CAAC;EACzE,CAAC;EAAA,OAAAH,iBAAA;AAAA,EAH4CpK,gEAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPR;AACb;AACkB;AACA;AACD;AACJ;AACU;AACjB;AACW;AACH;AAAA,IAE5BwB,QAAQ,0BAAArB,UAAA;EAAAC,oFAAA,CAAAoB,QAAA,EAAArB,UAAA;EAAA,SAAAqB,SAAA;IAAA,IAAAzH,KAAA;IAAA,SAAAsG,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAAAC,IAAA,OAAAC,KAAA,CAAAJ,IAAA,GAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;MAAAF,IAAA,CAAAE,IAAA,IAAAJ,SAAA,CAAAI,IAAA;IAAA;IAAA3G,KAAA,GAAAoG,UAAA,CAAAnC,IAAA,CAAA2C,KAAA,CAAAR,UAAA,SAAAS,MAAA,CAAAJ,IAAA;IAAAzG,KAAA,CAE3BoJ,KAAK;IAAApJ,KAAA,CAGLgE,OAAO;IAAA,OAAAhE,KAAA;EAAA;EAJP;EAGA;EAAA,IAAA8G,MAAA,GAAAW,QAAA,CAAA3H,SAAA;EAAAgH,MAAA,CAGAC,MAAM,GAAN,SAAAA,OAAOC,KAAK,EAAE;IACZZ,UAAA,CAAAtG,SAAA,CAAMiH,MAAM,CAAA9C,IAAA,OAAC+C,KAAK;IAClB,IAAI,CAACoC,KAAK,GAAG,IAAI1B,8DAAa,CAAC,IAAI,CAAC9G,KAAK,CAACT,IAAI,CAAC;;IAE/C;IACA,IAAMA,IAAI,GAAG,IAAI,CAACiJ,KAAK,CAACjJ,IAAI;;IAE5B;IACA,IAAI,CAAC6D,OAAO,GAAG7D,IAAI,CAAC6D,OAAO,CAAC,CAAC;IAC7B,IAAI,CAAC8M,aAAa,GAAG,IAAI,CAAC9M,OAAO,CAACP,GAAG,CAAC,UAACsN,CAAC;MAAA,OAAK/F,iEAAM,CAAC+F,CAAC,CAACxF,MAAM,CAAC,CAAC,CAAC;IAAA,EAAC;IAChE,IAAI,CAACyF,eAAe,GAAG,IAAI,CAAChN,OAAO,CAACP,GAAG,CAAC,UAACsN,CAAC;MAAA,OAAK/F,iEAAM,CAAC+F,CAAC,CAACE,QAAQ,CAAC,CAAC,CAAC;IAAA,EAAC;IAEpE,IAAI,CAAC9C,QAAQ,GAAGnD,iEAAM,CAAC7K,IAAI,CAACgO,QAAQ,CAAC,CAAC,CAAC;IACvC,IAAI,CAACC,QAAQ,GAAGpD,iEAAM,CAAC7K,IAAI,CAACiO,QAAQ,CAAC,CAAC,CAAC;IACvC,IAAI,CAACe,OAAO,GAAGnE,iEAAM,CAAC,IAAI,CAACkG,UAAU,CAAC/Q,IAAI,CAACgP,OAAO,CAAC,CAAC,CAAC,CAAC;IACtD,IAAI,CAACgC,UAAU,GAAGnG,iEAAM,CAAC7K,IAAI,CAACgR,UAAU,CAAC,CAAC,CAAC;IAC3C,IAAI,CAACC,kBAAkB,GAAGpG,iEAAM,CAAC7K,IAAI,CAACiR,kBAAkB,CAAC,CAAC,CAAC;IAC3D,IAAI,CAACC,SAAS,GAAGrG,iEAAM,CAAC7K,IAAI,CAACkR,SAAS,CAAC,CAAC,CAAC;IACzC,IAAI,CAACC,eAAe,GAAGtG,iEAAM,CAAC7K,IAAI,CAACmR,eAAe,CAAC,CAAC,CAAC;IACrD,IAAI,CAACC,QAAQ,GAAGvG,iEAAM,CAAC7K,IAAI,CAACoR,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC;IAE5C,IAAI,CAACC,iBAAiB,GAAG,IAAI,CAACN,UAAU,CAAC7L,SAAS,CAAC;;IAEnD;IACA,IAAI,IAAI,CAAC8J,OAAO,CAAC,CAAC,IAAIC,KAAK,CAACjP,IAAI,CAACgP,OAAO,CAAC,CAACsC,OAAO,CAACrC,KAAK,CAAC,CAAC,CAAC,EAAE;MAC1D,IAAI,CAACoC,iBAAiB,GAAG,IAAI,CAACN,UAAU,CAAC/Q,IAAI,CAACgP,OAAO,CAAC;IACxD;EACF,CAAC;EAAArI,MAAA,CAEDG,IAAI,GAAJ,SAAAA,KAAA,EAAO;IACL,OACEhG,CAAA;MAAMZ,QAAQ,EAAE,IAAI,CAACA,QAAQ,CAACe,IAAI,CAAC,IAAI;IAAE,GACvCH,CAAA;MAAKC,SAAS,EAAC;IAA0B,GAAE,IAAI,CAACd,MAAM,CAAC,CAAC,CAAC+G,OAAO,CAAC,CAAO,CACpE,CAAC;EAEX,CAAC;EAAAL,MAAA,CAED1G,MAAM,GAAN,SAAAA,OAAA,EAAS;IACP,IAAME,KAAK,GAAG,IAAI4F,qEAAQ,CAAC,CAAC;IAE5B5F,KAAK,CAACU,GAAG,CACP,UAAU,EACVC,CAAA;MAAKC,SAAS,EAAC;IAAY,GACzBD,CAAA;MAAOC,SAAS,EAAC;IAAO,GAAE5B,kEAAc,CAACgC,KAAK,CAAC,4CAA4C,CAAS,CAAC,EAErGL,CAAA;MAAOgB,IAAI,EAAC,MAAM;MAAC0N,IAAI,EAAC,UAAU;MAACzO,SAAS,EAAC,aAAa;MAACwQ,IAAI,EAAE,IAAI,CAACvD;IAAS,CAAE,CAC9E,CAAC,EACN,GACF,CAAC;IAED7N,KAAK,CAACU,GAAG,CACP,UAAU,EACVC,CAAA;MAAKC,SAAS,EAAC;IAAY,GACzBD,CAAA;MAAOC,SAAS,EAAC;IAAO,GAAE5B,kEAAc,CAACgC,KAAK,CAAC,4CAA4C,CAAS,CAAC,EAErGL,CAAA;MAAOgB,IAAI,EAAC,MAAM;MAAC0N,IAAI,EAAC,UAAU;MAACzO,SAAS,EAAC,aAAa;MAACwQ,IAAI,EAAE,IAAI,CAACtD;IAAS,CAAE,CAC9E,CAAC,EACN,EACF,CAAC;IAED9N,KAAK,CAACU,GAAG,CACP,SAAS,EACTC,CAAA;MAAKC,SAAS,EAAC;IAA+B,GAC5CD,CAAA;MAAOC,SAAS,EAAC;IAAgC,GAC/CD,CAAA,eAAO3B,kEAAc,CAACgC,KAAK,CAAC,qCAAqC,CAAQ,CAAC,EAEzEmE,gFAAgB,CAAC;MAChBvE,SAAS,EAAE,6CAA6C;MACxDiB,IAAI,EAAE,aAAa;MACnBhB,OAAO,EAAE,IAAI,CAACwQ,SAAS,CAACvQ,IAAI,CAAC,IAAI;IACnC,CAAC,CACI,CAAC,EAEP,IAAI,CAACwQ,cAAc,CAAC,CAClB,CAAC,EACN,EACF,CAAC;IAEDtR,KAAK,CAACU,GAAG,CACP,MAAM,EACNC,CAAA;MAAKC,SAAS,EAAC;IAAY,GACzBD,CAAA;MAAOC,SAAS,EAAC;IAAO,GAAE5B,kEAAc,CAACgC,KAAK,CAAC,wCAAwC,CAAS,CAAC,EAEjGL,CAAA;MAAKC,SAAS,EAAC;IAAiB,GAC9BD,CAAA;MACEC,SAAS,EAAC,aAAa;MACvBe,IAAI,EAAC,gBAAgB;MACrB0N,IAAI,EAAC,MAAM;MACX+B,IAAI,EAAE,IAAI,CAACvC,OAAQ;MACnBsB,GAAG,EAAE,IAAI,CAACe,iBAAkB;MAC5Bd,GAAG,EAAE,IAAI,CAACQ,UAAU,CAAC,MAAM;IAAE,CAC9B,CAAC,EACDzL,gFAAgB,CAAC;MAChBvE,SAAS,EAAE,uCAAuC;MAClDiB,IAAI,EAAE,cAAc;MACpBhB,OAAO,EAAE,IAAI,CAACgO,OAAO,CAAC/N,IAAI,CAAC,IAAI,EAAE,IAAI;IACvC,CAAC,CACE,CAAC,EAEL,IAAI,CAAC+N,OAAO,CAAC,CAAC,IACblO,CAAA;MAAGC,SAAS,EAAC;IAAU,GACrBD,CAAA;MAAG,SAAM;IAAmB,CAAE,CAAC,QAE/B,EAACmO,KAAK,CAAC,IAAI,CAACD,OAAO,CAAC,CAAC,CAAC,CAAC0C,QAAQ,CAACzC,KAAK,CAAC,CAAC,CAAC,GACpC9P,kEAAc,CAACgC,KAAK,CAAC,4BAA4B,CAAC,GAClDhC,kEAAc,CAACgC,KAAK,CAAC,gCAAgC,EAAE;MAAE6L,IAAI,EAAEiC,KAAK,CAAC,IAAI,CAACD,OAAO,CAAC,CAAC,CAAC,CAACE,OAAO,CAAC;IAAE,CAAC,CACnG,CAEF,CAAC,EACN,EACF,CAAC;IAED/O,KAAK,CAACU,GAAG,CACP,QAAQ,EACRC,CAAA;MAAKC,SAAS,EAAC;IAAY,GACxByP,gFAAgB,CACf;MACEvH,KAAK,EAAE,IAAI,CAAC+H,UAAU,CAAC,CAAC,IAAI,KAAK;MACjCvB,QAAQ,EAAE,IAAI,CAACuB;IACjB,CAAC,EACD7R,kEAAc,CAACgC,KAAK,CAAC,yCAAyC,CAChE,CACG,CAAC,EACN,EACF,CAAC;IAEDhB,KAAK,CAACU,GAAG,CACP,YAAY,EACZC,CAAA;MAAKC,SAAS,EAAC;IAAY,GACzBD,CAAA,CAAC0P,wEAAM;MAACvH,KAAK,EAAE,IAAI,CAAC+F,OAAO,CAAC,CAAC,IAAI,IAAI,CAACkC,SAAS,CAAC,CAAE;MAACzB,QAAQ,EAAE,IAAI,CAACyB,SAAU;MAACrD,QAAQ,EAAE,CAAC,IAAI,CAACmB,OAAO,CAAC;IAAE,GACpG7P,kEAAc,CAACgC,KAAK,CAAC,wCAAwC,CACxD,CACL,CAAC,EACN,EACF,CAAC;IAEDhB,KAAK,CAACU,GAAG,CACP,mBAAmB,EACnBC,CAAA;MAAKC,SAAS,EAAC;IAAY,GACzBD,CAAA,CAAC0P,wEAAM;MAACvH,KAAK,EAAE,IAAI,CAACkI,eAAe,CAAC,CAAE;MAAC1B,QAAQ,EAAE,IAAI,CAAC0B;IAAgB,GACnEhS,kEAAc,CAACgC,KAAK,CAAC,+CAA+C,CAC/D,CACL,CAAC,EACN,EACF,CAAC;IAEDhB,KAAK,CAACU,GAAG,CACP,sBAAsB,EACtBC,CAAA;MAAKC,SAAS,EAAC;IAAY,GACxByP,gFAAgB,CACf;MACEvH,KAAK,EAAE,IAAI,CAACgI,kBAAkB,CAAC,CAAC,IAAI,KAAK;MACzCxB,QAAQ,EAAE,IAAI,CAACwB;IACjB,CAAC,EACD9R,kEAAc,CAACgC,KAAK,CAAC,kDAAkD,CACzE,CACG,CAAC,EACN,EACF,CAAC;IAED,IAAI,IAAI,CAAC8P,kBAAkB,CAAC,CAAC,EAAE;MAC7B9Q,KAAK,CAACU,GAAG,CACP,WAAW,EACXC,CAAA;QAAKC,SAAS,EAAC;MAAY,GACzBD,CAAA;QAAOC,SAAS,EAAC;MAAO,GAAE5B,kEAAc,CAACgC,KAAK,CAAC,uCAAuC,CAAS,CAAC,EAEhGL,CAAA;QAAOgB,IAAI,EAAC,QAAQ;QAACwO,GAAG,EAAC,GAAG;QAACC,GAAG,EAAE,IAAI,CAAC1M,OAAO,CAACwC,MAAO;QAACmJ,IAAI,EAAC,UAAU;QAACzO,SAAS,EAAC,aAAa;QAACwQ,IAAI,EAAE,IAAI,CAACH;MAAS,CAAE,CAAC,EAEtHtQ,CAAA;QAAGC,SAAS,EAAC;MAAU,GAAE5B,kEAAc,CAACgC,KAAK,CAAC,sCAAsC,CAAK,CACtF,CAAC,EACN,EACF,CAAC;IACH;IAEAhB,KAAK,CAACU,GAAG,CACP,QAAQ,EACRC,CAAA;MAAKC,SAAS,EAAC;IAAY,GACzBD,CAAA,CAACwE,wEAAM;MAACxD,IAAI,EAAC,QAAQ;MAACf,SAAS,EAAC,+CAA+C;MAACiB,IAAI,EAAC,aAAa;MAAC4F,OAAO,EAAE,IAAI,CAACqB,KAAK,CAACrB;IAAQ,GAC5HzI,kEAAc,CAACgC,KAAK,CAAC,8BAA8B,CAC9C,CAAC,EACR,IAAI,CAAC8H,KAAK,CAACjJ,IAAI,CAACkH,MAAM,IACrBpG,CAAA,CAACwE,wEAAM;MAACvE,SAAS,EAAC,0BAA0B;MAACiB,IAAI,EAAC,kBAAkB;MAAC4F,OAAO,EAAE,IAAI,CAACqB,KAAK,CAAC0I,QAAS;MAAC3Q,OAAO,EAAE,IAAI,UAAO,CAACC,IAAI,CAAC,IAAI;IAAE,GAChI9B,kEAAc,CAACgC,KAAK,CAAC,8BAA8B,CAC9C,CAEP,CAAC,EACN,CAAC,EACH,CAAC;IAED,OAAOhB,KAAK;EACd,CAAC;EAAAwG,MAAA,CAED8K,cAAc,GAAd,SAAAA,eAAA,EAAiB;IAAA,IAAA5J,MAAA;IACf,OAAO+J,MAAM,CAACC,IAAI,CAAC,IAAI,CAAChO,OAAO,CAAC,CAACP,GAAG,CAAC,UAACS,MAAM,EAAE+N,CAAC;MAAA,OAC7ChR,CAAA;QAAKC,SAAS,EAAC;MAAY,GACzBD,CAAA;QAAUC,SAAS,EAAC;MAAmB,GACrCD,CAAA;QACEC,SAAS,EAAC,aAAa;QACvBe,IAAI,EAAC,MAAM;QACX0N,IAAI,EAAE,QAAQ,IAAIsC,CAAC,GAAG,CAAC,CAAE;QACzBP,IAAI,EAAE1J,MAAI,CAAC8I,aAAa,CAACmB,CAAC,CAAE;QAC5BC,WAAW,EAAE5S,kEAAc,CAACgC,KAAK,CAAC,0CAA0C,CAAC,GAAG,IAAI,IAAI2Q,CAAC,GAAG,CAAC;MAAE,CAChG,CAAC,EACD3S,6DAAS,CAACsJ,SAAS,CAAC,sBAAsB,CAAC,GAC1C3H,CAAA;QACEC,SAAS,EAAC,aAAa;QACvBe,IAAI,EAAC,MAAM;QACX0N,IAAI,EAAE,aAAa,IAAIsC,CAAC,GAAG,CAAC,CAAE;QAC9BP,IAAI,EAAE1J,MAAI,CAACgJ,eAAe,CAACiB,CAAC,CAAE;QAC9BC,WAAW,EAAE5S,kEAAc,CAACgC,KAAK,CAAC,gDAAgD,CAAC,GAAG,IAAI,IAAI2Q,CAAC,GAAG,CAAC;MAAE,CACtG,CAAC,GACA,IACI,CAAC,EACVA,CAAC,IAAI,CAAC,GACHxM,gFAAgB,CAAC;QACfxD,IAAI,EAAE,QAAQ;QACdf,SAAS,EAAE,uCAAuC;QAClDiB,IAAI,EAAE,cAAc;QACpBhB,OAAO,EAAE8Q,CAAC,IAAI,CAAC,GAAGjK,MAAI,CAACmK,YAAY,CAAC/Q,IAAI,CAAC4G,MAAI,EAAEiK,CAAC,CAAC,GAAG;MACtD,CAAC,CAAC,GACF,EACD,CAAC;IAAA,CACP,CAAC;EACJ,CAAC;EAAAnL,MAAA,CAED6K,SAAS,GAAT,SAAAA,UAAA,EAAY;IACV,IAAMjB,GAAG,GAAG0B,IAAI,CAAC1B,GAAG,CAACpR,6DAAS,CAACsJ,SAAS,CAAC,gBAAgB,CAAC,EAAE,CAAC,CAAC;IAE9D,IAAI,IAAI,CAAC5E,OAAO,CAACwC,MAAM,GAAGkK,GAAG,EAAE;MAC7B,IAAI,CAAC1M,OAAO,CAACnC,IAAI,CAACvC,6DAAS,CAACqG,YAAY,CAAC,cAAc,CAAC,CAAC;MACzD,IAAI,CAACmL,aAAa,CAACjP,IAAI,CAACmJ,iEAAM,CAAC,EAAE,CAAC,CAAC;MACnC,IAAI,CAACgG,eAAe,CAACnP,IAAI,CAACmJ,iEAAM,CAAC,EAAE,CAAC,CAAC;IACvC,CAAC,MAAM;MACLqH,KAAK,CAACzB,sEAAW,CAACtR,kEAAc,CAACgC,KAAK,CAAC,2BAA2B,EAAE;QAAEoP,GAAG,EAAHA;MAAI,CAAC,CAAC,CAAC,CAAC;IAChF;EACF,CAAC;EAAA5J,MAAA,CAEDqL,YAAY,GAAZ,SAAAA,aAAaF,CAAC,EAAE;IACd,IAAI,CAACjO,OAAO,CAACsO,MAAM,CAACL,CAAC,EAAE,CAAC,CAAC;IACzB,IAAI,CAACnB,aAAa,CAACwB,MAAM,CAACL,CAAC,EAAE,CAAC,CAAC;IAC/B,IAAI,CAACjB,eAAe,CAACsB,MAAM,CAACL,CAAC,EAAE,CAAC,CAAC;EACnC,CAAC;EAAAnL,MAAA,CAEDvF,IAAI,GAAJ,SAAAA,KAAA,EAAO;IAAA,IAAAgR,MAAA;IACL,IAAI,IAAI,CAACpE,QAAQ,CAAC,CAAC,KAAK,EAAE,EAAE;MAC1B,MAAM,IAAI0C,wDAAS,CAACvR,kEAAc,CAACgC,KAAK,CAAC,wCAAwC,CAAC,CAAC;IACrF;IAEA,IAAI,IAAI,CAAC0C,OAAO,CAACwC,MAAM,GAAG,CAAC,EAAE;MAC3B,MAAM,IAAIqK,wDAAS,CAACvR,kEAAc,CAACgC,KAAK,CAAC,2BAA2B,CAAC,CAAC;IACxE;IAEA,IAAMkR,UAAU,GAAG,IAAI,CAACpJ,KAAK,CAACjJ,IAAI,CAACkH,MAAM;IACzC,IAAMrD,OAAO,GAAG,IAAI,CAACA,OAAO,CAACP,GAAG,CAAC,UAACS,MAAM,EAAE+N,CAAC,EAAK;MAC9C/N,MAAM,CAACe,cAAc,CAAC;QACpBsG,MAAM,EAAEgH,MAAI,CAACzB,aAAa,CAACmB,CAAC,CAAC,CAAC,CAAC;QAC/BhB,QAAQ,EAAEsB,MAAI,CAACvB,eAAe,CAACiB,CAAC,CAAC,CAAC;MACpC,CAAC,CAAC;MAEF,OAAOO,UAAU,GAAGtO,MAAM,CAAC3C,IAAI,GAAG2C,MAAM,CAAC3C,IAAI,CAACwC,UAAU;IAC1D,CAAC,CAAC;IAEF,OAAO;MACLoK,QAAQ,EAAE,IAAI,CAACA,QAAQ,CAAC,CAAC;MACzBC,QAAQ,EAAE,IAAI,CAACA,QAAQ,CAAC,CAAC;MACzBe,OAAO,EAAE,IAAI,CAACsD,eAAe,CAAC,IAAI,CAACtD,OAAO,CAAC,CAAC,CAAC;MAC7CgC,UAAU,EAAE,IAAI,CAACA,UAAU,CAAC,CAAC;MAC7BE,SAAS,EAAE,IAAI,CAACA,SAAS,CAAC,CAAC;MAC3BC,eAAe,EAAE,IAAI,CAACA,eAAe,CAAC,CAAC;MACvCF,kBAAkB,EAAE,IAAI,CAACA,kBAAkB,CAAC,CAAC;MAC7CG,QAAQ,EAAE,IAAI,CAACA,QAAQ,CAAC,CAAC;MACzBvN,OAAO,EAAPA;IACF,CAAC;EACH,CAAC;EAAA8C,MAAA,CAEKzG,QAAQ;IAAA,IAAA0I,SAAA,GAAAC,uFAAA,eAAAC,sEAAA,CAAd,SAAAE,QAAeuJ,KAAK;MAAA,OAAAzJ,sEAAA,UAAAQ,SAAAC,QAAA;QAAA;UAAA,QAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAClB8I,KAAK,CAACC,cAAc,CAAC,CAAC;cAACjJ,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAE,IAAA;cAAA,OAGf,IAAI,CAAChJ,KAAK,CAACP,QAAQ,CAAC,IAAI,CAACkB,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC6H,KAAK,CAAC;YAAA;cAAAM,QAAA,CAAAE,IAAA;cAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAkJ,EAAA,GAAAlJ,QAAA;cAElD,IAAIA,QAAA,CAAAkJ,EAAA,YAAiB/B,wDAAS,EAAE;gBAC9BvR,8DAAU,CAACY,IAAI,CAAC;kBAAE+B,IAAI,EAAE;gBAAQ,CAAC,EAAEyH,QAAA,CAAAkJ,EAAA,CAAMC,OAAO,CAAC;cACnD,CAAC,MAAM;gBACLC,OAAO,CAACC,KAAK,CAAArJ,QAAA,CAAAkJ,EAAM,CAAC;gBACpB;gBACAtT,8DAAU,CAACY,IAAI,CAAC;kBAAE+B,IAAI,EAAE;gBAAQ,CAAC,EAAE3C,kEAAc,CAACgC,KAAK,CAAC,6BAA6B,CAAC,CAAC;cACzF;YAAC;YAAA;cAAA,OAAAoI,QAAA,CAAAO,IAAA;UAAA;QAAA;MAAA,GAAAd,OAAA;IAAA,CAEJ;IAAA,SAAA9I,SAAA6J,EAAA;MAAA,OAAAnB,SAAA,CAAAnC,KAAA,OAAAL,SAAA;IAAA;IAAA,OAAAlG,QAAA;EAAA;EAAAyG,MAAA;IAAA,IAAAkM,QAAA,GAAAhK,uFAAA,eAAAC,sEAAA,CAED,SAAAgK,SAAA;MAAA,OAAAhK,sEAAA,UAAAiK,UAAAC,SAAA;QAAA;UAAA,QAAAA,SAAA,CAAAxJ,IAAA,GAAAwJ,SAAA,CAAAvJ,IAAA;YAAA;cACE,IAAI,CAACR,KAAK,CAACrB,OAAO,GAAG,IAAI;cAACoL,SAAA,CAAAxJ,IAAA;cAAAwJ,SAAA,CAAAvJ,IAAA;cAAA,OAElBoD,4DAAY,CAACoG,YAAY,CAAC,IAAI,CAAChK,KAAK,CAACjJ,IAAI,CAAC;YAAA;cAChD,IAAI,CAACiJ,KAAK,CAAC0I,QAAQ,GAAG,IAAI;YAAC;cAAAqB,SAAA,CAAAxJ,IAAA;cAE3B,IAAI,CAACP,KAAK,CAACrB,OAAO,GAAG,KAAK;cAC1B9G,CAAC,CAACqE,MAAM,CAAC,CAAC;cAAC,OAAA6N,SAAA,CAAAE,MAAA;YAAA;YAAA;cAAA,OAAAF,SAAA,CAAAlJ,IAAA;UAAA;QAAA;MAAA,GAAAgJ,QAAA;IAAA,CAEd;IAAA,SAAAK,QAAA;MAAA,OAAAN,QAAA,CAAApM,KAAA,OAAAL,SAAA;IAAA;IAAA,OAAA+M,OAAA;EAAA;EAAAxM,MAAA,CAEDoK,UAAU,GAAV,SAAAA,WAAWqC,IAAI,EAAEC,GAAG,EAAU;IAAA,IAAbA,GAAG;MAAHA,GAAG,GAAG,KAAK;IAAA;IAC1B,IAAMC,SAAS,GAAGrE,KAAK,CAACmE,IAAI,CAAC;IAE7B,IAAIA,IAAI,KAAK,KAAK,IAAI,CAACE,SAAS,CAACC,OAAO,CAAC,CAAC,EAAE,OAAOF,GAAG,KAAK,KAAK,GAAG,IAAI,CAACtC,UAAU,CAACsC,GAAG,CAAC,GAAG,IAAI;IAE9F,OAAOC,SAAS,CAACE,MAAM,CAAC,kBAAkB,CAAC;EAC7C,CAAC;EAAA7M,MAAA,CAED2L,eAAe,GAAf,SAAAA,gBAAgBc,IAAI,EAAE;IACpB,IAAME,SAAS,GAAGrE,KAAK,CAACmE,IAAI,CAAC;IAE7B,IAAI,CAACA,IAAI,IAAI,CAACE,SAAS,CAACC,OAAO,CAAC,CAAC,EAAE,OAAO,KAAK;IAE/C,OAAOD,SAAS,CAACE,MAAM,CAAC,CAAC;EAC3B,CAAC;EAAA,OAAAlM,QAAA;AAAA,EAnUmCxB,gEAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVqB;AACjC;AACU;AAGD;AACS;AACD;AACH;AACQ;AAAA,IAMpC4N,QAAQ,0BAAAzN,UAAA;EAAAC,oFAAA,CAAAwN,QAAA,EAAAzN,UAAA;EAAA,SAAAyN,SAAA;IAAA,OAAAzN,UAAA,CAAAQ,KAAA,OAAAL,SAAA;EAAA;EAAA,IAAAO,MAAA,GAAA+M,QAAA,CAAA/T,SAAA;EAAAgH,MAAA,CAC3BC,MAAM,GAAN,SAAAA,OAAOC,KAA0C,EAAE;IACjDZ,UAAA,CAAAtG,SAAA,CAAMiH,MAAM,CAAA9C,IAAA,OAAC+C,KAAK;IAClB,IAAI,CAACoC,KAAK,GAAG,IAAIwK,yDAAS,CAAC,IAAI,CAAChT,KAAK,CAACT,IAAI,CAAC;EAC7C,CAAC;EAAA2G,MAAA,CAEDG,IAAI,GAAJ,SAAAA,KAAA,EAAyB;IACvB,IAAM9G,IAAI,GAAG,IAAI,CAACS,KAAK,CAACT,IAAI;IAC5B,IAAMiJ,KAAK,GAAG,IAAI,CAACA,KAAK;IACxB,IAAMS,QAAQ,GAAGmD,2DAAY,CAACnD,QAAQ,CAAC1J,IAAI,EAAE,IAAI,CAAC;IAElD0J,QAAQ,CAAC7I,GAAG,CACV,MAAM,EACNC,CAAA,CAACwE,wEAAM;MAACtE,OAAO,EAAEiI,KAAK,CAAC0K,UAAW;MAAC3R,IAAI,EAAC;IAAa,GAClD7C,kEAAc,CAACgC,KAAK,CAAC,6BAA6B,CAC7C,CACV,CAAC;IAED,OACEL,CAAA;MAAKC,SAAS,EAAC,MAAM;MAAC,WAASf,IAAI,CAACoE,EAAE,CAAC;IAAE,GACtC,IAAI,CAACoJ,YAAY,CAAC9D,QAAQ,CAAC1C,OAAO,CAAC,CAAC,CAAC,EAItClG,CAAA;MAAKC,SAAS,EAAC;IAAc,GAAE,IAAI,CAAC6S,cAAc,CAAC,CAAC,CAAC5M,OAAO,CAAC,CAAO,CACjE,CAAC;EAEV,CAAC;EAAAL,MAAA,CAEDiN,cAAc,GAAd,SAAAA,eAAA,EAA6C;IAC3C,IAAMzT,KAAK,GAAG,IAAI4F,qEAAQ,CAAmB,CAAC;IAC9C,IAAM/F,IAAI,GAAG,IAAI,CAACS,KAAK,CAACT,IAAI;IAE5BG,KAAK,CAACU,GAAG,CAAC,OAAO,EAAEC,CAAA;MAAIC,SAAS,EAAC;IAAY,GAAEf,IAAI,CAACgO,QAAQ,CAAC,CAAM,CAAC,CAAC;IACrE7N,KAAK,CAACU,GAAG,CAAC,UAAU,EAAEC,CAAA;MAAGC,SAAS,EAAC;IAAe,GAAEf,IAAI,CAACiO,QAAQ,CAAC,CAAK,CAAC,CAAC;IACzE9N,KAAK,CAACU,GAAG,CAAC,MAAM,EAAEC,CAAA,eAAO,IAAI,CAAC+S,eAAe,CAAC,CAAC,CAAC7M,OAAO,CAAC,CAAQ,CAAC,CAAC;IAElE,OAAO7G,KAAK;EACd,CAAC;EAAAwG,MAAA,CAEDkN,eAAe,GAAf,SAAAA,gBAAA,EAA8C;IAC5C,IAAM5K,KAAK,GAAG,IAAI,CAACA,KAAK;IACxB,IAAM9I,KAAK,GAAG,IAAI4F,qEAAQ,CAAmB,CAAC;IAC9C,IAAM/F,IAAI,GAAG,IAAI,CAACS,KAAK,CAACT,IAAI;IAC5B,IAAMkO,SAAS,GAAG,IAAI,CAACA,SAAS,CAAClO,IAAI,CAACoR,QAAQ,CAAC,CAAC,CAAC;IAEjDjR,KAAK,CAACU,GAAG,CACP,UAAU,EACVC,CAAA,mBACEA,CAAA;MAAQC,SAAS,EAAC;IAAS,GAAC,iDAAuD,CAAC,EACpFD,CAAA,CAAC+O,yDAAW;MAAChM,OAAO,EAAE7D,IAAI,CAAC6D,OAAO,CAAC,CAAE;MAACoF,KAAK,EAAEA;IAAM,CAAE,CAC7C,CACZ,CAAC;IACD9I,KAAK,CAACU,GAAG,CACP,QAAQ,EACRC,CAAA;MAAKC,SAAS,EAAC;IAAa,GACzB,CAACmN,SAAS,CAAClC,OAAO,CAAC,CAAC,IAAIlL,CAAA;MAAKC,SAAS,EAAC;IAAuB,GAAEmN,SAAS,CAAClH,OAAO,CAAC,CAAO,CAAC,EAC3FlG,CAAA,CAACwE,wEAAM;MACLvE,SAAS,EAAC,oCAAoC;MAC9C6G,OAAO,EAAEqB,KAAK,CAAC6K,cAAe;MAC9B9S,OAAO,EAAEiI,KAAK,CAAC/I,QAAQ,CAACe,IAAI,CAACgI,KAAK,CAAE;MACpC4E,QAAQ,EAAE,CAAC5E,KAAK,CAAC8K,kBAAkB,CAAC;IAAE,GAErC5U,kEAAc,CAACgC,KAAK,CAAC,oCAAoC,CACpD,CACL,CACP,CAAC;IACD,OAAOhB,KAAK;EACd,CAAC;EAAAwG,MAAA,CAEDqN,UAAU,GAAV,SAAAA,WAAA,EAAmB;IACjBnH,2DAAY,CAACoG,YAAY,CAAC,IAAI,CAACxS,KAAK,CAACT,IAAI,CAAC;EAC5C,CAAC;EAAA2G,MAAA,CAEDsN,QAAQ,GAAR,SAAAA,SAAA,EAAiB;IACfpH,2DAAY,CAACqH,UAAU,CAAC,IAAI,CAACzT,KAAK,CAACT,IAAI,CAAC;EAC1C,CAAC;EAAA2G,MAAA,CAED6G,YAAY,GAAZ,SAAAA,aAAa9D,QAA4B,EAAoB;IAC3D,OACE,CAAC,CAACA,QAAQ,CAACrD,MAAM,IACfvF,CAAA,CAAC0L,0EAAQ;MACPxK,IAAI,EAAC,mBAAmB;MACxBjB,SAAS,EAAC,uBAAuB;MACjC4M,aAAa,EAAC,sBAAsB;MACpC1D,eAAe,EAAC,kCAAkC;MAClDC,qBAAqB,EAAE/K,kEAAc,CAACgC,KAAK,CAAC,gEAAgE;IAAE,GAE7GuI,QACO,CACX;EAEL,CAAC;EAAA/C,MAAA,CAEDuH,SAAS,GAAT,SAAAA,UAAUkD,QAAgB,EAAE;IAC1B,IAAMjR,KAAK,GAAG,IAAI4F,qEAAQ,CAAmB,CAAC;IAC9C,IAAM/F,IAAI,GAAG,IAAI,CAACS,KAAK,CAACT,IAAI;IAE5B,IAAIb,iEAAW,CAACmM,IAAI,IAAI,CAACtL,IAAI,CAACmU,OAAO,CAAC,CAAC,IAAI,CAACnU,IAAI,CAAC8O,QAAQ,CAAC,CAAC,EAAE;MAC3D3O,KAAK,CAACU,GAAG,CACP,eAAe,EACfC,CAAA,eACEA,CAAA;QAAGC,SAAS,EAAC;MAAgC,CAAE,CAAC,EAC/C5B,kEAAc,CAACgC,KAAK,CAAC,+BAA+B,CACjD,CACR,CAAC;IACH;IAEA,IAAInB,IAAI,CAACgP,OAAO,CAAC,CAAC,EAAE;MAClB7O,KAAK,CAACU,GAAG,CACP,UAAU,EACVC,CAAA,eACEA,CAAA;QAAG,SAAM;MAAyB,CAAE,CAAC,EACpCd,IAAI,CAAC8O,QAAQ,CAAC,CAAC,GACZ3P,kEAAc,CAACgC,KAAK,CAAC,4BAA4B,CAAC,GAClDhC,kEAAc,CAACgC,KAAK,CAAC,gCAAgC,EAAE;QAAE6L,IAAI,EAAEiC,KAAK,CAACjP,IAAI,CAACgP,OAAO,CAAC,CAAC,CAAC,CAACE,OAAO,CAAC;MAAE,CAAC,CAChG,CACR,CAAC;IACH;IAEA,IAAIlP,IAAI,CAACmU,OAAO,CAAC,CAAC,EAAE;MAClBhU,KAAK,CAACU,GAAG,CACP,WAAW,EACXC,CAAA,eACEA,CAAA;QAAGC,SAAS,EAAC;MAAwB,CAAE,CAAC,EACvC5B,kEAAc,CAACgC,KAAK,CAAC,mCAAmC,EAAE;QAAEoP,GAAG,EAAEa;MAAS,CAAC,CACxE,CACR,CAAC;MAED,IAAI,CAACpR,IAAI,CAACoU,aAAa,CAAC,CAAC,EAAE;QACzBjU,KAAK,CAACU,GAAG,CACP,oBAAoB,EACpBC,CAAA,eACEA,CAAA;UAAGC,SAAS,oBAAiB,IAAI,CAACkI,KAAK,CAACoL,QAAQ,CAAC,CAAC,GAAG,OAAO,GAAG,aAAa;QAAgB,CAAE,CAAC,EAC9FlV,kEAAc,CAACgC,KAAK,CAAC,yCAAyC,CAC3D,CACR,CAAC;MACH;IACF;IAEA,OAAOhB,KAAK;EACd,CAAC;EAAA,OAAAuT,QAAA;AAAA,EA7ImC5N,gEAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;ACfZ;AACc;AAES;AACe;AACvC;AAAA,IAEbwO,YAAY,0BAAA3M,KAAA;EAAAzB,oFAAA,CAAAoO,YAAA,EAAA3M,KAAA;EAAA,SAAA2M,aAAA;IAAA,IAAAzU,KAAA;IAAA,SAAAsG,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAAAC,IAAA,OAAAC,KAAA,CAAAJ,IAAA,GAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;MAAAF,IAAA,CAAAE,IAAA,IAAAJ,SAAA,CAAAI,IAAA;IAAA;IAAA3G,KAAA,GAAA8H,KAAA,CAAA7D,IAAA,CAAA2C,KAAA,CAAAkB,KAAA,SAAAjB,MAAA,CAAAJ,IAAA;IAAAzG,KAAA,CAC/BG,IAAI,GAAiC,IAAI;IAAAH,KAAA,CACzC+H,OAAO,GAAY,KAAK;IAAA,OAAA/H,KAAA;EAAA;EAAA,IAAA8G,MAAA,GAAA2N,YAAA,CAAA3U,SAAA;EAAAgH,MAAA,CAExBC,MAAM,GAAN,SAAAA,OAAOC,KAAoB,EAAE;IAAA,IAAAgB,MAAA;IAC3BF,KAAA,CAAAhI,SAAA,CAAMiH,MAAM,CAAA9C,IAAA,OAAC+C,KAAK;IAElB,IAAMmB,MAAM,GAAGlH,CAAC,CAACuB,KAAK,CAAC4F,KAAK,CAAC,IAAI,CAAC;IAClC,IAAI,CAACjI,IAAI,GAAGb,6DAAS,CAAC0F,OAAO,CAAY,MAAM,EAAEmD,MAAM,CAAC;IAExD,IAAI,CAAC,IAAI,CAAChI,IAAI,EAAE;MACd,IAAI,CAAC4H,OAAO,GAAG,IAAI;MAEnBzI,6DAAS,CAAC+I,IAAI,CAAY,WAAW,EAAEF,MAAM,CAAC,CAACxD,IAAI,CAAC,UAAC2D,IAAI,EAAK;QAC5DN,MAAI,CAAC7H,IAAI,GAAGmI,IAAI;QAChBN,MAAI,CAACD,OAAO,GAAG,KAAK;QACpBzI,gEAAY,CAACsR,sEAAW,CAACtR,kEAAc,CAACgC,KAAK,CAAC,kCAAkC,CAAC,CAAC,CAAC;QACnFL,CAAC,CAACqE,MAAM,CAAC,CAAC;MACZ,CAAC,CAAC;IACJ;EACF,CAAC;EAAAwB,MAAA,CAEDG,IAAI,GAAJ,SAAAA,KAAA,EAAyB;IACvB,IAAI,IAAI,CAACc,OAAO,EAAE;MAChB,OAAO9G,CAAA,CAACuG,kFAAgB,MAAE,CAAC;IAC7B;IAEA,OACEvG,CAAA;MAAKC,SAAS,EAAC;IAAW,GACxBD,CAAA;MAAKC,SAAS,EAAC;IAAW,GACxBD,CAAA,CAAC4S,iDAAQ;MAAC1T,IAAI,EAAE,IAAI,CAACA;IAAK,CAAE,CACzB,CACF,CAAC;EAEV,CAAC;EAAA,OAAAsU,YAAA;AAAA,EAlCuClN,sEAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPX;AACqB;AACJ;AACa;AACP;AACnB;AACqB;AACF;AACN;AACC;AACgB;AACI;AAEvC;AAAA,IAEbqN,SAAS,0BAAA9M,KAAA;EAAAzB,oFAAA,CAAAuO,SAAA,EAAA9M,KAAA;EAAA,SAAA8M,UAAA;IAAA,IAAA5U,KAAA;IAAA,SAAAsG,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAAAC,IAAA,OAAAC,KAAA,CAAAJ,IAAA,GAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;MAAAF,IAAA,CAAAE,IAAA,IAAAJ,SAAA,CAAAI,IAAA;IAAA;IAAA3G,KAAA,GAAA8H,KAAA,CAAA7D,IAAA,CAAA2C,KAAA,CAAAkB,KAAA,SAAAjB,MAAA,CAAAJ,IAAA;IAAAzG,KAAA,CAC5B+H,OAAO,GAAY,KAAK;IAAA/H,KAAA,CACxBG,IAAI,GAAqB,IAAI;IAAA,OAAAH,KAAA;EAAA;EAAA,IAAA8G,MAAA,GAAA8N,SAAA,CAAA9U,SAAA;EAAAgH,MAAA,CAE7BC,MAAM,GAAN,SAAAA,OAAOC,KAAoB,EAAE;IAC3Bc,KAAA,CAAAhI,SAAA,CAAMiH,MAAM,CAAA9C,IAAA,OAAC+C,KAAK;IAElB,IAAI,CAACoC,KAAK,GAAG,IAAIuL,6DAAa,CAAC;MAC7BE,IAAI,EAAE5T,CAAC,CAACuB,KAAK,CAAC4F,KAAK,CAAC,MAAM,CAAC;MAC3BiD,MAAM,EAAEpK,CAAC,CAACuB,KAAK,CAAC4F,KAAK,CAAC,QAAQ;IAChC,CAAC,CAAC;IAEF,IAAI,CAACgB,KAAK,CAAC0L,OAAO,CAAC,CAAC;IAEpBxV,gEAAY,CAACsR,sEAAW,CAACtR,kEAAc,CAACgC,KAAK,CAAC,0BAA0B,CAAC,CAAC,CAAC;EAC7E,CAAC;EAAAwF,MAAA,CAEDwH,QAAQ,GAAR,SAAAA,SAAStH,KAAoB,EAAE;IAC7Bc,KAAA,CAAAhI,SAAA,CAAMwO,QAAQ,CAAArK,IAAA,OAAC+C,KAAK;EACtB,CAAC;EAAAF,MAAA,CAEDG,IAAI,GAAJ,SAAAA,KAAA,EAAyB;IACvB,IAAI,IAAI,CAACc,OAAO,EAAE;MAChB,OAAO9G,CAAA,CAACuG,mFAAgB,MAAE,CAAC;IAC7B;IAEA,IAAI,IAAI,CAACrH,IAAI,EAAE;MACb,OACEc,CAAA;QAAKC,SAAS,EAAC;MAAW,GACxBD,CAAA;QAAKC,SAAS,EAAC;MAAW,GACxBD,CAAA,CAAC4S,kDAAQ;QAAC1T,IAAI,EAAE,IAAI,CAACA;MAAK,CAAE,CACzB,CACF,CAAC;IAEV;IAEA,OACEc,CAAA;MAAKC,SAAS,EAAC;IAAW,GACvBkB,kFAAmB,CAAC2S,IAAI,CAAC,CAAC,EAC3B9T,CAAA;MAAKC,SAAS,EAAC;IAAW,GACxBD,CAAA;MAAKC,SAAS,EAAC;IAAkB,GAC/BD,CAAA;MAAKC,SAAS,EAAC;IAAuB,GACpCD,CAAA,aAAK0G,sEAAS,CAAC,IAAI,CAACmB,YAAY,CAAC,CAAC,CAAC3B,OAAO,CAAC,CAAC,CAAM,CAC/C,CAAC,EACNlG,CAAA;MAAKC,SAAS,EAAC;IAAiC,GAC9CD,CAAA;MAAKC,SAAS,EAAC;IAAmB,GAChCD,CAAA;MAAIC,SAAS,EAAC;IAAwB,GAAEyG,sEAAS,CAAC,IAAI,CAACqN,SAAS,CAAC,CAAC,CAAC7N,OAAO,CAAC,CAAC,CAAM,CAAC,EACnFlG,CAAA;MAAIC,SAAS,EAAC;IAA0B,GAAEyG,sEAAS,CAAC,IAAI,CAACsN,WAAW,CAAC,CAAC,CAAC9N,OAAO,CAAC,CAAC,CAAM,CACnF,CAAC,EACNlG,CAAA,CAAC2K,sDAAQ;MAACxC,KAAK,EAAE,IAAI,CAACA;IAAM,CAAE,CAC3B,CACF,CACF,CACF,CAAC;EAEV,CAAC;EAAAtC,MAAA,CAEDgC,YAAY,GAAZ,SAAAA,aAAA,EAA2C;IAAA,IAAAd,MAAA;IACzC,IAAM1H,KAAK,GAAG,IAAI4F,qEAAQ,CAAmB,CAAC;IAC9C,IAAMrF,YAAY,GAAGvB,6DAAS,CAACsJ,SAAS,CAAU,qBAAqB,CAAC;IAExEtI,KAAK,CAACU,GAAG,CACP,eAAe,EACfC,CAAA,CAACwE,yEAAM;MACLtD,IAAI,EAAC,aAAa;MAClBjB,SAAS,EAAC,6DAA6D;MACvEkG,aAAa,EAAC,oBAAoB;MAClCjG,OAAO,EAAE,SAAAA,QAAA,EAAM;QACb6G,MAAI,CAACkN,aAAa,CAAC,CAAC;MACtB,CAAE;MACFlH,QAAQ,EAAE,CAACnN;IAAa,GAEvBvB,kEAAc,CAACgC,KAAK,4BAAyBT,YAAY,GAAG,mBAAmB,GAAG,0BAA0B,CAAE,CACzG,CACV,CAAC;IAEDP,KAAK,CAACU,GAAG,CACP,KAAK,EACLC,CAAA,CAAC2G,iFAAc;MACbwC,eAAe,EAAC,QAAQ;MACxBlJ,SAAS,EAAC,kBAAkB;MAC5BmJ,qBAAqB,EAAE/K,kEAAc,CAACgC,KAAK,CAAC,2DAA2D;IAAE,GAExG,IAAI,CAACgJ,QAAQ,CAAC,CAAC,CAACnD,OAAO,CAAC,CACX,CAClB,CAAC;IAED,OAAO7G,KAAK;EACd,CAAC;EAAAwG,MAAA,CAEDmO,WAAW,GAAX,SAAAA,YAAA,EAA0C;IAAA,IAAA1C,MAAA;IACxC,IAAMjS,KAAK,GAAG,IAAI4F,qEAAQ,CAAmB,CAAC;IAE9C5F,KAAK,CAACU,GAAG,CACP,SAAS,EACTyE,iFAAgB,CAAC;MACfgF,KAAK,EAAEnL,kEAAc,CAACgC,KAAK,CAAC,sCAAsC,CAAC;MACnEa,IAAI,EAAE,aAAa;MACnBjB,SAAS,EAAE,qBAAqB;MAChCC,OAAO,EAAE,SAAAA,QAAA,EAAM;QACboR,MAAI,CAACnJ,KAAK,CAAC0L,OAAO,CAAC,CAAC;MACtB;IACF,CAAC,CACH,CAAC;IAED,OAAOxU,KAAK;EACd,CAAC;EAAAwG,MAAA,CAEDkO,SAAS,GAAT,SAAAA,UAAA,EAAY;IACV,OAAO5S,kFAAmB,CAAC4S,SAAS,CAAC,CAAC;EACxC,CAAC;EAAAlO,MAAA,CAEDwD,QAAQ,GAAR,SAAAA,SAAA,EAAW;IACT,OAAOlI,kFAAmB,CAACkI,QAAQ,CAAC,CAAC;EACvC;;EAEA;AACF;AACA,KAFE;EAAAxD,MAAA,CAGAoO,aAAa,GAAb,SAAAA,cAAA,EAAsB;IACpB,IAAI,CAAC5V,iEAAW,CAACmM,IAAI,EAAE;MACrBnM,6DAAS,CAACY,IAAI,CAACwU,2EAAU,CAAC;MAC1B;IACF;IAEAzT,CAAC,CAACuB,KAAK,CAACqG,GAAG,CAACvJ,6DAAS,CAAC,mBAAmB,CAAC,CAAC;EAC7C,CAAC;EAAA,OAAAsV,SAAA;AAAA,EA9HoCrN,sEAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChBR;AAEa;AACK;AACO;AACZ;AACM;AACF;AACG;AACT;AACF;AAAA,IAEvB7E,QAAQ,0BAAA0D,UAAA;EAAAC,oFAAA,CAAA3D,QAAA,EAAA0D,UAAA;EAAA,SAAA1D,SAAA;IAAA,OAAA0D,UAAA,CAAAQ,KAAA,OAAAL,SAAA;EAAA;EAAA,IAAAO,MAAA,GAAApE,QAAA,CAAA5C,SAAA;EAAAgH,MAAA,CAC3BC,MAAM,GAAN,SAAAA,OAAOC,KAAK,EAAE;IAAA,IAAAoO,gBAAA,EAAAC,iBAAA;IACZjP,UAAA,CAAAtG,SAAA,CAAMiH,MAAM,CAAA9C,IAAA,OAAC+C,KAAK;IAElB,IAAI,CAACiN,cAAc,GAAG,KAAK;IAE3B,IAAI,CAACqB,WAAW,GAAG,GAAAF,gBAAA,GAAC,IAAI,CAACxU,KAAK,CAACT,IAAI,aAAfiV,gBAAA,CAAiBb,aAAa,CAAC,CAAC,OAAAc,iBAAA,GAAI,IAAI,CAACzU,KAAK,CAACT,IAAI,qBAAfkV,iBAAA,CAAiBjE,kBAAkB,CAAC,CAAC;IAC7F,IAAI,CAACmE,aAAa,GAAG,KAAK;IAC1B,IAAI,CAACC,cAAc,GAAG,IAAI;EAC5B,CAAC;EAAA1O,MAAA,CAEDwH,QAAQ,GAAR,SAAAA,SAAStH,KAAK,EAAE;IACdZ,UAAA,CAAAtG,SAAA,CAAMwO,QAAQ,CAAArK,IAAA,OAAC+C,KAAK;IAEpB,IAAI,CAACyO,YAAY,GAAG,IAAI,CAACA,YAAY,CAACrU,IAAI,CAAC,IAAI,CAAC;IAChDsM,MAAM,CAACgI,gBAAgB,CAAC,cAAc,EAAE,IAAI,CAACD,YAAY,CAAC;EAC5D,CAAC;EAAA3O,MAAA,CAED6O,QAAQ,GAAR,SAAAA,SAAS3O,KAAK,EAAE;IACdZ,UAAA,CAAAtG,SAAA,CAAM6V,QAAQ,CAAA1R,IAAA,OAAC+C,KAAK;IAEpB0G,MAAM,CAACkI,mBAAmB,CAAC,cAAc,EAAE,IAAI,CAACH,YAAY,CAAC;EAC/D,CAAC;EAAA3O,MAAA,CAEDG,IAAI,GAAJ,SAAAA,KAAA,EAAO;IACL,IAAM9G,IAAI,GAAG,IAAI,CAACS,KAAK,CAACT,IAAI;IAC5B,IAAM6D,OAAO,GAAG7D,IAAI,CAAC6D,OAAO,CAAC,CAAC,IAAI,EAAE;IACpC,IAAIuN,QAAQ,GAAGpR,IAAI,CAACiR,kBAAkB,CAAC,CAAC,GAAGjR,IAAI,CAACoR,QAAQ,CAAC,CAAC,GAAG,CAAC;IAE9D,IAAIA,QAAQ,KAAK,CAAC,EAAEA,QAAQ,GAAGvN,OAAO,CAACwC,MAAM;IAE7C,IAAM6H,SAAS,GAAG,IAAI,CAACA,SAAS,CAACkD,QAAQ,CAAC;IAE1C,OACEtQ,CAAA;MAAKC,SAAS,EAAC,WAAW;MAAC,WAASf,IAAI,CAACoE,EAAE,CAAC;IAAE,GAC5CtD,CAAA;MAAKC,SAAS,EAAC;IAAa,GAC1BD,CAAA;MAAKC,SAAS,EAAC;IAA6B,GAC1CD,CAAA;MAAIC,SAAS,EAAC;IAAmB,GAAEf,IAAI,CAACgO,QAAQ,CAAC,CAAM,CAAC,EACvDhO,IAAI,CAACiO,QAAQ,CAAC,CAAC,IAAInN,CAAA;MAAGC,SAAS,EAAC;IAA+B,GAAEf,IAAI,CAACiO,QAAQ,CAAC,CAAK,CAClF,CAAC,EAENnN,CAAA;MAAKC,SAAS,EAAC;IAAqB,GACjCf,IAAI,CAAC0V,YAAY,CAAC,CAAC,IAClB5U,CAAA,CAACkU,yEAAO;MAAC/I,IAAI,EAAE9M,kEAAc,CAACgC,KAAK,CAAC,6BAA6B;IAAE,GACjEL,CAAA,CAACwE,wEAAM;MAACvE,SAAS,EAAC,2BAA2B;MAACC,OAAO,EAAE,IAAI,CAAC2S,UAAU,CAAC1S,IAAI,CAAC,IAAI,CAAE;MAACe,IAAI,EAAC;IAAa,CAAE,CAChG,CACV,EAEAhC,IAAI,CAAC2V,OAAO,CAAC,CAAC,IACb7U,CAAA,CAACkU,yEAAO;MAAC/I,IAAI,EAAE9M,kEAAc,CAACgC,KAAK,CAAC,iCAAiC;IAAE,GACrEL,CAAA,CAACwE,wEAAM;MAACvE,SAAS,EAAC,yBAAyB;MAACC,OAAO,EAAE7B,6DAAS,CAACY,IAAI,CAACkB,IAAI,CAAC9B,+DAAS,EAAEqL,uDAAa,EAAE;QAAExK,IAAI,EAAJA;MAAK,CAAC,CAAE;MAACgC,IAAI,EAAC;IAAY,CAAE,CAC1H,CACV,EACAhC,IAAI,CAAC4V,SAAS,CAAC,CAAC,IACf9U,CAAA,CAACkU,yEAAO;MAAC/I,IAAI,EAAE9M,kEAAc,CAACgC,KAAK,CAAC,mCAAmC;IAAE,GACvEL,CAAA,CAACwE,wEAAM;MAACvE,SAAS,EAAC,2BAA2B;MAACC,OAAO,EAAE,IAAI,CAACgT,UAAU,CAAC/S,IAAI,CAAC,IAAI,CAAE;MAACe,IAAI,EAAC;IAAc,CAAE,CACjG,CAER,CACF,CAAC,EAENlB,CAAA,cACEA,CAAA;MAAKC,SAAS,EAAC;IAAa,GAAE8C,OAAO,CAACP,GAAG,CAAC,IAAI,CAACuS,UAAU,CAAC5U,IAAI,CAAC,IAAI,CAAC,CAAO,CAAC,EAE5EH,CAAA;MAAKC,SAAS,EAAC;IAAa,GACzB,CAACmN,SAAS,CAAClC,OAAO,CAAC,CAAC,IAAIlL,CAAA;MAAKC,SAAS,EAAC;IAAuB,GAAEmN,SAAS,CAAClH,OAAO,CAAC,CAAO,CAAC,EAE1F,IAAI,CAACmO,WAAW,IAAI,IAAI,CAACC,aAAa,IACrCtU,CAAA,CAACwE,wEAAM;MAACvE,SAAS,EAAC,oCAAoC;MAAC6G,OAAO,EAAE,IAAI,CAACkM,cAAe;MAAC9S,OAAO,EAAE,IAAI,CAACd,QAAQ,CAACe,IAAI,CAAC,IAAI;IAAE,GACpH9B,kEAAc,CAACgC,KAAK,CAAC,oCAAoC,CACpD,CAEP,CACF,CACF,CAAC;EAEV,CAAC;EAAAwF,MAAA,CAEDuH,SAAS,GAAT,SAAAA,UAAUkD,QAAQ,EAAE;IAAA,IAAAzN,aAAA;IAClB,IAAMxD,KAAK,GAAG,IAAI4F,qEAAQ,CAAC,CAAC;IAC5B,IAAM/F,IAAI,GAAG,IAAI,CAACS,KAAK,CAACT,IAAI;IAC5B,IAAMqU,QAAQ,GAAG,EAAA1Q,aAAA,GAAA3D,IAAI,CAACiE,OAAO,CAAC,CAAC,qBAAdN,aAAA,CAAgB0C,MAAM,IAAG,CAAC;IAE3C,IAAIlH,iEAAW,CAACmM,IAAI,IAAI,CAACtL,IAAI,CAACmU,OAAO,CAAC,CAAC,IAAI,CAACnU,IAAI,CAAC8O,QAAQ,CAAC,CAAC,EAAE;MAC3D3O,KAAK,CAACU,GAAG,CACP,eAAe,EACfC,CAAA,eACEA,CAAA;QAAGC,SAAS,EAAC;MAAgC,CAAE,CAAC,EAC/C5B,kEAAc,CAACgC,KAAK,CAAC,+BAA+B,CACjD,CACR,CAAC;IACH;IAEA,IAAInB,IAAI,CAACgP,OAAO,CAAC,CAAC,EAAE;MAClB7O,KAAK,CAACU,GAAG,CACP,UAAU,EACVC,CAAA,eACEA,CAAA;QAAG,SAAM;MAAyB,CAAE,CAAC,EACpCd,IAAI,CAAC8O,QAAQ,CAAC,CAAC,GACZ3P,kEAAc,CAACgC,KAAK,CAAC,4BAA4B,CAAC,GAClDhC,kEAAc,CAACgC,KAAK,CAAC,gCAAgC,EAAE;QAAE6L,IAAI,EAAEiC,KAAK,CAACjP,IAAI,CAACgP,OAAO,CAAC,CAAC,CAAC,CAACE,OAAO,CAAC;MAAE,CAAC,CAChG,CACR,CAAC;IACH;IAEA,IAAIlP,IAAI,CAACmU,OAAO,CAAC,CAAC,EAAE;MAClBhU,KAAK,CAACU,GAAG,CACP,WAAW,EACXC,CAAA,eACEA,CAAA;QAAGC,SAAS,EAAC;MAAwB,CAAE,CAAC,EACvC5B,kEAAc,CAACgC,KAAK,CAAC,mCAAmC,EAAE;QAAEoP,GAAG,EAAEa;MAAS,CAAC,CACxE,CACR,CAAC;MAED,IAAI,CAACpR,IAAI,CAACoU,aAAa,CAAC,CAAC,EAAE;QACzBjU,KAAK,CAACU,GAAG,CACP,oBAAoB,EACpBC,CAAA,eACEA,CAAA;UAAGC,SAAS,oBAAiBsT,QAAQ,GAAG,OAAO,GAAG,aAAa;QAAgB,CAAE,CAAC,EACjFlV,kEAAc,CAACgC,KAAK,CAAC,yCAAyC,CAC3D,CACR,CAAC;MACH;IACF;IAEA,OAAOhB,KAAK;EACd,CAAC;EAAAwG,MAAA,CAEDkP,UAAU,GAAV,SAAAA,WAAW7K,GAAG,EAAE;IAAA,IAAA8K,cAAA,EAAAC,cAAA,EAAAC,cAAA;IACd,IAAMhW,IAAI,GAAG,IAAI,CAACS,KAAK,CAACT,IAAI;IAC5B,IAAMqU,QAAQ,GAAG,EAAAyB,cAAA,GAAA9V,IAAI,CAACiE,OAAO,CAAC,CAAC,qBAAd6R,cAAA,CAAgBzP,MAAM,IAAG,CAAC;IAC3C,IAAM4P,UAAU,GAAGjW,IAAI,CAAC+E,SAAS,CAAC,CAAC;IAEnC,IAAMmR,KAAK,GAAG,IAAI,CAACb,cAAc,GAAG,IAAI,CAACA,cAAc,CAACc,GAAG,CAACnL,GAAG,CAAC5G,EAAE,CAAC,CAAC,CAAC,IAAA2R,cAAA,GAAG/V,IAAI,CAACiE,OAAO,CAAC,CAAC,qBAAd8R,cAAA,CAAgBK,IAAI,oBAApBL,cAAA,CAAgBK,IAAI,CAAG,UAAClS,IAAI;MAAA,OAAKA,IAAI,CAACH,MAAM,CAAC,CAAC,KAAKiH,GAAG;IAAA,EAAC;IAC/H,IAAMC,KAAK,GAAGD,GAAG,CAACjG,SAAS,CAAC,CAAC;IAC7B,IAAMsR,OAAO,GAAGJ,UAAU,GAAG,CAAC,GAAGhE,IAAI,CAACqE,KAAK,CAAErL,KAAK,GAAGgL,UAAU,GAAI,GAAG,CAAC,GAAG,CAAC;;IAE3E;IACA,IAAMM,eAAe,GAAG,OAAOtL,KAAK,KAAK,QAAQ;IACjD,IAAMuL,UAAU,GAAG,IAAI,CAAC1C,cAAc,IAAKO,QAAQ,IAAI,CAACrU,IAAI,CAACoU,aAAa,CAAC,CAAE;IAC7E,IAAMqC,KAAK,GAAGF,eAAe,GAAGF,OAAO,GAAIK,MAAM,CAACR,KAAK,CAAC,IAAI,EAAAF,cAAA,GAAAhW,IAAI,CAACiE,OAAO,CAAC,CAAC,qBAAd+R,cAAA,CAAgB3P,MAAM,KAAI,CAAC,CAAC,GAAI,GAAG;IAE/F,IAAMsQ,aAAa,GAAG,CAACxX,iEAAW,CAACmM,IAAI,IAAK,CAACtL,IAAI,CAAC8O,QAAQ,CAAC,CAAC,IAAI9O,IAAI,CAACmU,OAAO,CAAC,CAAC,KAAK,CAACE,QAAQ,IAAIrU,IAAI,CAACoU,aAAa,CAAC,CAAC,CAAE;IAEtH,IAAMwC,GAAG,GACP9V,CAAA;MAAKC,SAAS,EAAC,SAAS;MAAC,iBAAe,CAAC,CAACmV,KAAM;MAACxG,KAAK,4BAA0B+G,KAAK;IAAI,GACtFE,aAAa,IACZ7V,CAAA;MAAOC,SAAS,EAAC;IAA8B,GAC7CD,CAAA;MAAO2O,QAAQ,EAAE,IAAI,CAACQ,UAAU,CAAChP,IAAI,CAAC,IAAI,EAAE+J,GAAG,CAAE;MAAClJ,IAAI,EAAC,UAAU;MAAC+U,OAAO,EAAEX,KAAM;MAACrI,QAAQ,EAAE2I;IAAW,CAAE,CAAC,EAC1G1V,CAAA;MAAMC,SAAS,EAAC;IAAW,CAAE,CACxB,CACR,EAEDD,CAAA;MAAKC,SAAS,EAAC;IAAiB,GAC9BD,CAAA;MAAMC,SAAS,EAAC;IAAwB,GAAEiK,GAAG,CAACI,MAAM,CAAC,CAAQ,CAAC,EAC7D8K,KAAK,IAAI,CAACS,aAAa,IAAI3U,iEAAI,CAAC,qBAAqB,EAAE;MAAEjB,SAAS,EAAE;IAAmB,CAAC,CAAC,EACzFwV,eAAe,IAAIzV,CAAA;MAAMC,SAAS,EAAE1B,oEAAS,CAAC,aAAa,EAAEgX,OAAO,KAAK,GAAG,IAAI,qBAAqB;IAAE,GAAEA,OAAO,EAAC,GAAO,CACtH,CAAC,EAELrL,GAAG,CAAC8F,QAAQ,CAAC,CAAC,GAAGhQ,CAAA;MAAKC,SAAS,EAAC,kBAAkB;MAAC+V,GAAG,EAAE9L,GAAG,CAAC8F,QAAQ,CAAC,CAAE;MAACiG,GAAG,EAAE/L,GAAG,CAACI,MAAM,CAAC;IAAE,CAAE,CAAC,GAAG,IAC9F,CACN;IAED,OACEtK,CAAA;MACEC,SAAS,EAAE1B,oEAAS,CAAC,YAAY,EAAEgV,QAAQ,IAAI,WAAW,EAAErU,IAAI,CAAC8O,QAAQ,CAAC,CAAC,IAAI,WAAW,EAAE9D,GAAG,CAAC8F,QAAQ,CAAC,CAAC,IAAI,qBAAqB,CAAE;MACrI,WAAS9F,GAAG,CAAC5G,EAAE,CAAC;IAAE,GAEjBmS,eAAe,GACdzV,CAAA,CAACkU,yEAAO;MAAC/I,IAAI,EAAE9M,kEAAc,CAACgC,KAAK,CAAC,+BAA+B,EAAE;QAAEgO,KAAK,EAAElE;MAAM,CAAC,CAAE;MAACuK,QAAQ,EAAE,IAAI,CAACwB;IAAkB,GACtHJ,GACM,CAAC,GAEVA,GAEC,CAAC;EAEV,CAAC;EAAAjQ,MAAA,CAEDsJ,UAAU,GAAV,SAAAA,WAAWlM,MAAM,EAAEkT,GAAG,EAAE;IAAA,IAAAC,qBAAA,EAAAC,sBAAA;IACtB,IAAI,CAAChY,iEAAW,CAACmM,IAAI,EAAE;MACrBnM,6DAAS,CAACY,IAAI,CAACwU,2EAAU,CAAC;MAC1B0C,GAAG,CAACG,MAAM,CAACP,OAAO,GAAG,KAAK;MAC1B;IACF;IAEA,IAAMQ,SAAS,GAAG,IAAI,CAAChC,cAAc,IAAI,IAAIiC,GAAG,EAAAJ,qBAAA,GAAC,CAAAC,sBAAA,OAAI,CAAC1W,KAAK,CAACT,IAAI,CAACiE,OAAO,CAAC,CAAC,EAACX,GAAG,qBAA7B4T,qBAAA,CAAApT,IAAA,CAAAqT,sBAAA,EAAgC,UAAChM,CAAC;MAAA,OAAKA,CAAC,CAACpH,MAAM,CAAC,CAAC,CAACK,EAAE,CAAC,CAAC;IAAA,EAAC,CAAC;IACzG,IAAMmT,UAAU,GAAGF,SAAS,UAAO,CAACtT,MAAM,CAACK,EAAE,CAAC,CAAC,CAAC;IAChD,IAAMoT,cAAc,GAAG,IAAI,CAAC/W,KAAK,CAACT,IAAI,CAACiR,kBAAkB,CAAC,CAAC;IAE3D,IAAI,CAACuG,cAAc,EAAE;MACnBH,SAAS,CAACI,KAAK,CAAC,CAAC;IACnB;IAEA,IAAI,CAACF,UAAU,EAAE;MACfF,SAAS,CAACxW,GAAG,CAACkD,MAAM,CAACK,EAAE,CAAC,CAAC,CAAC;IAC5B;IAEA,IAAI,IAAI,CAAC+Q,WAAW,EAAE;MACpB,IAAI,CAACE,cAAc,GAAGgC,SAAS,CAACK,IAAI,GAAGL,SAAS,GAAG,IAAI;MACvD,IAAI,CAACjC,aAAa,GAAG,CAAC,CAAC,IAAI,CAACC,cAAc;MAC1C;IACF;IAEA,OAAO,IAAI,CAACsC,MAAM,CAACN,SAAS,EAAE,IAAI,EAAE;MAAA,OAAOJ,GAAG,CAACG,MAAM,CAACP,OAAO,GAAGU,UAAU;IAAA,CAAC,CAAC;EAC9E,CAAC;EAAA5Q,MAAA,CAEDzG,QAAQ,GAAR,SAAAA,SAAA,EAAW;IAAA,IAAAL,KAAA;IACT,OAAO,IAAI,CAAC8X,MAAM,CAAC,IAAI,CAACtC,cAAc,EAAE,YAAM;MAC5CxV,KAAI,CAACwV,cAAc,GAAG,IAAI;MAC1BxV,KAAI,CAACuV,aAAa,GAAG,KAAK;IAC5B,CAAC,CAAC;EACJ,CAAC;EAAAzO,MAAA,CAEDgR,MAAM,GAAN,SAAAA,OAAON,SAAS,EAAEO,EAAE,EAAEC,OAAO,EAAE;IAAA,IAAAhQ,MAAA;IAC7B,IAAI,CAACiM,cAAc,GAAG,IAAI;IAC1BhT,CAAC,CAACqE,MAAM,CAAC,CAAC;IAEV,OAAOhG,+DACG,CAAC;MACP4Y,MAAM,EAAE,OAAO;MACfC,GAAG,EAAK7Y,6DAAS,CAACsJ,SAAS,CAAC,QAAQ,CAAC,mBAAc,IAAI,CAAChI,KAAK,CAACT,IAAI,CAACoE,EAAE,CAAC,CAAC,WAAQ;MAC/E5D,IAAI,EAAE;QACJY,IAAI,EAAE;UACJiW,SAAS,EAAE9Q,KAAK,CAAC0R,IAAI,CAACZ,SAAS;QACjC;MACF;IACF,CAAC,CAAC,CACD7S,IAAI,CAAC,UAAC0T,GAAG,EAAK;MACb/Y,6DAAS,CAACgZ,WAAW,CAACD,GAAG,CAAC;MAC1BN,EAAE,oBAAFA,EAAE,CAAG,CAAC;IACR,CAAC,CAAC,SACI,CAAC,UAACQ,GAAG,EAAK;MACdP,OAAO,oBAAPA,OAAO,CAAGO,GAAG,CAAC;IAChB,CAAC,CAAC,WACM,CAAC,YAAM;MACbvQ,MAAI,CAACiM,cAAc,GAAG,KAAK;MAE3BhT,CAAC,CAACqE,MAAM,CAAC,CAAC;IACZ,CAAC,CAAC;EACN,CAAC;EAAAwB,MAAA,CAEDgN,UAAU,GAAV,SAAAA,WAAA,EAAa;IACX;IACAxU,6DAAS,CAACY,IAAI,CAAC+K,wDAAe,EAAE;MAC9B9K,IAAI,EAAE,IAAI,CAACS,KAAK,CAACT,IAAI;MACrB0C,IAAI,EAAE,IAAI,CAACjC,KAAK,CAACiC;IACnB,CAAC,CAAC;EACJ,CAAC;EAAAiE,MAAA,CAEDqN,UAAU,GAAV,SAAAA,WAAA,EAAa;IACX,IAAIqE,OAAO,CAAClZ,kEAAc,CAACgC,KAAK,CAAC,2CAA2C,CAAC,CAAC,EAAE;MAC9E,IAAI,CAACV,KAAK,CAACT,IAAI,UAAO,CAAC,CAAC,CAACwE,IAAI,CAAC,YAAM;QAClC1D,CAAC,CAACqE,MAAM,CAACmT,IAAI,CAAC,CAAC;MACjB,CAAC,CAAC;IACJ;EACF;;EAEA;AACF;AACA;AACA;AACA,KAJE;EAAA3R,MAAA,CAKAqQ,iBAAiB,GAAjB,SAAAA,kBAAkBnQ,KAAK,EAAE;IACvBA,KAAK,CAACpG,KAAK,CAAC8X,cAAc,GAAG,KAAK;IAClC1R,KAAK,CAACoC,KAAK,CAACuP,gBAAgB,CAAC,CAAC;EAChC;;EAEA;AACF;AACA,KAFE;EAAA7R,MAAA,CAGA2O,YAAY,GAAZ,SAAAA,aAAamD,CAAC,EAAE;IACd,IAAI,IAAI,CAACpD,cAAc,EAAE;MACvBoD,CAAC,CAACjG,cAAc,CAAC,CAAC;MAClB,OAAO,IAAI;IACb;EACF,CAAC;EAAA,OAAAjQ,QAAA;AAAA,EApRmCuD,gEAAS;;;;;;;;;;;;;;;;;;;;ICZ1B4K,SAAS,0BAAAgI,MAAA;EAAAxS,oFAAA,CAAAwK,SAAA,EAAAgI,MAAA;EAAA,SAAAhI,UAAA;IAAA,OAAAgI,MAAA,CAAAjS,KAAA,OAAAL,SAAA;EAAA;EAAA,OAAAsK,SAAA;AAAA,gBAAAiI,sFAAA,CAASC,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;;ACAI;AACd;AACU;AACI;AACd;AACc;AACA;AACZ;AACF;AACQ;AAEnC,IAAMC,UAAU,GAAG;EACxBrZ,eAAe,EAAfA,wDAAe;EACf+C,QAAQ,EAARA,iDAAQ;EACRiI,aAAa,EAAbA,sDAAa;EACbM,eAAe,EAAfA,wDAAe;EACfxD,QAAQ,EAARA,iDAAQ;EACRtB,eAAe,EAAfA,wDAAe;EACf0B,eAAe,EAAfA,wDAAe;EACf+M,SAAS,EAATA,kDAAS;EACTf,QAAQ,EAARA,iDAAQ;EACRY,YAAY,EAAZA,qDAAYA;AACd,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtB4C;AACA;AACE;AACU;AACxB;AACY;AACJ;AACM;AACY;AACN;AAErD,iEAAe,CACb,IAAIwE,uEAAa,CAAC,CAAC,CAAC;AAAA,CACjBjY,GAAG,CAAC,gBAAgB,EAAE,QAAQ,EAAE4T,6DAAS,CAAC,CAC1C5T,GAAG,CAAC,gBAAgB,EAAE,iBAAiB,EAAEyT,gEAAY,CAAC,CACtDzT,GAAG,CAAC,mBAAmB,EAAE,iBAAiB,EAAE6G,mEAAe,CAAC,EAE/D,IAAIoR,sEAAY,CAAC,CAAC,CAAC;AAAA,CAChBjY,GAAG,CAAC,OAAO,EAAEoY,oDAAI,CAAC,CAClBpY,GAAG,CAAC,cAAc,EAAEyO,0DAAU,CAAC,CAC/BzO,GAAG,CAAC,YAAY,EAAEqY,wDAAQ,CAAC,EAE9B,IAAIJ,sEAAY,CAACC,kEAAI,CAAC,CAAC;AAAA,CACpBO,OAAO,CAAO,OAAO,CAAC,CACtB7Q,SAAS,CAAU,cAAc,CAAC,EAErC,IAAIqQ,sEAAY,CAACE,mEAAK,CAAC,CAAC;AAAA,CACrBvQ,SAAS,CAAU,eAAe,CAAC,EAEtC,IAAIqQ,sEAAY,CAACvX,wEAAU,CAAC,CAAC;AAAA,CAC1BkH,SAAS,CAAU,SAAS,CAAC,CAC7BA,SAAS,CAAU,cAAc,CAAC,CACtC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChCkC;AAEmB;AACJ;AACJ;AACE;AACV;AAET;AACJ;AACA;AAEzBtJ,oEAAgB,CAAC0B,GAAG,CAAC,WAAW,EAAE,YAAM;EACtC0Y,+DAAkB,CAAC,CAAC;EACpBC,6DAAgB,CAAC,CAAC;EAClBC,2DAAc,CAAC,CAAC;EAChBC,4DAAe,CAAC,CAAC;EACjBvX,uDAAU,CAAC,CAAC;AACd,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;AClBsC;AAGY;AAAA,IAE/B8W,IAAI,0BAAAY,MAAA;EAAA3T,oFAAA,CAAA+S,IAAA,EAAAY,MAAA;EAAA,SAAAZ,KAAA;IAAA,OAAAY,MAAA,CAAApT,KAAA,OAAAL,SAAA;EAAA;EAAA,IAAAO,MAAA,GAAAsS,IAAA,CAAAtZ,SAAA;EAAAgH,MAAA,CACvBqH,QAAQ,GAAR,SAAAA,SAAA,EAAW;IACT,OAAOqL,oEAAe,CAAS,UAAU,CAAC,CAACvV,IAAI,CAAC,IAAI,CAAC;EACvD,CAAC;EAAA6C,MAAA,CAEDsH,QAAQ,GAAR,SAAAA,SAAA,EAAW;IACT,OAAOoL,oEAAe,CAAgB,UAAU,CAAC,CAACvV,IAAI,CAAC,IAAI,CAAC;EAC9D,CAAC;EAAA6C,MAAA,CAEDmI,QAAQ,GAAR,SAAAA,SAAA,EAAW;IACT,OAAOuK,oEAAe,CAAU,UAAU,CAAC,CAACvV,IAAI,CAAC,IAAI,CAAC;EACxD,CAAC;EAAA6C,MAAA,CAEDqI,OAAO,GAAP,SAAAA,QAAA,EAAU;IACR,OAAOqK,oEAAe,CAAC,SAAS,EAAEA,0EAAmB,CAAC,CAACvV,IAAI,CAAC,IAAI,CAAC;EACnE,CAAC;EAAA6C,MAAA,CAEDqK,UAAU,GAAV,SAAAA,WAAA,EAAa;IACX,OAAOqI,oEAAe,CAAU,YAAY,CAAC,CAACvV,IAAI,CAAC,IAAI,CAAC;EAC1D,CAAC;EAAA6C,MAAA,CAEDuK,SAAS,GAAT,SAAAA,UAAA,EAAY;IACV,OAAOmI,oEAAe,CAAU,WAAW,CAAC,CAACvV,IAAI,CAAC,IAAI,CAAC;EACzD,CAAC;EAAA6C,MAAA,CAEDwK,eAAe,GAAf,SAAAA,gBAAA,EAAkB;IAChB,OAAOkI,oEAAe,CAAU,iBAAiB,CAAC,CAACvV,IAAI,CAAC,IAAI,CAAC;EAC/D,CAAC;EAAA6C,MAAA,CAEDsK,kBAAkB,GAAlB,SAAAA,mBAAA,EAAqB;IACnB,OAAOoI,oEAAe,CAAU,oBAAoB,CAAC,CAACvV,IAAI,CAAC,IAAI,CAAC;EAClE,CAAC;EAAA6C,MAAA,CAEDyK,QAAQ,GAAR,SAAAA,SAAA,EAAW;IACT,OAAOiI,oEAAe,CAAS,UAAU,CAAC,CAACvV,IAAI,CAAC,IAAI,CAAC;EACvD,CAAC;EAAA6C,MAAA,CAED5B,SAAS,GAAT,SAAAA,UAAA,EAAY;IACV,OAAOsU,oEAAe,CAAS,WAAW,CAAC,CAACvV,IAAI,CAAC,IAAI,CAAC;EACxD,CAAC;EAAA6C,MAAA,CAEDwN,OAAO,GAAP,SAAAA,QAAA,EAAU;IACR,OAAOkF,oEAAe,CAAU,SAAS,CAAC,CAACvV,IAAI,CAAC,IAAI,CAAC;EACvD,CAAC;EAAA6C,MAAA,CAEDgP,OAAO,GAAP,SAAAA,QAAA,EAAU;IACR,OAAO0D,oEAAe,CAAU,SAAS,CAAC,CAACvV,IAAI,CAAC,IAAI,CAAC;EACvD,CAAC;EAAA6C,MAAA,CAEDiP,SAAS,GAAT,SAAAA,UAAA,EAAY;IACV,OAAOyD,oEAAe,CAAU,WAAW,CAAC,CAACvV,IAAI,CAAC,IAAI,CAAC;EACzD,CAAC;EAAA6C,MAAA,CAED+O,YAAY,GAAZ,SAAAA,aAAA,EAAe;IACb,OAAO2D,oEAAe,CAAU,cAAc,CAAC,CAACvV,IAAI,CAAC,IAAI,CAAC;EAC5D,CAAC;EAAA6C,MAAA,CAEDyN,aAAa,GAAb,SAAAA,cAAA,EAAgB;IACd,OAAOiF,oEAAe,CAAU,eAAe,CAAC,CAACvV,IAAI,CAAC,IAAI,CAAC;EAC7D,CAAC;EAAA6C,MAAA,CAED9C,OAAO,GAAP,SAAAA,QAAA,EAAU;IACR,OAAOwV,kEAAa,CAAa,SAAS,CAAC,CAACvV,IAAI,CAAC,IAAI,CAAC;EACxD,CAAC;EAAA6C,MAAA,CAEDsE,KAAK,GAAL,SAAAA,MAAA,EAAQ;IACN,OAAOoO,kEAAa,CAAW,OAAO,CAAC,CAACvV,IAAI,CAAC,IAAI,CAAC;EACpD,CAAC;EAAA6C,MAAA,CAED1C,OAAO,GAAP,SAAAA,QAAA,EAAsB;IACpB,IAAMA,OAAO,GAAGoV,kEAAa,CAAW,SAAS,CAAC,CAACvV,IAAI,CAAC,IAAI,CAAC;IAC7D,OAAOG,OAAO,GAAIA,OAAO,GAAkB,EAAE;EAC/C,CAAC;EAAA0C,MAAA,CAEDoT,QAAQ,GAAR,SAAAA,SAAA,EAAW;IACT,OAAOV,oEAAe,CAAU,UAAU,CAAC,CAACvV,IAAI,CAAC,IAAI,CAAC;EACxD,CAAC;EAAA6C,MAAA,CAEDhE,QAAQ,GAAR,SAAAA,SAAA,EAAW;IACT,OAAOiX,mEAAQ,CAAgB,UAAU,EAAE,UAACI,QAAQ;MAAA,OAAK,CAAC,CAACA,QAAQ;IAAA,EAAC,CAAClW,IAAI,CAAC,IAAI,CAAC;EACjF;;EAEA;EAAA;EAAA6C,MAAA,CACAiH,QAAQ,GAAR,SAAAA,SAAA,EAAW;IACT,OAAO,KAAK;EACd,CAAC;EAAAjH,MAAA,CAEDsT,WAAW,GAAX,SAAAA,YAAA,EAAc;IACZ;IACA,uBAAoB,IAAI,CAAC/S,MAAM,SAAO,IAAI,CAAC9F,IAAI,CAACgD,EAAE,GAAK,EAAE;EAC3D,CAAC;EAAA,OAAA6U,IAAA;AAAA,EA1F+BI,4DAAK;;;;;;;;;;;;;;;;;;;;ACLC;AAAA,IAInB/J,UAAU,0BAAAuK,MAAA;EAAA3T,oFAAA,CAAAoJ,UAAA,EAAAuK,MAAA;EAAA,SAAAvK,WAAA;IAAA,OAAAuK,MAAA,CAAApT,KAAA,OAAAL,SAAA;EAAA;EAAA,IAAAO,MAAA,GAAA2I,UAAA,CAAA3P,SAAA;EAAAgH,MAAA,CAC7ByE,MAAM,GAAN,SAAAA,OAAA,EAAS;IACP,OAAOiO,oEAAe,CAAS,QAAQ,CAAC,CAACvV,IAAI,CAAC,IAAI,CAAC;EACrD,CAAC;EAAA6C,MAAA,CAEDmK,QAAQ,GAAR,SAAAA,SAAA,EAAW;IACT,OAAOuI,oEAAe,CAAS,UAAU,CAAC,CAACvV,IAAI,CAAC,IAAI,CAAC;EACvD,CAAC;EAAA6C,MAAA,CAED5B,SAAS,GAAT,SAAAA,UAAA,EAAY;IACV,OAAOsU,oEAAe,CAAS,WAAW,CAAC,CAACvV,IAAI,CAAC,IAAI,CAAC;EACxD,CAAC;EAAA6C,MAAA,CAED3G,IAAI,GAAJ,SAAAA,KAAA,EAAO;IACL,OAAOqZ,iEAAY,CAAO,OAAO,CAAC,CAACvV,IAAI,CAAC,IAAI,CAAC;EAC/C,CAAC;EAAA6C,MAAA,CAEDsE,KAAK,GAAL,SAAAA,MAAA,EAAQ;IACN,OAAOoO,kEAAa,CAAW,OAAO,CAAC,CAACvV,IAAI,CAAC,IAAI,CAAC;EACpD,CAAC;EAAA6C,MAAA,CAEDsT,WAAW,GAAX,SAAAA,YAAA,EAAc;IACZ;IACA,+BAA4B,IAAI,CAAC/S,MAAM,SAAO,IAAI,CAAC9F,IAAI,CAACgD,EAAE,GAAK,EAAE;EACnE,CAAC;EAAA,OAAAkL,UAAA;AAAA,EAxBqC+J,4DAAK;;;;;;;;;;;;;;;;;;;;ACJL;AAAA,IAKnBH,QAAQ,0BAAAW,MAAA;EAAA3T,oFAAA,CAAAgT,QAAA,EAAAW,MAAA;EAAA,SAAAX,SAAA;IAAA,OAAAW,MAAA,CAAApT,KAAA,OAAAL,SAAA;EAAA;EAAA,IAAAO,MAAA,GAAAuS,QAAA,CAAAvZ,SAAA;EAAAgH,MAAA,CAC3B3G,IAAI,GAAJ,SAAAA,KAAA,EAAO;IACL,OAAOqZ,iEAAY,CAAO,MAAM,CAAC,CAACvV,IAAI,CAAC,IAAI,CAAC;EAC9C,CAAC;EAAA6C,MAAA,CAED5C,MAAM,GAAN,SAAAA,OAAA,EAAS;IACP,OAAOsV,iEAAY,CAAa,QAAQ,CAAC,CAACvV,IAAI,CAAC,IAAI,CAAC;EACtD,CAAC;EAAA6C,MAAA,CAED2E,IAAI,GAAJ,SAAAA,KAAA,EAAO;IACL,OAAO+N,iEAAY,CAAO,MAAM,CAAC,CAACvV,IAAI,CAAC,IAAI,CAAC;EAC9C,CAAC;EAAA6C,MAAA,CAEDwT,MAAM,GAAN,SAAAA,OAAA,EAAS;IACP,OAAOd,oEAAe,CAAS,QAAQ,CAAC,CAACvV,IAAI,CAAC,IAAI,CAAC;EACrD,CAAC;EAAA6C,MAAA,CAED1B,QAAQ,GAAR,SAAAA,SAAA,EAAW;IACT,OAAOoU,oEAAe,CAAS,UAAU,CAAC,CAACvV,IAAI,CAAC,IAAI,CAAC;EACvD,CAAC;EAAA6C,MAAA,CAEDsT,WAAW,GAAX,SAAAA,YAAA,EAAc;IACZ,uBAAqB,IAAI,CAACE,MAAM,CAAC,CAAC;EACpC,CAAC;EAAA,OAAAjB,QAAA;AAAA,EAvBmCG,4DAAK;;;;;;;;;;;;;;;;;;;ACLjB;AACY;AACJ;AAE3B,IAAMe,MAAM,GAAG;EACpBnB,IAAI,EAAJA,6CAAI;EACJ3J,UAAU,EAAVA,mDAAU;EACV4J,QAAQ,EAARA,iDAAQA;AACV,CAAC;;;;;;;;;;;;;;;;;;;;;;ACRkC;AAAA,IAGd3R,aAAa;EAAAA,aAAA,CAMzBe,aAAa,GAApB,SAAAA,cAAA,EAAuB;IACrB,IAAMtI,IAAI,GAAGb,6DAAS,CAACqG,YAAY,CAAO,OAAO,CAAC;IAClDxF,IAAI,CAAC8E,cAAc,CAAC;MAClBkJ,QAAQ,EAAE,EAAE;MACZgB,OAAO,EAAE,EAAE;MACXgC,UAAU,EAAE,KAAK;MACjBC,kBAAkB,EAAE,KAAK;MACzBC,SAAS,EAAE,KAAK;MAChBC,eAAe,EAAE,KAAK;MACtBC,QAAQ,EAAE;IACZ,CAAC,CAAC;IACFpR,IAAI,CAACqa,QAAQ,CAAC;MAAE1U,aAAa,EAAE;QAAE9B,OAAO,EAAE;MAAG;IAAE,CAAC,CAAC;IACjD,OAAO7D,IAAI;EACb,CAAC;EAED,SAAAuH,cAAYvH,IAAU,EAAE;IAAA,KApBxBA,IAAI;IAAA,KACJ4H,OAAO;IAAA,KACP+J,QAAQ;IAAA,KACR2I,aAAa;IAkBX,IAAI,CAACta,IAAI,EAAE;MACTA,IAAI,GAAGuH,aAAa,CAACe,aAAa,CAAC,CAAC;IACtC;IAEA,IAAI,CAACV,OAAO,GAAG,KAAK;IACpB,IAAI,CAAC+J,QAAQ,GAAG,KAAK;IACrB,IAAI,CAAC3R,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACsa,aAAa,GAAG,OAAO;EAC9B;EAAC,IAAA3T,MAAA,GAAAY,aAAA,CAAA5H,SAAA;EAAAgH,MAAA,CAED4T,UAAU,GAAV,SAAAA,WAAWC,QAAgB,EAAE;IAC3B,OAAO,IAAI,CAACF,aAAa,KAAKE,QAAQ;EACxC,CAAC;EAAA7T,MAAA,CAED8T,MAAM,GAAN,SAAAA,OAAOD,QAAgB,EAAE;IACvB,IAAI,CAACF,aAAa,GAAGE,QAAQ;IAC7B1Z,CAAC,CAACqE,MAAM,CAAC,CAAC;EACZ,CAAC;EAAAwB,MAAA,CAEKlB,IAAI;IAAA,IAAAiV,KAAA,GAAA7R,uFAAA,eAAAC,sEAAA,CAAV,SAAAE,QAAW5H,IAAS;MAAA,OAAA0H,sEAAA,UAAAQ,SAAAC,QAAA;QAAA;UAAA,QAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAClB,IAAI,CAAC7B,OAAO,GAAG,IAAI;cACnB9G,CAAC,CAACqE,MAAM,CAAC,CAAC;cAACoE,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAE,IAAA;cAAA,OAGS,IAAI,CAACzJ,IAAI,CAACyF,IAAI,CAACrE,IAAI,CAAC;YAAA;cAAtC,IAAI,CAACpB,IAAI,GAAAuJ,QAAA,CAAAoR,IAAA;YAAA;cAAApR,QAAA,CAAAC,IAAA;cAET,IAAI,CAAC5B,OAAO,GAAG,KAAK;cACpB9G,CAAC,CAACqE,MAAM,CAAC,CAAC;cAAC,OAAAoE,QAAA,CAAA2J,MAAA;YAAA;YAAA;cAAA,OAAA3J,QAAA,CAAAO,IAAA;UAAA;QAAA;MAAA,GAAAd,OAAA;IAAA,CAEd;IAAA,SAAAvD,KAAAsE,EAAA;MAAA,OAAA2Q,KAAA,CAAAjU,KAAA,OAAAL,SAAA;IAAA;IAAA,OAAAX,IAAA;EAAA;EAAAkB,MAAA;IAAA,IAAAkM,QAAA,GAAAhK,uFAAA,eAAAC,sEAAA,CAED,SAAAgK,SAAA;MAAA,OAAAhK,sEAAA,UAAAiK,UAAAC,SAAA;QAAA;UAAA,QAAAA,SAAA,CAAAxJ,IAAA,GAAAwJ,SAAA,CAAAvJ,IAAA;YAAA;cACE,IAAI,CAAC7B,OAAO,GAAG,IAAI;cACnB9G,CAAC,CAACqE,MAAM,CAAC,CAAC;cAAC6N,SAAA,CAAAxJ,IAAA;cAAAwJ,SAAA,CAAAvJ,IAAA;cAAA,OAGH,IAAI,CAACzJ,IAAI,UAAO,CAAC,CAAC;YAAA;cACxB,IAAI,CAAC2R,QAAQ,GAAG,IAAI;YAAC;cAAAqB,SAAA,CAAAxJ,IAAA;cAErB,IAAI,CAAC5B,OAAO,GAAG,KAAK;cACpB9G,CAAC,CAACqE,MAAM,CAAC,CAAC;cAAC,OAAA6N,SAAA,CAAAE,MAAA;YAAA;YAAA;cAAA,OAAAF,SAAA,CAAAlJ,IAAA;UAAA;QAAA;MAAA,GAAAgJ,QAAA;IAAA,CAEd;IAAA,SAAAK,QAAA;MAAA,OAAAN,QAAA,CAAApM,KAAA,OAAAL,SAAA;IAAA;IAAA,OAAA+M,OAAA;EAAA;EAAA,OAAA5L,aAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnEgC;AACiG;AAGxE;AAM5D,IAAMuT,kBAAkB,GAAG,IAAID,yEAAY,CAAC,CAAC;AAAC,IAEzBrG,aAAa,0BAAAuG,mBAAA;EAAA7U,oFAAA,CAAAsO,aAAA,EAAAuG,mBAAA;EAIhC,SAAAvG,cAAYhT,MAAS,EAAEwZ,IAAY,EAAM;IAAA,IAAAnb,KAAA;IAAA,IAAlBmb,IAAY;MAAZA,IAAY,GAAG,CAAC;IAAA;IACrCnb,KAAA,GAAAkb,mBAAA,CAAAjX,IAAA,OAAMtC,MAAM,EAAEwZ,IAAI,EAAE,EAAE,CAAC;IAACnb,KAAA,CAJhBob,UAAU,GAAW,EAAE;IAAApb,KAAA,CACvBqb,YAAY;IAKpBrb,KAAA,CAAKqb,YAAY,GAAGJ,kBAAkB,CAACvM,EAAE,CAAC,cAAc,EAAE1O,KAAA,CAAKmU,UAAU,CAAC/S,IAAI,CAAAka,4FAAA,CAAAtb,KAAA,CAAK,CAAC,CAAC;IAAC,OAAAA,KAAA;EACxF;EAAC,IAAA8G,MAAA,GAAA6N,aAAA,CAAA7U,SAAA;EAAAgH,MAAA,CAMDyU,aAAa,GAAb,SAAAA,cAAA,EAA4C;IAAA,IAAAC,iBAAA;IAC1C,IAAM7Z,MAAM,GAAG;MACbC,OAAO,EAAE,CAAC,SAAS,EAAE,OAAO,CAAC;MAC7ByJ,MAAM,EAAE,IAAI,CAAC1J,MAAM,CAAC0J,MAAM,IAAI,CAAC,CAAC;MAChCwJ,IAAI,EAAE,IAAI,CAAC4G,OAAO,CAAC,CAAC,EAAAD,iBAAA,GAAC,IAAI,CAAC7Z,MAAM,CAACkT,IAAI,YAAA2G,iBAAA,GAAI,EAAE;IAC7C,CAAC;IAED,IAAI,IAAI,CAAC7Z,MAAM,CAAC+Z,CAAC,EAAE;MACjB/Z,MAAM,CAAC0J,MAAM,CAACqQ,CAAC,GAAG,IAAI,CAAC/Z,MAAM,CAAC+Z,CAAC;IACjC;IAEA,OAAO/Z,MAAM;EACf,CAAC;EAAAmF,MAAA,CAES6U,QAAQ,GAAlB,SAAAA,SAAmBR,IAAY,EAAwC;IAAA,IAApDA,IAAY;MAAZA,IAAY,GAAG,CAAC;IAAA;IACjC,IAAMS,cAAc,GAAGtc,4EAAwB,CAAS,CAAC;IAEzD,IAAIsc,cAAc,EAAE;MAClB,IAAI,CAACE,cAAc,GAAG,KAAK;MAE3B,OAAOC,OAAO,CAACC,OAAO,CAACJ,cAAc,CAAC;IACxC;IAEA,OAAAV,mBAAA,CAAApb,SAAA,CAAa6b,QAAQ,CAAA1X,IAAA,OAACkX,IAAI;EAC5B,CAAC;EAAArU,MAAA,CAED8Q,KAAK,GAAL,SAAAA,MAAA,EAAc;IACZsD,mBAAA,CAAApb,SAAA,CAAM8X,KAAK,CAAA3T,IAAA;IAEX,IAAI,CAACmX,UAAU,GAAG,EAAE;EACtB;;EAEA;AACF;AACA;AACA,KAHE;EAAAtU,MAAA,CAIA2U,OAAO,GAAP,SAAAA,QAAA,EAAU;IACR,IAAMhY,GAAQ,GAAG,CAAC,CAAC;IAEnB,IAAI,IAAI,CAAC9B,MAAM,CAAC+Z,CAAC,EAAE;MACjBjY,GAAG,CAACwY,SAAS,GAAG,EAAE;IACpB;IACAxY,GAAG,CAACyY,MAAM,GAAG,YAAY;IACzBzY,GAAG,CAAC0Y,MAAM,GAAG,WAAW;IAExB,OAAO1Y,GAAG;EACZ;;EAEA;AACF;AACA,KAFE;EAAAqD,MAAA,CAGAwF,eAAe,GAAf,SAAAA,gBAAA,EAA2B;IACzB,OAAO,CAAC,CAAC,IAAI,CAAC3K,MAAM,CAAC+Z,CAAC;EACxB,CAAC;EAAA5U,MAAA,CAEDsV,UAAU,GAAV,SAAAA,WAAWjc,IAAU,EAAQ;IAC3B,IAAI,CAACkb,YAAY,CAACgB,IAAI,CAAC,cAAc,EAAElc,IAAI,CAAC;EAC9C,CAAC;EAAA2G,MAAA,CAEDqN,UAAU,GAAV,SAAAA,WAAWhU,IAAU,EAAQ;IAC3B,SAAA8C,SAAA,GAAAC,+BAAA,CAAmB,IAAI,CAACoZ,KAAK,GAAAnZ,KAAA,IAAAA,KAAA,GAAAF,SAAA,IAAAG,IAAA,GAAE;MAAA,IAApB+X,IAAI,GAAAhY,KAAA,CAAAE,KAAA;MACb,IAAMkZ,MAAK,GAAGpB,IAAI,CAAC7a,KAAK,CAACkc,OAAO,CAACrc,IAAI,CAAC;MAEtC,IAAIoc,MAAK,KAAK,CAAC,CAAC,EAAE;QAChBpB,IAAI,CAAC7a,KAAK,CAACgS,MAAM,CAACiK,MAAK,EAAE,CAAC,CAAC;QAC3B;MACF;IACF;IAEA,IAAMA,KAAK,GAAG,IAAI,CAACnB,UAAU,CAACoB,OAAO,CAACrc,IAAI,CAAC;IAE3C,IAAIoc,KAAK,KAAK,CAAC,CAAC,EAAE;MAChB,IAAI,CAACnB,UAAU,CAAC9I,MAAM,CAACiK,KAAK,CAAC;IAC/B;IAEAtb,CAAC,CAACqE,MAAM,CAAC,CAAC;EACZ;;EAEA;AACF;AACA,KAFE;EAAAwB,MAAA,CAGA/G,OAAO,GAAP,SAAAA,QAAQI,IAAU,EAAQ;IACxB,IAAI,CAACic,UAAU,CAACjc,IAAI,CAAC;IACrB,IAAI,CAACib,UAAU,CAACqB,OAAO,CAACtc,IAAI,CAAC;IAE7Bc,CAAC,CAACqE,MAAM,CAAC,CAAC;EACZ,CAAC;EAAAwB,MAAA,CAES4V,WAAW,GAArB,SAAAA,YAAA,EAAgC;IAC9B,OAAO,IAAI,CAACtB,UAAU,CAACvU,MAAM,CAAAqU,mBAAA,CAAApb,SAAA,CAAO4c,WAAW,CAAAzY,IAAA,MAAE,CAAC;EACpD,CAAC;EAAA6C,MAAA,CAEMyF,QAAQ,GAAf,SAAAA,SAAA,EAAgC;IAC9B,IAAM+P,KAAK,GAAApB,mBAAA,CAAApb,SAAA,CAASyM,QAAQ,CAAAtI,IAAA,MAAE;IAE9B,IAAI,IAAI,CAACmX,UAAU,CAAC5U,MAAM,EAAE;MAC1B,QACE;QACEgK,MAAM,EAAE,CAAC,CAAC;QACVlQ,KAAK,EAAE,IAAI,CAAC8a;MACd,CAAC,EAAAvU,MAAA,CACEyV,KAAK;IAEZ;IAEA,OAAOA,KAAK;EACd,CAAC;EAAAK,kFAAA,CAAAhI,aAAA;IAAAlI,GAAA;IAAAmQ,GAAA,EA9GD,SAAAA,IAAA,EAAmB;MACjB,OAAO,WAAW;IACpB;EAAC;EAAA,OAAAjI,aAAA;AAAA,EAZmFoG,gFAAkB;;;;;;;;;;;;;;;;;;;;;ACZrE;AAEyB;AAGA;AAAA,IAEvCnH,SAAS;EAQ5B,SAAAA,UAAYzT,IAAU,EAAE;IAAA,IAAAH,KAAA;IAAA,KAPdG,IAAI;IAAA,KACJoV,aAAa;IAAA,KACbC,cAAc;IAAA,KACjBvB,cAAc;IAAA,KACdqB,WAAW;IAAA,KACXpF,cAAc;IAAA,KA4FrB4D,UAAU,GAAG,YAAM;MACjB;MACAxU,6DAAS,CAACY,IAAI,CAAC+K,mEAAe,EAAE;QAC9B9K,IAAI,EAAEH,KAAI,CAACG;MACb,CAAC,CAAC;IACJ,CAAC;IAAA,KAeDsV,YAAY,GAAG,UAACmD,CAAQ,EAAqB;MAC3C,IAAI5Y,KAAI,CAACwV,cAAc,EAAE;QACvBoD,CAAC,CAACjG,cAAc,CAAC,CAAC;QAClB,OAAO,IAAI;MACb;IACF,CAAC;IAlHC,IAAI,CAACxS,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACoV,aAAa,GAAG,KAAK;IAC1B,IAAI,CAACC,cAAc,GAAG,IAAI;IAC1B,IAAI,CAACvB,cAAc,GAAG,KAAK;IAC3B,IAAI,CAACqB,WAAW,GAAG,EAACnV,IAAI,YAAJA,IAAI,CAAEoU,aAAa,CAAC,CAAC,MAAIpU,IAAI,oBAAJA,IAAI,CAAEiR,kBAAkB,CAAC,CAAC;IACvE,IAAI,CAAClB,cAAc,GAAG,CAAC5Q,iEAAW,CAACmM,IAAI,IAAK,CAACtL,IAAI,CAAC8O,QAAQ,CAAC,CAAC,IAAI9O,IAAI,CAACmU,OAAO,CAAC,CAAC,KAAK,CAAC,IAAI,CAACE,QAAQ,CAAC,CAAC,IAAIrU,IAAI,CAACoU,aAAa,CAAC,CAAC,CAAE;EAC/H;EAAC,IAAAzN,MAAA,GAAA8M,SAAA,CAAA9T,SAAA;EAAAgH,MAAA,CAED0N,QAAQ,GAAR,SAAAA,SAAA,EAAW;IACT,OAAO,IAAI,CAACrU,IAAI,CAACiE,OAAO,CAAC,CAAC,CAACoC,MAAM,GAAG,CAAC;EACvC,CAAC;EAAAM,MAAA,CAEDyJ,gBAAgB,GAAhB,SAAAA,iBAAA,EAAmB;IACjB,IAAMvM,OAAO,GAAG,IAAI,CAAC7D,IAAI,CAAC6D,OAAO,CAAC,CAAC;IACnC,OAAOoO,IAAI,CAAC1B,GAAG,CACb,GAAG,EACH,CAAC1M,OAAO,GAAGA,OAAO,GAAG,EAAE,EAAE6Y,MAAM,CAAC,UAACnM,GAAG,EAAExM,MAAM;MAAA,OAAKwM,GAAG,GAAGxM,MAAM,CAAEgB,SAAS,CAAC,CAAC;IAAA,GAAE,CAAC,CAC/E,CAAC;EACH,CAAC;EAAA4B,MAAA,CAEDgW,UAAU,GAAV,SAAAA,WAAA,EAAa;IACX,OAAO,IAAI,CAACxH,WAAW,IAAI,IAAI,CAACC,aAAa;EAC/C,CAAC;EAAAzO,MAAA,CAEDsJ,UAAU,GAAV,SAAAA,WAAWlM,MAAkB,EAAEkT,GAAU,EAAE;IACzC,IAAMG,MAAM,GAAGH,GAAG,CAACG,MAA0B;IAE7C,IAAI,CAACjY,iEAAW,CAACmM,IAAI,EAAE;MACrBnM,6DAAS,CAACY,IAAI,CAACwU,2EAAU,CAAC;MAC1B6C,MAAM,CAACP,OAAO,GAAG,KAAK;MACtB;IACF;IAEA,IAAMQ,SAAS,GAAG,IAAI,CAAChC,cAAc,IAAI,IAAIiC,GAAG,CAAC,IAAI,CAACtX,IAAI,CAACiE,OAAO,CAAC,CAAC,CAACX,GAAG,CAAC,UAAC6H,CAAW;MAAA,OAAKA,CAAC,CAACpH,MAAM,CAAC,CAAC,CAACK,EAAE,CAAC,CAAC;IAAA,EAAC,CAAC;IAC3G,IAAMmT,UAAU,GAAGF,SAAS,UAAO,CAACtT,MAAM,CAACK,EAAE,CAAC,CAAE,CAAC;IACjD,IAAMoT,cAAc,GAAG,IAAI,CAACxX,IAAI,CAACiR,kBAAkB,CAAC,CAAC;IAErD,IAAI,CAACuG,cAAc,EAAE;MACnBH,SAAS,CAACI,KAAK,CAAC,CAAC;IACnB;IAEA,IAAI,CAACF,UAAU,EAAE;MACfF,SAAS,CAACxW,GAAG,CAACkD,MAAM,CAACK,EAAE,CAAC,CAAE,CAAC;IAC7B;IAEA,IAAI,CAACiR,cAAc,GAAGgC,SAAS,CAACK,IAAI,GAAGL,SAAS,GAAG,IAAI;IACvD,IAAI,CAACjC,aAAa,GAAG,CAAC,CAAC,IAAI,CAACC,cAAc;IAC1CvU,CAAC,CAACqE,MAAM,CAAC,CAAC;EACZ,CAAC;EAAAwB,MAAA,CAEDoN,kBAAkB,GAAlB,SAAAA,mBAAA,EAA8B;IAC5B,OAAO,IAAI,CAACqB,aAAa;EAC3B,CAAC;EAAAzO,MAAA,CAEDzG,QAAQ,GAAR,SAAAA,SAAA,EAA0B;IAAA,IAAA2H,MAAA;IACxB,OAAO,IAAI,CAAC8P,MAAM,CAAC,IAAI,CAACtC,cAAc,EAAG,YAAM;MAC7CxN,MAAI,CAACwN,cAAc,GAAG,IAAI;MAC1BxN,MAAI,CAACuN,aAAa,GAAG,KAAK;IAC5B,CAAC,CAAC;EACJ,CAAC;EAAAzO,MAAA,CAEDgR,MAAM,GAAN,SAAAA,OAAON,SAAsB,EAAEO,EAAmB,EAAEC,OAAwB,EAAS;IAAA,IAAAzF,MAAA;IAAA,IAAjCyF,OAAwB;MAAxBA,OAAwB,GAAG,IAAI;IAAA;IACjF,IAAI,CAAC/D,cAAc,GAAG,IAAI;IAC1BhT,CAAC,CAACqE,MAAM,CAAC,CAAC;IAEV,OAAOhG,+DACG,CAAC;MACP4Y,MAAM,EAAE,OAAO;MACfC,GAAG,EAAK7Y,6DAAS,CAACsJ,SAAS,CAAC,QAAQ,CAAC,mBAAc,IAAI,CAACzI,IAAI,CAACoE,EAAE,CAAC,CAAC,WAAQ;MACzE5D,IAAI,EAAE;QACJY,IAAI,EAAE;UACJiW,SAAS,EAAE9Q,KAAK,CAAC0R,IAAI,CAACZ,SAAS;QACjC;MACF;IACF,CAAC,CAAC,CACD7S,IAAI,CAAC,UAAC0T,GAAG,EAAK;MACb/Y,6DAAS,CAACgZ,WAAW,CAACD,GAAG,CAAC;MAC1BN,EAAE,oBAAFA,EAAE,CAAG,CAAC;IACR,CAAC,CAAC,SACI,CAAC,UAACQ,GAAG,EAAK;MACdP,OAAO,oBAAPA,OAAO,CAAGO,GAAG,CAAC;IAChB,CAAC,CAAC,WACM,CAAC,YAAM;MACbhG,MAAI,CAAC0B,cAAc,GAAG,KAAK;MAC3B1B,MAAI,CAACrC,cAAc,GAAG,KAAK;MAC3BjP,CAAC,CAACqE,MAAM,CAAC,CAAC;IACZ,CAAC,CAAC;EACN,CAAC;EASD;AACF;AACA;AACA;AACA;EAJEwB,MAAA,CAKAqQ,iBAAiB,GAAjB,SAAAA,kBAAkBnQ,KAAK,EAAE;IACvBA,KAAK,CAACpG,KAAK,CAAC8X,cAAc,GAAG,KAAK;IAClC1R,KAAK,CAACoC,KAAK,CAACuP,gBAAgB,CAAC,CAAC;EAChC;;EAEA;AACF;AACA,KAFE;EAAA,OAAA/E,SAAA;AAAA;;;;;;;;;;;;;;;;;;;AC1H0C;AACA;AACR;AAE7B,IAAMmJ,MAAM,GAAG;EACpBrV,aAAa,EAAbA,sDAAa;EACbiN,aAAa,EAAbA,sDAAa;EACbf,SAAS,EAATA,kDAASA;AACX,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPkC;AAGyB;AACZ;AACI;AACO;AACN;;AAErD;AACA;AACA;AACA;AACA,iEAAe;EACb;AACF;AACA;EACE/J,QAAQ,WAAAA,SAAC1J,IAAU,EAAE8c,OAAkB,EAA8B;IAAA,IAAAjd,KAAA;IACnE,IAAMM,KAAK,GAAG,IAAI4F,qEAAQ,CAAmB,CAAC;IAE9C,CAAC,MAAM,EAAE,YAAY,EAAE,aAAa,CAAC,CAACiK,OAAO,CAAC,UAAC+M,OAAO,EAAK;MACzD,IAAMrT,QAA4B,GAAG7J,KAAI,CAACkd,OAAO,GAAG,UAAU,CAAC,CAAC/c,IAAI,EAAE8c,OAAO,CAAC,CAAC9V,OAAO,CAAC,CAAC;MACxF,IAAI0C,QAAQ,CAACrD,MAAM,EAAE;QACnBqD,QAAQ,CAACsG,OAAO,CAAC,UAAC7H,IAAI;UAAA,OAAKhI,KAAK,CAACU,GAAG,CAACsH,IAAI,CAAC6U,QAAQ,EAAE7U,IAAI,CAAC;QAAA,EAAC;QAC1DhI,KAAK,CAACU,GAAG,CAACkc,OAAO,GAAG,WAAW,EAAEjc,CAAA,CAAC+b,2EAAS,MAAE,CAAC,CAAC;MACjD;IACF,CAAC,CAAC;IAEF,OAAO1c,KAAK;EACd,CAAC;EAED;AACF;AACA;EACE8c,YAAY,WAAAA,aAACjd,IAAU,EAAE8c,OAAkB,EAA8B;IACvE,IAAM3c,KAAK,GAAG,IAAI4F,qEAAQ,CAAmB,CAAC;IAE9C,OAAO5F,KAAK;EACd,CAAC;EAED;AACF;AACA;EACE+c,kBAAkB,WAAAA,mBAACld,IAAU,EAAE8c,OAAkB,EAA8B;IAC7E,IAAM3c,KAAK,GAAG,IAAI4F,qEAAQ,CAAmB,CAAC;IAE9C,IAAI/F,IAAI,CAAC2V,OAAO,CAAC,CAAC,EAAE;MAClBxV,KAAK,CAACU,GAAG,CACP,MAAM,EACNC,CAAA,CAACwE,wEAAM;QAACtD,IAAI,EAAC,YAAY;QAAChB,OAAO,EAAE,IAAI,CAACkT,UAAU,CAACjT,IAAI,CAAC,IAAI,EAAEjB,IAAI;MAAE,GACjEb,kEAAc,CAACgC,KAAK,2CAA2C,CAC1D,CACV,CAAC;IACH;IAEA,OAAOhB,KAAK;EACd,CAAC;EAED;AACF;AACA;AACA;EACEgd,mBAAmB,WAAAA,oBAACnd,IAAU,EAAE8c,OAAkB,EAA8B;IAC9E,IAAM3c,KAAK,GAAG,IAAI4F,qEAAQ,CAAmB,CAAC;IAE9C,IAAI/F,IAAI,CAAC4V,SAAS,CAAC,CAAC,EAAE;MACpBzV,KAAK,CAACU,GAAG,CACP,QAAQ,EACRC,CAAA,CAACwE,wEAAM;QAACtD,IAAI,EAAC,cAAc;QAAChB,OAAO,EAAE,IAAI,CAACiS,YAAY,CAAChS,IAAI,CAAC,IAAI,EAAEjB,IAAI;MAAE,GACrEb,kEAAc,CAACgC,KAAK,6CAA6C,CAC5D,CACV,CAAC;IACH;IAEA,OAAOhB,KAAK;EACd,CAAC;EAED;AACF;AACA;EACQ8S,YAAY,WAAAA,aAACjT,IAAU,EAAiB;IAAA,IAAA6H,MAAA;IAAA,OAAAgB,uFAAA,eAAAC,sEAAA,UAAAE,QAAA;MAAA,OAAAF,sEAAA,UAAAQ,SAAAC,QAAA;QAAA;UAAA,QAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAA,IACvC4O,OAAO,CAAClZ,kEAAc,CAACgC,KAAK,oDAAoD,CAAW,CAAC;gBAAAoI,QAAA,CAAAE,IAAA;gBAAA;cAAA;cAAA,OAAAF,QAAA,CAAA6T,MAAA;YAAA;cAAA,OAAA7T,QAAA,CAAA6T,MAAA,WAI1Fpd,IAAI,UACF,CAAC,CAAC,CACRwE,IAAI,CAAC,YAAM;gBACVqD,MAAI,CAACwV,iBAAiB,CAACrd,IAAI,EAAE,SAAS,CAAC;gBACvC,IAAIb,+DAAW,CAACyP,OAAO,CAAClH,mEAAe,EAAE;kBAAEtD,EAAE,EAAEpE,IAAI,CAACoE,EAAE,CAAC;gBAAE,CAAC,CAAC,IAAIjF,+DAAW,CAACyP,OAAO,CAAC6F,6DAAS,EAAE;kBAAErQ,EAAE,EAAEpE,IAAI,CAACoE,EAAE,CAAC;gBAAE,CAAC,CAAC,EAAE;kBAChHjF,+DAAW,CAACme,IAAI,CAAC,CAAC;gBACpB,CAAC,MAAM;kBACL/P,MAAM,CAACgQ,QAAQ,CAACC,MAAM,CAAC,CAAC;gBAC1B;cACF,CAAC,CAAC,SACI,CAAC;gBAAA,OAAM3V,MAAI,CAACwV,iBAAiB,CAACrd,IAAI,EAAE,OAAO,CAAC;cAAA,EAAC;YAAA;YAAA;cAAA,OAAAuJ,QAAA,CAAAO,IAAA;UAAA;QAAA;MAAA,GAAAd,OAAA;IAAA;EACvD,CAAC;EAED;AACF;AACA;EACEqU,iBAAiB,WAAAA,kBAACrd,IAAU,EAAE8B,IAAY,EAAQ;IAChD,IAAM4Q,OAAO,GAAG;MACd+K,OAAO,yDAAyD;MAChE7K,KAAK;IACP,CAAC,CAAC9Q,IAAI,CAAE;IAER3C,8DAAU,CAACY,IAAI,CAAC;MAAE+B,IAAI,EAAJA;IAAK,CAAC,EAAE3C,kEAAc,CAACgC,KAAK,CAACuR,OAAO,EAAE;MAAE1S,IAAI,EAAEA;IAAK,CAAC,CAAC,CAAC;EAC1E,CAAC;EAED;AACF;AACA;EACEkU,UAAU,WAAAA,WAAClU,IAAU,EAAQ;IAC3Bc,CAAC,CAACuB,KAAK,CAACqG,GAAG,CAACvJ,6DAAS,CAAC,mBAAmB,EAAE;MAAEiF,EAAE,EAAEpE,IAAI,CAACoE,EAAE,CAAC;IAAE,CAAC,CAAC,CAAC;EAChE;AACF,CAAC;;;;;;;;;;;ACrHD;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;ACAA,IAAIsZ,OAAO,GAAGC,sGAAiC;AAC/C,SAAS7U,mBAAmBA,CAAA,EAAG;EAC7B,YAAY;;EAAE;EACd8U,MAAM,CAACC,OAAO,GAAG/U,mBAAmB,GAAG,SAASA,mBAAmBA,CAAA,EAAG;IACpE,OAAO2P,CAAC;EACV,CAAC,EAAEmF,yBAAyB,GAAG,IAAI,EAAEA,yBAAyB,GAAGA,MAAM,CAACC,OAAO;EAC/E,IAAIE,CAAC;IACHtF,CAAC,GAAG,CAAC,CAAC;IACNuF,CAAC,GAAGpM,MAAM,CAACjS,SAAS;IACpBse,CAAC,GAAGD,CAAC,CAACE,cAAc;IACpBtN,CAAC,GAAGgB,MAAM,CAACuM,cAAc,IAAI,UAAUJ,CAAC,EAAEtF,CAAC,EAAEuF,CAAC,EAAE;MAC9CD,CAAC,CAACtF,CAAC,CAAC,GAAGuF,CAAC,CAAC9a,KAAK;IAChB,CAAC;IACD4O,CAAC,GAAG,UAAU,IAAI,OAAOsM,MAAM,GAAGA,MAAM,GAAG,CAAC,CAAC;IAC7CC,CAAC,GAAGvM,CAAC,CAACwM,QAAQ,IAAI,YAAY;IAC9BC,CAAC,GAAGzM,CAAC,CAAC0M,aAAa,IAAI,iBAAiB;IACxCC,CAAC,GAAG3M,CAAC,CAAC4M,WAAW,IAAI,eAAe;EACtC,SAASC,MAAMA,CAACZ,CAAC,EAAEtF,CAAC,EAAEuF,CAAC,EAAE;IACvB,OAAOpM,MAAM,CAACuM,cAAc,CAACJ,CAAC,EAAEtF,CAAC,EAAE;MACjCvV,KAAK,EAAE8a,CAAC;MACRY,UAAU,EAAE,CAAC,CAAC;MACdC,YAAY,EAAE,CAAC,CAAC;MAChBC,QAAQ,EAAE,CAAC;IACb,CAAC,CAAC,EAAEf,CAAC,CAACtF,CAAC,CAAC;EACV;EACA,IAAI;IACFkG,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;EAChB,CAAC,CAAC,OAAOZ,CAAC,EAAE;IACVY,MAAM,GAAG,SAASA,MAAMA,CAACZ,CAAC,EAAEtF,CAAC,EAAEuF,CAAC,EAAE;MAChC,OAAOD,CAAC,CAACtF,CAAC,CAAC,GAAGuF,CAAC;IACjB,CAAC;EACH;EACA,SAAS3U,IAAIA,CAAC0U,CAAC,EAAEtF,CAAC,EAAEuF,CAAC,EAAEC,CAAC,EAAE;IACxB,IAAInM,CAAC,GAAG2G,CAAC,IAAIA,CAAC,CAAC9Y,SAAS,YAAYof,SAAS,GAAGtG,CAAC,GAAGsG,SAAS;MAC3DV,CAAC,GAAGzM,MAAM,CAACoN,MAAM,CAAClN,CAAC,CAACnS,SAAS,CAAC;MAC9B4e,CAAC,GAAG,IAAIU,OAAO,CAAChB,CAAC,IAAI,EAAE,CAAC;IAC1B,OAAOrN,CAAC,CAACyN,CAAC,EAAE,SAAS,EAAE;MACrBnb,KAAK,EAAEgc,gBAAgB,CAACnB,CAAC,EAAEC,CAAC,EAAEO,CAAC;IACjC,CAAC,CAAC,EAAEF,CAAC;EACP;EACA,SAASc,QAAQA,CAACpB,CAAC,EAAEtF,CAAC,EAAEuF,CAAC,EAAE;IACzB,IAAI;MACF,OAAO;QACLlc,IAAI,EAAE,QAAQ;QACdsd,GAAG,EAAErB,CAAC,CAACja,IAAI,CAAC2U,CAAC,EAAEuF,CAAC;MAClB,CAAC;IACH,CAAC,CAAC,OAAOD,CAAC,EAAE;MACV,OAAO;QACLjc,IAAI,EAAE,OAAO;QACbsd,GAAG,EAAErB;MACP,CAAC;IACH;EACF;EACAtF,CAAC,CAACpP,IAAI,GAAGA,IAAI;EACb,IAAIgW,CAAC,GAAG,gBAAgB;IACtBC,CAAC,GAAG,gBAAgB;IACpBC,CAAC,GAAG,WAAW;IACfC,CAAC,GAAG,WAAW;IACfC,CAAC,GAAG,CAAC,CAAC;EACR,SAASV,SAASA,CAAA,EAAG,CAAC;EACtB,SAASW,iBAAiBA,CAAA,EAAG,CAAC;EAC9B,SAASC,0BAA0BA,CAAA,EAAG,CAAC;EACvC,IAAIC,CAAC,GAAG,CAAC,CAAC;EACVjB,MAAM,CAACiB,CAAC,EAAEvB,CAAC,EAAE,YAAY;IACvB,OAAO,IAAI;EACb,CAAC,CAAC;EACF,IAAIwB,CAAC,GAAGjO,MAAM,CAACkO,cAAc;IAC3B3U,CAAC,GAAG0U,CAAC,IAAIA,CAAC,CAACA,CAAC,CAACE,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;EAC3B5U,CAAC,IAAIA,CAAC,KAAK6S,CAAC,IAAIC,CAAC,CAACna,IAAI,CAACqH,CAAC,EAAEkT,CAAC,CAAC,KAAKuB,CAAC,GAAGzU,CAAC,CAAC;EACvC,IAAI6U,CAAC,GAAGL,0BAA0B,CAAChgB,SAAS,GAAGof,SAAS,CAACpf,SAAS,GAAGiS,MAAM,CAACoN,MAAM,CAACY,CAAC,CAAC;EACrF,SAASK,qBAAqBA,CAAClC,CAAC,EAAE;IAChC,CAAC,MAAM,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC/N,OAAO,CAAC,UAAUyI,CAAC,EAAE;MAC/CkG,MAAM,CAACZ,CAAC,EAAEtF,CAAC,EAAE,UAAUsF,CAAC,EAAE;QACxB,OAAO,IAAI,CAACmC,OAAO,CAACzH,CAAC,EAAEsF,CAAC,CAAC;MAC3B,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;EACA,SAASoC,aAAaA,CAACpC,CAAC,EAAEtF,CAAC,EAAE;IAC3B,SAAS2H,MAAMA,CAACpC,CAAC,EAAEpN,CAAC,EAAEkB,CAAC,EAAEuM,CAAC,EAAE;MAC1B,IAAIE,CAAC,GAAGY,QAAQ,CAACpB,CAAC,CAACC,CAAC,CAAC,EAAED,CAAC,EAAEnN,CAAC,CAAC;MAC5B,IAAI,OAAO,KAAK2N,CAAC,CAACzc,IAAI,EAAE;QACtB,IAAI2c,CAAC,GAAGF,CAAC,CAACa,GAAG;UACXC,CAAC,GAAGZ,CAAC,CAACvb,KAAK;QACb,OAAOmc,CAAC,IAAI,QAAQ,IAAI3B,OAAO,CAAC2B,CAAC,CAAC,IAAIpB,CAAC,CAACna,IAAI,CAACub,CAAC,EAAE,SAAS,CAAC,GAAG5G,CAAC,CAACoD,OAAO,CAACwD,CAAC,CAACgB,OAAO,CAAC,CAAC7b,IAAI,CAAC,UAAUuZ,CAAC,EAAE;UAClGqC,MAAM,CAAC,MAAM,EAAErC,CAAC,EAAEjM,CAAC,EAAEuM,CAAC,CAAC;QACzB,CAAC,EAAE,UAAUN,CAAC,EAAE;UACdqC,MAAM,CAAC,OAAO,EAAErC,CAAC,EAAEjM,CAAC,EAAEuM,CAAC,CAAC;QAC1B,CAAC,CAAC,GAAG5F,CAAC,CAACoD,OAAO,CAACwD,CAAC,CAAC,CAAC7a,IAAI,CAAC,UAAUuZ,CAAC,EAAE;UAClCU,CAAC,CAACvb,KAAK,GAAG6a,CAAC,EAAEjM,CAAC,CAAC2M,CAAC,CAAC;QACnB,CAAC,EAAE,UAAUV,CAAC,EAAE;UACd,OAAOqC,MAAM,CAAC,OAAO,EAAErC,CAAC,EAAEjM,CAAC,EAAEuM,CAAC,CAAC;QACjC,CAAC,CAAC;MACJ;MACAA,CAAC,CAACE,CAAC,CAACa,GAAG,CAAC;IACV;IACA,IAAIpB,CAAC;IACLpN,CAAC,CAAC,IAAI,EAAE,SAAS,EAAE;MACjB1N,KAAK,EAAE,SAASA,KAAKA,CAAC6a,CAAC,EAAEE,CAAC,EAAE;QAC1B,SAASqC,0BAA0BA,CAAA,EAAG;UACpC,OAAO,IAAI7H,CAAC,CAAC,UAAUA,CAAC,EAAEuF,CAAC,EAAE;YAC3BoC,MAAM,CAACrC,CAAC,EAAEE,CAAC,EAAExF,CAAC,EAAEuF,CAAC,CAAC;UACpB,CAAC,CAAC;QACJ;QACA,OAAOA,CAAC,GAAGA,CAAC,GAAGA,CAAC,CAACxZ,IAAI,CAAC8b,0BAA0B,EAAEA,0BAA0B,CAAC,GAAGA,0BAA0B,CAAC,CAAC;MAC9G;IACF,CAAC,CAAC;EACJ;EACA,SAASpB,gBAAgBA,CAACzG,CAAC,EAAEuF,CAAC,EAAEC,CAAC,EAAE;IACjC,IAAIrN,CAAC,GAAGyO,CAAC;IACT,OAAO,UAAUvN,CAAC,EAAEuM,CAAC,EAAE;MACrB,IAAIzN,CAAC,KAAK2O,CAAC,EAAE,MAAM,IAAI3G,KAAK,CAAC,8BAA8B,CAAC;MAC5D,IAAIhI,CAAC,KAAK4O,CAAC,EAAE;QACX,IAAI,OAAO,KAAK1N,CAAC,EAAE,MAAMuM,CAAC;QAC1B,OAAO;UACLnb,KAAK,EAAE6a,CAAC;UACR9a,IAAI,EAAE,CAAC;QACT,CAAC;MACH;MACA,KAAKgb,CAAC,CAAClG,MAAM,GAAGjG,CAAC,EAAEmM,CAAC,CAACmB,GAAG,GAAGf,CAAC,IAAI;QAC9B,IAAIE,CAAC,GAAGN,CAAC,CAACsC,QAAQ;QAClB,IAAIhC,CAAC,EAAE;UACL,IAAIE,CAAC,GAAG+B,mBAAmB,CAACjC,CAAC,EAAEN,CAAC,CAAC;UACjC,IAAIQ,CAAC,EAAE;YACL,IAAIA,CAAC,KAAKgB,CAAC,EAAE;YACb,OAAOhB,CAAC;UACV;QACF;QACA,IAAI,MAAM,KAAKR,CAAC,CAAClG,MAAM,EAAEkG,CAAC,CAACtD,IAAI,GAAGsD,CAAC,CAACwC,KAAK,GAAGxC,CAAC,CAACmB,GAAG,CAAC,KAAK,IAAI,OAAO,KAAKnB,CAAC,CAAClG,MAAM,EAAE;UAC/E,IAAInH,CAAC,KAAKyO,CAAC,EAAE,MAAMzO,CAAC,GAAG4O,CAAC,EAAEvB,CAAC,CAACmB,GAAG;UAC/BnB,CAAC,CAACyC,iBAAiB,CAACzC,CAAC,CAACmB,GAAG,CAAC;QAC5B,CAAC,MAAM,QAAQ,KAAKnB,CAAC,CAAClG,MAAM,IAAIkG,CAAC,CAACb,MAAM,CAAC,QAAQ,EAAEa,CAAC,CAACmB,GAAG,CAAC;QACzDxO,CAAC,GAAG2O,CAAC;QACL,IAAIK,CAAC,GAAGT,QAAQ,CAAC1G,CAAC,EAAEuF,CAAC,EAAEC,CAAC,CAAC;QACzB,IAAI,QAAQ,KAAK2B,CAAC,CAAC9d,IAAI,EAAE;UACvB,IAAI8O,CAAC,GAAGqN,CAAC,CAAChb,IAAI,GAAGuc,CAAC,GAAGF,CAAC,EAAEM,CAAC,CAACR,GAAG,KAAKK,CAAC,EAAE;UACrC,OAAO;YACLvc,KAAK,EAAE0c,CAAC,CAACR,GAAG;YACZnc,IAAI,EAAEgb,CAAC,CAAChb;UACV,CAAC;QACH;QACA,OAAO,KAAK2c,CAAC,CAAC9d,IAAI,KAAK8O,CAAC,GAAG4O,CAAC,EAAEvB,CAAC,CAAClG,MAAM,GAAG,OAAO,EAAEkG,CAAC,CAACmB,GAAG,GAAGQ,CAAC,CAACR,GAAG,CAAC;MAClE;IACF,CAAC;EACH;EACA,SAASoB,mBAAmBA,CAAC/H,CAAC,EAAEuF,CAAC,EAAE;IACjC,IAAIC,CAAC,GAAGD,CAAC,CAACjG,MAAM;MACdnH,CAAC,GAAG6H,CAAC,CAAC6F,QAAQ,CAACL,CAAC,CAAC;IACnB,IAAIrN,CAAC,KAAKmN,CAAC,EAAE,OAAOC,CAAC,CAACuC,QAAQ,GAAG,IAAI,EAAE,OAAO,KAAKtC,CAAC,IAAIxF,CAAC,CAAC6F,QAAQ,CAAC,QAAQ,CAAC,KAAKN,CAAC,CAACjG,MAAM,GAAG,QAAQ,EAAEiG,CAAC,CAACoB,GAAG,GAAGrB,CAAC,EAAEyC,mBAAmB,CAAC/H,CAAC,EAAEuF,CAAC,CAAC,EAAE,OAAO,KAAKA,CAAC,CAACjG,MAAM,CAAC,IAAI,QAAQ,KAAKkG,CAAC,KAAKD,CAAC,CAACjG,MAAM,GAAG,OAAO,EAAEiG,CAAC,CAACoB,GAAG,GAAG,IAAIuB,SAAS,CAAC,mCAAmC,GAAG1C,CAAC,GAAG,UAAU,CAAC,CAAC,EAAEwB,CAAC;IAC3R,IAAI3N,CAAC,GAAGqN,QAAQ,CAACvO,CAAC,EAAE6H,CAAC,CAAC6F,QAAQ,EAAEN,CAAC,CAACoB,GAAG,CAAC;IACtC,IAAI,OAAO,KAAKtN,CAAC,CAAChQ,IAAI,EAAE,OAAOkc,CAAC,CAACjG,MAAM,GAAG,OAAO,EAAEiG,CAAC,CAACoB,GAAG,GAAGtN,CAAC,CAACsN,GAAG,EAAEpB,CAAC,CAACuC,QAAQ,GAAG,IAAI,EAAEd,CAAC;IACtF,IAAIpB,CAAC,GAAGvM,CAAC,CAACsN,GAAG;IACb,OAAOf,CAAC,GAAGA,CAAC,CAACpb,IAAI,IAAI+a,CAAC,CAACvF,CAAC,CAACmI,UAAU,CAAC,GAAGvC,CAAC,CAACnb,KAAK,EAAE8a,CAAC,CAACvU,IAAI,GAAGgP,CAAC,CAACoI,OAAO,EAAE,QAAQ,KAAK7C,CAAC,CAACjG,MAAM,KAAKiG,CAAC,CAACjG,MAAM,GAAG,MAAM,EAAEiG,CAAC,CAACoB,GAAG,GAAGrB,CAAC,CAAC,EAAEC,CAAC,CAACuC,QAAQ,GAAG,IAAI,EAAEd,CAAC,IAAIpB,CAAC,IAAIL,CAAC,CAACjG,MAAM,GAAG,OAAO,EAAEiG,CAAC,CAACoB,GAAG,GAAG,IAAIuB,SAAS,CAAC,kCAAkC,CAAC,EAAE3C,CAAC,CAACuC,QAAQ,GAAG,IAAI,EAAEd,CAAC,CAAC;EAChQ;EACA,SAASqB,YAAYA,CAAC/C,CAAC,EAAE;IACvB,IAAItF,CAAC,GAAG;MACNsI,MAAM,EAAEhD,CAAC,CAAC,CAAC;IACb,CAAC;IACD,CAAC,IAAIA,CAAC,KAAKtF,CAAC,CAACuI,QAAQ,GAAGjD,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,IAAIA,CAAC,KAAKtF,CAAC,CAACwI,UAAU,GAAGlD,CAAC,CAAC,CAAC,CAAC,EAAEtF,CAAC,CAACyI,QAAQ,GAAGnD,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAACoD,UAAU,CAACzf,IAAI,CAAC+W,CAAC,CAAC;EAC5G;EACA,SAAS2I,aAAaA,CAACrD,CAAC,EAAE;IACxB,IAAItF,CAAC,GAAGsF,CAAC,CAACsD,UAAU,IAAI,CAAC,CAAC;IAC1B5I,CAAC,CAAC3W,IAAI,GAAG,QAAQ,EAAE,OAAO2W,CAAC,CAAC2G,GAAG,EAAErB,CAAC,CAACsD,UAAU,GAAG5I,CAAC;EACnD;EACA,SAASwG,OAAOA,CAAClB,CAAC,EAAE;IAClB,IAAI,CAACoD,UAAU,GAAG,CAAC;MACjBJ,MAAM,EAAE;IACV,CAAC,CAAC,EAAEhD,CAAC,CAAC/N,OAAO,CAAC8Q,YAAY,EAAE,IAAI,CAAC,EAAE,IAAI,CAACtS,KAAK,CAAC,CAAC,CAAC,CAAC;EACnD;EACA,SAASuR,MAAMA,CAACtH,CAAC,EAAE;IACjB,IAAIA,CAAC,IAAI,EAAE,KAAKA,CAAC,EAAE;MACjB,IAAIuF,CAAC,GAAGvF,CAAC,CAAC4F,CAAC,CAAC;MACZ,IAAIL,CAAC,EAAE,OAAOA,CAAC,CAACla,IAAI,CAAC2U,CAAC,CAAC;MACvB,IAAI,UAAU,IAAI,OAAOA,CAAC,CAAChP,IAAI,EAAE,OAAOgP,CAAC;MACzC,IAAI,CAAC6I,KAAK,CAAC7I,CAAC,CAACpS,MAAM,CAAC,EAAE;QACpB,IAAIuK,CAAC,GAAG,CAAC,CAAC;UACRkB,CAAC,GAAG,SAASrI,IAAIA,CAAA,EAAG;YAClB,OAAO,EAAEmH,CAAC,GAAG6H,CAAC,CAACpS,MAAM;cAAG,IAAI4X,CAAC,CAACna,IAAI,CAAC2U,CAAC,EAAE7H,CAAC,CAAC,EAAE,OAAOnH,IAAI,CAACvG,KAAK,GAAGuV,CAAC,CAAC7H,CAAC,CAAC,EAAEnH,IAAI,CAACxG,IAAI,GAAG,CAAC,CAAC,EAAEwG,IAAI;YAAC;YACzF,OAAOA,IAAI,CAACvG,KAAK,GAAG6a,CAAC,EAAEtU,IAAI,CAACxG,IAAI,GAAG,CAAC,CAAC,EAAEwG,IAAI;UAC7C,CAAC;QACH,OAAOqI,CAAC,CAACrI,IAAI,GAAGqI,CAAC;MACnB;IACF;IACA,MAAM,IAAI6O,SAAS,CAACjD,OAAO,CAACjF,CAAC,CAAC,GAAG,kBAAkB,CAAC;EACtD;EACA,OAAOiH,iBAAiB,CAAC/f,SAAS,GAAGggB,0BAA0B,EAAE/O,CAAC,CAACoP,CAAC,EAAE,aAAa,EAAE;IACnF9c,KAAK,EAAEyc,0BAA0B;IACjCd,YAAY,EAAE,CAAC;EACjB,CAAC,CAAC,EAAEjO,CAAC,CAAC+O,0BAA0B,EAAE,aAAa,EAAE;IAC/Czc,KAAK,EAAEwc,iBAAiB;IACxBb,YAAY,EAAE,CAAC;EACjB,CAAC,CAAC,EAAEa,iBAAiB,CAAC6B,WAAW,GAAG5C,MAAM,CAACgB,0BAA0B,EAAElB,CAAC,EAAE,mBAAmB,CAAC,EAAEhG,CAAC,CAAC+I,mBAAmB,GAAG,UAAUzD,CAAC,EAAE;IACnI,IAAItF,CAAC,GAAG,UAAU,IAAI,OAAOsF,CAAC,IAAIA,CAAC,CAAC0D,WAAW;IAC/C,OAAO,CAAC,CAAChJ,CAAC,KAAKA,CAAC,KAAKiH,iBAAiB,IAAI,mBAAmB,MAAMjH,CAAC,CAAC8I,WAAW,IAAI9I,CAAC,CAACjJ,IAAI,CAAC,CAAC;EAC9F,CAAC,EAAEiJ,CAAC,CAAC1P,IAAI,GAAG,UAAUgV,CAAC,EAAE;IACvB,OAAOnM,MAAM,CAAC8P,cAAc,GAAG9P,MAAM,CAAC8P,cAAc,CAAC3D,CAAC,EAAE4B,0BAA0B,CAAC,IAAI5B,CAAC,CAAC4D,SAAS,GAAGhC,0BAA0B,EAAEhB,MAAM,CAACZ,CAAC,EAAEU,CAAC,EAAE,mBAAmB,CAAC,CAAC,EAAEV,CAAC,CAACpe,SAAS,GAAGiS,MAAM,CAACoN,MAAM,CAACgB,CAAC,CAAC,EAAEjC,CAAC;EACxM,CAAC,EAAEtF,CAAC,CAACmJ,KAAK,GAAG,UAAU7D,CAAC,EAAE;IACxB,OAAO;MACLsC,OAAO,EAAEtC;IACX,CAAC;EACH,CAAC,EAAEkC,qBAAqB,CAACE,aAAa,CAACxgB,SAAS,CAAC,EAAEgf,MAAM,CAACwB,aAAa,CAACxgB,SAAS,EAAE4e,CAAC,EAAE,YAAY;IAChG,OAAO,IAAI;EACb,CAAC,CAAC,EAAE9F,CAAC,CAAC0H,aAAa,GAAGA,aAAa,EAAE1H,CAAC,CAACoJ,KAAK,GAAG,UAAU9D,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAErN,CAAC,EAAEkB,CAAC,EAAE;IACtE,KAAK,CAAC,KAAKA,CAAC,KAAKA,CAAC,GAAG8J,OAAO,CAAC;IAC7B,IAAIyC,CAAC,GAAG,IAAI8B,aAAa,CAAC9W,IAAI,CAAC0U,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAErN,CAAC,CAAC,EAAEkB,CAAC,CAAC;IAC9C,OAAO2G,CAAC,CAAC+I,mBAAmB,CAACxD,CAAC,CAAC,GAAGK,CAAC,GAAGA,CAAC,CAAC5U,IAAI,CAAC,CAAC,CAACjF,IAAI,CAAC,UAAUuZ,CAAC,EAAE;MAC/D,OAAOA,CAAC,CAAC9a,IAAI,GAAG8a,CAAC,CAAC7a,KAAK,GAAGmb,CAAC,CAAC5U,IAAI,CAAC,CAAC;IACpC,CAAC,CAAC;EACJ,CAAC,EAAEwW,qBAAqB,CAACD,CAAC,CAAC,EAAErB,MAAM,CAACqB,CAAC,EAAEvB,CAAC,EAAE,WAAW,CAAC,EAAEE,MAAM,CAACqB,CAAC,EAAE3B,CAAC,EAAE,YAAY;IAC/E,OAAO,IAAI;EACb,CAAC,CAAC,EAAEM,MAAM,CAACqB,CAAC,EAAE,UAAU,EAAE,YAAY;IACpC,OAAO,oBAAoB;EAC7B,CAAC,CAAC,EAAEvH,CAAC,CAAC5G,IAAI,GAAG,UAAUkM,CAAC,EAAE;IACxB,IAAItF,CAAC,GAAG7G,MAAM,CAACmM,CAAC,CAAC;MACfC,CAAC,GAAG,EAAE;IACR,KAAK,IAAIC,CAAC,IAAIxF,CAAC;MAAEuF,CAAC,CAACtc,IAAI,CAACuc,CAAC,CAAC;IAAC;IAC3B,OAAOD,CAAC,CAAC8D,OAAO,CAAC,CAAC,EAAE,SAASrY,IAAIA,CAAA,EAAG;MAClC,OAAOuU,CAAC,CAAC3X,MAAM,GAAG;QAChB,IAAI0X,CAAC,GAAGC,CAAC,CAAC+D,GAAG,CAAC,CAAC;QACf,IAAIhE,CAAC,IAAItF,CAAC,EAAE,OAAOhP,IAAI,CAACvG,KAAK,GAAG6a,CAAC,EAAEtU,IAAI,CAACxG,IAAI,GAAG,CAAC,CAAC,EAAEwG,IAAI;MACzD;MACA,OAAOA,IAAI,CAACxG,IAAI,GAAG,CAAC,CAAC,EAAEwG,IAAI;IAC7B,CAAC;EACH,CAAC,EAAEgP,CAAC,CAACsH,MAAM,GAAGA,MAAM,EAAEd,OAAO,CAACtf,SAAS,GAAG;IACxC8hB,WAAW,EAAExC,OAAO;IACpBzQ,KAAK,EAAE,SAASA,KAAKA,CAACiK,CAAC,EAAE;MACvB,IAAI,IAAI,CAACjP,IAAI,GAAG,CAAC,EAAE,IAAI,CAACC,IAAI,GAAG,CAAC,EAAE,IAAI,CAACkR,IAAI,GAAG,IAAI,CAAC8F,KAAK,GAAG1C,CAAC,EAAE,IAAI,CAAC9a,IAAI,GAAG,CAAC,CAAC,EAAE,IAAI,CAACsd,QAAQ,GAAG,IAAI,EAAE,IAAI,CAACxI,MAAM,GAAG,MAAM,EAAE,IAAI,CAACqH,GAAG,GAAGrB,CAAC,EAAE,IAAI,CAACoD,UAAU,CAACnR,OAAO,CAACoR,aAAa,CAAC,EAAE,CAAC3I,CAAC,EAAE,KAAK,IAAIuF,CAAC,IAAI,IAAI;QAAE,GAAG,KAAKA,CAAC,CAACgE,MAAM,CAAC,CAAC,CAAC,IAAI/D,CAAC,CAACna,IAAI,CAAC,IAAI,EAAEka,CAAC,CAAC,IAAI,CAACsD,KAAK,CAAC,CAACtD,CAAC,CAACiE,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,CAACjE,CAAC,CAAC,GAAGD,CAAC,CAAC;MAAC;IACzR,CAAC;IACDjU,IAAI,EAAE,SAASA,IAAIA,CAAA,EAAG;MACpB,IAAI,CAAC7G,IAAI,GAAG,CAAC,CAAC;MACd,IAAI8a,CAAC,GAAG,IAAI,CAACoD,UAAU,CAAC,CAAC,CAAC,CAACE,UAAU;MACrC,IAAI,OAAO,KAAKtD,CAAC,CAACjc,IAAI,EAAE,MAAMic,CAAC,CAACqB,GAAG;MACnC,OAAO,IAAI,CAAC8C,IAAI;IAClB,CAAC;IACDxB,iBAAiB,EAAE,SAASA,iBAAiBA,CAACjI,CAAC,EAAE;MAC/C,IAAI,IAAI,CAACxV,IAAI,EAAE,MAAMwV,CAAC;MACtB,IAAIuF,CAAC,GAAG,IAAI;MACZ,SAASmE,MAAMA,CAAClE,CAAC,EAAErN,CAAC,EAAE;QACpB,OAAOyN,CAAC,CAACvc,IAAI,GAAG,OAAO,EAAEuc,CAAC,CAACe,GAAG,GAAG3G,CAAC,EAAEuF,CAAC,CAACvU,IAAI,GAAGwU,CAAC,EAAErN,CAAC,KAAKoN,CAAC,CAACjG,MAAM,GAAG,MAAM,EAAEiG,CAAC,CAACoB,GAAG,GAAGrB,CAAC,CAAC,EAAE,CAAC,CAACnN,CAAC;MAC1F;MACA,KAAK,IAAIA,CAAC,GAAG,IAAI,CAACuQ,UAAU,CAAC9a,MAAM,GAAG,CAAC,EAAEuK,CAAC,IAAI,CAAC,EAAE,EAAEA,CAAC,EAAE;QACpD,IAAIkB,CAAC,GAAG,IAAI,CAACqP,UAAU,CAACvQ,CAAC,CAAC;UACxByN,CAAC,GAAGvM,CAAC,CAACuP,UAAU;QAClB,IAAI,MAAM,KAAKvP,CAAC,CAACiP,MAAM,EAAE,OAAOoB,MAAM,CAAC,KAAK,CAAC;QAC7C,IAAIrQ,CAAC,CAACiP,MAAM,IAAI,IAAI,CAACvX,IAAI,EAAE;UACzB,IAAI+U,CAAC,GAAGN,CAAC,CAACna,IAAI,CAACgO,CAAC,EAAE,UAAU,CAAC;YAC3B2M,CAAC,GAAGR,CAAC,CAACna,IAAI,CAACgO,CAAC,EAAE,YAAY,CAAC;UAC7B,IAAIyM,CAAC,IAAIE,CAAC,EAAE;YACV,IAAI,IAAI,CAACjV,IAAI,GAAGsI,CAAC,CAACkP,QAAQ,EAAE,OAAOmB,MAAM,CAACrQ,CAAC,CAACkP,QAAQ,EAAE,CAAC,CAAC,CAAC;YACzD,IAAI,IAAI,CAACxX,IAAI,GAAGsI,CAAC,CAACmP,UAAU,EAAE,OAAOkB,MAAM,CAACrQ,CAAC,CAACmP,UAAU,CAAC;UAC3D,CAAC,MAAM,IAAI1C,CAAC,EAAE;YACZ,IAAI,IAAI,CAAC/U,IAAI,GAAGsI,CAAC,CAACkP,QAAQ,EAAE,OAAOmB,MAAM,CAACrQ,CAAC,CAACkP,QAAQ,EAAE,CAAC,CAAC,CAAC;UAC3D,CAAC,MAAM;YACL,IAAI,CAACvC,CAAC,EAAE,MAAM,IAAI7F,KAAK,CAAC,wCAAwC,CAAC;YACjE,IAAI,IAAI,CAACpP,IAAI,GAAGsI,CAAC,CAACmP,UAAU,EAAE,OAAOkB,MAAM,CAACrQ,CAAC,CAACmP,UAAU,CAAC;UAC3D;QACF;MACF;IACF,CAAC;IACD7D,MAAM,EAAE,SAASA,MAAMA,CAACW,CAAC,EAAEtF,CAAC,EAAE;MAC5B,KAAK,IAAIuF,CAAC,GAAG,IAAI,CAACmD,UAAU,CAAC9a,MAAM,GAAG,CAAC,EAAE2X,CAAC,IAAI,CAAC,EAAE,EAAEA,CAAC,EAAE;QACpD,IAAIpN,CAAC,GAAG,IAAI,CAACuQ,UAAU,CAACnD,CAAC,CAAC;QAC1B,IAAIpN,CAAC,CAACmQ,MAAM,IAAI,IAAI,CAACvX,IAAI,IAAIyU,CAAC,CAACna,IAAI,CAAC8M,CAAC,EAAE,YAAY,CAAC,IAAI,IAAI,CAACpH,IAAI,GAAGoH,CAAC,CAACqQ,UAAU,EAAE;UAChF,IAAInP,CAAC,GAAGlB,CAAC;UACT;QACF;MACF;MACAkB,CAAC,KAAK,OAAO,KAAKiM,CAAC,IAAI,UAAU,KAAKA,CAAC,CAAC,IAAIjM,CAAC,CAACiP,MAAM,IAAItI,CAAC,IAAIA,CAAC,IAAI3G,CAAC,CAACmP,UAAU,KAAKnP,CAAC,GAAG,IAAI,CAAC;MAC5F,IAAIuM,CAAC,GAAGvM,CAAC,GAAGA,CAAC,CAACuP,UAAU,GAAG,CAAC,CAAC;MAC7B,OAAOhD,CAAC,CAACvc,IAAI,GAAGic,CAAC,EAAEM,CAAC,CAACe,GAAG,GAAG3G,CAAC,EAAE3G,CAAC,IAAI,IAAI,CAACiG,MAAM,GAAG,MAAM,EAAE,IAAI,CAACtO,IAAI,GAAGqI,CAAC,CAACmP,UAAU,EAAExB,CAAC,IAAI,IAAI,CAAC2C,QAAQ,CAAC/D,CAAC,CAAC;IAC1G,CAAC;IACD+D,QAAQ,EAAE,SAASA,QAAQA,CAACrE,CAAC,EAAEtF,CAAC,EAAE;MAChC,IAAI,OAAO,KAAKsF,CAAC,CAACjc,IAAI,EAAE,MAAMic,CAAC,CAACqB,GAAG;MACnC,OAAO,OAAO,KAAKrB,CAAC,CAACjc,IAAI,IAAI,UAAU,KAAKic,CAAC,CAACjc,IAAI,GAAG,IAAI,CAAC2H,IAAI,GAAGsU,CAAC,CAACqB,GAAG,GAAG,QAAQ,KAAKrB,CAAC,CAACjc,IAAI,IAAI,IAAI,CAACogB,IAAI,GAAG,IAAI,CAAC9C,GAAG,GAAGrB,CAAC,CAACqB,GAAG,EAAE,IAAI,CAACrH,MAAM,GAAG,QAAQ,EAAE,IAAI,CAACtO,IAAI,GAAG,KAAK,IAAI,QAAQ,KAAKsU,CAAC,CAACjc,IAAI,IAAI2W,CAAC,KAAK,IAAI,CAAChP,IAAI,GAAGgP,CAAC,CAAC,EAAEgH,CAAC;IAC3N,CAAC;IACDvM,MAAM,EAAE,SAASA,MAAMA,CAAC6K,CAAC,EAAE;MACzB,KAAK,IAAItF,CAAC,GAAG,IAAI,CAAC0I,UAAU,CAAC9a,MAAM,GAAG,CAAC,EAAEoS,CAAC,IAAI,CAAC,EAAE,EAAEA,CAAC,EAAE;QACpD,IAAIuF,CAAC,GAAG,IAAI,CAACmD,UAAU,CAAC1I,CAAC,CAAC;QAC1B,IAAIuF,CAAC,CAACiD,UAAU,KAAKlD,CAAC,EAAE,OAAO,IAAI,CAACqE,QAAQ,CAACpE,CAAC,CAACqD,UAAU,EAAErD,CAAC,CAACkD,QAAQ,CAAC,EAAEE,aAAa,CAACpD,CAAC,CAAC,EAAEyB,CAAC;MAC7F;IACF,CAAC;IACD,OAAO,EAAE,SAAS4C,MAAMA,CAACtE,CAAC,EAAE;MAC1B,KAAK,IAAItF,CAAC,GAAG,IAAI,CAAC0I,UAAU,CAAC9a,MAAM,GAAG,CAAC,EAAEoS,CAAC,IAAI,CAAC,EAAE,EAAEA,CAAC,EAAE;QACpD,IAAIuF,CAAC,GAAG,IAAI,CAACmD,UAAU,CAAC1I,CAAC,CAAC;QAC1B,IAAIuF,CAAC,CAAC+C,MAAM,KAAKhD,CAAC,EAAE;UAClB,IAAIE,CAAC,GAAGD,CAAC,CAACqD,UAAU;UACpB,IAAI,OAAO,KAAKpD,CAAC,CAACnc,IAAI,EAAE;YACtB,IAAI8O,CAAC,GAAGqN,CAAC,CAACmB,GAAG;YACbgC,aAAa,CAACpD,CAAC,CAAC;UAClB;UACA,OAAOpN,CAAC;QACV;MACF;MACA,MAAM,IAAIgI,KAAK,CAAC,uBAAuB,CAAC;IAC1C,CAAC;IACD0J,aAAa,EAAE,SAASA,aAAaA,CAAC7J,CAAC,EAAEuF,CAAC,EAAEC,CAAC,EAAE;MAC7C,OAAO,IAAI,CAACsC,QAAQ,GAAG;QACrBjC,QAAQ,EAAEyB,MAAM,CAACtH,CAAC,CAAC;QACnBmI,UAAU,EAAE5C,CAAC;QACb6C,OAAO,EAAE5C;MACX,CAAC,EAAE,MAAM,KAAK,IAAI,CAAClG,MAAM,KAAK,IAAI,CAACqH,GAAG,GAAGrB,CAAC,CAAC,EAAE0B,CAAC;IAChD;EACF,CAAC,EAAEhH,CAAC;AACN;AACAmF,MAAM,CAACC,OAAO,GAAG/U,mBAAmB,EAAE8U,yBAAyB,GAAG,IAAI,EAAEA,yBAAyB,GAAGA,MAAM,CAACC,OAAO;;;;;;;;;;AC/SlH,SAASH,OAAOA,CAAC9M,CAAC,EAAE;EAClB,yBAAyB;;EAEzB,OAAO,CAACgN,MAAM,CAACC,OAAO,GAAGH,OAAO,GAAG,UAAU,IAAI,OAAOU,MAAM,IAAI,QAAQ,IAAI,OAAOA,MAAM,CAACE,QAAQ,GAAG,UAAU1N,CAAC,EAAE;IAClH,OAAO,OAAOA,CAAC;EACjB,CAAC,GAAG,UAAUA,CAAC,EAAE;IACf,OAAOA,CAAC,IAAI,UAAU,IAAI,OAAOwN,MAAM,IAAIxN,CAAC,CAAC6Q,WAAW,KAAKrD,MAAM,IAAIxN,CAAC,KAAKwN,MAAM,CAACze,SAAS,GAAG,QAAQ,GAAG,OAAOiR,CAAC;EACrH,CAAC,EAAEgN,yBAAyB,GAAG,IAAI,EAAEA,yBAAyB,GAAGA,MAAM,CAACC,OAAO,GAAGH,OAAO,CAAC9M,CAAC,CAAC;AAC9F;AACAgN,MAAM,CAACC,OAAO,GAAGH,OAAO,EAAEE,yBAAyB,GAAG,IAAI,EAAEA,yBAAyB,GAAGA,MAAM,CAACC,OAAO;;;;;;;;;;ACTtG;;AAEA,IAAI0E,OAAO,GAAG5E,mBAAO,CAAC,kGAA+B,CAAC,CAAC,CAAC;AACxDC,MAAM,CAACC,OAAO,GAAG0E,OAAO;;AAExB;AACA,IAAI;EACFC,kBAAkB,GAAGD,OAAO;AAC9B,CAAC,CAAC,OAAOE,oBAAoB,EAAE;EAC7B,IAAI,OAAOC,UAAU,KAAK,QAAQ,EAAE;IAClCA,UAAU,CAACF,kBAAkB,GAAGD,OAAO;EACzC,CAAC,MAAM;IACLI,QAAQ,CAAC,GAAG,EAAE,wBAAwB,CAAC,CAACJ,OAAO,CAAC;EAClD;AACF;;;;;;;;;;;;;;;ACde,SAASpH,sBAAsBA,CAACyH,IAAI,EAAE;EACnD,IAAIA,IAAI,KAAK,KAAK,CAAC,EAAE;IACnB,MAAM,IAAIC,cAAc,CAAC,2DAA2D,CAAC;EACvF;EACA,OAAOD,IAAI;AACb;;;;;;;;;;;;;;;ACLA,SAASE,kBAAkBA,CAACC,GAAG,EAAElH,OAAO,EAAEmH,MAAM,EAAEC,KAAK,EAAEC,MAAM,EAAE5W,GAAG,EAAE8S,GAAG,EAAE;EACzE,IAAI;IACF,IAAI+D,IAAI,GAAGJ,GAAG,CAACzW,GAAG,CAAC,CAAC8S,GAAG,CAAC;IACxB,IAAIlc,KAAK,GAAGigB,IAAI,CAACjgB,KAAK;EACxB,CAAC,CAAC,OAAO0P,KAAK,EAAE;IACdoQ,MAAM,CAACpQ,KAAK,CAAC;IACb;EACF;EACA,IAAIuQ,IAAI,CAAClgB,IAAI,EAAE;IACb4Y,OAAO,CAAC3Y,KAAK,CAAC;EAChB,CAAC,MAAM;IACL0Y,OAAO,CAACC,OAAO,CAAC3Y,KAAK,CAAC,CAACsB,IAAI,CAACye,KAAK,EAAEC,MAAM,CAAC;EAC5C;AACF;AACe,SAASra,iBAAiBA,CAACua,EAAE,EAAE;EAC5C,OAAO,YAAY;IACjB,IAAIR,IAAI,GAAG,IAAI;MACbtc,IAAI,GAAGF,SAAS;IAClB,OAAO,IAAIwV,OAAO,CAAC,UAAUC,OAAO,EAAEmH,MAAM,EAAE;MAC5C,IAAID,GAAG,GAAGK,EAAE,CAAC3c,KAAK,CAACmc,IAAI,EAAEtc,IAAI,CAAC;MAC9B,SAAS2c,KAAKA,CAAC/f,KAAK,EAAE;QACpB4f,kBAAkB,CAACC,GAAG,EAAElH,OAAO,EAAEmH,MAAM,EAAEC,KAAK,EAAEC,MAAM,EAAE,MAAM,EAAEhgB,KAAK,CAAC;MACxE;MACA,SAASggB,MAAMA,CAAC9K,GAAG,EAAE;QACnB0K,kBAAkB,CAACC,GAAG,EAAElH,OAAO,EAAEmH,MAAM,EAAEC,KAAK,EAAEC,MAAM,EAAE,OAAO,EAAE9K,GAAG,CAAC;MACvE;MACA6K,KAAK,CAAC/d,SAAS,CAAC;IAClB,CAAC,CAAC;EACJ,CAAC;AACH;;;;;;;;;;;;;;;;;AC7BiD;AACoB;AACtD,SAASoe,UAAUA,CAACC,MAAM,EAAEjd,IAAI,EAAEkd,KAAK,EAAE;EACtD,IAAIH,wEAAwB,CAAC,CAAC,EAAE;IAC9BC,UAAU,GAAGG,OAAO,CAACC,SAAS,CAACziB,IAAI,CAAC,CAAC;EACvC,CAAC,MAAM;IACLqiB,UAAU,GAAG,SAASA,UAAUA,CAACC,MAAM,EAAEjd,IAAI,EAAEkd,KAAK,EAAE;MACpD,IAAInF,CAAC,GAAG,CAAC,IAAI,CAAC;MACdA,CAAC,CAAC3c,IAAI,CAAC+E,KAAK,CAAC4X,CAAC,EAAE/X,IAAI,CAAC;MACrB,IAAIqd,WAAW,GAAGhB,QAAQ,CAAC1hB,IAAI,CAACwF,KAAK,CAAC8c,MAAM,EAAElF,CAAC,CAAC;MAChD,IAAIuF,QAAQ,GAAG,IAAID,WAAW,CAAC,CAAC;MAChC,IAAIH,KAAK,EAAE9B,8DAAc,CAACkC,QAAQ,EAAEJ,KAAK,CAAC7jB,SAAS,CAAC;MACpD,OAAOikB,QAAQ;IACjB,CAAC;EACH;EACA,OAAON,UAAU,CAAC7c,KAAK,CAAC,IAAI,EAAEL,SAAS,CAAC;AAC1C;;;;;;;;;;;;;;;AChBA,SAASyd,iBAAiBA,CAACzM,MAAM,EAAE0M,KAAK,EAAE;EACxC,KAAK,IAAIhS,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGgS,KAAK,CAACzd,MAAM,EAAEyL,CAAC,EAAE,EAAE;IACrC,IAAIiS,UAAU,GAAGD,KAAK,CAAChS,CAAC,CAAC;IACzBiS,UAAU,CAACnF,UAAU,GAAGmF,UAAU,CAACnF,UAAU,IAAI,KAAK;IACtDmF,UAAU,CAAClF,YAAY,GAAG,IAAI;IAC9B,IAAI,OAAO,IAAIkF,UAAU,EAAEA,UAAU,CAACjF,QAAQ,GAAG,IAAI;IACrDlN,MAAM,CAACuM,cAAc,CAAC/G,MAAM,EAAE2M,UAAU,CAACzX,GAAG,EAAEyX,UAAU,CAAC;EAC3D;AACF;AACe,SAASvH,YAAYA,CAACmH,WAAW,EAAEK,UAAU,EAAEC,WAAW,EAAE;EACzE,IAAID,UAAU,EAAEH,iBAAiB,CAACF,WAAW,CAAChkB,SAAS,EAAEqkB,UAAU,CAAC;EACpE,IAAIC,WAAW,EAAEJ,iBAAiB,CAACF,WAAW,EAAEM,WAAW,CAAC;EAC5DrS,MAAM,CAACuM,cAAc,CAACwF,WAAW,EAAE,WAAW,EAAE;IAC9C7E,QAAQ,EAAE;EACZ,CAAC,CAAC;EACF,OAAO6E,WAAW;AACpB;;;;;;;;;;;;;;;AChBe,SAASje,QAAQA,CAAA,EAAG;EACjCA,QAAQ,GAAGkM,MAAM,CAACsS,MAAM,GAAGtS,MAAM,CAACsS,MAAM,CAACjjB,IAAI,CAAC,CAAC,GAAG,UAAUmW,MAAM,EAAE;IAClE,KAAK,IAAItF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG1L,SAAS,CAACC,MAAM,EAAEyL,CAAC,EAAE,EAAE;MACzC,IAAIqS,MAAM,GAAG/d,SAAS,CAAC0L,CAAC,CAAC;MACzB,KAAK,IAAIxF,GAAG,IAAI6X,MAAM,EAAE;QACtB,IAAIvS,MAAM,CAACjS,SAAS,CAACue,cAAc,CAACpa,IAAI,CAACqgB,MAAM,EAAE7X,GAAG,CAAC,EAAE;UACrD8K,MAAM,CAAC9K,GAAG,CAAC,GAAG6X,MAAM,CAAC7X,GAAG,CAAC;QAC3B;MACF;IACF;IACA,OAAO8K,MAAM;EACf,CAAC;EACD,OAAO1R,QAAQ,CAACe,KAAK,CAAC,IAAI,EAAEL,SAAS,CAAC;AACxC;;;;;;;;;;;;;;;ACbe,SAASge,eAAeA,CAACxT,CAAC,EAAE;EACzCwT,eAAe,GAAGxS,MAAM,CAAC8P,cAAc,GAAG9P,MAAM,CAACkO,cAAc,CAAC7e,IAAI,CAAC,CAAC,GAAG,SAASmjB,eAAeA,CAACxT,CAAC,EAAE;IACnG,OAAOA,CAAC,CAAC+Q,SAAS,IAAI/P,MAAM,CAACkO,cAAc,CAAClP,CAAC,CAAC;EAChD,CAAC;EACD,OAAOwT,eAAe,CAACxT,CAAC,CAAC;AAC3B;;;;;;;;;;;;;;;;ACLiD;AAClC,SAAS1K,cAAcA,CAACme,QAAQ,EAAEC,UAAU,EAAE;EAC3DD,QAAQ,CAAC1kB,SAAS,GAAGiS,MAAM,CAACoN,MAAM,CAACsF,UAAU,CAAC3kB,SAAS,CAAC;EACxD0kB,QAAQ,CAAC1kB,SAAS,CAAC8hB,WAAW,GAAG4C,QAAQ;EACzC3C,8DAAc,CAAC2C,QAAQ,EAAEC,UAAU,CAAC;AACtC;;;;;;;;;;;;;;;ACLe,SAASC,iBAAiBA,CAACnB,EAAE,EAAE;EAC5C,OAAOT,QAAQ,CAAC6B,QAAQ,CAAC1gB,IAAI,CAACsf,EAAE,CAAC,CAAC/G,OAAO,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;AACnE;;;;;;;;;;;;;;;ACFe,SAASoI,yBAAyBA,CAAA,EAAG;EAClD,IAAI,OAAOhB,OAAO,KAAK,WAAW,IAAI,CAACA,OAAO,CAACC,SAAS,EAAE,OAAO,KAAK;EACtE,IAAID,OAAO,CAACC,SAAS,CAACgB,IAAI,EAAE,OAAO,KAAK;EACxC,IAAI,OAAOC,KAAK,KAAK,UAAU,EAAE,OAAO,IAAI;EAC5C,IAAI;IACFC,OAAO,CAACjlB,SAAS,CAACklB,OAAO,CAAC/gB,IAAI,CAAC2f,OAAO,CAACC,SAAS,CAACkB,OAAO,EAAE,EAAE,EAAE,YAAY,CAAC,CAAC,CAAC,CAAC;IAC9E,OAAO,IAAI;EACb,CAAC,CAAC,OAAOnM,CAAC,EAAE;IACV,OAAO,KAAK;EACd;AACF;;;;;;;;;;;;;;;ACVe,SAASqM,eAAeA,CAAClU,CAAC,EAAEgP,CAAC,EAAE;EAC5CkF,eAAe,GAAGlT,MAAM,CAAC8P,cAAc,GAAG9P,MAAM,CAAC8P,cAAc,CAACzgB,IAAI,CAAC,CAAC,GAAG,SAAS6jB,eAAeA,CAAClU,CAAC,EAAEgP,CAAC,EAAE;IACtGhP,CAAC,CAAC+Q,SAAS,GAAG/B,CAAC;IACf,OAAOhP,CAAC;EACV,CAAC;EACD,OAAOkU,eAAe,CAAClU,CAAC,EAAEgP,CAAC,CAAC;AAC9B;;;;;;;;;;;;;;;;;;;ACNiD;AACA;AACI;AACd;AACxB,SAASjH,gBAAgBA,CAAC6K,KAAK,EAAE;EAC9C,IAAIwB,MAAM,GAAG,OAAOC,GAAG,KAAK,UAAU,GAAG,IAAIA,GAAG,CAAC,CAAC,GAAG/f,SAAS;EAC9DyT,gBAAgB,GAAG,SAASA,gBAAgBA,CAAC6K,KAAK,EAAE;IAClD,IAAIA,KAAK,KAAK,IAAI,IAAI,CAACuB,gEAAgB,CAACvB,KAAK,CAAC,EAAE,OAAOA,KAAK;IAC5D,IAAI,OAAOA,KAAK,KAAK,UAAU,EAAE;MAC/B,MAAM,IAAI7C,SAAS,CAAC,oDAAoD,CAAC;IAC3E;IACA,IAAI,OAAOqE,MAAM,KAAK,WAAW,EAAE;MACjC,IAAIA,MAAM,CAAC7O,GAAG,CAACqN,KAAK,CAAC,EAAE,OAAOwB,MAAM,CAACvI,GAAG,CAAC+G,KAAK,CAAC;MAC/CwB,MAAM,CAACtc,GAAG,CAAC8a,KAAK,EAAE0B,OAAO,CAAC;IAC5B;IACA,SAASA,OAAOA,CAAA,EAAG;MACjB,OAAOxB,yDAAS,CAACF,KAAK,EAAEpd,SAAS,EAAE0Z,8DAAc,CAAC,IAAI,CAAC,CAAC2B,WAAW,CAAC;IACtE;IACAyD,OAAO,CAACvlB,SAAS,GAAGiS,MAAM,CAACoN,MAAM,CAACwE,KAAK,CAAC7jB,SAAS,EAAE;MACjD8hB,WAAW,EAAE;QACXve,KAAK,EAAEgiB,OAAO;QACdtG,UAAU,EAAE,KAAK;QACjBE,QAAQ,EAAE,IAAI;QACdD,YAAY,EAAE;MAChB;IACF,CAAC,CAAC;IACF,OAAO6C,8DAAc,CAACwD,OAAO,EAAE1B,KAAK,CAAC;EACvC,CAAC;EACD,OAAO7K,gBAAgB,CAAC6K,KAAK,CAAC;AAChC;;;;;;UC7BA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D","sources":["webpack://@fof/polls/./src/forum/addComposerItems.js","webpack://@fof/polls/./src/forum/addDiscussionBadge.js","webpack://@fof/polls/./src/forum/addNavItem.ts","webpack://@fof/polls/./src/forum/addPollsToPost.js","webpack://@fof/polls/./src/forum/addPostControls.js","webpack://@fof/polls/./src/forum/components/ComposePollHero.tsx","webpack://@fof/polls/./src/forum/components/ComposePollPage.tsx","webpack://@fof/polls/./src/forum/components/CreatePollModal.js","webpack://@fof/polls/./src/forum/components/EditPollModal.js","webpack://@fof/polls/./src/forum/components/ListVotersModal.js","webpack://@fof/polls/./src/forum/components/Poll/PollList.js","webpack://@fof/polls/./src/forum/components/Poll/PollListItem.tsx","webpack://@fof/polls/./src/forum/components/Poll/PollOption.tsx","webpack://@fof/polls/./src/forum/components/Poll/PollOptionInput.tsx","webpack://@fof/polls/./src/forum/components/Poll/PollOptionLabel.tsx","webpack://@fof/polls/./src/forum/components/Poll/PollOptions.tsx","webpack://@fof/polls/./src/forum/components/Poll/PollPage.tsx","webpack://@fof/polls/./src/forum/components/Poll/PollResult.tsx","webpack://@fof/polls/./src/forum/components/Poll/PollResultNumber.tsx","webpack://@fof/polls/./src/forum/components/PollForm.js","webpack://@fof/polls/./src/forum/components/PollView.tsx","webpack://@fof/polls/./src/forum/components/PollViewPage.tsx","webpack://@fof/polls/./src/forum/components/PollsPage.tsx","webpack://@fof/polls/./src/forum/components/PostPoll.js","webpack://@fof/polls/./src/forum/components/form/FormError.js","webpack://@fof/polls/./src/forum/components/index.ts","webpack://@fof/polls/./src/forum/extend.ts","webpack://@fof/polls/./src/forum/index.ts","webpack://@fof/polls/./src/forum/models/Poll.ts","webpack://@fof/polls/./src/forum/models/PollOption.ts","webpack://@fof/polls/./src/forum/models/PollVote.ts","webpack://@fof/polls/./src/forum/models/index.ts","webpack://@fof/polls/./src/forum/states/PollFormState.ts","webpack://@fof/polls/./src/forum/states/PollListState.ts","webpack://@fof/polls/./src/forum/states/PollState.ts","webpack://@fof/polls/./src/forum/states/index.ts","webpack://@fof/polls/./src/forum/utils/PollControls.tsx","webpack://@fof/polls/external root \"flarum.core.compat['common/Component']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/Model']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Badge']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Dropdown']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Link']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Page']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Placeholder']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/SelectDropdown']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Separator']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Switch']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Tooltip']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/extend']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/extenders']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/helpers/avatar']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/helpers/highlight']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/helpers/listItems']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/helpers/username']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/models/Discussion']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/models/Forum']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/models/Post']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/states/PaginatedListState']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/EventEmitter']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/SubtreeRetainer']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/abbreviateNumber']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/computed']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/app']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/components/DiscussionComposer']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/components/DiscussionList']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/components/DiscussionPage']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/components/LogInModal']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/components/ReplyComposer']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/utils/PostControls']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/utils/slidable']\"","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/typeof.js","webpack://@fof/polls/./node_modules/@babel/runtime/regenerator/index.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/construct.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack://@fof/polls/webpack/bootstrap","webpack://@fof/polls/webpack/runtime/compat get default export","webpack://@fof/polls/webpack/runtime/define property getters","webpack://@fof/polls/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/polls/webpack/runtime/make namespace object"],"sourcesContent":["import app from 'flarum/forum/app';\n\nimport { extend } from 'flarum/common/extend';\nimport classList from 'flarum/common/utils/classList';\nimport DiscussionComposer from 'flarum/forum/components/DiscussionComposer';\nimport ReplyComposer from 'flarum/forum/components/ReplyComposer';\n\nimport CreatePollModal from './components/CreatePollModal';\n\nexport const addToComposer = (composer) => {\n  composer.prototype.addPoll = function () {\n    app.modal.show(CreatePollModal, {\n      poll: this.composer.fields.poll,\n      onsubmit: (poll) => (this.composer.fields.poll = poll),\n    });\n  };\n\n  // Add button to DiscussionComposer header\n  extend(composer.prototype, 'headerItems', function (items) {\n    const discussion = this.composer.body?.attrs?.discussion;\n    const canStartPoll = discussion?.canStartPoll() ?? app.forum.canStartPolls();\n\n    if (canStartPoll) {\n      items.add(\n        'polls',\n        <a className=\"ComposerBody-poll\" onclick={this.addPoll.bind(this)}>\n          <span className={classList('PollLabel', !this.composer.fields.poll && 'none')}>\n            {app.translator.trans(`fof-polls.forum.composer_discussion.${this.composer.fields.poll ? 'edit' : 'add'}_poll`)}\n          </span>\n        </a>,\n        1\n      );\n    }\n  });\n\n  extend(composer.prototype, 'data', function (data) {\n    if (this.composer.fields.poll) {\n      data.poll = this.composer.fields.poll;\n    }\n  });\n};\n\nexport default () => {\n  addToComposer(DiscussionComposer);\n  addToComposer(ReplyComposer);\n};\n","import app from 'flarum/forum/app';\n\nimport { extend } from 'flarum/common/extend';\nimport Badge from 'flarum/common/components/Badge';\nimport DiscussionList from 'flarum/forum/components/DiscussionList';\nimport Discussion from 'flarum/common/models/Discussion';\n\nexport default () => {\n  extend(DiscussionList.prototype, 'requestParams', (params) => {\n    params.include.push('poll');\n  });\n\n  extend(Discussion.prototype, 'badges', function (badges) {\n    if (this.hasPoll()) {\n      badges.add(\n        'poll',\n        Badge.component({\n          type: 'poll',\n          label: app.translator.trans('fof-polls.forum.tooltip.badge'),\n          icon: 'fas fa-signal',\n        }),\n        5\n      );\n    }\n  });\n};\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport LinkButton from 'flarum/common/components/LinkButton';\n\nexport default function addNavItem() {\n  extend(IndexPage.prototype, 'navItems', (items) => {\n    items.add(\n      'fof-polls-list',\n      LinkButton.component(\n        {\n          href: app.route('fof.polls.list'),\n          icon: 'fas fa-poll',\n        },\n        app.translator.trans('fof-polls.forum.page.nav')\n      ),\n      35\n    );\n  });\n}\n","import app from 'flarum/forum/app';\n\nimport { extend } from 'flarum/common/extend';\nimport CommentPost from 'flarum/forum/components/CommentPost';\nimport PostPoll from './components/PostPoll';\nimport DiscussionPage from 'flarum/forum/components/DiscussionPage';\n\nexport default () => {\n  extend(CommentPost.prototype, 'content', function (content) {\n    const post = this.attrs.post;\n\n    if ((!post.isHidden() || this.revealContent) && post.polls()) {\n      for (const poll of post.polls()) {\n        if (poll) {\n          content.push(<PostPoll post={post} poll={poll} />);\n        }\n      }\n    }\n  });\n\n  extend(CommentPost.prototype, 'oninit', function () {\n    this.subtree.check(() => {\n      const polls = this.attrs.post.polls();\n\n      const checks = polls?.map?.(\n        (poll) =>\n          poll && [\n            poll.data?.attributes,\n            poll.options().map?.((option) => option?.data?.attributes),\n            poll.myVotes().map?.((vote) => vote.option()?.id()),\n          ]\n      );\n\n      return JSON.stringify(checks);\n    });\n  });\n\n  extend(DiscussionPage.prototype, 'oncreate', function () {\n    if (app.pusher) {\n      app.pusher.then((binding) => {\n        // We will listen for updates to all polls and options\n        // Even if that model is not in the current discussion, it doesn't really matter\n        binding.channels.main.bind('updatedPollOptions', (data) => {\n          const poll = app.store.getById('polls', data['pollId']);\n\n          if (poll) {\n            poll.pushAttributes({\n              voteCount: data['pollVoteCount'],\n            });\n\n            // Not redrawing here, as the option below should trigger the redraw already\n          }\n\n          const changedOptions = data['options'];\n\n          for (const optionId in changedOptions) {\n            const option = app.store.getById('poll_options', optionId);\n\n            if (option && option.voteCount() !== undefined) {\n              option.pushAttributes({\n                voteCount: changedOptions[optionId],\n              });\n            }\n          }\n\n          m.redraw();\n        });\n      });\n    }\n  });\n\n  extend(DiscussionPage.prototype, 'onremove', function () {\n    if (app.pusher) {\n      app.pusher.then((binding) => {\n        binding.channels.main.unbind('updatedPollOptions');\n      });\n    }\n  });\n};\n","import app from 'flarum/forum/app';\n\nimport { extend } from 'flarum/common/extend';\nimport PostControls from 'flarum/forum/utils/PostControls';\nimport CreatePollModal from './components/CreatePollModal';\nimport Button from 'flarum/common/components/Button';\n\nexport default () => {\n  const createPoll = (post) =>\n    app.modal.show(CreatePollModal, {\n      onsubmit: (data) =>\n        app.store\n          .createRecord('polls')\n          .save(\n            {\n              ...data,\n              relationships: {\n                post,\n              },\n            },\n            {\n              data: {\n                include: 'options,myVotes,myVotes.option',\n              },\n            }\n          )\n          .then((poll) => {\n            post.rawRelationship('polls')?.push?.({ type: 'polls', id: poll.id() });\n\n            return poll;\n          }),\n    });\n\n  extend(PostControls, 'moderationControls', function (items, post) {\n    if (!post.isHidden() && post.canStartPoll()) {\n      items.add(\n        'addPoll',\n        <Button icon=\"fas fa-poll\" onclick={createPoll.bind(this, post)}>\n          {app.translator.trans('fof-polls.forum.moderation.add')}\n        </Button>\n      );\n    }\n  });\n};\n","import Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport Poll from '../models/Poll';\nimport ItemList from 'flarum/common/utils/ItemList';\n\nexport interface ComposePollHeroAttrs extends ComponentAttrs {\n  poll: Poll;\n}\n\nexport default class ComposePollHero extends Component<ComposePollHeroAttrs> {\n  poll!: Poll;\n\n  oninit(vnode: Mithril.Vnode<ComposePollHeroAttrs>): void {\n    super.oninit(vnode);\n\n    this.poll = this.attrs.poll;\n  }\n\n  view(): Mithril.Children {\n    return (\n      <div className=\"ComposeGoodieCollectionHero Hero IndexPageHero\">\n        <div className=\"container\">\n          <div className=\"containerNarrow\">\n            <h2 className=\"Hero-title\">{app.translator.trans(`fof-polls.forum.compose.${!!this.poll.id() ? 'edit' : 'add'}_title`)}</h2>\n            <div className=\"IndexPageHero-controls\">{this.controlItems().toArray()}</div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  controlItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add(\n      'edit',\n      <LinkButton\n        icon=\"far fa-edit\"\n        className=\"Button Button--secondary IndexPage-newDiscussion GoodiesManagerLink\"\n        itemClassName=\"App-primaryControl\"\n        href={app.route('fof.polls.list')}\n      >\n        {app.translator.trans('fof-polls.forum.compose.polls_manager')}\n      </LinkButton>\n    );\n\n    if (this.poll.exists) {\n      items.add(\n        'view',\n        <LinkButton\n          icon=\"far fa-arrow-up-right-from-square\"\n          className=\"Button Button--secondary IndexPage-newDiscussion GoodiePreviewLink\"\n          itemClassName=\"App-primaryControl\"\n          href={app.route('fof.polls.view', { id: this.poll.id() })}\n        >\n          {app.translator.trans('fof-polls.forum.compose.polls_preview')}\n        </LinkButton>\n      );\n    }\n\n    return items;\n  }\n}\n","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport Page from 'flarum/common/components/Page';\nimport Poll from '../models/Poll';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport PollForm from './PollForm';\nimport PollFormState from '../states/PollFormState';\nimport ComposePollHero from './ComposePollHero';\nimport Button from 'flarum/common/components/Button';\nimport listItems from 'flarum/common/helpers/listItems';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport SelectDropdown from 'flarum/common/components/SelectDropdown';\nimport IndexPage from 'flarum/forum/components/IndexPage';\n\nexport default class ComposePollPage extends Page {\n  poll: Poll | null | undefined = null;\n\n  loading: boolean = false;\n\n  oninit(vnode: Mithril.Vnode) {\n    super.oninit(vnode);\n\n    // Get the `edit` parameter from the URL\n    const editId = m.route.param('id');\n    if (editId) {\n      this.poll = app.store.getById<Poll>('poll', editId);\n\n      if (!this.poll) {\n        this.loading = true;\n\n        app.store.find<Poll>('fof/polls', editId).then((item) => {\n          this.poll = item;\n          this.loading = false;\n          app.setTitle(app.translator.trans(`fof-polls.forum.compose.${!!this.poll?.id() ? 'edit' : 'add'}_title`) as string);\n          m.redraw();\n        });\n      }\n    } else {\n      this.poll = PollFormState.createNewPoll();\n    }\n\n    app.history.push('compose-poll', app.translator.trans(`fof-polls.forum.compose.${!!this.poll?.id() ? 'edit' : 'add'}_title`) as string);\n    this.bodyClass = 'App--compose-poll';\n    app.setTitle(app.translator.trans(`fof-polls.forum.compose.${!!this.poll?.id() ? 'edit' : 'add'}_title`) as string);\n  }\n\n  view(): Mithril.Children {\n    // prevent users from accessing the page if they can't start global polls\n    if (!app.forum.attribute<boolean>('canStartGlobalPolls')) {\n      m.route.set('/');\n      return;\n    }\n\n    if (this.loading) {\n      return <LoadingIndicator />;\n    }\n\n    return (\n      <div className=\"ComposePollCollectionPage\">\n        <ComposePollHero poll={this.poll} />\n        <div className=\"container\">\n          <div className=\"sideNavContainer\">\n            <nav className=\"PollsPage-nav sideNav\">\n              <ul>{listItems(this.sidebarItems().toArray())}</ul>\n            </nav>\n            <div className=\"sideNavOffset\">\n              <PollForm poll={this.poll} onsubmit={this.onsubmit.bind(this)} />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  async onsubmit(data: Object, state: PollFormState) {\n    const isNew = state.poll.id() === undefined;\n    await state.save(data);\n\n    const alertAttrs = isNew\n      ? {\n          type: 'success',\n          controls: [\n            <Button\n              className=\"Button Button--link\"\n              onclick={() =>\n                m.route.set(\n                  app.route('fof.polls.compose', {\n                    id: state.poll.id(),\n                  })\n                )\n              }\n            >\n              {app.translator.trans('fof-polls.forum.compose.continue_editing')}\n            </Button>,\n          ],\n        }\n      : {\n          type: 'success',\n        };\n\n    // Show success alert\n    const alertId = app.alerts.show(alertAttrs, app.translator.trans('fof-polls.forum.compose.success'));\n\n    // Hide alert after 10 seconds\n    setTimeout(() => app.alerts.dismiss(alertId), 10000);\n\n    if (isNew) {\n      m.route.set(app.route('fof.polls.list'));\n    }\n  }\n\n  sidebarItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add(\n      'nav',\n      <SelectDropdown\n        buttonClassName=\"Button\"\n        className=\"App-titleControl\"\n        accessibleToggleLabel={app.translator.trans('core.forum.index.toggle_sidenav_dropdown_accessible_label')}\n      >\n        {this.navItems().toArray()}\n      </SelectDropdown>\n    );\n\n    return items;\n  }\n\n  navItems() {\n    return IndexPage.prototype.navItems();\n  }\n}\n","import app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport PollForm from './PollForm';\n\nexport default class CreatePollModal extends Modal {\n  title() {\n    return app.translator.trans('fof-polls.forum.modal.add_title');\n  }\n\n  className() {\n    return 'PollDiscussionModal Modal--medium';\n  }\n\n  content() {\n    return [\n      <div className=\"Modal-body\">\n        <PollForm poll={this.attrs.poll} onsubmit={this.onsubmit.bind(this)}></PollForm>\n      </div>,\n    ];\n  }\n\n  onsubmit(data) {\n    this.hide();\n    this.attrs.onsubmit(data);\n  }\n}\n","import app from 'flarum/forum/app';\nimport CreatePollModal from './CreatePollModal';\n\nexport default class EditPollModal extends CreatePollModal {\n  title() {\n    return app.translator.trans('fof-polls.forum.modal.edit_title');\n  }\n\n  async onsubmit(data, state) {\n    await state.save(data);\n\n    // Show success alert\n    const alertId = app.alerts.show(\n      {\n        type: 'success',\n      },\n      app.translator.trans('fof-polls.forum.compose.success')\n    );\n\n    // Hide alert after 10 seconds\n    setTimeout(() => app.alerts.dismiss(alertId), 10000);\n  }\n}\n","import app from 'flarum/forum/app';\n\nimport Modal from 'flarum/common/components/Modal';\nimport avatar from 'flarum/common/helpers/avatar';\nimport username from 'flarum/common/helpers/username';\nimport Link from 'flarum/common/components/Link';\nimport Stream from 'flarum/common/utils/Stream';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\n\nexport default class ListVotersModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.loading = Stream(true);\n\n    app.store\n      .find('fof/polls', this.attrs.poll.id(), {\n        include: 'votes,votes.user,votes.option',\n      })\n      .then(() => this.loading(false))\n      .finally(() => m.redraw());\n  }\n\n  className() {\n    return 'Modal--medium VotesModal';\n  }\n\n  title() {\n    return app.translator.trans('fof-polls.forum.votes_modal.title');\n  }\n\n  content() {\n    return <div className=\"Modal-body\">{this.loading() ? <LoadingIndicator /> : this.attrs.poll.options().map(this.optionContent.bind(this))}</div>;\n  }\n\n  optionContent(opt) {\n    const votes = (this.attrs.poll.votes() || []).filter((v) => opt.id() === v.option().id());\n\n    return (\n      <div className=\"VotesModal-option\">\n        <h2>{opt.answer() + ':'}</h2>\n\n        {votes.length ? (\n          <div className=\"VotesModal-list\">{votes.map(this.voteContent.bind(this))}</div>\n        ) : (\n          <h4>{app.translator.trans('fof-polls.forum.modal.no_voters')}</h4>\n        )}\n      </div>\n    );\n  }\n\n  voteContent(vote) {\n    const user = vote.user();\n    const attrs = user && { href: app.route.user(user) };\n\n    return (\n      <Link {...attrs}>\n        {avatar(user)} {username(user)}\n      </Link>\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport PollListItem from './PollListItem';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Placeholder from 'flarum/common/components/Placeholder';\nimport classList from 'flarum/common/utils/classList';\n\n/**\n * The `PollList` component displays a list of polls.\n */\nexport default class PollList extends Component {\n  view() {\n    /**\n     * @type {import('../../states/PollListState').default}\n     */\n    const state = this.attrs.state;\n    const params = state.getParams();\n    const isLoading = state.isInitialLoading() || state.isLoadingNext();\n\n    let loading;\n\n    if (isLoading) {\n      loading = <LoadingIndicator />;\n    } else if (state.hasNext()) {\n      loading = (\n        <Button className=\"Button\" onclick={state.loadNext.bind(state)}>\n          {app.translator.trans('fof-polls.forum.polls_list.load_more_button')}\n        </Button>\n      );\n    }\n\n    if (state.isEmpty()) {\n      const text = app.translator.trans('fof-polls.forum.polls_list.empty_text');\n      return (\n        <div className=\"PollList\">\n          <Placeholder text={text} />\n        </div>\n      );\n    }\n\n    const pageSize = state.pageSize;\n\n    return (\n      <div className={classList('PollList', { 'PollList--searchResults': state.isSearchResults() })}>\n        <ul aria-busy={isLoading} className=\"PollList-polls\">\n          {state.getPages().map((pg) => {\n            return pg.items.map((poll) => (\n              <li key={poll.id()} data-id={poll.id()}>\n                <PollListItem poll={poll} params={params} />\n              </li>\n            ));\n          })}\n        </ul>\n        <div className=\"PollList-loadMore\">{loading}</div>\n      </div>\n    );\n  }\n}\n","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport type { PollListParams } from '../../states/PollListState';\nimport SubtreeRetainer from 'flarum/common/utils/SubtreeRetainer';\nimport classList from 'flarum/common/utils/classList';\nimport Dropdown from 'flarum/common/components/Dropdown';\nimport Link from 'flarum/common/components/Link';\nimport highlight from 'flarum/common/helpers/highlight';\nimport slidable from 'flarum/forum/utils/slidable';\nimport icon from 'flarum/common/helpers/icon';\nimport PollPage from './PollPage';\nimport abbreviateNumber from 'flarum/common/utils/abbreviateNumber';\nimport Poll from '../../models/Poll';\nimport PollControls from '../../utils/PollControls';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport listItems from 'flarum/common/helpers/listItems';\n\nexport interface IPollListItemAttrs extends ComponentAttrs {\n  poll: Poll;\n  params: PollListParams;\n}\n\n/**\n * The `PollListItem` component shows a single poll in the\n * poll list.\n */\nexport default class PollListItem<CustomAttrs extends IPollListItemAttrs = IPollListItemAttrs> extends Component<CustomAttrs> {\n  /**\n   * Ensures that the poll will not be redrawn\n   * unless new data comes in.\n   */\n  subtree!: SubtreeRetainer;\n  poll!: Poll;\n\n  highlightRegExp?: RegExp;\n\n  oninit(vnode: Mithril.Vnode<CustomAttrs, this>) {\n    super.oninit(vnode);\n\n    this.poll = this.attrs.poll;\n\n    this.subtree = new SubtreeRetainer(\n      () => this.poll.freshness,\n      () => {\n        const time = app.session.user && app.session.user.markedAllAsReadAt();\n        return time && time.getTime();\n      },\n      () => this.active()\n    );\n  }\n\n  elementAttrs() {\n    return {\n      className: classList('PollListItem', {\n        active: this.active(),\n        'PollListItem--hidden': this.poll.isHidden(),\n        Slidable: 'ontouchstart' in window,\n      }),\n    };\n  }\n\n  view() {\n    const controls = PollControls.controls(this.poll, this).toArray();\n    const attrs = this.elementAttrs();\n\n    return (\n      <div {...attrs}>\n        {this.controlsView(controls)}\n        {this.contentView()}\n        {this.slidableUnderneathView()}\n      </div>\n    );\n  }\n\n  controlsView(controls: Mithril.ChildArray): Mithril.Children {\n    return (\n      !!controls.length && (\n        <Dropdown\n          icon=\"fas fa-ellipsis-v\"\n          className=\"PollListItem-controls\"\n          menuClassName=\"Dropdown-menu--right\"\n          buttonClassName=\"Button Button--icon Button--flat\"\n          accessibleToggleLabel={app.translator.trans('fof-polls.forum.poll_controls.toggle_dropdown_accessible_label')}\n        >\n          {controls}\n        </Dropdown>\n      )\n    );\n  }\n\n  slidableUnderneathView(): Mithril.Children {\n    const isUnread = this.poll.isUnread();\n\n    return (\n      <span\n        className={classList('Slidable-underneath Slidable-underneath--left Slidable-underneath--elastic', { disabled: !isUnread })}\n        onclick={this.markAsRead.bind(this)}\n      >\n        {icon('fas fa-check')}\n      </span>\n    );\n  }\n\n  contentView(): Mithril.Children {\n    // const isUnread = this.poll.isUnread();\n    // const isRead = this.poll.isRead();\n\n    return (\n      //   <div className={classList('PollListItem-content', 'Slidable-content', { unread: isUnread, read: isRead })}>\n      <div className={classList('PollListItem-content')}>{this.mainView()}</div>\n    );\n  }\n\n  mainView(): Mithril.Children {\n    return (\n      <Link href={app.route('fof.polls.view', { id: this.poll.id() })} className=\"PollListItem-main\">\n        <h2 className=\"PollListItem-title\">{highlight(this.poll.question(), this.highlightRegExp)}</h2>\n        {this.poll.subtitle() && <p className=\"PollListItem-subtitle helpText\">{this.poll.subtitle()}</p>}\n        <ul className=\"PollListItem-info\">{listItems(this.infoItems().toArray())}</ul>\n      </Link>\n    );\n  }\n\n  // infoView() {\n  //   return (\n  //     <div>\n  //       {this.poll.subtitle() && <p className=\"PollListItem-subtitle helpText\">{this.poll.subtitle()}</p>}\n  //       <ul className=\"PollListItem-info\">{listItems(this.infoItems().toArray())}</ul>\n  //     </div>\n  //   );\n  // }\n\n  oncreate(vnode: Mithril.VnodeDOM<CustomAttrs, this>) {\n    super.oncreate(vnode);\n\n    // If we're on a touch device, set up the discussion row to be slidable.\n    // This allows the user to drag the row to either side of the screen to\n    // reveal controls.\n    if ('ontouchstart' in window) {\n      const slidableInstance = slidable(this.element);\n\n      this.$('.PollListItem-controls').on('hidden.bs.dropdown', () => slidableInstance.reset());\n    }\n  }\n\n  onbeforeupdate(vnode: Mithril.VnodeDOM<CustomAttrs, this>) {\n    super.onbeforeupdate(vnode);\n\n    return this.subtree.needsRebuild();\n  }\n\n  /**\n   * Determine whether or not the discussion is currently being viewed.\n   */\n  active() {\n    return app.current.matches(PollPage, { poll: this.poll });\n  }\n\n  /**\n   * Mark the poll as read.\n   */\n  markAsRead() {\n    if (this.poll.isUnread()) {\n      this.poll.save({ lastVotedNumber: this.poll.voteCount() });\n      m.redraw();\n    }\n  }\n\n  infoItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n    const active = !this.poll.hasEnded();\n    const activeView = this.poll.endDate()\n      ? [\n          icon('fas fa-clock'),\n          ' ',\n          active\n            ? app.translator.trans('fof-polls.forum.days_remaining', { time: dayjs(this.poll.endDate()).fromNow() })\n            : app.translator.trans('fof-polls.forum.poll_ended'),\n        ]\n      : [icon('fas fa-infinity'), ' ', app.translator.trans('fof-polls.forum.poll_never_ends')];\n\n    items.add('active', <span className={classList('PollListItem-endStatus', { active })}>{activeView}</span>);\n\n    const voteCount = this.poll.voteCount();\n    if (voteCount !== undefined) {\n      items.add(\n        'voteCount',\n        <span>\n          {icon('fas fa-poll fa-fw')}\n          {[\n            ' ',\n            app.translator.trans('fof-polls.forum.polls_count', {\n              count: abbreviateNumber(voteCount),\n            }),\n          ]}\n        </span>,\n        70\n      );\n    }\n\n    return items;\n  }\n}\n","import type Mithril from 'mithril';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport PollOptionLabel from './PollOptionLabel';\nimport PollOptionInput from './PollOptionInput';\nimport PollOptionModel from '../../models/PollOption';\n\ninterface PollOptionAttrs extends ComponentAttrs {\n  option: PollOptionModel;\n  onchange: (e: Event) => void;\n}\n\nexport default class PollOption extends Component<PollOptionAttrs> {\n  view(): Mithril.Children {\n    const option = this.attrs.option;\n    return (\n      <label className=\"PollOption\">\n        <PollOptionInput id={option.id()} isResult={false} name=\"vote\" value=\"Vote for this option\" onchange={this.attrs.onchange} />\n        <span className=\"PollOption-information\">\n          <PollOptionLabel id={option.id()} text={option.answer()} />\n        </span>\n      </label>\n    );\n  }\n}\n","import type Mithril from 'mithril';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\n\ninterface PollOptionInputAttrs extends ComponentAttrs {\n  id: Number; // for example 1\n  name: String; // for example privacy-setting\n  value: String; // for example Private to Project Members\n  isResult?: Boolean;\n  onchange: (e: Event) => void;\n}\n\nexport default class PollOptionInput extends Component<PollOptionInputAttrs> {\n  view(): Mithril.Children {\n    const { isResult } = this.attrs;\n    return (\n      <input\n        type=\"radio\"\n        name={this.attrs.name}\n        value={this.attrs.value}\n        style={{ opacity: isResult ? 0 : 1 }}\n        className=\"PollOption-input\"\n        aria-labelledby={`${this.attrs.name}-${this.attrs.id}-label`}\n        aria-describedby={`${this.attrs.name}-${this.attrs.id}-description`}\n        onchange={this.attrs.onchange}\n      />\n    );\n  }\n}\n","import type Mithril from 'mithril';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\n\ninterface PollOptionLabelAttrs extends ComponentAttrs {\n  text: String;\n  id: Number;\n}\n\nexport default class PollOptionLabel extends Component<PollOptionLabelAttrs> {\n  view(): Mithril.Children {\n    return (\n      <span id={`vote_${this.attrs.id}_label`} className=\"PollOption-label\">\n        {this.attrs.text}\n      </span>\n    );\n  }\n}\n","import type Mithril from 'mithril';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport PollOption from './PollOption';\nimport PollOptionModel from '../../models/PollOption';\nimport PollResult from './PollResult';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport PollState from '../../states/PollState';\n\ninterface PollOptionsAttrs extends ComponentAttrs {\n  options: PollOptionModel[];\n  state: PollState;\n}\n\nexport default class PollOptions extends Component<PollOptionsAttrs> {\n  view(): Mithril.Children {\n    return <div className=\"Poll-options list-layout\">{this.pollOptions().toArray()}</div>;\n  }\n\n  pollOptions(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n    const state = this.attrs.state;\n\n    if (state.showCheckMarks) {\n      this.attrs.options.forEach((option: PollOptionModel): void => {\n        items.add('option' + option.id(), <PollOption option={option} onchange={state.changeVote.bind(state, option)} />);\n      });\n    } else {\n      this.attrs.options.forEach((option: PollOptionModel): void => {\n        items.add('result' + option.id(), <PollResult option={option} state={state} />);\n      });\n    }\n\n    return items;\n  }\n}\n","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport Page from 'flarum/common/components/Page';\n\nexport default class PollPage extends Page {\n  view(): Mithril.Children {\n    return <p>PollPage</p>;\n  }\n}\n","import type Mithril from 'mithril';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport PollOptionLabel from './PollOptionLabel';\nimport PollResultsNumber from './PollResultNumber';\nimport PollOptionInput from './PollOptionInput';\nimport PollOptionModel from '../../models/PollOption';\nimport PollState from '../../states/PollState';\nimport abbreviateNumber from 'flarum/common/utils/abbreviateNumber';\n\ninterface PollResultsAttrs extends ComponentAttrs {\n  option: PollOptionModel;\n  state: PollState;\n}\n\nexport default class PollResults extends Component<PollResultsAttrs> {\n  view(): Mithril.Children {\n    const option = this.attrs.option;\n    const state = this.attrs.state;\n    let voteCount = option.voteCount();\n    if (!voteCount) {\n      voteCount = 0;\n    } else {\n      voteCount = (voteCount * 100) / state.overallVoteCount();\n    }\n\n    return (\n      <label className=\"PollResult\">\n        <PollOptionInput id={option.id()} isResult={false} name=\"vote\" value=\"Vote for this option\" />\n        <span className=\"PollResult-information\">\n          <div className=\"PollResult-row\">\n            <PollOptionLabel text={option.answer()} />\n            <PollResultsNumber number={abbreviateNumber(voteCount)} />\n          </div>\n\n          <progress type=\"range\" min=\"0\" max={state.overallVoteCount()} value={voteCount} className=\"PollResult-bar\" />\n        </span>\n      </label>\n    );\n  }\n}\n","import type Mithril from 'mithril';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\n\ninterface PollResultsNumberAttrs extends ComponentAttrs {\n  number: Number;\n}\n\nexport default class PollResultsNumber extends Component<PollResultsNumberAttrs> {\n  view(): Mithril.Children {\n    return <span className=\"PollResult-number\">{this.attrs.number} %</span>;\n  }\n}\n","import Component from 'flarum/common/Component';\nimport app from 'flarum/forum/app';\nimport Button from 'flarum/common/components/Button';\nimport Switch from 'flarum/common/components/Switch';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Stream from 'flarum/common/utils/Stream';\nimport extractText from 'flarum/common/utils/extractText';\nimport FormError from './form/FormError';\nimport PollFormState from '../states/PollFormState';\nimport PollControls from '../utils/PollControls';\n\nexport default class PollForm extends Component {\n  /** @type {PollFormState} */\n  state;\n\n  /** @type {PollOption[]} */\n  options;\n\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.state = new PollFormState(this.attrs.poll);\n\n    // state handles poll initialization\n    const poll = this.state.poll;\n\n    //@todo way the options are destructured into options (answers) and optionImageUrls\n    this.options = poll.options();\n    this.optionAnswers = this.options.map((o) => Stream(o.answer()));\n    this.optionImageUrls = this.options.map((o) => Stream(o.imageUrl()));\n\n    this.question = Stream(poll.question());\n    this.subtitle = Stream(poll.subtitle());\n    this.endDate = Stream(this.formatDate(poll.endDate()));\n    this.publicPoll = Stream(poll.publicPoll());\n    this.allowMultipleVotes = Stream(poll.allowMultipleVotes());\n    this.hideVotes = Stream(poll.hideVotes());\n    this.allowChangeVote = Stream(poll.allowChangeVote());\n    this.maxVotes = Stream(poll.maxVotes() || 0);\n\n    this.datepickerMinDate = this.formatDate(undefined);\n\n    // Replace minimum of 'today' for poll end date only if the poll is not already closed\n    if (this.endDate() && dayjs(poll.endDate).isAfter(dayjs())) {\n      this.datepickerMinDate = this.formatDate(poll.endDate);\n    }\n  }\n\n  view() {\n    return (\n      <form onsubmit={this.onsubmit.bind(this)}>\n        <div className=\"PollDiscussionModal-form\">{this.fields().toArray()}</div>\n      </form>\n    );\n  }\n\n  fields() {\n    const items = new ItemList();\n\n    items.add(\n      'question',\n      <div className=\"Form-group\">\n        <label className=\"label\">{app.translator.trans('fof-polls.forum.modal.question_placeholder')}</label>\n\n        <input type=\"text\" name=\"question\" className=\"FormControl\" bidi={this.question} />\n      </div>,\n      100\n    );\n\n    items.add(\n      'subtitle',\n      <div className=\"Form-group\">\n        <label className=\"label\">{app.translator.trans('fof-polls.forum.modal.subtitle_placeholder')}</label>\n\n        <input type=\"text\" name=\"subtitle\" className=\"FormControl\" bidi={this.subtitle} />\n      </div>,\n      95\n    );\n\n    items.add(\n      'answers',\n      <div className=\"PollModal--answers Form-group\">\n        <label className=\"label PollModal--answers-title\">\n          <span>{app.translator.trans('fof-polls.forum.modal.options_label')}</span>\n\n          {Button.component({\n            className: 'Button PollModal--button Button--icon small',\n            icon: 'fas fa-plus',\n            onclick: this.addOption.bind(this),\n          })}\n        </label>\n\n        {this.displayOptions()}\n      </div>,\n      80\n    );\n\n    items.add(\n      'date',\n      <div className=\"Form-group\">\n        <label className=\"label\">{app.translator.trans('fof-polls.forum.modal.date_placeholder')}</label>\n\n        <div className=\"PollModal--date\">\n          <input\n            className=\"FormControl\"\n            type=\"datetime-local\"\n            name=\"date\"\n            bidi={this.endDate}\n            min={this.datepickerMinDate}\n            max={this.formatDate('2038')}\n          />\n          {Button.component({\n            className: 'Button PollModal--button Button--icon',\n            icon: 'fas fa-times',\n            onclick: this.endDate.bind(this, null),\n          })}\n        </div>\n\n        {this.endDate() && (\n          <p className=\"helpText\">\n            <i class=\"icon fas fa-clock\" />\n            &nbsp;\n            {dayjs(this.endDate()).isBefore(dayjs())\n              ? app.translator.trans('fof-polls.forum.poll_ended')\n              : app.translator.trans('fof-polls.forum.days_remaining', { time: dayjs(this.endDate()).fromNow() })}\n          </p>\n        )}\n      </div>,\n      40\n    );\n\n    items.add(\n      'public',\n      <div className=\"Form-group\">\n        {Switch.component(\n          {\n            state: this.publicPoll() || false,\n            onchange: this.publicPoll,\n          },\n          app.translator.trans('fof-polls.forum.modal.public_poll_label')\n        )}\n      </div>,\n      20\n    );\n\n    items.add(\n      'hide-votes',\n      <div className=\"Form-group\">\n        <Switch state={this.endDate() && this.hideVotes()} onchange={this.hideVotes} disabled={!this.endDate()}>\n          {app.translator.trans('fof-polls.forum.modal.hide_votes_label')}\n        </Switch>\n      </div>,\n      20\n    );\n\n    items.add(\n      'allow-change-vote',\n      <div className=\"Form-group\">\n        <Switch state={this.allowChangeVote()} onchange={this.allowChangeVote}>\n          {app.translator.trans('fof-polls.forum.modal.allow_change_vote_label')}\n        </Switch>\n      </div>,\n      20\n    );\n\n    items.add(\n      'allow-multiple-votes',\n      <div className=\"Form-group\">\n        {Switch.component(\n          {\n            state: this.allowMultipleVotes() || false,\n            onchange: this.allowMultipleVotes,\n          },\n          app.translator.trans('fof-polls.forum.modal.allow_multiple_votes_label')\n        )}\n      </div>,\n      15\n    );\n\n    if (this.allowMultipleVotes()) {\n      items.add(\n        'max-votes',\n        <div className=\"Form-group\">\n          <label className=\"label\">{app.translator.trans('fof-polls.forum.modal.max_votes_label')}</label>\n\n          <input type=\"number\" min=\"0\" max={this.options.length} name=\"maxVotes\" className=\"FormControl\" bidi={this.maxVotes} />\n\n          <p className=\"helpText\">{app.translator.trans('fof-polls.forum.modal.max_votes_help')}</p>\n        </div>,\n        15\n      );\n    }\n\n    items.add(\n      'submit',\n      <div className=\"Form-group\">\n        <Button type=\"submit\" className=\"Button Button--primary PollModal-SubmitButton\" icon=\"fas fa-save\" loading={this.state.loading}>\n          {app.translator.trans('fof-polls.forum.modal.submit')}\n        </Button>\n        {this.state.poll.exists && (\n          <Button className=\"Button Button--secondary\" icon=\"fas fa-trash-alt\" loading={this.state.deleting} onclick={this.delete.bind(this)}>\n            {app.translator.trans('fof-polls.forum.modal.delete')}\n          </Button>\n        )}\n      </div>,\n      -10\n    );\n\n    return items;\n  }\n\n  displayOptions() {\n    return Object.keys(this.options).map((option, i) => (\n      <div className=\"Form-group\">\n        <fieldset className=\"Poll-answer-input\">\n          <input\n            className=\"FormControl\"\n            type=\"text\"\n            name={'answer' + (i + 1)}\n            bidi={this.optionAnswers[i]}\n            placeholder={app.translator.trans('fof-polls.forum.modal.option_placeholder') + ' #' + (i + 1)}\n          />\n          {app.forum.attribute('allowPollOptionImage') ? (\n            <input\n              className=\"FormControl\"\n              type=\"text\"\n              name={'answerImage' + (i + 1)}\n              bidi={this.optionImageUrls[i]}\n              placeholder={app.translator.trans('fof-polls.forum.modal.image_option_placeholder') + ' #' + (i + 1)}\n            />\n          ) : null}\n        </fieldset>\n        {i >= 2\n          ? Button.component({\n              type: 'button',\n              className: 'Button PollModal--button Button--icon',\n              icon: 'fas fa-minus',\n              onclick: i >= 2 ? this.removeOption.bind(this, i) : '',\n            })\n          : ''}\n      </div>\n    ));\n  }\n\n  addOption() {\n    const max = Math.max(app.forum.attribute('pollMaxOptions'), 2);\n\n    if (this.options.length < max) {\n      this.options.push(app.store.createRecord('poll_options'));\n      this.optionAnswers.push(Stream(''));\n      this.optionImageUrls.push(Stream(''));\n    } else {\n      alert(extractText(app.translator.trans('fof-polls.forum.modal.max', { max })));\n    }\n  }\n\n  removeOption(i) {\n    this.options.splice(i, 1);\n    this.optionAnswers.splice(i, 1);\n    this.optionImageUrls.splice(i, 1);\n  }\n\n  data() {\n    if (this.question() === '') {\n      throw new FormError(app.translator.trans('fof-polls.forum.modal.include_question'));\n    }\n\n    if (this.options.length < 2) {\n      throw new FormError(app.translator.trans('fof-polls.forum.modal.min'));\n    }\n\n    const pollExists = this.state.poll.exists;\n    const options = this.options.map((option, i) => {\n      option.pushAttributes({\n        answer: this.optionAnswers[i](),\n        imageUrl: this.optionImageUrls[i](),\n      });\n\n      return pollExists ? option.data : option.data.attributes;\n    });\n\n    return {\n      question: this.question(),\n      subtitle: this.subtitle(),\n      endDate: this.dateToTimestamp(this.endDate()),\n      publicPoll: this.publicPoll(),\n      hideVotes: this.hideVotes(),\n      allowChangeVote: this.allowChangeVote(),\n      allowMultipleVotes: this.allowMultipleVotes(),\n      maxVotes: this.maxVotes(),\n      options,\n    };\n  }\n\n  async onsubmit(event) {\n    event.preventDefault();\n\n    try {\n      await this.attrs.onsubmit(this.data(), this.state);\n    } catch (error) {\n      if (error instanceof FormError) {\n        app.alerts.show({ type: 'error' }, error.message);\n      } else {\n        console.error(error);\n        // Show error alert\n        app.alerts.show({ type: 'error' }, app.translator.trans('fof-polls.forum.modal.error'));\n      }\n    }\n  }\n\n  async delete() {\n    this.state.loading = true;\n    try {\n      await PollControls.deleteAction(this.state.poll);\n      this.state.deleting = true;\n    } finally {\n      this.state.loading = false;\n      m.redraw();\n    }\n  }\n\n  formatDate(date, def = false) {\n    const dayjsDate = dayjs(date);\n\n    if (date === false || !dayjsDate.isValid()) return def !== false ? this.formatDate(def) : null;\n\n    return dayjsDate.format('YYYY-MM-DDTHH:mm');\n  }\n\n  dateToTimestamp(date) {\n    const dayjsDate = dayjs(date);\n\n    if (!date || !dayjsDate.isValid()) return false;\n\n    return dayjsDate.format();\n  }\n}\n","import type Mithril from 'mithril';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport app from 'flarum/forum/app';\nimport PollOptions from './Poll/PollOptions';\nimport PollImage from './Poll/PollImage';\nimport PollModel from '../models/Poll';\nimport PollState from '../states/PollState';\nimport Button from 'flarum/common/components/Button';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport PollControls from '../utils/PollControls';\nimport Dropdown from 'flarum/common/components/Dropdown';\n\ninterface PollAttrs extends ComponentAttrs {\n  poll: PollModel;\n}\n\nexport default class PollView extends Component<PollAttrs, PollState> {\n  oninit(vnode: Mithril.Vnode<ComponentAttrs, this>) {\n    super.oninit(vnode);\n    this.state = new PollState(this.attrs.poll);\n  }\n\n  view(): Mithril.Children {\n    const poll = this.attrs.poll;\n    const state = this.state;\n    const controls = PollControls.controls(poll, this);\n\n    controls.add(\n      'view',\n      <Button onclick={state.showVoters} icon=\"fas fa-poll\">\n        {app.translator.trans('fof-polls.forum.public_poll')}\n      </Button>\n    );\n\n    return (\n      <div className=\"Poll\" data-id={poll.id()}>\n        {this.controlsView(controls.toArray())}\n        {/* <div className=\"Poll-image\">\n          <PollImage image={poll.image()} />\n        </div> */}\n        <div className=\"Poll-wrapper\">{this.createMainView().toArray()}</div>\n      </div>\n    );\n  }\n\n  createMainView(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n    const poll = this.attrs.poll;\n\n    items.add('title', <h2 className=\"Poll-title\">{poll.question()}</h2>);\n    items.add('subtitle', <p className=\"Poll-subtitle\">{poll.subtitle()}</p>);\n    items.add('form', <form>{this.createFormItems().toArray()}</form>);\n\n    return items;\n  }\n\n  createFormItems(): ItemList<Mithril.Children> {\n    const state = this.state;\n    const items = new ItemList<Mithril.Children>();\n    const poll = this.attrs.poll;\n    const infoItems = this.infoItems(poll.maxVotes());\n\n    items.add(\n      'elements',\n      <fieldset>\n        <legend className=\"sr-only\">app.translator.trans('fof-polls.forum.answers')</legend>\n        <PollOptions options={poll.options()} state={state} />\n      </fieldset>\n    );\n    items.add(\n      'sticky',\n      <div className=\"Poll-sticky\">\n        {!infoItems.isEmpty() && <div className=\"helpText PollInfoText\">{infoItems.toArray()}</div>}\n        <Button\n          className=\"Button Button--primary Poll-submit\"\n          loading={state.loadingOptions}\n          onclick={state.onsubmit.bind(state)}\n          disabled={!state.hasSelectedOptions()}\n        >\n          {app.translator.trans('fof-polls.forum.poll.submit_button')}\n        </Button>\n      </div>\n    );\n    return items;\n  }\n\n  deletePoll(): void {\n    PollControls.deleteAction(this.attrs.poll);\n  }\n\n  editPoll(): void {\n    PollControls.editAction(this.attrs.poll);\n  }\n\n  controlsView(controls: Mithril.ChildArray): Mithril.Children {\n    return (\n      !!controls.length && (\n        <Dropdown\n          icon=\"fas fa-ellipsis-v\"\n          className=\"PollListItem-controls\"\n          menuClassName=\"Dropdown-menu--right\"\n          buttonClassName=\"Button Button--icon Button--flat\"\n          accessibleToggleLabel={app.translator.trans('fof-polls.forum.poll_controls.toggle_dropdown_accessible_label')}\n        >\n          {controls}\n        </Dropdown>\n      )\n    );\n  }\n\n  infoItems(maxVotes: number) {\n    const items = new ItemList<Mithril.Children>();\n    const poll = this.attrs.poll;\n\n    if (app.session.user && !poll.canVote() && !poll.hasEnded()) {\n      items.add(\n        'no-permission',\n        <span>\n          <i className=\"icon fas fa-times-circle fa-fw\" />\n          {app.translator.trans('fof-polls.forum.no_permission')}\n        </span>\n      );\n    }\n\n    if (poll.endDate()) {\n      items.add(\n        'end-date',\n        <span>\n          <i class=\"icon fas fa-clock fa-fw\" />\n          {poll.hasEnded()\n            ? app.translator.trans('fof-polls.forum.poll_ended')\n            : app.translator.trans('fof-polls.forum.days_remaining', { time: dayjs(poll.endDate()).fromNow() })}\n        </span>\n      );\n    }\n\n    if (poll.canVote()) {\n      items.add(\n        'max-votes',\n        <span>\n          <i className=\"icon fas fa-poll fa-fw\" />\n          {app.translator.trans('fof-polls.forum.max_votes_allowed', { max: maxVotes })}\n        </span>\n      );\n\n      if (!poll.canChangeVote()) {\n        items.add(\n          'cannot-change-vote',\n          <span>\n            <i className={`icon fas fa-${this.state.hasVoted() ? 'times' : 'exclamation'}-circle fa-fw`} />\n            {app.translator.trans('fof-polls.forum.poll.cannot_change_vote')}\n          </span>\n        );\n      }\n    }\n\n    return items;\n  }\n}\n","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport Page from 'flarum/common/components/Page';\nimport PollModel from '../models/Poll';\nimport extractText from 'flarum/common/utils/extractText';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport PollView from './PollView';\n\nexport default class PollViewPage extends Page {\n  poll: PollModel | null | undefined = null;\n  loading: boolean = false;\n\n  oninit(vnode: Mithril.Vnode) {\n    super.oninit(vnode);\n\n    const editId = m.route.param('id');\n    this.poll = app.store.getById<PollModel>('poll', editId);\n\n    if (!this.poll) {\n      this.loading = true;\n\n      app.store.find<PollModel>('fof/polls', editId).then((item) => {\n        this.poll = item;\n        this.loading = false;\n        app.setTitle(extractText(app.translator.trans('fof-polls.forum.page.poll_detail')));\n        m.redraw();\n      });\n    }\n  }\n\n  view(): Mithril.Children {\n    if (this.loading) {\n      return <LoadingIndicator />;\n    }\n\n    return (\n      <div className=\"PollsPage\">\n        <div className=\"container\">\n          <PollView poll={this.poll} />\n        </div>\n      </div>\n    );\n  }\n}\n","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport listItems from 'flarum/common/helpers/listItems';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Page, { IPageAttrs } from 'flarum/common/components/Page';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport PollList from './Poll/PollList';\nimport LogInModal from 'flarum/forum/components/LogInModal';\nimport extractText from 'flarum/common/utils/extractText';\nimport PollListState from '../states/PollListState';\nimport Button from 'flarum/common/components/Button';\nimport SelectDropdown from 'flarum/common/components/SelectDropdown';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport PollModel from '../models/Poll';\nimport PollView from './PollView';\n\nexport default class PollsPage extends Page<IPageAttrs, PollListState> {\n  loading: boolean = false;\n  poll: PollModel | null = null;\n\n  oninit(vnode: Mithril.Vnode) {\n    super.oninit(vnode);\n\n    this.state = new PollListState({\n      sort: m.route.param('sort'),\n      filter: m.route.param('filter'),\n    });\n\n    this.state.refresh();\n\n    app.setTitle(extractText(app.translator.trans('fof-polls.forum.page.nav')));\n  }\n\n  oncreate(vnode: Mithril.Vnode) {\n    super.oncreate(vnode);\n  }\n\n  view(): Mithril.Children {\n    if (this.loading) {\n      return <LoadingIndicator />;\n    }\n\n    if (this.poll) {\n      return (\n        <div className=\"PollsPage\">\n          <div className=\"container\">\n            <PollView poll={this.poll} />\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"PollsPage\">\n        {IndexPage.prototype.hero()}\n        <div className=\"container\">\n          <div className=\"sideNavContainer\">\n            <nav className=\"PollsPage-nav sideNav\">\n              <ul>{listItems(this.sidebarItems().toArray())}</ul>\n            </nav>\n            <div className=\"PollsPage-results sideNavOffset\">\n              <div className=\"IndexPage-toolbar\">\n                <ul className=\"IndexPage-toolbar-view\">{listItems(this.viewItems().toArray())}</ul>\n                <ul className=\"IndexPage-toolbar-action\">{listItems(this.actionItems().toArray())}</ul>\n              </div>\n              <PollList state={this.state} />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  sidebarItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n    const canStartPoll = app.forum.attribute<boolean>('canStartGlobalPolls');\n\n    items.add(\n      'newGlobalPoll',\n      <Button\n        icon=\"fas fa-edit\"\n        className=\"Button Button--primary App-primaryControl PollsPage-newPoll\"\n        itemClassName=\"App-primaryControl\"\n        onclick={() => {\n          this.newPollAction();\n        }}\n        disabled={!canStartPoll}\n      >\n        {app.translator.trans(`fof-polls.forum.poll.${canStartPoll ? 'start_poll_button' : 'cannot_start_poll_button'}`)}\n      </Button>\n    );\n\n    items.add(\n      'nav',\n      <SelectDropdown\n        buttonClassName=\"Button\"\n        className=\"App-titleControl\"\n        accessibleToggleLabel={app.translator.trans('core.forum.index.toggle_sidenav_dropdown_accessible_label')}\n      >\n        {this.navItems().toArray()}\n      </SelectDropdown>\n    );\n\n    return items;\n  }\n\n  actionItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add(\n      'refresh',\n      Button.component({\n        title: app.translator.trans('fof-polls.forum.page.refresh_tooltip'),\n        icon: 'fas fa-sync',\n        className: 'Button Button--icon',\n        onclick: () => {\n          this.state.refresh();\n        },\n      })\n    );\n\n    return items;\n  }\n\n  viewItems() {\n    return IndexPage.prototype.viewItems();\n  }\n\n  navItems() {\n    return IndexPage.prototype.navItems();\n  }\n\n  /**\n   * Change to create new poll page\n   */\n  newPollAction(): void {\n    if (!app.session.user) {\n      app.modal.show(LogInModal);\n      return;\n    }\n\n    m.route.set(app.route('fof.polls.compose'));\n  }\n}\n","import app from 'flarum/forum/app';\n\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport LogInModal from 'flarum/forum/components/LogInModal';\nimport ListVotersModal from './ListVotersModal';\nimport classList from 'flarum/common/utils/classList';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport icon from 'flarum/common/helpers/icon';\nimport EditPollModal from './EditPollModal';\n\nexport default class PostPoll extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.loadingOptions = false;\n\n    this.useSubmitUI = !this.attrs.poll?.canChangeVote() && this.attrs.poll?.allowMultipleVotes();\n    this.pendingSubmit = false;\n    this.pendingOptions = null;\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    this.preventClose = this.preventClose.bind(this);\n    window.addEventListener('beforeunload', this.preventClose);\n  }\n\n  onremove(vnode) {\n    super.onremove(vnode);\n\n    window.removeEventListener('beforeunload', this.preventClose);\n  }\n\n  view() {\n    const poll = this.attrs.poll;\n    const options = poll.options() || [];\n    let maxVotes = poll.allowMultipleVotes() ? poll.maxVotes() : 1;\n\n    if (maxVotes === 0) maxVotes = options.length;\n\n    const infoItems = this.infoItems(maxVotes);\n\n    return (\n      <div className=\"Post-poll\" data-id={poll.id()}>\n        <div className=\"PollHeading\">\n          <div className=\"PollHeading-title-container\">\n            <h3 className=\"PollHeading-title\">{poll.question()}</h3>\n            {poll.subtitle() && <p className=\"helpText PollHeading-subtitle\">{poll.subtitle()}</p>}\n          </div>\n\n          <div className=\"PollHeading-actions\">\n            {poll.canSeeVoters() && (\n              <Tooltip text={app.translator.trans('fof-polls.forum.public_poll')}>\n                <Button className=\"Button PollHeading-voters\" onclick={this.showVoters.bind(this)} icon=\"fas fa-poll\" />\n              </Tooltip>\n            )}\n\n            {poll.canEdit() && (\n              <Tooltip text={app.translator.trans('fof-polls.forum.moderation.edit')}>\n                <Button className=\"Button PollHeading-edit\" onclick={app.modal.show.bind(app.modal, EditPollModal, { poll })} icon=\"fas fa-pen\" />\n              </Tooltip>\n            )}\n            {poll.canDelete() && (\n              <Tooltip text={app.translator.trans('fof-polls.forum.moderation.delete')}>\n                <Button className=\"Button PollHeading-delete\" onclick={this.deletePoll.bind(this)} icon=\"fas fa-trash\" />\n              </Tooltip>\n            )}\n          </div>\n        </div>\n\n        <div>\n          <div className=\"PollOptions\">{options.map(this.viewOption.bind(this))}</div>\n\n          <div className=\"Poll-sticky\">\n            {!infoItems.isEmpty() && <div className=\"helpText PollInfoText\">{infoItems.toArray()}</div>}\n\n            {this.useSubmitUI && this.pendingSubmit && (\n              <Button className=\"Button Button--primary Poll-submit\" loading={this.loadingOptions} onclick={this.onsubmit.bind(this)}>\n                {app.translator.trans('fof-polls.forum.poll.submit_button')}\n              </Button>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  infoItems(maxVotes) {\n    const items = new ItemList();\n    const poll = this.attrs.poll;\n    const hasVoted = poll.myVotes()?.length > 0;\n\n    if (app.session.user && !poll.canVote() && !poll.hasEnded()) {\n      items.add(\n        'no-permission',\n        <span>\n          <i className=\"icon fas fa-times-circle fa-fw\" />\n          {app.translator.trans('fof-polls.forum.no_permission')}\n        </span>\n      );\n    }\n\n    if (poll.endDate()) {\n      items.add(\n        'end-date',\n        <span>\n          <i class=\"icon fas fa-clock fa-fw\" />\n          {poll.hasEnded()\n            ? app.translator.trans('fof-polls.forum.poll_ended')\n            : app.translator.trans('fof-polls.forum.days_remaining', { time: dayjs(poll.endDate()).fromNow() })}\n        </span>\n      );\n    }\n\n    if (poll.canVote()) {\n      items.add(\n        'max-votes',\n        <span>\n          <i className=\"icon fas fa-poll fa-fw\" />\n          {app.translator.trans('fof-polls.forum.max_votes_allowed', { max: maxVotes })}\n        </span>\n      );\n\n      if (!poll.canChangeVote()) {\n        items.add(\n          'cannot-change-vote',\n          <span>\n            <i className={`icon fas fa-${hasVoted ? 'times' : 'exclamation'}-circle fa-fw`} />\n            {app.translator.trans('fof-polls.forum.poll.cannot_change_vote')}\n          </span>\n        );\n      }\n    }\n\n    return items;\n  }\n\n  viewOption(opt) {\n    const poll = this.attrs.poll;\n    const hasVoted = poll.myVotes()?.length > 0;\n    const totalVotes = poll.voteCount();\n\n    const voted = this.pendingOptions ? this.pendingOptions.has(opt.id()) : poll.myVotes()?.some?.((vote) => vote.option() === opt);\n    const votes = opt.voteCount();\n    const percent = totalVotes > 0 ? Math.round((votes / totalVotes) * 100) : 0;\n\n    // isNaN(null) is false, so we have to check type directly now that API always returns the field\n    const canSeeVoteCount = typeof votes === 'number';\n    const isDisabled = this.loadingOptions || (hasVoted && !poll.canChangeVote());\n    const width = canSeeVoteCount ? percent : (Number(voted) / (poll.myVotes()?.length || 1)) * 100;\n\n    const showCheckmark = !app.session.user || (!poll.hasEnded() && poll.canVote() && (!hasVoted || poll.canChangeVote()));\n\n    const bar = (\n      <div className=\"PollBar\" data-selected={!!voted} style={`--poll-option-width: ${width}%`}>\n        {showCheckmark && (\n          <label className=\"PollAnswer-checkbox checkbox\">\n            <input onchange={this.changeVote.bind(this, opt)} type=\"checkbox\" checked={voted} disabled={isDisabled} />\n            <span className=\"checkmark\" />\n          </label>\n        )}\n\n        <div className=\"PollAnswer-text\">\n          <span className=\"PollAnswer-text-answer\">{opt.answer()}</span>\n          {voted && !showCheckmark && icon('fas fa-check-circle', { className: 'PollAnswer-check' })}\n          {canSeeVoteCount && <span className={classList('PollPercent', percent !== 100 && 'PollPercent--option')}>{percent}%</span>}\n        </div>\n\n        {opt.imageUrl() ? <img className=\"PollAnswer-image\" src={opt.imageUrl()} alt={opt.answer()} /> : null}\n      </div>\n    );\n\n    return (\n      <div\n        className={classList('PollOption', hasVoted && 'PollVoted', poll.hasEnded() && 'PollEnded', opt.imageUrl() && 'PollOption-hasImage')}\n        data-id={opt.id()}\n      >\n        {canSeeVoteCount ? (\n          <Tooltip text={app.translator.trans('fof-polls.forum.tooltip.votes', { count: votes })} onremove={this.hideOptionTooltip}>\n            {bar}\n          </Tooltip>\n        ) : (\n          bar\n        )}\n      </div>\n    );\n  }\n\n  changeVote(option, evt) {\n    if (!app.session.user) {\n      app.modal.show(LogInModal);\n      evt.target.checked = false;\n      return;\n    }\n\n    const optionIds = this.pendingOptions || new Set(this.attrs.poll.myVotes().map?.((v) => v.option().id()));\n    const isUnvoting = optionIds.delete(option.id());\n    const allowsMultiple = this.attrs.poll.allowMultipleVotes();\n\n    if (!allowsMultiple) {\n      optionIds.clear();\n    }\n\n    if (!isUnvoting) {\n      optionIds.add(option.id());\n    }\n\n    if (this.useSubmitUI) {\n      this.pendingOptions = optionIds.size ? optionIds : null;\n      this.pendingSubmit = !!this.pendingOptions;\n      return;\n    }\n\n    return this.submit(optionIds, null, () => (evt.target.checked = isUnvoting));\n  }\n\n  onsubmit() {\n    return this.submit(this.pendingOptions, () => {\n      this.pendingOptions = null;\n      this.pendingSubmit = false;\n    });\n  }\n\n  submit(optionIds, cb, onerror) {\n    this.loadingOptions = true;\n    m.redraw();\n\n    return app\n      .request({\n        method: 'PATCH',\n        url: `${app.forum.attribute('apiUrl')}/fof/polls/${this.attrs.poll.id()}/votes`,\n        body: {\n          data: {\n            optionIds: Array.from(optionIds),\n          },\n        },\n      })\n      .then((res) => {\n        app.store.pushPayload(res);\n        cb?.();\n      })\n      .catch((err) => {\n        onerror?.(err);\n      })\n      .finally(() => {\n        this.loadingOptions = false;\n\n        m.redraw();\n      });\n  }\n\n  showVoters() {\n    // Load all the votes only when opening the votes list\n    app.modal.show(ListVotersModal, {\n      poll: this.attrs.poll,\n      post: this.attrs.post,\n    });\n  }\n\n  deletePoll() {\n    if (confirm(app.translator.trans('fof-polls.forum.moderation.delete_confirm'))) {\n      this.attrs.poll.delete().then(() => {\n        m.redraw.sync();\n      });\n    }\n  }\n\n  /**\n   * Attempting to use the `tooltipVisible` attr on the Tooltip component set to 'false' when no vote count\n   * caused the tooltip to break on click. This is a workaround to hide the tooltip when no vote count is available,\n   * called on 'onremove' of the Tooltip component. It doesn't always work as intended either, but it does the job.\n   */\n  hideOptionTooltip(vnode) {\n    vnode.attrs.tooltipVisible = false;\n    vnode.state.updateVisibility();\n  }\n\n  /**\n   * Alert before navigating away using browser's 'beforeunload' event\n   */\n  preventClose(e) {\n    if (this.pendingOptions) {\n      e.preventDefault();\n      return true;\n    }\n  }\n}\n","export default class FormError extends Error {}\n","import CreatePollModal from './CreatePollModal';\nimport PostPoll from './PostPoll';\nimport EditPollModal from './EditPollModal';\nimport ListVotersModal from './ListVotersModal';\nimport PollForm from './PollForm';\nimport ComposePollHero from './ComposePollHero';\nimport ComposePollPage from './ComposePollPage';\nimport PollsPage from './PollsPage';\nimport PollView from './PollView';\nimport PollViewPage from './PollViewPage';\n\nexport const components = {\n  CreatePollModal,\n  PostPoll,\n  EditPollModal,\n  ListVotersModal,\n  PollForm,\n  ComposePollHero,\n  ComposePollPage,\n  PollsPage,\n  PollView,\n  PollViewPage,\n};\n","import Extend from 'flarum/common/extenders';\nimport Post from 'flarum/common/models/Post';\nimport Forum from 'flarum/common/models/Forum';\nimport Discussion from 'flarum/common/models/Discussion';\nimport Poll from './models/Poll';\nimport PollOption from './models/PollOption';\nimport PollVote from './models/PollVote';\nimport PollsPage from './components/PollsPage';\nimport ComposePollPage from './components/ComposePollPage';\nimport PollViewPage from './components/PollViewPage';\n\nexport default [\n  new Extend.Routes() //\n    .add('fof.polls.list', '/polls', PollsPage)\n    .add('fof.polls.view', '/polls/view/:id', PollViewPage)\n    .add('fof.polls.compose', '/polls/composer', ComposePollPage),\n\n  new Extend.Store() //\n    .add('polls', Poll)\n    .add('poll_options', PollOption)\n    .add('poll_votes', PollVote),\n\n  new Extend.Model(Post) //\n    .hasMany<Poll>('polls')\n    .attribute<boolean>('canStartPoll'),\n\n  new Extend.Model(Forum) //\n    .attribute<boolean>('canStartPolls'),\n\n  new Extend.Model(Discussion) //\n    .attribute<boolean>('hasPoll')\n    .attribute<boolean>('canStartPoll'),\n];\n","import app from 'flarum/forum/app';\n\nimport addDiscussionBadge from './addDiscussionBadge';\nimport addComposerItems from './addComposerItems';\nimport addPollsToPost from './addPollsToPost';\nimport addPostControls from './addPostControls';\nimport addNavItem from './addNavItem';\n\nexport * from './components';\nexport * from './models';\nexport * from './states';\n\napp.initializers.add('fof/polls', () => {\n  addDiscussionBadge();\n  addComposerItems();\n  addPollsToPost();\n  addPostControls();\n  addNavItem();\n});\n\nexport { default as extend } from './extend';\n","import Model from 'flarum/common/Model';\nimport PollOption from './PollOption';\nimport PollVote from './PollVote';\nimport computed from 'flarum/common/utils/computed';\n\nexport default class Poll extends Model {\n  question() {\n    return Model.attribute<string>('question').call(this);\n  }\n\n  subtitle() {\n    return Model.attribute<string | null>('subtitle').call(this);\n  }\n\n  hasEnded() {\n    return Model.attribute<boolean>('hasEnded').call(this);\n  }\n\n  endDate() {\n    return Model.attribute('endDate', Model.transformDate).call(this);\n  }\n\n  publicPoll() {\n    return Model.attribute<boolean>('publicPoll').call(this);\n  }\n\n  hideVotes() {\n    return Model.attribute<boolean>('hideVotes').call(this);\n  }\n\n  allowChangeVote() {\n    return Model.attribute<boolean>('allowChangeVote').call(this);\n  }\n\n  allowMultipleVotes() {\n    return Model.attribute<boolean>('allowMultipleVotes').call(this);\n  }\n\n  maxVotes() {\n    return Model.attribute<number>('maxVotes').call(this);\n  }\n\n  voteCount() {\n    return Model.attribute<number>('voteCount').call(this);\n  }\n\n  canVote() {\n    return Model.attribute<boolean>('canVote').call(this);\n  }\n\n  canEdit() {\n    return Model.attribute<boolean>('canEdit').call(this);\n  }\n\n  canDelete() {\n    return Model.attribute<boolean>('canDelete').call(this);\n  }\n\n  canSeeVoters() {\n    return Model.attribute<boolean>('canSeeVoters').call(this);\n  }\n\n  canChangeVote() {\n    return Model.attribute<boolean>('canChangeVote').call(this);\n  }\n\n  options() {\n    return Model.hasMany<PollOption>('options').call(this);\n  }\n\n  votes() {\n    return Model.hasMany<PollVote>('votes').call(this);\n  }\n\n  myVotes(): PollVote[] {\n    const myVotes = Model.hasMany<PollVote>('myVotes').call(this);\n    return myVotes ? (myVotes as PollVote[]) : [];\n  }\n\n  isGlobal() {\n    return Model.attribute<boolean>('isGlobal').call(this);\n  }\n\n  isHidden() {\n    return computed<boolean, this>('hiddenAt', (hiddenAt) => !!hiddenAt).call(this);\n  }\n\n  // TODO: These two don't make sense as of now\n  isUnread() {\n    return false;\n  }\n\n  apiEndpoint() {\n    /** @ts-ignore */\n    return `/fof/polls${this.exists ? `/${this.data.id}` : ''}`;\n  }\n}\n","import Model from 'flarum/common/Model';\nimport Poll from './Poll';\nimport PollVote from './PollVote';\n\nexport default class PollOption extends Model {\n  answer() {\n    return Model.attribute<string>('answer').call(this);\n  }\n\n  imageUrl() {\n    return Model.attribute<string>('imageUrl').call(this);\n  }\n\n  voteCount() {\n    return Model.attribute<number>('voteCount').call(this);\n  }\n\n  poll() {\n    return Model.hasOne<Poll>('polls').call(this);\n  }\n\n  votes() {\n    return Model.hasMany<PollVote>('votes').call(this);\n  }\n\n  apiEndpoint() {\n    /** @ts-ignore */\n    return `/fof/polls/answers${this.exists ? `/${this.data.id}` : ''}`;\n  }\n}\n","import Model from 'flarum/common/Model';\nimport Poll from './Poll';\nimport PollOption from './PollOption';\nimport User from 'flarum/common/models/User';\n\nexport default class PollVote extends Model {\n  poll() {\n    return Model.hasOne<Poll>('poll').call(this);\n  }\n\n  option() {\n    return Model.hasOne<PollOption>('option').call(this);\n  }\n\n  user() {\n    return Model.hasOne<User>('user').call(this);\n  }\n\n  pollId() {\n    return Model.attribute<number>('pollId').call(this);\n  }\n\n  optionId() {\n    return Model.attribute<number>('optionId').call(this);\n  }\n\n  apiEndpoint() {\n    return `/fof/polls/${this.pollId()}/vote`;\n  }\n}\n","import Poll from './Poll';\nimport PollOption from './PollOption';\nimport PollVote from './PollVote';\n\nexport const models = {\n  Poll,\n  PollOption,\n  PollVote,\n};\n","import app from 'flarum/forum/app';\nimport Poll from '../models/Poll';\n\nexport default class PollFormState {\n  poll: Poll;\n  loading: boolean;\n  deleting: boolean;\n  expandedGroup: string;\n\n  static createNewPoll() {\n    const poll = app.store.createRecord<Poll>('polls');\n    poll.pushAttributes({\n      question: '',\n      endDate: '',\n      publicPoll: false,\n      allowMultipleVotes: false,\n      hideVotes: false,\n      allowChangeVote: false,\n      maxVotes: 0,\n    });\n    poll.pushData({ relationships: { options: [] } });\n    return poll;\n  }\n\n  constructor(poll: Poll) {\n    if (!poll) {\n      poll = PollFormState.createNewPoll();\n    }\n\n    this.loading = false;\n    this.deleting = false;\n    this.poll = poll;\n    this.expandedGroup = 'setup';\n  }\n\n  isExpanded(groupKey: string) {\n    return this.expandedGroup === groupKey;\n  }\n\n  expand(groupKey: string) {\n    this.expandedGroup = groupKey;\n    m.redraw();\n  }\n\n  async save(data: any) {\n    this.loading = true;\n    m.redraw();\n\n    try {\n      this.poll = await this.poll.save(data);\n    } finally {\n      this.loading = false;\n      m.redraw();\n    }\n  }\n\n  async delete() {\n    this.loading = true;\n    m.redraw();\n\n    try {\n      await this.poll.delete();\n      this.deleting = true;\n    } finally {\n      this.loading = false;\n      m.redraw();\n    }\n  }\n}\n","import app from 'flarum/forum/app';\nimport PaginatedListState, { Page, PaginatedListParams, PaginatedListRequestParams } from 'flarum/common/states/PaginatedListState';\nimport Poll from '../models/Poll';\nimport { ApiResponsePlural } from 'flarum/common/Store';\nimport EventEmitter from 'flarum/common/utils/EventEmitter';\n\nexport interface PollListParams extends PaginatedListParams {\n  sort?: string;\n}\n\nconst globalEventEmitter = new EventEmitter();\n\nexport default class PollListState<P extends PollListParams = PollListParams> extends PaginatedListState<Poll, P> {\n  protected extraPolls: Poll[] = [];\n  protected eventEmitter: EventEmitter;\n\n  constructor(params: P, page: number = 1) {\n    super(params, page, 20);\n\n    this.eventEmitter = globalEventEmitter.on('poll.deleted', this.deletePoll.bind(this));\n  }\n\n  get type(): string {\n    return 'fof/polls';\n  }\n\n  requestParams(): PaginatedListRequestParams {\n    const params = {\n      include: ['options', 'votes'],\n      filter: this.params.filter || {},\n      sort: this.sortMap()[this.params.sort ?? ''],\n    };\n\n    if (this.params.q) {\n      params.filter.q = this.params.q;\n    }\n\n    return params;\n  }\n\n  protected loadPage(page: number = 1): Promise<ApiResponsePlural<Poll>> {\n    const preloadedPolls = app.preloadedApiDocument<Poll[]>();\n\n    if (preloadedPolls) {\n      this.initialLoading = false;\n\n      return Promise.resolve(preloadedPolls);\n    }\n\n    return super.loadPage(page);\n  }\n\n  clear(): void {\n    super.clear();\n\n    this.extraPolls = [];\n  }\n\n  /**\n   * Get a map of sort keys (which appear in the URL, and are used for\n   * translation) to the API sort value that they represent.\n   */\n  sortMap() {\n    const map: any = {};\n\n    if (this.params.q) {\n      map.relevance = '';\n    }\n    map.newest = '-createdAt';\n    map.oldest = 'createdAt';\n\n    return map;\n  }\n\n  /**\n   * In the last request, has the user searched for a poll?\n   */\n  isSearchResults(): boolean {\n    return !!this.params.q;\n  }\n\n  removePoll(poll: Poll): void {\n    this.eventEmitter.emit('poll.deleted', poll);\n  }\n\n  deletePoll(poll: Poll): void {\n    for (const page of this.pages) {\n      const index = page.items.indexOf(poll);\n\n      if (index !== -1) {\n        page.items.splice(index, 1);\n        break;\n      }\n    }\n\n    const index = this.extraPolls.indexOf(poll);\n\n    if (index !== -1) {\n      this.extraPolls.splice(index);\n    }\n\n    m.redraw();\n  }\n\n  /**\n   * Add a poll to the top of the list.\n   */\n  addPoll(poll: Poll): void {\n    this.removePoll(poll);\n    this.extraPolls.unshift(poll);\n\n    m.redraw();\n  }\n\n  protected getAllItems(): Poll[] {\n    return this.extraPolls.concat(super.getAllItems());\n  }\n\n  public getPages(): Page<Poll>[] {\n    const pages = super.getPages();\n\n    if (this.extraPolls.length) {\n      return [\n        {\n          number: -1,\n          items: this.extraPolls,\n        },\n        ...pages,\n      ];\n    }\n\n    return pages;\n  }\n}\n","import app from 'flarum/forum/app';\nimport Poll from '../models/Poll';\nimport LogInModal from 'flarum/forum/components/LogInModal';\nimport PollOption from '../models/PollOption';\nimport PollVote from '../models/PollVote';\nimport ListVotersModal from '../components/ListVotersModal';\n\nexport default class PollState {\n  protected poll: Poll;\n  protected pendingSubmit: boolean;\n  protected pendingOptions: Set<string> | null;\n  public loadingOptions: boolean;\n  public useSubmitUI: boolean;\n  public showCheckMarks: boolean;\n\n  constructor(poll: Poll) {\n    this.poll = poll;\n    this.pendingSubmit = false;\n    this.pendingOptions = null;\n    this.loadingOptions = false;\n    this.useSubmitUI = !poll?.canChangeVote() && poll?.allowMultipleVotes();\n    this.showCheckMarks = !app.session.user || (!poll.hasEnded() && poll.canVote() && (!this.hasVoted() || poll.canChangeVote()));\n  }\n\n  hasVoted() {\n    return this.poll.myVotes().length > 0;\n  }\n\n  overallVoteCount() {\n    const options = this.poll.options();\n    return Math.max(\n      100,\n      (options ? options : []).reduce((max, option) => max + option!.voteCount(), 0)\n    );\n  }\n\n  showButton() {\n    return this.useSubmitUI && this.pendingSubmit;\n  }\n\n  changeVote(option: PollOption, evt: Event) {\n    const target = evt.target as HTMLInputElement;\n\n    if (!app.session.user) {\n      app.modal.show(LogInModal);\n      target.checked = false;\n      return;\n    }\n\n    const optionIds = this.pendingOptions || new Set(this.poll.myVotes().map((v: PollVote) => v.option().id()));\n    const isUnvoting = optionIds.delete(option.id()!);\n    const allowsMultiple = this.poll.allowMultipleVotes();\n\n    if (!allowsMultiple) {\n      optionIds.clear();\n    }\n\n    if (!isUnvoting) {\n      optionIds.add(option.id()!);\n    }\n\n    this.pendingOptions = optionIds.size ? optionIds : null;\n    this.pendingSubmit = !!this.pendingOptions;\n    m.redraw();\n  }\n\n  hasSelectedOptions(): boolean {\n    return this.pendingSubmit;\n  }\n\n  onsubmit(): Promise<void> {\n    return this.submit(this.pendingOptions!, () => {\n      this.pendingOptions = null;\n      this.pendingSubmit = false;\n    });\n  }\n\n  submit(optionIds: Set<string>, cb: Function | null, onerror: Function | null = null) {\n    this.loadingOptions = true;\n    m.redraw();\n\n    return app\n      .request({\n        method: 'PATCH',\n        url: `${app.forum.attribute('apiUrl')}/fof/polls/${this.poll.id()}/votes`,\n        body: {\n          data: {\n            optionIds: Array.from(optionIds),\n          },\n        },\n      })\n      .then((res) => {\n        app.store.pushPayload(res);\n        cb?.();\n      })\n      .catch((err) => {\n        onerror?.(err);\n      })\n      .finally(() => {\n        this.loadingOptions = false;\n        this.showCheckMarks = false;\n        m.redraw();\n      });\n  }\n\n  showVoters = () => {\n    // Load all the votes only when opening the votes list\n    app.modal.show(ListVotersModal, {\n      poll: this.poll,\n    });\n  };\n\n  /**\n   * Attempting to use the `tooltipVisible` attr on the Tooltip component set to 'false' when no vote count\n   * caused the tooltip to break on click. This is a workaround to hide the tooltip when no vote count is available,\n   * called on 'onremove' of the Tooltip component. It doesn't always work as intended either, but it does the job.\n   */\n  hideOptionTooltip(vnode) {\n    vnode.attrs.tooltipVisible = false;\n    vnode.state.updateVisibility();\n  }\n\n  /**\n   * Alert before navigating away using browser's 'beforeunload' event\n   */\n  preventClose = (e: Event): boolean | void => {\n    if (this.pendingOptions) {\n      e.preventDefault();\n      return true;\n    }\n  };\n}\n","import PollFormState from './PollFormState';\nimport PollListState from './PollListState';\nimport PollState from './PollState';\n\nexport const states = {\n  PollFormState,\n  PollListState,\n  PollState,\n};\n","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport Poll from '../models/Poll';\nimport Component from 'flarum/common/Component';\nimport ComposePollPage from '../components/ComposePollPage';\nimport PollsPage from '../components/PollsPage';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Separator from 'flarum/common/components/Separator';\nimport Button from 'flarum/common/components/Button';\n\n/**\n * The `UserControls` utility constructs a list of buttons for a user which\n * perform actions on it.\n */\nexport default {\n  /**\n   * Get a list of controls for a user.\n   */\n  controls(poll: Poll, context: Component): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    ['poll', 'moderation', 'destructive'].forEach((section) => {\n      const controls: Mithril.Children[] = this[section + 'Controls'](poll, context).toArray();\n      if (controls.length) {\n        controls.forEach((item) => items.add(item.itemName, item));\n        items.add(section + 'Separator', <Separator />);\n      }\n    });\n\n    return items;\n  },\n\n  /**\n   * Get controls for direct modifcation actions on polls (e.g. vote, view voters).\n   */\n  pollControls(poll: Poll, context: Component): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    return items;\n  },\n\n  /**\n   * Get controls for a user pertaining to moderation (e.g. suspend, edit).\n   */\n  moderationControls(poll: Poll, context: Component): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    if (poll.canEdit()) {\n      items.add(\n        'edit',\n        <Button icon=\"fas fa-pen\" onclick={this.editAction.bind(this, poll)}>\n          {app.translator.trans(`fof-polls.forum.poll_controls.edit_label`)}\n        </Button>\n      );\n    }\n\n    return items;\n  },\n\n  /**\n   * Get controls for a user which are destructive (e.g. delete).\n   * @protected\n   */\n  destructiveControls(poll: Poll, context: Component): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    if (poll.canDelete()) {\n      items.add(\n        'delete',\n        <Button icon=\"fas fa-times\" onclick={this.deleteAction.bind(this, poll)}>\n          {app.translator.trans(`fof-polls.forum.poll_controls.delete_label`)}\n        </Button>\n      );\n    }\n\n    return items;\n  },\n\n  /**\n   * Delete the user.\n   */\n  async deleteAction(poll: Poll): Promise<void> {\n    if (!confirm(app.translator.trans(`fof-polls.forum.poll_controls.delete_confirmation`) as string)) {\n      return;\n    }\n\n    return poll\n      .delete()\n      .then(() => {\n        this.showDeletionAlert(poll, 'success');\n        if (app.current.matches(ComposePollPage, { id: poll.id() }) || app.current.matches(PollsPage, { id: poll.id() })) {\n          app.history.back();\n        } else {\n          window.location.reload();\n        }\n      })\n      .catch(() => this.showDeletionAlert(poll, 'error'));\n  },\n\n  /**\n   * Show deletion alert of poll\n   */\n  showDeletionAlert(poll: Poll, type: string): void {\n    const message = {\n      success: `$fof-polls.forum.poll_controls.delete_success_message`,\n      error: `fof-polls.forum.poll_controls.delete_error_message`,\n    }[type]!;\n\n    app.alerts.show({ type }, app.translator.trans(message, { poll: poll }));\n  },\n\n  /**\n   * Edit the poll.\n   */\n  editAction(poll: Poll): void {\n    m.route.set(app.route('fof.polls.compose', { id: poll.id() }));\n  },\n};\n","module.exports = flarum.core.compat['common/Component'];","module.exports = flarum.core.compat['common/Model'];","module.exports = flarum.core.compat['common/components/Badge'];","module.exports = flarum.core.compat['common/components/Button'];","module.exports = flarum.core.compat['common/components/Dropdown'];","module.exports = flarum.core.compat['common/components/Link'];","module.exports = flarum.core.compat['common/components/LinkButton'];","module.exports = flarum.core.compat['common/components/LoadingIndicator'];","module.exports = flarum.core.compat['common/components/Modal'];","module.exports = flarum.core.compat['common/components/Page'];","module.exports = flarum.core.compat['common/components/Placeholder'];","module.exports = flarum.core.compat['common/components/SelectDropdown'];","module.exports = flarum.core.compat['common/components/Separator'];","module.exports = flarum.core.compat['common/components/Switch'];","module.exports = flarum.core.compat['common/components/Tooltip'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['common/extenders'];","module.exports = flarum.core.compat['common/helpers/avatar'];","module.exports = flarum.core.compat['common/helpers/highlight'];","module.exports = flarum.core.compat['common/helpers/icon'];","module.exports = flarum.core.compat['common/helpers/listItems'];","module.exports = flarum.core.compat['common/helpers/username'];","module.exports = flarum.core.compat['common/models/Discussion'];","module.exports = flarum.core.compat['common/models/Forum'];","module.exports = flarum.core.compat['common/models/Post'];","module.exports = flarum.core.compat['common/states/PaginatedListState'];","module.exports = flarum.core.compat['common/utils/EventEmitter'];","module.exports = flarum.core.compat['common/utils/ItemList'];","module.exports = flarum.core.compat['common/utils/Stream'];","module.exports = flarum.core.compat['common/utils/SubtreeRetainer'];","module.exports = flarum.core.compat['common/utils/abbreviateNumber'];","module.exports = flarum.core.compat['common/utils/classList'];","module.exports = flarum.core.compat['common/utils/computed'];","module.exports = flarum.core.compat['common/utils/extractText'];","module.exports = flarum.core.compat['forum/app'];","module.exports = flarum.core.compat['forum/components/CommentPost'];","module.exports = flarum.core.compat['forum/components/DiscussionComposer'];","module.exports = flarum.core.compat['forum/components/DiscussionList'];","module.exports = flarum.core.compat['forum/components/DiscussionPage'];","module.exports = flarum.core.compat['forum/components/IndexPage'];","module.exports = flarum.core.compat['forum/components/LogInModal'];","module.exports = flarum.core.compat['forum/components/ReplyComposer'];","module.exports = flarum.core.compat['forum/utils/PostControls'];","module.exports = flarum.core.compat['forum/utils/slidable'];","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return e;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var t,\n    e = {},\n    r = Object.prototype,\n    n = r.hasOwnProperty,\n    o = Object.defineProperty || function (t, e, r) {\n      t[e] = r.value;\n    },\n    i = \"function\" == typeof Symbol ? Symbol : {},\n    a = i.iterator || \"@@iterator\",\n    c = i.asyncIterator || \"@@asyncIterator\",\n    u = i.toStringTag || \"@@toStringTag\";\n  function define(t, e, r) {\n    return Object.defineProperty(t, e, {\n      value: r,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), t[e];\n  }\n  try {\n    define({}, \"\");\n  } catch (t) {\n    define = function define(t, e, r) {\n      return t[e] = r;\n    };\n  }\n  function wrap(t, e, r, n) {\n    var i = e && e.prototype instanceof Generator ? e : Generator,\n      a = Object.create(i.prototype),\n      c = new Context(n || []);\n    return o(a, \"_invoke\", {\n      value: makeInvokeMethod(t, r, c)\n    }), a;\n  }\n  function tryCatch(t, e, r) {\n    try {\n      return {\n        type: \"normal\",\n        arg: t.call(e, r)\n      };\n    } catch (t) {\n      return {\n        type: \"throw\",\n        arg: t\n      };\n    }\n  }\n  e.wrap = wrap;\n  var h = \"suspendedStart\",\n    l = \"suspendedYield\",\n    f = \"executing\",\n    s = \"completed\",\n    y = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var p = {};\n  define(p, a, function () {\n    return this;\n  });\n  var d = Object.getPrototypeOf,\n    v = d && d(d(values([])));\n  v && v !== r && n.call(v, a) && (p = v);\n  var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p);\n  function defineIteratorMethods(t) {\n    [\"next\", \"throw\", \"return\"].forEach(function (e) {\n      define(t, e, function (t) {\n        return this._invoke(e, t);\n      });\n    });\n  }\n  function AsyncIterator(t, e) {\n    function invoke(r, o, i, a) {\n      var c = tryCatch(t[r], t, o);\n      if (\"throw\" !== c.type) {\n        var u = c.arg,\n          h = u.value;\n        return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) {\n          invoke(\"next\", t, i, a);\n        }, function (t) {\n          invoke(\"throw\", t, i, a);\n        }) : e.resolve(h).then(function (t) {\n          u.value = t, i(u);\n        }, function (t) {\n          return invoke(\"throw\", t, i, a);\n        });\n      }\n      a(c.arg);\n    }\n    var r;\n    o(this, \"_invoke\", {\n      value: function value(t, n) {\n        function callInvokeWithMethodAndArg() {\n          return new e(function (e, r) {\n            invoke(t, n, e, r);\n          });\n        }\n        return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(e, r, n) {\n    var o = h;\n    return function (i, a) {\n      if (o === f) throw new Error(\"Generator is already running\");\n      if (o === s) {\n        if (\"throw\" === i) throw a;\n        return {\n          value: t,\n          done: !0\n        };\n      }\n      for (n.method = i, n.arg = a;;) {\n        var c = n.delegate;\n        if (c) {\n          var u = maybeInvokeDelegate(c, n);\n          if (u) {\n            if (u === y) continue;\n            return u;\n          }\n        }\n        if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) {\n          if (o === h) throw o = s, n.arg;\n          n.dispatchException(n.arg);\n        } else \"return\" === n.method && n.abrupt(\"return\", n.arg);\n        o = f;\n        var p = tryCatch(e, r, n);\n        if (\"normal\" === p.type) {\n          if (o = n.done ? s : l, p.arg === y) continue;\n          return {\n            value: p.arg,\n            done: n.done\n          };\n        }\n        \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(e, r) {\n    var n = r.method,\n      o = e.iterator[n];\n    if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y;\n    var i = tryCatch(o, e.iterator, r.arg);\n    if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y;\n    var a = i.arg;\n    return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y);\n  }\n  function pushTryEntry(t) {\n    var e = {\n      tryLoc: t[0]\n    };\n    1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e);\n  }\n  function resetTryEntry(t) {\n    var e = t.completion || {};\n    e.type = \"normal\", delete e.arg, t.completion = e;\n  }\n  function Context(t) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], t.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(e) {\n    if (e || \"\" === e) {\n      var r = e[a];\n      if (r) return r.call(e);\n      if (\"function\" == typeof e.next) return e;\n      if (!isNaN(e.length)) {\n        var o = -1,\n          i = function next() {\n            for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next;\n            return next.value = t, next.done = !0, next;\n          };\n        return i.next = i;\n      }\n    }\n    throw new TypeError(_typeof(e) + \" is not iterable\");\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), o(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) {\n    var e = \"function\" == typeof t && t.constructor;\n    return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name));\n  }, e.mark = function (t) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t;\n  }, e.awrap = function (t) {\n    return {\n      __await: t\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () {\n    return this;\n  }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) {\n    void 0 === i && (i = Promise);\n    var a = new AsyncIterator(wrap(t, r, n, o), i);\n    return e.isGeneratorFunction(r) ? a : a.next().then(function (t) {\n      return t.done ? t.value : a.next();\n    });\n  }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () {\n    return this;\n  }), define(g, \"toString\", function () {\n    return \"[object Generator]\";\n  }), e.keys = function (t) {\n    var e = Object(t),\n      r = [];\n    for (var n in e) r.push(n);\n    return r.reverse(), function next() {\n      for (; r.length;) {\n        var t = r.pop();\n        if (t in e) return next.value = t, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, e.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(e) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var t = this.tryEntries[0].completion;\n      if (\"throw\" === t.type) throw t.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(e) {\n      if (this.done) throw e;\n      var r = this;\n      function handle(n, o) {\n        return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o;\n      }\n      for (var o = this.tryEntries.length - 1; o >= 0; --o) {\n        var i = this.tryEntries[o],\n          a = i.completion;\n        if (\"root\" === i.tryLoc) return handle(\"end\");\n        if (i.tryLoc <= this.prev) {\n          var c = n.call(i, \"catchLoc\"),\n            u = n.call(i, \"finallyLoc\");\n          if (c && u) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          } else if (c) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n          } else {\n            if (!u) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(t, e) {\n      for (var r = this.tryEntries.length - 1; r >= 0; --r) {\n        var o = this.tryEntries[r];\n        if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) {\n          var i = o;\n          break;\n        }\n      }\n      i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null);\n      var a = i ? i.completion : {};\n      return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a);\n    },\n    complete: function complete(t, e) {\n      if (\"throw\" === t.type) throw t.arg;\n      return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y;\n    },\n    finish: function finish(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y;\n      }\n    },\n    \"catch\": function _catch(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.tryLoc === t) {\n          var n = r.completion;\n          if (\"throw\" === n.type) {\n            var o = n.arg;\n            resetTryEntry(r);\n          }\n          return o;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(e, r, n) {\n      return this.delegate = {\n        iterator: values(e),\n        resultName: r,\n        nextLoc: n\n      }, \"next\" === this.method && (this.arg = t), y;\n    }\n  }, e;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct.bind();\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n  return _construct.apply(null, arguments);\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n      _cache.set(Class, Wrapper);\n    }\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n  return _wrapNativeSuper(Class);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"names":["app","extend","classList","DiscussionComposer","ReplyComposer","CreatePollModal","addToComposer","composer","prototype","addPoll","_this","modal","show","poll","fields","onsubmit","items","_this$composer$body","_this$composer$body$a","_discussion$canStartP","discussion","body","attrs","canStartPoll","forum","canStartPolls","add","m","className","onclick","bind","translator","trans","data","Badge","DiscussionList","Discussion","params","include","push","badges","hasPoll","component","type","label","icon","IndexPage","LinkButton","addNavItem","href","route","CommentPost","PostPoll","DiscussionPage","content","post","isHidden","revealContent","polls","_iterator","_createForOfIteratorHelperLoose","_step","done","value","subtree","check","checks","map","_poll$data","_poll$options$map","_poll$options","_poll$myVotes$map","_poll$myVotes","attributes","options","call","option","_option$data","myVotes","vote","_vote$option","id","JSON","stringify","pusher","then","binding","channels","main","store","getById","pushAttributes","voteCount","changedOptions","optionId","undefined","redraw","unbind","PostControls","Button","createPoll","createRecord","save","_extends","relationships","_post$rawRelationship","rawRelationship","Component","ItemList","ComposePollHero","_Component","_inheritsLoose","_len","arguments","length","args","Array","_key","apply","concat","_proto","oninit","vnode","view","controlItems","toArray","itemClassName","exists","default","Page","LoadingIndicator","PollForm","PollFormState","listItems","SelectDropdown","ComposePollPage","_Page","loading","_this2","_this$poll","_this$poll2","editId","param","find","item","_this2$poll","setTitle","createNewPoll","history","bodyClass","attribute","set","sidebarItems","_onsubmit","_asyncToGenerator","_regeneratorRuntime","mark","_callee","state","isNew","alertAttrs","alertId","wrap","_callee$","_context","prev","next","controls","alerts","setTimeout","dismiss","stop","_x","_x2","buttonClassName","accessibleToggleLabel","navItems","Modal","_Modal","title","hide","EditPollModal","_CreatePollModal","avatar","username","Link","Stream","ListVotersModal","optionContent","opt","votes","filter","v","answer","voteContent","user","PollListItem","Placeholder","PollList","getParams","isLoading","isInitialLoading","isLoadingNext","hasNext","loadNext","isEmpty","text","pageSize","isSearchResults","getPages","pg","key","SubtreeRetainer","Dropdown","highlight","slidable","PollPage","abbreviateNumber","PollControls","highlightRegExp","freshness","time","session","markedAllAsReadAt","getTime","active","elementAttrs","Slidable","window","controlsView","contentView","slidableUnderneathView","menuClassName","isUnread","disabled","markAsRead","mainView","question","subtitle","infoItems","oncreate","slidableInstance","element","$","on","reset","onbeforeupdate","needsRebuild","current","matches","lastVotedNumber","hasEnded","activeView","endDate","dayjs","fromNow","count","PollOptionLabel","PollOptionInput","PollOption","isResult","name","onchange","style","opacity","PollResult","PollOptions","pollOptions","showCheckMarks","forEach","changeVote","PollResultsNumber","PollResults","overallVoteCount","number","min","max","Switch","extractText","FormError","optionAnswers","o","optionImageUrls","imageUrl","formatDate","publicPoll","allowMultipleVotes","hideVotes","allowChangeVote","maxVotes","datepickerMinDate","isAfter","bidi","addOption","displayOptions","isBefore","deleting","Object","keys","i","placeholder","removeOption","Math","alert","splice","_this3","pollExists","dateToTimestamp","event","preventDefault","t0","message","console","error","_delete2","_callee2","_callee2$","_context2","deleteAction","finish","_delete","date","def","dayjsDate","isValid","format","PollState","PollView","showVoters","createMainView","createFormItems","loadingOptions","hasSelectedOptions","deletePoll","editPoll","editAction","canVote","canChangeVote","hasVoted","PollViewPage","LogInModal","PollListState","PollsPage","sort","refresh","hero","viewItems","actionItems","newPollAction","Tooltip","_this$attrs$poll","_this$attrs$poll2","useSubmitUI","pendingSubmit","pendingOptions","preventClose","addEventListener","onremove","removeEventListener","canSeeVoters","canEdit","canDelete","viewOption","_poll$myVotes2","_poll$myVotes3","_poll$myVotes4","totalVotes","voted","has","some","percent","round","canSeeVoteCount","isDisabled","width","Number","showCheckmark","bar","checked","src","alt","hideOptionTooltip","evt","_this$attrs$poll$myVo","_this$attrs$poll$myVo2","target","optionIds","Set","isUnvoting","allowsMultiple","clear","size","submit","cb","onerror","request","method","url","from","res","pushPayload","err","confirm","sync","tooltipVisible","updateVisibility","e","_Error","_wrapNativeSuper","Error","components","Extend","Post","Forum","Poll","PollVote","Routes","Store","Model","hasMany","addDiscussionBadge","addComposerItems","addPollsToPost","addPostControls","initializers","computed","_Model","transformDate","isGlobal","hiddenAt","apiEndpoint","hasOne","pollId","models","pushData","expandedGroup","isExpanded","groupKey","expand","_save","sent","PaginatedListState","EventEmitter","globalEventEmitter","_PaginatedListState","page","extraPolls","eventEmitter","_assertThisInitialized","requestParams","_this$params$sort","sortMap","q","loadPage","preloadedPolls","preloadedApiDocument","initialLoading","Promise","resolve","relevance","newest","oldest","removePoll","emit","pages","index","indexOf","unshift","getAllItems","_createClass","get","reduce","showButton","states","Separator","context","section","itemName","pollControls","moderationControls","destructiveControls","abrupt","showDeletionAlert","back","location","reload","success","_typeof","require","module","exports","__esModule","t","r","n","hasOwnProperty","defineProperty","Symbol","a","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","Generator","create","Context","makeInvokeMethod","tryCatch","arg","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","values","g","defineIteratorMethods","_invoke","AsyncIterator","invoke","__await","callInvokeWithMethodAndArg","delegate","maybeInvokeDelegate","_sent","dispatchException","TypeError","resultName","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","isNaN","displayName","isGeneratorFunction","constructor","setPrototypeOf","__proto__","awrap","async","reverse","pop","charAt","slice","rval","handle","complete","_catch","delegateYield","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","Function","self","ReferenceError","asyncGeneratorStep","gen","reject","_next","_throw","info","fn","isNativeReflectConstruct","_construct","Parent","Class","Reflect","construct","Constructor","instance","_defineProperties","props","descriptor","protoProps","staticProps","assign","source","_getPrototypeOf","subClass","superClass","_isNativeFunction","toString","_isNativeReflectConstruct","sham","Proxy","Boolean","valueOf","_setPrototypeOf","isNativeFunction","_cache","Map","Wrapper"],"sourceRoot":""}