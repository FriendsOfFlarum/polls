{"version":3,"sources":["webpack://@reflar/polls/webpack/bootstrap","webpack://@reflar/polls/./forum.js","webpack://@reflar/polls/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@reflar/polls/./node_modules/DateTimePicker/dist/DateTimePicker.min.js","webpack://@reflar/polls/./src/common/models/Answer.js","webpack://@reflar/polls/./src/common/models/Question.js","webpack://@reflar/polls/./src/common/models/Vote.js","webpack://@reflar/polls/./src/forum/PollControl.js","webpack://@reflar/polls/./src/forum/PollDiscussion.js","webpack://@reflar/polls/./src/forum/addPollBadge.js","webpack://@reflar/polls/./src/forum/components/EditPollModal.js","webpack://@reflar/polls/./src/forum/components/PollModal.js","webpack://@reflar/polls/./src/forum/components/PollVote.js","webpack://@reflar/polls/./src/forum/components/ShowVotersModal.js","webpack://@reflar/polls/./src/forum/index.js","webpack://@reflar/polls/external \"flarum.core.compat['Component']\"","webpack://@reflar/polls/external \"flarum.core.compat['Model']\"","webpack://@reflar/polls/external \"flarum.core.compat['app']\"","webpack://@reflar/polls/external \"flarum.core.compat['components/Badge']\"","webpack://@reflar/polls/external \"flarum.core.compat['components/Button']\"","webpack://@reflar/polls/external \"flarum.core.compat['components/CommentPost']\"","webpack://@reflar/polls/external \"flarum.core.compat['components/DiscussionComposer']\"","webpack://@reflar/polls/external \"flarum.core.compat['components/LogInModal']\"","webpack://@reflar/polls/external \"flarum.core.compat['components/Modal']\"","webpack://@reflar/polls/external \"flarum.core.compat['components/Switch']\"","webpack://@reflar/polls/external \"flarum.core.compat['extend']\"","webpack://@reflar/polls/external \"flarum.core.compat['helpers/avatar']\"","webpack://@reflar/polls/external \"flarum.core.compat['helpers/listItems']\"","webpack://@reflar/polls/external \"flarum.core.compat['helpers/username']\"","webpack://@reflar/polls/external \"flarum.core.compat['models/Discussion']\"","webpack://@reflar/polls/external \"flarum.core.compat['models/User']\"","webpack://@reflar/polls/external \"flarum.core.compat['utils/ItemList']\"","webpack://@reflar/polls/external \"flarum.core.compat['utils/PostControls']\"","webpack://@reflar/polls/external \"flarum.core.compat['utils/mixin']\"","webpack://@reflar/polls/external \"jQuery\""],"names":["Answer","apiEndpoint","exists","data","id","mixin","Model","answer","attribute","votes","percent","Question","question","isEnded","endDate","isPublic","answers","hasMany","Vote","poll_id","user_id","option_id","extend","PostControls","items","post","discussion","poll","Poll","user","app","session","undefined","canEditPolls","canSelfEditPolls","number","add","m","Button","icon","className","onclick","modal","show","EditPollModal","translator","trans","confirm","request","url","forum","method","store","users","Object","keys","then","location","reload","CommentPost","prototype","content","props","isHidden","subtree","invalidate","push","PollVote","component","addPollBadge","Discussion","badges","Badge","type","label","init","prop","pollCreator","newAnswer","getDateTime","Date","title","date","isNaN","checkTargets","getMonth","getDate","getHours","getMinutes","forEach","target","i","getFullYear","config","isInitalized","oDTP1","$","DateTimePicker","dateTimeFormat","minDateTime","settingValueOfElement","value","withAttr","updateQuestion","bind","map","updateAnswer","removeOption","length","addAnswer","children","close","onhide","redraw","strategy","createRecord","save","alert","option","some","splice","answerToUpdate","attributes","Modal","PollModal","publicPoll","values","el","addOption","Switch","state","onchange","objectSize","obj","size","key","onsubmit","e","preventDefault","pollArray","DiscussionComposer","voted","canVote","find","showVoters","ShowVotersModal","onError","error","srcElement","checked","alerts","changeVote","oldVoteId","oldAnswerId","errorHandler","response","vote","relationships","parseInt","view","item","Math","round","element","tooltip","placement","time","moment","fromNow","addVote","LogInModal","Component","getUsers","ItemList","counter","getById","route","avatar","username","listItems","toArray","initializers","models","questions","hasOne","User","canStartPolls","addPoll","addPollBadege","PollDiscussion","PollControl"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","/*\n * This file is part of Flarum.\n *\n * (c) Toby Zerner <toby.zerner@gmail.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nexport * from './src/common';\nexport * from './src/forum';","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","/* ----------------------------------------------------------------------------- \r\n\r\n  jQuery DateTimePicker - Responsive flat design jQuery DateTime Picker plugin for Web & Mobile\r\n  Version 0.1.38\r\n  Copyright (c)2017 Lajpat Shah\r\n  Contributors : https://github.com/nehakadam/DateTimePicker/contributors\r\n  Repository : https://github.com/nehakadam/DateTimePicker\r\n  Documentation : https://nehakadam.github.io/DateTimePicker\r\n\r\n ----------------------------------------------------------------------------- */\r\n\r\nObject.keys||(Object.keys=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b}),$.DateTimePicker=$.DateTimePicker||{name:\"DateTimePicker\",i18n:{},defaults:{mode:\"date\",defaultDate:null,dateSeparator:\"-\",timeSeparator:\":\",timeMeridiemSeparator:\" \",dateTimeSeparator:\" \",monthYearSeparator:\" \",dateTimeFormat:\"dd-MM-yyyy HH:mm\",dateFormat:\"dd-MM-yyyy\",timeFormat:\"HH:mm\",maxDate:null,minDate:null,maxTime:null,minTime:null,maxDateTime:null,minDateTime:null,shortDayNames:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],fullDayNames:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],shortMonthNames:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],fullMonthNames:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],labels:null,minuteInterval:1,roundOffMinutes:!0,secondsInterval:1,roundOffSeconds:!0,showHeader:!0,titleContentDate:\"Set Date\",titleContentTime:\"Set Time\",titleContentDateTime:\"Set Date & Time\",buttonsToDisplay:[\"HeaderCloseButton\",\"SetButton\",\"ClearButton\"],setButtonContent:\"Set\",clearButtonContent:\"Clear\",incrementButtonContent:\"+\",decrementButtonContent:\"-\",setValueInTextboxOnEveryClick:!1,readonlyInputs:!1,animationDuration:400,touchHoldInterval:300,captureTouchHold:!1,mouseHoldInterval:50,captureMouseHold:!1,isPopup:!0,parentElement:\"body\",isInline:!1,inputElement:null,language:\"\",init:null,addEventHandlers:null,beforeShow:null,afterShow:null,beforeHide:null,afterHide:null,buttonClicked:null,settingValueOfElement:null,formatHumanDate:null,parseDateTimeString:null,formatDateTimeString:null},dataObject:{dCurrentDate:new Date,iCurrentDay:0,iCurrentMonth:0,iCurrentYear:0,iCurrentHour:0,iCurrentMinutes:0,iCurrentSeconds:0,sCurrentMeridiem:\"\",iMaxNumberOfDays:0,sDateFormat:\"\",sTimeFormat:\"\",sDateTimeFormat:\"\",dMinValue:null,dMaxValue:null,sArrInputDateFormats:[],sArrInputTimeFormats:[],sArrInputDateTimeFormats:[],bArrMatchFormat:[],bDateMode:!1,bTimeMode:!1,bDateTimeMode:!1,oInputElement:null,iTabIndex:0,bElemFocused:!1,bIs12Hour:!1,sTouchButton:null,iTouchStart:null,oTimeInterval:null,bIsTouchDevice:\"ontouchstart\"in document.documentElement}},$.cf={_isValid:function(a){return void 0!==a&&null!==a&&\"\"!==a},_compare:function(a,b){var c=void 0!==a&&null!==a,d=void 0!==b&&null!==b;return!(!c||!d)&&a.toLowerCase()===b.toLowerCase()}},function(a){\"function\"==typeof define&&define.amd?define([\"jquery\"],a):\"object\"==typeof exports?module.exports=a(require(\"jquery\")):a(jQuery)}(function(a){\"use strict\";function b(b,c){this.element=b;var d=\"\";d=a.cf._isValid(c)&&a.cf._isValid(c.language)?c.language:a.DateTimePicker.defaults.language,this.settings=a.extend({},a.DateTimePicker.defaults,a.DateTimePicker.i18n[d],c),this.options=c,this.oData=a.extend({},a.DateTimePicker.dataObject),this._defaults=a.DateTimePicker.defaults,this._name=a.DateTimePicker.name,this.init()}a.fn.DateTimePicker=function(c){var d,e,f=a(this).data(),g=f?Object.keys(f):[];if(\"string\"!=typeof c)return this.each(function(){a.removeData(this,\"plugin_DateTimePicker\"),a.data(this,\"plugin_DateTimePicker\")||a.data(this,\"plugin_DateTimePicker\",new b(this,c))});if(a.cf._isValid(f))if(\"destroy\"===c){if(g.length>0)for(d in g)if(e=g[d],e.search(\"plugin_DateTimePicker\")!==-1){a(document).unbind(\"click.DateTimePicker keydown.DateTimePicker keyup.DateTimePicker\"),a(this).children().remove(),a(this).removeData(),a(this).unbind(),a(this).removeClass(\"dtpicker-overlay dtpicker-mobile dtpicker-inline\"),f=f[e];break}}else if(\"object\"===c&&g.length>0)for(d in g)if(e=g[d],e.search(\"plugin_DateTimePicker\")!==-1)return f[e]},b.prototype={init:function(){var b=this;b._setDateFormatArray(),b._setTimeFormatArray(),b._setDateTimeFormatArray(),void 0!==a(b.element).data(\"parentelement\")&&(b.settings.parentElement=a(b.element).data(\"parentelement\")),b.settings.isPopup&&!b.settings.isInline&&(b._createPicker(),a(b.element).addClass(\"dtpicker-mobile\")),b.settings.isInline&&(b._createPicker(),b._showPicker(b.settings.inputElement)),b.settings.init&&b.settings.init.call(b),b._addEventHandlersForInput()},_setDateFormatArray:function(){var a=this;a.oData.sArrInputDateFormats=[];var b=\"\";b=\"dd\"+a.settings.dateSeparator+\"MM\"+a.settings.dateSeparator+\"yyyy\",a.oData.sArrInputDateFormats.push(b),b=\"MM\"+a.settings.dateSeparator+\"dd\"+a.settings.dateSeparator+\"yyyy\",a.oData.sArrInputDateFormats.push(b),b=\"yyyy\"+a.settings.dateSeparator+\"MM\"+a.settings.dateSeparator+\"dd\",a.oData.sArrInputDateFormats.push(b),b=\"dd\"+a.settings.dateSeparator+\"MMM\"+a.settings.dateSeparator+\"yyyy\",a.oData.sArrInputDateFormats.push(b),b=\"MM\"+a.settings.monthYearSeparator+\"yyyy\",a.oData.sArrInputDateFormats.push(b),b=\"MMM\"+a.settings.monthYearSeparator+\"yyyy\",a.oData.sArrInputDateFormats.push(b),b=\"MMMM\"+a.settings.monthYearSeparator+\"yyyy\",a.oData.sArrInputDateFormats.push(b),b=\"yyyy\"+a.settings.monthYearSeparator+\"MM\",a.oData.sArrInputDateFormats.push(b)},_setTimeFormatArray:function(){var a=this;a.oData.sArrInputTimeFormats=[];var b=\"\";b=\"hh\"+a.settings.timeSeparator+\"mm\"+a.settings.timeSeparator+\"ss\"+a.settings.timeMeridiemSeparator+\"AA\",a.oData.sArrInputTimeFormats.push(b),b=\"HH\"+a.settings.timeSeparator+\"mm\"+a.settings.timeSeparator+\"ss\",a.oData.sArrInputTimeFormats.push(b),b=\"hh\"+a.settings.timeSeparator+\"mm\"+a.settings.timeMeridiemSeparator+\"AA\",a.oData.sArrInputTimeFormats.push(b),b=\"HH\"+a.settings.timeSeparator+\"mm\",a.oData.sArrInputTimeFormats.push(b)},_setDateTimeFormatArray:function(){var a=this;a.oData.sArrInputDateTimeFormats=[];var b=\"\",c=\"\",d=\"\";b=\"dd\"+a.settings.dateSeparator+\"MM\"+a.settings.dateSeparator+\"yyyy\",c=\"HH\"+a.settings.timeSeparator+\"mm\"+a.settings.timeSeparator+\"ss\",d=b+a.settings.dateTimeSeparator+c,a.oData.sArrInputDateTimeFormats.push(d),b=\"dd\"+a.settings.dateSeparator+\"MM\"+a.settings.dateSeparator+\"yyyy\",c=\"hh\"+a.settings.timeSeparator+\"mm\"+a.settings.timeSeparator+\"ss\"+a.settings.timeMeridiemSeparator+\"AA\",d=b+a.settings.dateTimeSeparator+c,a.oData.sArrInputDateTimeFormats.push(d),b=\"MM\"+a.settings.dateSeparator+\"dd\"+a.settings.dateSeparator+\"yyyy\",c=\"HH\"+a.settings.timeSeparator+\"mm\"+a.settings.timeSeparator+\"ss\",d=b+a.settings.dateTimeSeparator+c,a.oData.sArrInputDateTimeFormats.push(d),b=\"MM\"+a.settings.dateSeparator+\"dd\"+a.settings.dateSeparator+\"yyyy\",c=\"hh\"+a.settings.timeSeparator+\"mm\"+a.settings.timeSeparator+\"ss\"+a.settings.timeMeridiemSeparator+\"AA\",d=b+a.settings.dateTimeSeparator+c,a.oData.sArrInputDateTimeFormats.push(d),b=\"yyyy\"+a.settings.dateSeparator+\"MM\"+a.settings.dateSeparator+\"dd\",c=\"HH\"+a.settings.timeSeparator+\"mm\"+a.settings.timeSeparator+\"ss\",d=b+a.settings.dateTimeSeparator+c,a.oData.sArrInputDateTimeFormats.push(d),b=\"yyyy\"+a.settings.dateSeparator+\"MM\"+a.settings.dateSeparator+\"dd\",c=\"hh\"+a.settings.timeSeparator+\"mm\"+a.settings.timeSeparator+\"ss\"+a.settings.timeMeridiemSeparator+\"AA\",d=b+a.settings.dateTimeSeparator+c,a.oData.sArrInputDateTimeFormats.push(d),b=\"dd\"+a.settings.dateSeparator+\"MMM\"+a.settings.dateSeparator+\"yyyy\",c=\"hh\"+a.settings.timeSeparator+\"mm\"+a.settings.timeSeparator+\"ss\",d=b+a.settings.dateTimeSeparator+c,a.oData.sArrInputDateTimeFormats.push(d),b=\"dd\"+a.settings.dateSeparator+\"MMM\"+a.settings.dateSeparator+\"yyyy\",c=\"hh\"+a.settings.timeSeparator+\"mm\"+a.settings.timeSeparator+\"ss\"+a.settings.timeMeridiemSeparator+\"AA\",d=b+a.settings.dateTimeSeparator+c,a.oData.sArrInputDateTimeFormats.push(d),b=\"dd\"+a.settings.dateSeparator+\"MM\"+a.settings.dateSeparator+\"yyyy\",c=\"HH\"+a.settings.timeSeparator+\"mm\",d=b+a.settings.dateTimeSeparator+c,a.oData.sArrInputDateTimeFormats.push(d),b=\"dd\"+a.settings.dateSeparator+\"MM\"+a.settings.dateSeparator+\"yyyy\",c=\"hh\"+a.settings.timeSeparator+\"mm\"+a.settings.timeMeridiemSeparator+\"AA\",d=b+a.settings.dateTimeSeparator+c,a.oData.sArrInputDateTimeFormats.push(d),b=\"MM\"+a.settings.dateSeparator+\"dd\"+a.settings.dateSeparator+\"yyyy\",c=\"HH\"+a.settings.timeSeparator+\"mm\",d=b+a.settings.dateTimeSeparator+c,a.oData.sArrInputDateTimeFormats.push(d),b=\"MM\"+a.settings.dateSeparator+\"dd\"+a.settings.dateSeparator+\"yyyy\",c=\"hh\"+a.settings.timeSeparator+\"mm\"+a.settings.timeMeridiemSeparator+\"AA\",d=b+a.settings.dateTimeSeparator+c,a.oData.sArrInputDateTimeFormats.push(d),b=\"yyyy\"+a.settings.dateSeparator+\"MM\"+a.settings.dateSeparator+\"dd\",c=\"HH\"+a.settings.timeSeparator+\"mm\",d=b+a.settings.dateTimeSeparator+c,a.oData.sArrInputDateTimeFormats.push(d),b=\"yyyy\"+a.settings.dateSeparator+\"MM\"+a.settings.dateSeparator+\"dd\",c=\"hh\"+a.settings.timeSeparator+\"mm\"+a.settings.timeMeridiemSeparator+\"AA\",d=b+a.settings.dateTimeSeparator+c,a.oData.sArrInputDateTimeFormats.push(d),b=\"dd\"+a.settings.dateSeparator+\"MMM\"+a.settings.dateSeparator+\"yyyy\",c=\"hh\"+a.settings.timeSeparator+\"mm\",d=b+a.settings.dateTimeSeparator+c,a.oData.sArrInputDateTimeFormats.push(d),b=\"dd\"+a.settings.dateSeparator+\"MMM\"+a.settings.dateSeparator+\"yyyy\",c=\"hh\"+a.settings.timeSeparator+\"mm\"+a.settings.timeMeridiemSeparator+\"AA\",d=b+a.settings.dateTimeSeparator+c,a.oData.sArrInputDateTimeFormats.push(d)},_matchFormat:function(b,c){var d=this;d.oData.bArrMatchFormat=[],d.oData.bDateMode=!1,d.oData.bTimeMode=!1,d.oData.bDateTimeMode=!1;var e,f=[];for(b=a.cf._isValid(b)?b:d.settings.mode,a.cf._compare(b,\"date\")?(c=a.cf._isValid(c)?c:d.oData.sDateFormat,d.oData.bDateMode=!0,f=d.oData.sArrInputDateFormats):a.cf._compare(b,\"time\")?(c=a.cf._isValid(c)?c:d.oData.sTimeFormat,d.oData.bTimeMode=!0,f=d.oData.sArrInputTimeFormats):a.cf._compare(b,\"datetime\")&&(c=a.cf._isValid(c)?c:d.oData.sDateTimeFormat,d.oData.bDateTimeMode=!0,f=d.oData.sArrInputDateTimeFormats),e=0;e<f.length;e++)d.oData.bArrMatchFormat.push(a.cf._compare(c,f[e]))},_setMatchFormat:function(a,b,c){var d=this;a>0&&d._matchFormat(b,c)},_createPicker:function(){var b=this;b.settings.isInline?a(b.element).addClass(\"dtpicker-inline\"):(a(b.element).addClass(\"dtpicker-overlay\"),a(\".dtpicker-overlay\").click(function(a){b._hidePicker(\"\")}));var c=\"\";c+=\"<div class='dtpicker-bg'>\",c+=\"<div class='dtpicker-cont'>\",c+=\"<div class='dtpicker-content'>\",c+=\"<div class='dtpicker-subcontent'>\",c+=\"</div>\",c+=\"</div>\",c+=\"</div>\",c+=\"</div>\",a(b.element).html(c)},_addEventHandlersForInput:function(){var b=this;if(!b.settings.isInline){b.oData.oInputElement=null,a(b.settings.parentElement).find(\"input[type='date'], input[type='time'], input[type='datetime']\").each(function(){a(this).attr(\"data-field\",a(this).attr(\"type\")),a(this).attr(\"type\",\"text\")});var c=\"[data-field='date'], [data-field='time'], [data-field='datetime']\";a(b.settings.parentElement).off(\"focus\",c,b._inputFieldFocus).on(\"focus\",c,{obj:b},b._inputFieldFocus),a(b.settings.parentElement).off(\"click\",c,b._inputFieldClick).on(\"click\",c,{obj:b},b._inputFieldClick)}b.settings.addEventHandlers&&b.settings.addEventHandlers.call(b)},_inputFieldFocus:function(a){var b=a.data.obj;b.showDateTimePicker(this),b.oData.bMouseDown=!1},_inputFieldClick:function(b){var c=b.data.obj;a.cf._compare(a(this).prop(\"tagName\"),\"input\")||c.showDateTimePicker(this),b.stopPropagation()},getDateObjectForInputField:function(b){var c=this;if(a.cf._isValid(b)){var d,e=c._getValueOfElement(b),f=a(b).data(\"field\"),g=\"\";return a.cf._isValid(f)||(f=c.settings.mode),c.settings.formatDateTimeString?d=c.settings.parseDateTimeString.call(c,e,f,g,a(b)):(g=a(b).data(\"format\"),a.cf._isValid(g)||(a.cf._compare(f,\"date\")?g=c.settings.dateFormat:a.cf._compare(f,\"time\")?g=c.settings.timeFormat:a.cf._compare(f,\"datetime\")&&(g=c.settings.dateTimeFormat)),c._matchFormat(f,g),a.cf._compare(f,\"date\")?d=c._parseDate(e):a.cf._compare(f,\"time\")?d=c._parseTime(e):a.cf._compare(f,\"datetime\")&&(d=c._parseDateTime(e))),d}},setDateTimeStringInInputField:function(b,c){var d=this;c=c||d.oData.dCurrentDate;var e;a.cf._isValid(b)?(e=[],\"string\"==typeof b?e.push(b):\"object\"==typeof b&&(e=b)):e=a.cf._isValid(d.settings.parentElement)?a(d.settings.parentElement).find(\"[data-field='date'], [data-field='time'], [data-field='datetime']\"):a(\"[data-field='date'], [data-field='time'], [data-field='datetime']\"),e.each(function(){var b,e,f,g,h=this;b=a(h).data(\"field\"),a.cf._isValid(b)||(b=d.settings.mode),e=\"Custom\",f=!1,d.settings.formatDateTimeString||(e=a(h).data(\"format\"),a.cf._isValid(e)||(a.cf._compare(b,\"date\")?e=d.settings.dateFormat:a.cf._compare(b,\"time\")?e=d.settings.timeFormat:a.cf._compare(b,\"datetime\")&&(e=d.settings.dateTimeFormat)),f=d.getIs12Hour(b,e)),g=d._setOutput(b,e,f,c,h),d._setValueOfElement(g,a(h))})},getDateTimeStringInFormat:function(a,b,c){var d=this;return d._setOutput(a,b,d.getIs12Hour(a,b),c)},showDateTimePicker:function(a){var b=this;null!==b.oData.oInputElement?b.settings.isInline||b._hidePicker(0,a):b._showPicker(a)},_setButtonAction:function(a){var b=this;null!==b.oData.oInputElement&&(b._setValueOfElement(b._setOutput()),a?(b.settings.buttonClicked&&b.settings.buttonClicked.call(b,\"TAB\",b.oData.oInputElement),b.settings.isInline||b._hidePicker(0)):b.settings.isInline||b._hidePicker(\"\"))},_setOutput:function(b,c,d,e,f){var g=this;e=a.cf._isValid(e)?e:g.oData.dCurrentDate,d=d||g.oData.bIs12Hour;var h,i=g._setVariablesForDate(e,!0,!0),j=\"\",k=g._formatDate(i),l=g._formatTime(i),m=a.extend({},k,l),n=\"\",o=\"\",p=Function.length;return g.settings.formatDateTimeString?j=g.settings.formatDateTimeString.call(g,m,b,c,f):(g._setMatchFormat(p,b,c),g.oData.bDateMode?g.oData.bArrMatchFormat[0]?j=m.dd+g.settings.dateSeparator+m.MM+g.settings.dateSeparator+m.yyyy:g.oData.bArrMatchFormat[1]?j=m.MM+g.settings.dateSeparator+m.dd+g.settings.dateSeparator+m.yyyy:g.oData.bArrMatchFormat[2]?j=m.yyyy+g.settings.dateSeparator+m.MM+g.settings.dateSeparator+m.dd:g.oData.bArrMatchFormat[3]?j=m.dd+g.settings.dateSeparator+m.monthShort+g.settings.dateSeparator+m.yyyy:g.oData.bArrMatchFormat[4]?j=m.MM+g.settings.monthYearSeparator+m.yyyy:g.oData.bArrMatchFormat[5]?j=m.monthShort+g.settings.monthYearSeparator+m.yyyy:g.oData.bArrMatchFormat[6]?j=m.month+g.settings.monthYearSeparator+m.yyyy:g.oData.bArrMatchFormat[7]&&(j=m.yyyy+g.settings.monthYearSeparator+m.MM):g.oData.bTimeMode?g.oData.bArrMatchFormat[0]?j=m.hh+g.settings.timeSeparator+m.mm+g.settings.timeSeparator+m.ss+g.settings.timeMeridiemSeparator+m.ME:g.oData.bArrMatchFormat[1]?j=m.HH+g.settings.timeSeparator+m.mm+g.settings.timeSeparator+m.ss:g.oData.bArrMatchFormat[2]?j=m.hh+g.settings.timeSeparator+m.mm+g.settings.timeMeridiemSeparator+m.ME:g.oData.bArrMatchFormat[3]&&(j=m.HH+g.settings.timeSeparator+m.mm):g.oData.bDateTimeMode&&(g.oData.bArrMatchFormat[0]||g.oData.bArrMatchFormat[1]||g.oData.bArrMatchFormat[8]||g.oData.bArrMatchFormat[9]?n=m.dd+g.settings.dateSeparator+m.MM+g.settings.dateSeparator+m.yyyy:g.oData.bArrMatchFormat[2]||g.oData.bArrMatchFormat[3]||g.oData.bArrMatchFormat[10]||g.oData.bArrMatchFormat[11]?n=m.MM+g.settings.dateSeparator+m.dd+g.settings.dateSeparator+m.yyyy:g.oData.bArrMatchFormat[4]||g.oData.bArrMatchFormat[5]||g.oData.bArrMatchFormat[12]||g.oData.bArrMatchFormat[13]?n=m.yyyy+g.settings.dateSeparator+m.MM+g.settings.dateSeparator+m.dd:(g.oData.bArrMatchFormat[6]||g.oData.bArrMatchFormat[7]||g.oData.bArrMatchFormat[14]||g.oData.bArrMatchFormat[15])&&(n=m.dd+g.settings.dateSeparator+m.monthShort+g.settings.dateSeparator+m.yyyy),h=g.oData.bArrMatchFormat[0]||g.oData.bArrMatchFormat[1]||g.oData.bArrMatchFormat[2]||g.oData.bArrMatchFormat[3]||g.oData.bArrMatchFormat[4]||g.oData.bArrMatchFormat[5]||g.oData.bArrMatchFormat[6]||g.oData.bArrMatchFormat[7],o=d?h?m.hh+g.settings.timeSeparator+m.mm+g.settings.timeSeparator+m.ss+g.settings.timeMeridiemSeparator+m.ME:m.hh+g.settings.timeSeparator+m.mm+g.settings.timeMeridiemSeparator+m.ME:h?m.HH+g.settings.timeSeparator+m.mm+g.settings.timeSeparator+m.ss:m.HH+g.settings.timeSeparator+m.mm,\"\"!==n&&\"\"!==o&&(j=n+g.settings.dateTimeSeparator+o)),g._setMatchFormat(p)),j},_clearButtonAction:function(){var a=this;null!==a.oData.oInputElement&&a._setValueOfElement(\"\"),a.settings.isInline||a._hidePicker(\"\")},_setOutputOnIncrementOrDecrement:function(){var b=this;a.cf._isValid(b.oData.oInputElement)&&b.settings.setValueInTextboxOnEveryClick&&b._setValueOfElement(b._setOutput())},_showPicker:function(b){var c=this;if(null===c.oData.oInputElement){c.oData.oInputElement=b,c.oData.iTabIndex=parseInt(a(b).attr(\"tabIndex\"));var d=a(b).data(\"field\")||\"\",e=a(b).data(\"min\")||\"\",f=a(b).data(\"max\")||\"\",g=a(b).data(\"format\")||\"\",h=a(b).data(\"view\")||\"\",i=a(b).data(\"startend\")||\"\",j=a(b).data(\"startendelem\")||\"\",k=c._getValueOfElement(b)||\"\";if(\"\"!==h&&(a.cf._compare(h,\"Popup\")?c.setIsPopup(!0):c.setIsPopup(!1)),!c.settings.isPopup&&!c.settings.isInline){c._createPicker();var l=a(c.oData.oInputElement).offset().top+a(c.oData.oInputElement).outerHeight(),m=a(c.oData.oInputElement).offset().left,n=a(c.oData.oInputElement).outerWidth();a(c.element).css({position:\"absolute\",top:l,left:m,width:n,height:\"auto\"})}c.settings.beforeShow&&c.settings.beforeShow.call(c,b),d=a.cf._isValid(d)?d:c.settings.mode,c.settings.mode=d,a.cf._isValid(g)||(a.cf._compare(d,\"date\")?g=c.settings.dateFormat:a.cf._compare(d,\"time\")?g=c.settings.timeFormat:a.cf._compare(d,\"datetime\")&&(g=c.settings.dateTimeFormat)),c._matchFormat(d,g),c.oData.dMinValue=null,c.oData.dMaxValue=null,c.oData.bIs12Hour=!1;var o,p,q,r,s,t,u,v;c.oData.bDateMode?(o=e||c.settings.minDate,p=f||c.settings.maxDate,c.oData.sDateFormat=g,a.cf._isValid(o)&&(c.oData.dMinValue=c._parseDate(o)),a.cf._isValid(p)&&(c.oData.dMaxValue=c._parseDate(p)),\"\"!==i&&(a.cf._compare(i,\"start\")||a.cf._compare(i,\"end\"))&&\"\"!==j&&a(j).length>=1&&(q=c._getValueOfElement(a(j)),\"\"!==q&&(r=c.settings.parseDateTimeString?c.settings.parseDateTimeString.call(c,q,d,g,a(j)):c._parseDate(q),a.cf._compare(i,\"start\")?a.cf._isValid(p)?c._compareDates(r,c.oData.dMaxValue)<0&&(c.oData.dMaxValue=new Date(r)):c.oData.dMaxValue=new Date(r):a.cf._compare(i,\"end\")&&(a.cf._isValid(o)?c._compareDates(r,c.oData.dMinValue)>0&&(c.oData.dMinValue=new Date(r)):c.oData.dMinValue=new Date(r)))),c.settings.parseDateTimeString?c.oData.dCurrentDate=c.settings.parseDateTimeString.call(c,k,d,g,a(b)):c.oData.dCurrentDate=c._parseDate(k),c.oData.dCurrentDate.setHours(0),c.oData.dCurrentDate.setMinutes(0),c.oData.dCurrentDate.setSeconds(0)):c.oData.bTimeMode?(o=e||c.settings.minTime,p=f||c.settings.maxTime,c.oData.sTimeFormat=g,c.oData.bIs12Hour=c.getIs12Hour(),a.cf._isValid(o)&&(c.oData.dMinValue=c._parseTime(o),a.cf._isValid(p)||(c.oData.sTimeFormat===c.oData.sArrInputTimeFormats[0]?p=\"11:59:59 PM\":c.oData.sTimeFormat===c.oData.sArrInputTimeFormats[1]?p=\"23:59:59\":c.oData.sTimeFormat===c.oData.sArrInputTimeFormats[2]?p=\"11:59 PM\":c.oData.sTimeFormat===c.oData.sArrInputTimeFormats[3]&&(p=\"23:59\"),c.oData.dMaxValue=c._parseTime(p))),a.cf._isValid(p)&&(c.oData.dMaxValue=c._parseTime(p),a.cf._isValid(o)||(c.oData.sTimeFormat===c.oData.sArrInputTimeFormats[0]?o=\"12:00:00 AM\":c.oData.sTimeFormat===c.oData.sArrInputTimeFormats[1]?o=\"00:00:00\":c.oData.sTimeFormat===c.oData.sArrInputTimeFormats[2]?o=\"12:00 AM\":c.oData.sTimeFormat===c.oData.sArrInputTimeFormats[3]&&(o=\"00:00\"),c.oData.dMinValue=c._parseTime(o))),\"\"!==i&&(a.cf._compare(i,\"start\")||a.cf._compare(i,\"end\"))&&\"\"!==j&&a(j).length>=1&&(s=c._getValueOfElement(a(j)),\"\"!==s&&(c.settings.parseDateTimeString?r=c.settings.parseDateTimeString.call(c,s,d,g,a(j)):t=c._parseTime(s),a.cf._compare(i,\"start\")?(t.setMinutes(t.getMinutes()-1),a.cf._isValid(p)?2===c._compareTime(t,c.oData.dMaxValue)&&(c.oData.dMaxValue=new Date(t)):c.oData.dMaxValue=new Date(t)):a.cf._compare(i,\"end\")&&(t.setMinutes(t.getMinutes()+1),a.cf._isValid(o)?3===c._compareTime(t,c.oData.dMinValue)&&(c.oData.dMinValue=new Date(t)):c.oData.dMinValue=new Date(t)))),c.settings.parseDateTimeString?c.oData.dCurrentDate=c.settings.parseDateTimeString.call(c,k,d,g,a(b)):c.oData.dCurrentDate=c._parseTime(k)):c.oData.bDateTimeMode&&(o=e||c.settings.minDateTime,p=f||c.settings.maxDateTime,c.oData.sDateTimeFormat=g,c.oData.bIs12Hour=c.getIs12Hour(),a.cf._isValid(o)&&(c.oData.dMinValue=c._parseDateTime(o)),a.cf._isValid(p)&&(c.oData.dMaxValue=c._parseDateTime(p)),\"\"!==i&&(a.cf._compare(i,\"start\")||a.cf._compare(i,\"end\"))&&\"\"!==j&&a(j).length>=1&&(u=c._getValueOfElement(a(j)),\"\"!==u&&(v=c.settings.parseDateTimeString?c.settings.parseDateTimeString.call(c,u,d,g,a(j)):c._parseDateTime(u),a.cf._compare(i,\"start\")?a.cf._isValid(p)?c._compareDateTime(v,c.oData.dMaxValue)<0&&(c.oData.dMaxValue=new Date(v)):c.oData.dMaxValue=new Date(v):a.cf._compare(i,\"end\")&&(a.cf._isValid(o)?c._compareDateTime(v,c.oData.dMinValue)>0&&(c.oData.dMinValue=new Date(v)):c.oData.dMinValue=new Date(v)))),c.settings.parseDateTimeString?c.oData.dCurrentDate=c.settings.parseDateTimeString.call(c,k,d,g,a(b)):c.oData.dCurrentDate=c._parseDateTime(k)),c._setVariablesForDate(),c._modifyPicker(),a(c.element).fadeIn(c.settings.animationDuration),c.settings.afterShow&&setTimeout(function(){c.settings.afterShow.call(c,b)},c.settings.animationDuration)}},_hidePicker:function(b,c){var d=this,e=d.oData.oInputElement;d.settings.beforeHide&&d.settings.beforeHide.call(d,e),a.cf._isValid(b)||(b=d.settings.animationDuration),a.cf._isValid(d.oData.oInputElement)&&(a(d.oData.oInputElement).blur(),d.oData.oInputElement=null),a(d.element).fadeOut(b),0===b?a(d.element).find(\".dtpicker-subcontent\").html(\"\"):setTimeout(function(){a(d.element).find(\".dtpicker-subcontent\").html(\"\")},b),a(document).unbind(\"click.DateTimePicker keydown.DateTimePicker keyup.DateTimePicker\"),d.settings.afterHide&&(0===b?d.settings.afterHide.call(d,e):setTimeout(function(){d.settings.afterHide.call(d,e)},b)),a.cf._isValid(c)&&d._showPicker(c)},_modifyPicker:function(){var b,c,d=this,e=[];d.oData.bDateMode?(b=d.settings.titleContentDate,c=3,d.oData.bArrMatchFormat[0]?e=[\"day\",\"month\",\"year\"]:d.oData.bArrMatchFormat[1]?e=[\"month\",\"day\",\"year\"]:d.oData.bArrMatchFormat[2]?e=[\"year\",\"month\",\"day\"]:d.oData.bArrMatchFormat[3]?e=[\"day\",\"month\",\"year\"]:d.oData.bArrMatchFormat[4]?(c=2,e=[\"month\",\"year\"]):d.oData.bArrMatchFormat[5]?(c=2,e=[\"month\",\"year\"]):d.oData.bArrMatchFormat[6]?(c=2,e=[\"month\",\"year\"]):d.oData.bArrMatchFormat[7]&&(c=2,e=[\"year\",\"month\"])):d.oData.bTimeMode?(b=d.settings.titleContentTime,d.oData.bArrMatchFormat[0]?(c=4,e=[\"hour\",\"minutes\",\"seconds\",\"meridiem\"]):d.oData.bArrMatchFormat[1]?(c=3,e=[\"hour\",\"minutes\",\"seconds\"]):d.oData.bArrMatchFormat[2]?(c=3,e=[\"hour\",\"minutes\",\"meridiem\"]):d.oData.bArrMatchFormat[3]&&(c=2,e=[\"hour\",\"minutes\"])):d.oData.bDateTimeMode&&(b=d.settings.titleContentDateTime,d.oData.bArrMatchFormat[0]?(c=6,e=[\"day\",\"month\",\"year\",\"hour\",\"minutes\",\"seconds\"]):d.oData.bArrMatchFormat[1]?(c=7,e=[\"day\",\"month\",\"year\",\"hour\",\"minutes\",\"seconds\",\"meridiem\"]):d.oData.bArrMatchFormat[2]?(c=6,e=[\"month\",\"day\",\"year\",\"hour\",\"minutes\",\"seconds\"]):d.oData.bArrMatchFormat[3]?(c=7,e=[\"month\",\"day\",\"year\",\"hour\",\"minutes\",\"seconds\",\"meridiem\"]):d.oData.bArrMatchFormat[4]?(c=6,e=[\"year\",\"month\",\"day\",\"hour\",\"minutes\",\"seconds\"]):d.oData.bArrMatchFormat[5]?(c=7,e=[\"year\",\"month\",\"day\",\"hour\",\"minutes\",\"seconds\",\"meridiem\"]):d.oData.bArrMatchFormat[6]?(c=6,e=[\"day\",\"month\",\"year\",\"hour\",\"minutes\",\"seconds\"]):d.oData.bArrMatchFormat[7]?(c=7,e=[\"day\",\"month\",\"year\",\"hour\",\"minutes\",\"seconds\",\"meridiem\"]):d.oData.bArrMatchFormat[8]?(c=5,e=[\"day\",\"month\",\"year\",\"hour\",\"minutes\"]):d.oData.bArrMatchFormat[9]?(c=6,e=[\"day\",\"month\",\"year\",\"hour\",\"minutes\",\"meridiem\"]):d.oData.bArrMatchFormat[10]?(c=5,e=[\"month\",\"day\",\"year\",\"hour\",\"minutes\"]):d.oData.bArrMatchFormat[11]?(c=6,e=[\"month\",\"day\",\"year\",\"hour\",\"minutes\",\"meridiem\"]):d.oData.bArrMatchFormat[12]?(c=5,e=[\"year\",\"month\",\"day\",\"hour\",\"minutes\"]):d.oData.bArrMatchFormat[13]?(c=6,e=[\"year\",\"month\",\"day\",\"hour\",\"minutes\",\"meridiem\"]):d.oData.bArrMatchFormat[14]?(c=5,e=[\"day\",\"month\",\"year\",\"hour\",\"minutes\"]):d.oData.bArrMatchFormat[15]&&(c=6,e=[\"day\",\"month\",\"year\",\"hour\",\"minutes\",\"meridiem\"]));var f,g=\"dtpicker-comp\"+c,h=!1,i=!1,j=!1;for(f=0;f<d.settings.buttonsToDisplay.length;f++)a.cf._compare(d.settings.buttonsToDisplay[f],\"HeaderCloseButton\")?h=!0:a.cf._compare(d.settings.buttonsToDisplay[f],\"SetButton\")?i=!0:a.cf._compare(d.settings.buttonsToDisplay[f],\"ClearButton\")&&(j=!0);var k=\"\";d.settings.showHeader&&(k+=\"<div class='dtpicker-header'>\",k+=\"<div class='dtpicker-title'>\"+b+\"</div>\",h&&(k+=\"<a class='dtpicker-close'>&times;</a>\"),k+=\"<div class='dtpicker-value'></div>\",k+=\"</div>\");var l=\"\";for(l+=\"<div class='dtpicker-components'>\",f=0;f<c;f++){var m=e[f];l+=\"<div class='dtpicker-compOutline \"+g+\"'>\",l+=\"<div class='dtpicker-comp \"+m+\"'>\",l+=\"<a class='dtpicker-compButton increment'>\"+d.settings.incrementButtonContent+\"</a>\",l+=d.settings.readonlyInputs?\"<input type='text' class='dtpicker-compValue' readonly>\":\"<input type='text' class='dtpicker-compValue'>\",l+=\"<a class='dtpicker-compButton decrement'>\"+d.settings.decrementButtonContent+\"</a>\",d.settings.labels&&(l+=\"<div class='dtpicker-label'>\"+d.settings.labels[m]+\"</div>\"),l+=\"</div>\",l+=\"</div>\"}l+=\"</div>\";var n=\"\";n=i&&j?\" dtpicker-twoButtons\":\" dtpicker-singleButton\";var o=\"\";o+=\"<div class='dtpicker-buttonCont\"+n+\"'>\",i&&(o+=\"<a class='dtpicker-button dtpicker-buttonSet'>\"+d.settings.setButtonContent+\"</a>\"),j&&(o+=\"<a class='dtpicker-button dtpicker-buttonClear'>\"+d.settings.clearButtonContent+\"</a>\"),o+=\"</div>\";var p=k+l+o;a(d.element).find(\".dtpicker-subcontent\").html(p),d._setCurrentDate(),d._addEventHandlersForPicker()},_addEventHandlersForPicker:function(){var b,c,d=this;if(d.settings.isInline||a(document).on(\"click.DateTimePicker\",function(a){d._hidePicker(\"\")}),a(document).on(\"keydown.DateTimePicker\",function(e){if(c=parseInt(e.keyCode?e.keyCode:e.which),!a(\".dtpicker-compValue\").is(\":focus\")&&9===c)return d._setButtonAction(!0),a(\"[tabIndex=\"+(d.oData.iTabIndex+1)+\"]\").focus(),!1;if(a(\".dtpicker-compValue\").is(\":focus\")){if(38===c)return b=a(\".dtpicker-compValue:focus\").parent().attr(\"class\"),d._incrementDecrementActionsUsingArrowAndMouse(b,\"inc\"),!1;if(40===c)return b=a(\".dtpicker-compValue:focus\").parent().attr(\"class\"),d._incrementDecrementActionsUsingArrowAndMouse(b,\"dec\"),!1}}),d.settings.isInline||a(document).on(\"keydown.DateTimePicker\",function(b){c=parseInt(b.keyCode?b.keyCode:b.which),a(\".dtpicker-compValue\").is(\":focus\")||9===c||d._hidePicker(\"\")}),a(\".dtpicker-cont *\").click(function(a){a.stopPropagation()}),d.settings.readonlyInputs||(a(\".dtpicker-compValue\").not(\".month .dtpicker-compValue, .meridiem .dtpicker-compValue\").keyup(function(){this.value=this.value.replace(/[^0-9\\.]/g,\"\")}),a(\".dtpicker-compValue\").focus(function(){d.oData.bElemFocused=!0,a(this).select()}),a(\".dtpicker-compValue\").blur(function(){d._getValuesFromInputBoxes(),d._setCurrentDate(),d.oData.bElemFocused=!1;var b=a(this).parent().parent();setTimeout(function(){b.is(\":last-child\")&&!d.oData.bElemFocused&&d._setButtonAction(!1)},50)}),a(\".dtpicker-compValue\").keyup(function(b){var c,d=a(this),e=d.val(),f=e.length;d.parent().hasClass(\"day\")||d.parent().hasClass(\"hour\")||d.parent().hasClass(\"minutes\")||d.parent().hasClass(\"meridiem\")?f>2&&(c=e.slice(0,2),d.val(c)):d.parent().hasClass(\"month\")?f>3&&(c=e.slice(0,3),d.val(c)):d.parent().hasClass(\"year\")&&f>4&&(c=e.slice(0,4),d.val(c)),9===parseInt(b.keyCode?b.keyCode:b.which)&&a(this).select()})),a(d.element).find(\".dtpicker-compValue\").on(\"mousewheel DOMMouseScroll onmousewheel\",function(c){if(a(\".dtpicker-compValue\").is(\":focus\")){var e=Math.max(-1,Math.min(1,c.originalEvent.wheelDelta));return e>0?(b=a(\".dtpicker-compValue:focus\").parent().attr(\"class\"),d._incrementDecrementActionsUsingArrowAndMouse(b,\"inc\")):(b=a(\".dtpicker-compValue:focus\").parent().attr(\"class\"),d._incrementDecrementActionsUsingArrowAndMouse(b,\"dec\")),!1}}),a(d.element).find(\".dtpicker-close\").click(function(a){d.settings.buttonClicked&&d.settings.buttonClicked.call(d,\"CLOSE\",d.oData.oInputElement),d.settings.isInline||d._hidePicker(\"\")}),a(d.element).find(\".dtpicker-buttonSet\").click(function(a){d.settings.buttonClicked&&d.settings.buttonClicked.call(d,\"SET\",d.oData.oInputElement),d._setButtonAction(!1)}),a(d.element).find(\".dtpicker-buttonClear\").click(function(a){d.settings.buttonClicked&&d.settings.buttonClicked.call(d,\"CLEAR\",d.oData.oInputElement),d._clearButtonAction()}),d.settings.captureTouchHold||d.settings.captureMouseHold){var e=\"\";d.settings.captureTouchHold&&d.oData.bIsTouchDevice&&(e+=\"touchstart touchmove touchend \"),d.settings.captureMouseHold&&(e+=\"mousedown mouseup\"),a(\".dtpicker-cont *\").on(e,function(a){d._clearIntervalForTouchEvents()}),d._bindTouchEvents(\"day\"),d._bindTouchEvents(\"month\"),d._bindTouchEvents(\"year\"),d._bindTouchEvents(\"hour\"),d._bindTouchEvents(\"minutes\"),d._bindTouchEvents(\"seconds\")}else a(d.element).find(\".day .increment, .day .increment *\").click(function(a){d.oData.iCurrentDay++,d._setCurrentDate(),d._setOutputOnIncrementOrDecrement()}),a(d.element).find(\".day .decrement, .day .decrement *\").click(function(a){d.oData.iCurrentDay--,d._setCurrentDate(),d._setOutputOnIncrementOrDecrement()}),a(d.element).find(\".month .increment, .month .increment *\").click(function(a){d.oData.iCurrentMonth++,d._setCurrentDate(),d._setOutputOnIncrementOrDecrement()}),a(d.element).find(\".month .decrement, .month .decrement *\").click(function(a){d.oData.iCurrentMonth--,d._setCurrentDate(),d._setOutputOnIncrementOrDecrement()}),a(d.element).find(\".year .increment, .year .increment *\").click(function(a){d.oData.iCurrentYear++,d._setCurrentDate(),d._setOutputOnIncrementOrDecrement()}),a(d.element).find(\".year .decrement, .year .decrement *\").click(function(a){d.oData.iCurrentYear--,d._setCurrentDate(),d._setOutputOnIncrementOrDecrement()}),a(d.element).find(\".hour .increment, .hour .increment *\").click(function(a){d.oData.iCurrentHour++,d._setCurrentDate(),d._setOutputOnIncrementOrDecrement()}),a(d.element).find(\".hour .decrement, .hour .decrement *\").click(function(a){d.oData.iCurrentHour--,d._setCurrentDate(),d._setOutputOnIncrementOrDecrement()}),a(d.element).find(\".minutes .increment, .minutes .increment *\").click(function(a){d.oData.iCurrentMinutes+=d.settings.minuteInterval,d._setCurrentDate(),d._setOutputOnIncrementOrDecrement()}),a(d.element).find(\".minutes .decrement, .minutes .decrement *\").click(function(a){d.oData.iCurrentMinutes-=d.settings.minuteInterval,d._setCurrentDate(),d._setOutputOnIncrementOrDecrement()}),a(d.element).find(\".seconds .increment, .seconds .increment *\").click(function(a){d.oData.iCurrentSeconds+=d.settings.secondsInterval,d._setCurrentDate(),d._setOutputOnIncrementOrDecrement()}),a(d.element).find(\".seconds .decrement, .seconds .decrement *\").click(function(a){d.oData.iCurrentSeconds-=d.settings.secondsInterval,d._setCurrentDate(),d._setOutputOnIncrementOrDecrement()});a(d.element).find(\".meridiem .dtpicker-compButton, .meridiem .dtpicker-compButton *\").click(function(b){a.cf._compare(d.oData.sCurrentMeridiem,\"AM\")?(d.oData.sCurrentMeridiem=\"PM\",d.oData.iCurrentHour+=12):a.cf._compare(d.oData.sCurrentMeridiem,\"PM\")&&(d.oData.sCurrentMeridiem=\"AM\",d.oData.iCurrentHour-=12),d._setCurrentDate(),d._setOutputOnIncrementOrDecrement()})},_adjustMinutes:function(a){var b=this;return b.settings.roundOffMinutes&&1!==b.settings.minuteInterval&&(a=a%b.settings.minuteInterval?a-a%b.settings.minuteInterval+b.settings.minuteInterval:a),a},_adjustSeconds:function(a){var b=this;return b.settings.roundOffSeconds&&1!==b.settings.secondsInterval&&(a=a%b.settings.secondsInterval?a-a%b.settings.secondsInterval+b.settings.secondsInterval:a),a},_getValueOfElement:function(b){var c=\"\";return c=a.cf._compare(a(b).prop(\"tagName\"),\"INPUT\")?a(b).val():a(b).html()},_setValueOfElement:function(b,c){var d=this;a.cf._isValid(c)||(c=a(d.oData.oInputElement)),a.cf._compare(c.prop(\"tagName\"),\"INPUT\")?c.val(b):c.html(b);var e=d.getDateObjectForInputField(c);return d.settings.settingValueOfElement&&d.settings.settingValueOfElement.call(d,b,e,c),c.change(),b},_bindTouchEvents:function(b){var c=this;a(c.element).find(\".\"+b+\" .increment, .\"+b+\" .increment *\").on(\"touchstart mousedown\",function(d){d.stopPropagation(),a.cf._isValid(c.oData.sTouchButton)||(c.oData.iTouchStart=(new Date).getTime(),\r\nc.oData.sTouchButton=b+\"-inc\",c._setIntervalForTouchEvents())}),a(c.element).find(\".\"+b+\" .increment, .\"+b+\" .increment *\").on(\"touchend mouseup\",function(a){a.stopPropagation(),c._clearIntervalForTouchEvents()}),a(c.element).find(\".\"+b+\" .decrement, .\"+b+\" .decrement *\").on(\"touchstart mousedown\",function(d){d.stopPropagation(),a.cf._isValid(c.oData.sTouchButton)||(c.oData.iTouchStart=(new Date).getTime(),c.oData.sTouchButton=b+\"-dec\",c._setIntervalForTouchEvents())}),a(c.element).find(\".\"+b+\" .decrement, .\"+b+\" .decrement *\").on(\"touchend mouseup\",function(a){a.stopPropagation(),c._clearIntervalForTouchEvents()})},_setIntervalForTouchEvents:function(){var b=this,c=b.oData.bIsTouchDevice?b.settings.touchHoldInterval:b.settings.mouseHoldInterval;if(!a.cf._isValid(b.oData.oTimeInterval)){var d;b.oData.oTimeInterval=setInterval(function(){d=(new Date).getTime()-b.oData.iTouchStart,d>c&&a.cf._isValid(b.oData.sTouchButton)&&(\"day-inc\"===b.oData.sTouchButton?b.oData.iCurrentDay++:\"day-dec\"===b.oData.sTouchButton?b.oData.iCurrentDay--:\"month-inc\"===b.oData.sTouchButton?b.oData.iCurrentMonth++:\"month-dec\"===b.oData.sTouchButton?b.oData.iCurrentMonth--:\"year-inc\"===b.oData.sTouchButton?b.oData.iCurrentYear++:\"year-dec\"===b.oData.sTouchButton?b.oData.iCurrentYear--:\"hour-inc\"===b.oData.sTouchButton?b.oData.iCurrentHour++:\"hour-dec\"===b.oData.sTouchButton?b.oData.iCurrentHour--:\"minute-inc\"===b.oData.sTouchButton?b.oData.iCurrentMinutes+=b.settings.minuteInterval:\"minute-dec\"===b.oData.sTouchButton?b.oData.iCurrentMinutes-=b.settings.minuteInterval:\"second-inc\"===b.oData.sTouchButton?b.oData.iCurrentSeconds+=b.settings.secondsInterval:\"second-dec\"===b.oData.sTouchButton&&(b.oData.iCurrentSeconds-=b.settings.secondsInterval),b._setCurrentDate(),b._setOutputOnIncrementOrDecrement(),b.oData.iTouchStart=(new Date).getTime())},c)}},_clearIntervalForTouchEvents:function(){var b=this;clearInterval(b.oData.oTimeInterval),a.cf._isValid(b.oData.sTouchButton)&&(b.oData.sTouchButton=null,b.oData.iTouchStart=0),b.oData.oTimeInterval=null},_incrementDecrementActionsUsingArrowAndMouse:function(a,b){var c=this;a.includes(\"day\")?\"inc\"===b?c.oData.iCurrentDay++:\"dec\"===b&&c.oData.iCurrentDay--:a.includes(\"month\")?\"inc\"===b?c.oData.iCurrentMonth++:\"dec\"===b&&c.oData.iCurrentMonth--:a.includes(\"year\")?\"inc\"===b?c.oData.iCurrentYear++:\"dec\"===b&&c.oData.iCurrentYear--:a.includes(\"hour\")?\"inc\"===b?c.oData.iCurrentHour++:\"dec\"===b&&c.oData.iCurrentHour--:a.includes(\"minutes\")?\"inc\"===b?c.oData.iCurrentMinutes+=c.settings.minuteInterval:\"dec\"===b&&(c.oData.iCurrentMinutes-=c.settings.minuteInterval):a.includes(\"seconds\")&&(\"inc\"===b?c.oData.iCurrentSeconds+=c.settings.secondsInterval:\"dec\"===b&&(c.oData.iCurrentSeconds-=c.settings.secondsInterval)),c._setCurrentDate(),c._setOutputOnIncrementOrDecrement()},_parseDate:function(b){var c=this,d=c.settings.defaultDate?new Date(c.settings.defaultDate):new Date,e=d.getDate(),f=d.getMonth(),g=d.getFullYear();if(a.cf._isValid(b))if(\"string\"==typeof b){var h;h=c.oData.bArrMatchFormat[4]||c.oData.bArrMatchFormat[5]||c.oData.bArrMatchFormat[6]?b.split(c.settings.monthYearSeparator):b.split(c.settings.dateSeparator),c.oData.bArrMatchFormat[0]?(e=parseInt(h[0]),f=parseInt(h[1]-1),g=parseInt(h[2])):c.oData.bArrMatchFormat[1]?(f=parseInt(h[0]-1),e=parseInt(h[1]),g=parseInt(h[2])):c.oData.bArrMatchFormat[2]?(g=parseInt(h[0]),f=parseInt(h[1]-1),e=parseInt(h[2])):c.oData.bArrMatchFormat[3]?(e=parseInt(h[0]),f=c._getShortMonthIndex(h[1]),g=parseInt(h[2])):c.oData.bArrMatchFormat[4]?(e=1,f=parseInt(h[0])-1,g=parseInt(h[1])):c.oData.bArrMatchFormat[5]?(e=1,f=c._getShortMonthIndex(h[0]),g=parseInt(h[1])):c.oData.bArrMatchFormat[6]?(e=1,f=c._getFullMonthIndex(h[0]),g=parseInt(h[1])):c.oData.bArrMatchFormat[7]&&(e=1,f=parseInt(h[1])-1,g=parseInt(h[0]))}else e=b.getDate(),f=b.getMonth(),g=b.getFullYear();return d=new Date(g,f,e,0,0,0,0)},_parseTime:function(b){var c,d,e,f=this,g=f.settings.defaultDate?new Date(f.settings.defaultDate):new Date,h=g.getDate(),i=g.getMonth(),j=g.getFullYear(),k=g.getHours(),l=g.getMinutes(),m=g.getSeconds(),n=f.oData.bArrMatchFormat[0]||f.oData.bArrMatchFormat[1];return m=n?f._adjustSeconds(m):0,a.cf._isValid(b)&&(\"string\"==typeof b?(f.oData.bIs12Hour&&(c=b.split(f.settings.timeMeridiemSeparator),b=c[0],d=c[1],a.cf._compare(d,\"AM\")||a.cf._compare(d,\"PM\")||(d=\"\")),e=b.split(f.settings.timeSeparator),k=parseInt(e[0]),l=parseInt(e[1]),n&&(m=parseInt(e[2]),m=f._adjustSeconds(m)),12===k&&a.cf._compare(d,\"AM\")?k=0:k<12&&a.cf._compare(d,\"PM\")&&(k+=12)):(k=b.getHours(),l=b.getMinutes(),n&&(m=b.getSeconds(),m=f._adjustSeconds(m)))),l=f._adjustMinutes(l),g=new Date(j,i,h,k,l,m,0)},_parseDateTime:function(b){var c,d,e,f,g,h=this,i=h.settings.defaultDate?new Date(h.settings.defaultDate):new Date,j=i.getDate(),k=i.getMonth(),l=i.getFullYear(),m=i.getHours(),n=i.getMinutes(),o=i.getSeconds(),p=\"\",q=h.oData.bArrMatchFormat[0]||h.oData.bArrMatchFormat[1]||h.oData.bArrMatchFormat[2]||h.oData.bArrMatchFormat[3]||h.oData.bArrMatchFormat[4]||h.oData.bArrMatchFormat[5]||h.oData.bArrMatchFormat[6]||h.oData.bArrMatchFormat[7];return o=q?h._adjustSeconds(o):0,a.cf._isValid(b)&&(\"string\"==typeof b?(c=b.split(h.settings.dateTimeSeparator),d=c[0].split(h.settings.dateSeparator),h.oData.bArrMatchFormat[0]||h.oData.bArrMatchFormat[1]||h.oData.bArrMatchFormat[8]||h.oData.bArrMatchFormat[9]?(j=parseInt(d[0]),k=parseInt(d[1]-1),l=parseInt(d[2])):h.oData.bArrMatchFormat[2]||h.oData.bArrMatchFormat[3]||h.oData.bArrMatchFormat[10]||h.oData.bArrMatchFormat[11]?(k=parseInt(d[0]-1),j=parseInt(d[1]),l=parseInt(d[2])):h.oData.bArrMatchFormat[4]||h.oData.bArrMatchFormat[5]||h.oData.bArrMatchFormat[12]||h.oData.bArrMatchFormat[13]?(l=parseInt(d[0]),k=parseInt(d[1]-1),j=parseInt(d[2])):(h.oData.bArrMatchFormat[6]||h.oData.bArrMatchFormat[7]||h.oData.bArrMatchFormat[14]||h.oData.bArrMatchFormat[15])&&(j=parseInt(d[0]),k=h._getShortMonthIndex(d[1]),l=parseInt(d[2])),e=c[1],a.cf._isValid(e)&&(h.oData.bIs12Hour&&(a.cf._compare(h.settings.dateTimeSeparator,h.settings.timeMeridiemSeparator)&&3===c.length?p=c[2]:(f=e.split(h.settings.timeMeridiemSeparator),e=f[0],p=f[1]),a.cf._compare(p,\"AM\")||a.cf._compare(p,\"PM\")||(p=\"\")),g=e.split(h.settings.timeSeparator),m=parseInt(g[0]),n=parseInt(g[1]),q&&(o=parseInt(g[2])),12===m&&a.cf._compare(p,\"AM\")?m=0:m<12&&a.cf._compare(p,\"PM\")&&(m+=12))):(j=b.getDate(),k=b.getMonth(),l=b.getFullYear(),m=b.getHours(),n=b.getMinutes(),q&&(o=b.getSeconds(),o=h._adjustSeconds(o)))),n=h._adjustMinutes(n),i=new Date(l,k,j,m,n,o,0)},_getShortMonthIndex:function(b){for(var c=this,d=0;d<c.settings.shortMonthNames.length;d++)if(a.cf._compare(b,c.settings.shortMonthNames[d]))return d},_getFullMonthIndex:function(b){for(var c=this,d=0;d<c.settings.fullMonthNames.length;d++)if(a.cf._compare(b,c.settings.fullMonthNames[d]))return d},getIs12Hour:function(a,b){var c=this,d=!1,e=Function.length;return c._setMatchFormat(e,a,b),c.oData.bTimeMode?d=c.oData.bArrMatchFormat[0]||c.oData.bArrMatchFormat[2]:c.oData.bDateTimeMode&&(d=c.oData.bArrMatchFormat[1]||c.oData.bArrMatchFormat[3]||c.oData.bArrMatchFormat[5]||c.oData.bArrMatchFormat[7]||c.oData.bArrMatchFormat[9]||c.oData.bArrMatchFormat[11]||c.oData.bArrMatchFormat[13]||c.oData.bArrMatchFormat[15]),c._setMatchFormat(e),d},_setVariablesForDate:function(b,c,d){var e,f=this,g={},h=a.cf._isValid(b);return h?(e=new Date(b),a.cf._isValid(c)||(c=!0),a.cf._isValid(d)||(d=!0)):(e=\"[object Date]\"===Object.prototype.toString.call(f.oData.dCurrentDate)&&isFinite(f.oData.dCurrentDate)?new Date(f.oData.dCurrentDate):new Date,a.cf._isValid(c)||(c=f.oData.bTimeMode||f.oData.bDateTimeMode),a.cf._isValid(d)||(d=f.oData.bIs12Hour)),g.iCurrentDay=e.getDate(),g.iCurrentMonth=e.getMonth(),g.iCurrentYear=e.getFullYear(),g.iCurrentWeekday=e.getDay(),c&&(g.iCurrentHour=e.getHours(),g.iCurrentMinutes=e.getMinutes(),g.iCurrentSeconds=e.getSeconds(),d&&(g.sCurrentMeridiem=f._determineMeridiemFromHourAndMinutes(g.iCurrentHour,g.iCurrentMinutes))),h?g:void(f.oData=a.extend(f.oData,g))},_getValuesFromInputBoxes:function(){var b=this;if(b.oData.bDateMode||b.oData.bDateTimeMode){var c,d;c=a(b.element).find(\".month .dtpicker-compValue\").val(),c.length>1&&(c=c.charAt(0).toUpperCase()+c.slice(1)),d=b.settings.shortMonthNames.indexOf(c),d!==-1?b.oData.iCurrentMonth=parseInt(d):c.match(\"^[+|-]?[0-9]+$\")&&(b.oData.iCurrentMonth=parseInt(c-1)),b.oData.iCurrentDay=parseInt(a(b.element).find(\".day .dtpicker-compValue\").val())||b.oData.iCurrentDay,b.oData.iCurrentYear=parseInt(a(b.element).find(\".year .dtpicker-compValue\").val())||b.oData.iCurrentYear}if(b.oData.bTimeMode||b.oData.bDateTimeMode){var e,f,g,h;e=parseInt(a(b.element).find(\".hour .dtpicker-compValue\").val()),f=b._adjustMinutes(parseInt(a(b.element).find(\".minutes .dtpicker-compValue\").val())),g=b._adjustMinutes(parseInt(a(b.element).find(\".seconds .dtpicker-compValue\").val())),b.oData.iCurrentHour=isNaN(e)?b.oData.iCurrentHour:e,b.oData.iCurrentMinutes=isNaN(f)?b.oData.iCurrentMinutes:f,b.oData.iCurrentSeconds=isNaN(g)?b.oData.iCurrentSeconds:g,b.oData.iCurrentSeconds>59&&(b.oData.iCurrentMinutes+=b.oData.iCurrentSeconds/60,b.oData.iCurrentSeconds=b.oData.iCurrentSeconds%60),b.oData.iCurrentMinutes>59&&(b.oData.iCurrentHour+=b.oData.iCurrentMinutes/60,b.oData.iCurrentMinutes=b.oData.iCurrentMinutes%60),b.oData.bIs12Hour?b.oData.iCurrentHour>12&&(b.oData.iCurrentHour=b.oData.iCurrentHour%12):b.oData.iCurrentHour>23&&(b.oData.iCurrentHour=b.oData.iCurrentHour%23),b.oData.bIs12Hour&&(h=a(b.element).find(\".meridiem .dtpicker-compValue\").val(),(a.cf._compare(h,\"AM\")||a.cf._compare(h,\"PM\"))&&(b.oData.sCurrentMeridiem=h),a.cf._compare(b.oData.sCurrentMeridiem,\"PM\")&&12!==b.oData.iCurrentHour&&b.oData.iCurrentHour<13&&(b.oData.iCurrentHour+=12),a.cf._compare(b.oData.sCurrentMeridiem,\"AM\")&&12===b.oData.iCurrentHour&&(b.oData.iCurrentHour=0))}},_setCurrentDate:function(){var b=this;(b.oData.bTimeMode||b.oData.bDateTimeMode)&&(b.oData.iCurrentSeconds>59?(b.oData.iCurrentMinutes+=b.oData.iCurrentSeconds/60,b.oData.iCurrentSeconds=b.oData.iCurrentSeconds%60):b.oData.iCurrentSeconds<0&&(b.oData.iCurrentMinutes-=b.settings.minuteInterval,b.oData.iCurrentSeconds+=60),b.oData.iCurrentMinutes=b._adjustMinutes(b.oData.iCurrentMinutes),b.oData.iCurrentSeconds=b._adjustSeconds(b.oData.iCurrentSeconds));var c,d,e,f,g,h,i,j=new Date(b.oData.iCurrentYear,b.oData.iCurrentMonth,b.oData.iCurrentDay,b.oData.iCurrentHour,b.oData.iCurrentMinutes,b.oData.iCurrentSeconds,0),k=!1,l=!1;if(null!==b.oData.dMaxValue&&(k=j.getTime()>b.oData.dMaxValue.getTime()),null!==b.oData.dMinValue&&(l=j.getTime()<b.oData.dMinValue.getTime()),k||l){var m=!1,n=!1;null!==b.oData.dMaxValue&&(m=b.oData.dCurrentDate.getTime()>b.oData.dMaxValue.getTime()),null!==b.oData.dMinValue&&(n=b.oData.dCurrentDate.getTime()<b.oData.dMinValue.getTime()),m||n?(m&&(j=new Date(b.oData.dMaxValue)),n&&(j=new Date(b.oData.dMinValue))):j=new Date(b.oData.dCurrentDate)}if(b.oData.dCurrentDate=new Date(j),b._setVariablesForDate(),d={},g=\"\",h=\"\",i=\"\",(b.oData.bDateMode||b.oData.bDateTimeMode)&&(b.oData.bDateMode&&(b.oData.bArrMatchFormat[4]||b.oData.bArrMatchFormat[5]||b.oData.bArrMatchFormat[6])&&(b.oData.iCurrentDay=1),e=b._formatDate(),a(b.element).find(\".day .dtpicker-compValue\").val(e.dd),b.oData.bDateMode?b.oData.bArrMatchFormat[4]||b.oData.bArrMatchFormat[7]?a(b.element).find(\".month .dtpicker-compValue\").val(e.MM):b.oData.bArrMatchFormat[6]?a(b.element).find(\".month .dtpicker-compValue\").val(e.month):a(b.element).find(\".month .dtpicker-compValue\").val(e.monthShort):a(b.element).find(\".month .dtpicker-compValue\").val(e.monthShort),a(b.element).find(\".year .dtpicker-compValue\").val(e.yyyy),b.settings.formatHumanDate?d=a.extend(d,e):b.oData.bDateMode&&(b.oData.bArrMatchFormat[4]||b.oData.bArrMatchFormat[5]||b.oData.bArrMatchFormat[6]||b.oData.bArrMatchFormat[7])?b.oData.bArrMatchFormat[4]?g=e.MM+b.settings.monthYearSeparator+e.yyyy:b.oData.bArrMatchFormat[5]?g=e.monthShort+b.settings.monthYearSeparator+e.yyyy:b.oData.bArrMatchFormat[6]?g=e.month+b.settings.monthYearSeparator+e.yyyy:b.oData.bArrMatchFormat[7]&&(g=e.yyyy+b.settings.monthYearSeparator+e.MM):g=e.dayShort+\", \"+e.month+\" \"+e.dd+\", \"+e.yyyy),b.oData.bTimeMode||b.oData.bDateTimeMode)if(f=b._formatTime(),b.oData.bIs12Hour&&a(b.element).find(\".meridiem .dtpicker-compValue\").val(b.oData.sCurrentMeridiem),a(b.element).find(\".hour .dtpicker-compValue\").val(f.hour),a(b.element).find(\".minutes .dtpicker-compValue\").val(f.mm),a(b.element).find(\".seconds .dtpicker-compValue\").val(f.ss),b.settings.formatHumanDate)d=a.extend(d,f);else{var o=b.oData.bTimeMode&&(b.oData.bArrMatchFormat[0]||b.oData.bArrMatchFormat[1]),p=b.oData.bDateTimeMode&&(b.oData.bArrMatchFormat[0]||b.oData.bArrMatchFormat[1]||b.oData.bArrMatchFormat[2]||b.oData.bArrMatchFormat[3]||b.oData.bArrMatchFormat[4]||b.oData.bArrMatchFormat[5]||b.oData.bArrMatchFormat[6]||b.oData.bArrMatchFormat[7]);h=o||p?f.hour+b.settings.timeSeparator+f.mm+b.settings.timeSeparator+f.ss:f.hour+b.settings.timeSeparator+f.mm,b.oData.bIs12Hour&&(h+=b.settings.timeMeridiemSeparator+b.oData.sCurrentMeridiem)}b.settings.formatHumanDate?(b.oData.bDateTimeMode?c=b.oData.sDateFormat:b.oData.bDateMode?c=b.oData.sTimeFormat:b.oData.bTimeMode&&(c=b.oData.sDateTimeFormat),i=b.settings.formatHumanDate.call(b,d,b.settings.mode,c)):b.oData.bDateTimeMode?i=g+b.settings.dateTimeSeparator+h:b.oData.bDateMode?i=g:b.oData.bTimeMode&&(i=h),a(b.element).find(\".dtpicker-value\").html(i),b._setButtons()},_formatDate:function(b){var c,d,e,f,g,h,i,j,k,l=this,m={};return a.cf._isValid(b)?m=a.extend({},b):(m.iCurrentDay=l.oData.iCurrentDay,m.iCurrentMonth=l.oData.iCurrentMonth,m.iCurrentYear=l.oData.iCurrentYear,m.iCurrentWeekday=l.oData.iCurrentWeekday),c=m.iCurrentDay,c=c<10?\"0\"+c:c,e=m.iCurrentMonth,f=m.iCurrentMonth+1,f=f<10?\"0\"+f:f,g=l.settings.shortMonthNames[e],h=l.settings.fullMonthNames[e],d=m.iCurrentYear,i=m.iCurrentWeekday,j=l.settings.shortDayNames[i],k=l.settings.fullDayNames[i],{dd:c,MM:f,monthShort:g,month:h,yyyy:d,dayShort:j,day:k}},_formatTime:function(b){var c,d,e,f,g,h,i,j=this,k={};return a.cf._isValid(b)?k=a.extend({},b):(k.iCurrentHour=j.oData.iCurrentHour,k.iCurrentMinutes=j.oData.iCurrentMinutes,k.iCurrentSeconds=j.oData.iCurrentSeconds,k.sCurrentMeridiem=j.oData.sCurrentMeridiem),c=k.iCurrentHour,d=c<10?\"0\"+c:c,g=d,e=k.iCurrentHour,e>12&&(e-=12),\"00\"===g&&(e=12),f=e<10?\"0\"+e:e,j.oData.bIs12Hour&&(g=f),h=k.iCurrentMinutes,h=h<10?\"0\"+h:h,i=k.iCurrentSeconds,i=i<10?\"0\"+i:i,{H:c,HH:d,h:e,hh:f,hour:g,m:k.iCurrentMinutes,mm:h,s:k.iCurrentSeconds,ss:i,ME:k.sCurrentMeridiem}},_setButtons:function(){var b=this;a(b.element).find(\".dtpicker-compButton\").removeClass(\"dtpicker-compButtonDisable\").addClass(\"dtpicker-compButtonEnable\");var c;if(null!==b.oData.dMaxValue&&(b.oData.bTimeMode?((b.oData.iCurrentHour+1>b.oData.dMaxValue.getHours()||b.oData.iCurrentHour+1===b.oData.dMaxValue.getHours()&&b.oData.iCurrentMinutes>b.oData.dMaxValue.getMinutes())&&a(b.element).find(\".hour .increment\").removeClass(\"dtpicker-compButtonEnable\").addClass(\"dtpicker-compButtonDisable\"),b.oData.iCurrentHour>=b.oData.dMaxValue.getHours()&&b.oData.iCurrentMinutes+1>b.oData.dMaxValue.getMinutes()&&a(b.element).find(\".minutes .increment\").removeClass(\"dtpicker-compButtonEnable\").addClass(\"dtpicker-compButtonDisable\")):(c=new Date(b.oData.iCurrentYear,b.oData.iCurrentMonth,b.oData.iCurrentDay+1,b.oData.iCurrentHour,b.oData.iCurrentMinutes,b.oData.iCurrentSeconds,0),c.getTime()>b.oData.dMaxValue.getTime()&&a(b.element).find(\".day .increment\").removeClass(\"dtpicker-compButtonEnable\").addClass(\"dtpicker-compButtonDisable\"),c=new Date(b.oData.iCurrentYear,b.oData.iCurrentMonth+1,b.oData.iCurrentDay,b.oData.iCurrentHour,b.oData.iCurrentMinutes,b.oData.iCurrentSeconds,0),c.getTime()>b.oData.dMaxValue.getTime()&&a(b.element).find(\".month .increment\").removeClass(\"dtpicker-compButtonEnable\").addClass(\"dtpicker-compButtonDisable\"),c=new Date(b.oData.iCurrentYear+1,b.oData.iCurrentMonth,b.oData.iCurrentDay,b.oData.iCurrentHour,b.oData.iCurrentMinutes,b.oData.iCurrentSeconds,0),c.getTime()>b.oData.dMaxValue.getTime()&&a(b.element).find(\".year .increment\").removeClass(\"dtpicker-compButtonEnable\").addClass(\"dtpicker-compButtonDisable\"),c=new Date(b.oData.iCurrentYear,b.oData.iCurrentMonth,b.oData.iCurrentDay,b.oData.iCurrentHour+1,b.oData.iCurrentMinutes,b.oData.iCurrentSeconds,0),c.getTime()>b.oData.dMaxValue.getTime()&&a(b.element).find(\".hour .increment\").removeClass(\"dtpicker-compButtonEnable\").addClass(\"dtpicker-compButtonDisable\"),c=new Date(b.oData.iCurrentYear,b.oData.iCurrentMonth,b.oData.iCurrentDay,b.oData.iCurrentHour,b.oData.iCurrentMinutes+1,b.oData.iCurrentSeconds,0),c.getTime()>b.oData.dMaxValue.getTime()&&a(b.element).find(\".minutes .increment\").removeClass(\"dtpicker-compButtonEnable\").addClass(\"dtpicker-compButtonDisable\"),c=new Date(b.oData.iCurrentYear,b.oData.iCurrentMonth,b.oData.iCurrentDay,b.oData.iCurrentHour,b.oData.iCurrentMinutes,b.oData.iCurrentSeconds+1,0),c.getTime()>b.oData.dMaxValue.getTime()&&a(b.element).find(\".seconds .increment\").removeClass(\"dtpicker-compButtonEnable\").addClass(\"dtpicker-compButtonDisable\"))),null!==b.oData.dMinValue&&(b.oData.bTimeMode?((b.oData.iCurrentHour-1<b.oData.dMinValue.getHours()||b.oData.iCurrentHour-1===b.oData.dMinValue.getHours()&&b.oData.iCurrentMinutes<b.oData.dMinValue.getMinutes())&&a(b.element).find(\".hour .decrement\").removeClass(\"dtpicker-compButtonEnable\").addClass(\"dtpicker-compButtonDisable\"),b.oData.iCurrentHour<=b.oData.dMinValue.getHours()&&b.oData.iCurrentMinutes-1<b.oData.dMinValue.getMinutes()&&a(b.element).find(\".minutes .decrement\").removeClass(\"dtpicker-compButtonEnable\").addClass(\"dtpicker-compButtonDisable\")):(c=new Date(b.oData.iCurrentYear,b.oData.iCurrentMonth,b.oData.iCurrentDay-1,b.oData.iCurrentHour,b.oData.iCurrentMinutes,b.oData.iCurrentSeconds,0),c.getTime()<b.oData.dMinValue.getTime()&&a(b.element).find(\".day .decrement\").removeClass(\"dtpicker-compButtonEnable\").addClass(\"dtpicker-compButtonDisable\"),c=new Date(b.oData.iCurrentYear,b.oData.iCurrentMonth-1,b.oData.iCurrentDay,b.oData.iCurrentHour,b.oData.iCurrentMinutes,b.oData.iCurrentSeconds,0),c.getTime()<b.oData.dMinValue.getTime()&&a(b.element).find(\".month .decrement\").removeClass(\"dtpicker-compButtonEnable\").addClass(\"dtpicker-compButtonDisable\"),c=new Date(b.oData.iCurrentYear-1,b.oData.iCurrentMonth,b.oData.iCurrentDay,b.oData.iCurrentHour,b.oData.iCurrentMinutes,b.oData.iCurrentSeconds,0),c.getTime()<b.oData.dMinValue.getTime()&&a(b.element).find(\".year .decrement\").removeClass(\"dtpicker-compButtonEnable\").addClass(\"dtpicker-compButtonDisable\"),c=new Date(b.oData.iCurrentYear,b.oData.iCurrentMonth,b.oData.iCurrentDay,b.oData.iCurrentHour-1,b.oData.iCurrentMinutes,b.oData.iCurrentSeconds,0),c.getTime()<b.oData.dMinValue.getTime()&&a(b.element).find(\".hour .decrement\").removeClass(\"dtpicker-compButtonEnable\").addClass(\"dtpicker-compButtonDisable\"),c=new Date(b.oData.iCurrentYear,b.oData.iCurrentMonth,b.oData.iCurrentDay,b.oData.iCurrentHour,b.oData.iCurrentMinutes-1,b.oData.iCurrentSeconds,0),c.getTime()<b.oData.dMinValue.getTime()&&a(b.element).find(\".minutes .decrement\").removeClass(\"dtpicker-compButtonEnable\").addClass(\"dtpicker-compButtonDisable\"),c=new Date(b.oData.iCurrentYear,b.oData.iCurrentMonth,b.oData.iCurrentDay,b.oData.iCurrentHour,b.oData.iCurrentMinutes,b.oData.iCurrentSeconds-1,0),c.getTime()<b.oData.dMinValue.getTime()&&a(b.element).find(\".seconds .decrement\").removeClass(\"dtpicker-compButtonEnable\").addClass(\"dtpicker-compButtonDisable\"))),b.oData.bIs12Hour){var d,e;null===b.oData.dMaxValue&&null===b.oData.dMinValue||(d=b.oData.iCurrentHour,a.cf._compare(b.oData.sCurrentMeridiem,\"AM\")?d+=12:a.cf._compare(b.oData.sCurrentMeridiem,\"PM\")&&(d-=12),c=new Date(b.oData.iCurrentYear,b.oData.iCurrentMonth,b.oData.iCurrentDay,d,b.oData.iCurrentMinutes,b.oData.iCurrentSeconds,0),null!==b.oData.dMaxValue&&(b.oData.bTimeMode?(e=b.oData.iCurrentMinutes,(d>b.oData.dMaxValue.getHours()||d===b.oData.dMaxValue.getHours()&&e>b.oData.dMaxValue.getMinutes())&&a(b.element).find(\".meridiem .dtpicker-compButton\").removeClass(\"dtpicker-compButtonEnable\").addClass(\"dtpicker-compButtonDisable\")):c.getTime()>b.oData.dMaxValue.getTime()&&a(b.element).find(\".meridiem .dtpicker-compButton\").removeClass(\"dtpicker-compButtonEnable\").addClass(\"dtpicker-compButtonDisable\")),null!==b.oData.dMinValue&&(b.oData.bTimeMode?(e=b.oData.iCurrentMinutes,(d<b.oData.dMinValue.getHours()||d===b.oData.dMinValue.getHours()&&e<b.oData.dMinValue.getMinutes())&&a(b.element).find(\".meridiem .dtpicker-compButton\").removeClass(\"dtpicker-compButtonEnable\").addClass(\"dtpicker-compButtonDisable\")):c.getTime()<b.oData.dMinValue.getTime()&&a(b.element).find(\".meridiem .dtpicker-compButton\").removeClass(\"dtpicker-compButtonEnable\").addClass(\"dtpicker-compButtonDisable\")))}},setIsPopup:function(b){var c=this;if(!c.settings.isInline)if(c.settings.isPopup=b,\"none\"!==a(c.element).css(\"display\")&&c._hidePicker(0),c.settings.isPopup)a(c.element).addClass(\"dtpicker-mobile\"),a(c.element).css({position:\"fixed\",top:0,left:0,width:\"100%\",height:\"100%\"});else if(a(c.element).removeClass(\"dtpicker-mobile\"),null!==c.oData.oInputElement){var d=a(c.oData.oInputElement).offset().top+a(c.oData.oInputElement).outerHeight(),e=a(c.oData.oInputElement).offset().left,f=a(c.oData.oInputElement).outerWidth();a(c.element).css({position:\"absolute\",top:d,left:e,width:f,height:\"auto\"})}},_compareDates:function(a,b){a=new Date(a.getDate(),a.getMonth(),a.getFullYear(),0,0,0,0);var c=(a.getTime()-b.getTime())/864e5;return 0===c?c:c/Math.abs(c)},_compareTime:function(a,b){var c=0;return a.getHours()===b.getHours()&&a.getMinutes()===b.getMinutes()?c=1:a.getHours()<b.getHours()?c=2:a.getHours()>b.getHours()?c=3:a.getHours()===b.getHours()&&(a.getMinutes()<b.getMinutes()?c=2:a.getMinutes()>b.getMinutes()&&(c=3)),c},_compareDateTime:function(a,b){var c=(a.getTime()-b.getTime())/6e4;return 0===c?c:c/Math.abs(c)},_determineMeridiemFromHourAndMinutes:function(a,b){return a>12||12===a&&b>=0?\"PM\":\"AM\"},setLanguage:function(b){var c=this;return c.settings=a.extend({},a.DateTimePicker.defaults,a.DateTimePicker.i18n[b],c.options),c.settings.language=b,c._setDateFormatArray(),c._setTimeFormatArray(),c._setDateTimeFormatArray(),c}}});","import Model from 'flarum/Model';\nimport mixin from 'flarum/utils/mixin';\n\nexport default class Answer extends mixin(Model, {\n    answer: Model.attribute('answer'),\n    votes: Model.attribute('votes'),\n    percent: Model.attribute('percent')\n}) {\n    apiEndpoint() {\n        return `/reflar/polls/answers${this.exists ? `/${this.data.id}` : ''}`;\n    }\n}\n","import Model from 'flarum/Model';\nimport mixin from 'flarum/utils/mixin';\n\nexport default class Question extends mixin(Model, {\n    question: Model.attribute('question'),\n    isEnded: Model.attribute('isEnded'),\n    endDate: Model.attribute('endDate'),\n    isPublic: Model.attribute('isPublic'),\n\n    answers: Model.hasMany('answers'),\n    votes: Model.hasMany('votes'),\n}) {\n    apiEndpoint() {\n        return `/reflar/polls${this.exists ? `/${this.data.id}` : ''}`;\n    }\n}\n","import Model from 'flarum/Model';\nimport mixin from 'flarum/utils/mixin';\n\nexport default class Vote extends mixin(Model, {\n    poll_id: Model.attribute('poll_id'),\n    user_id: Model.attribute('user_id'),\n    option_id: Model.attribute('option_id'),\n}) {\n    apiEndpoint() {\n        return `/reflar/polls/votes${this.exists ? `/${this.data.id}` : ''}`;\n    }\n}\n","import {extend} from 'flarum/extend';\n\nimport PostControls from 'flarum/utils/PostControls';\nimport Button from 'flarum/components/Button';\nimport EditPollModal from './components/EditPollModal';\n\nexport default function () {\n    extend(PostControls, 'moderationControls', function (items, post) {\n        const discussion = post.discussion();\n        const poll = discussion.Poll();\n        const user = app.session.user\n\n        if (discussion.Poll() && ((user !== undefined && user.canEditPolls()) || (post.user().canSelfEditPolls()) && post.user().id() === user.id()) && post.number() === 1) {\n            if (!poll.isEnded()) {\n                items.add('editPoll', [\n                    m(Button, {\n                        icon: 'fa fa-check-square',\n                        className: 'reflar-PollButton',\n                        onclick: () => {\n                            app.modal.show(new EditPollModal({post: post, poll: poll}));\n                        }\n                    }, app.translator.trans('reflar-polls.forum.moderation.edit'))\n                ]);\n            }\n\n            items.add('removePoll', [\n                m(Button, {\n                    icon: 'fa fa-trash',\n                    className: 'reflar-PollButton',\n                    onclick: () => {\n\n                        if (confirm(app.translator.trans('reflar-polls.forum.moderation.delete_confirm'))) {\n                            app.request({\n                                url: `${app.forum.attribute('apiUrl')}/reflar/polls/${poll.id()}`,\n                                method: 'DELETE',\n                                data: poll.store.data.users[Object.keys(poll.store.data.users)[0]].id()\n                            }).then(() => {\n                                location.reload()\n                            })\n                        }\n                    }\n                }, app.translator.trans('reflar-polls.forum.moderation.delete'))\n            ]);\n        }\n    });\n}\n","import { extend, override } from 'flarum/extend';\n\nimport CommentPost from 'flarum/components/CommentPost';\nimport PollVote from './components/PollVote';\n\nexport default function() {\n  extend(CommentPost.prototype, 'content', function(content) {\n    const discussion = this.props.post.discussion();\n\n    if (discussion.Poll() && this.props.post.number() === 1 && !this.props.post.isHidden()) {\n      this.subtree.invalidate();\n        \n      content.push(PollVote.component({\n        poll: discussion.Poll()\n      }));\n    }\n  });\n}\n","import { extend } from 'flarum/extend';\nimport Discussion from 'flarum/models/Discussion';\nimport Badge from 'flarum/components/Badge';\n\nexport default function addPollBadge() {\n    extend(Discussion.prototype, 'badges', function(badges) {\n        if (this.Poll()) {\n            badges.add('poll', Badge.component({\n                type: 'poll',\n                label: app.translator.trans('reflar-polls.forum.tooltip.badge'),\n                icon: 'fa fa-signal'\n            }), 5);\n        }\n    });\n}","import {extend, override} from 'flarum/extend';\nimport Modal from 'flarum/components/Modal';\nimport Button from 'flarum/components/Button';\n\nexport default class EditPollModal extends Modal {\n    init() {\n        super.init();\n        this.answers = this.props.poll.answers();\n\n        this.question = m.prop(this.props.poll.question());\n\n        this.pollCreator = this.props.poll.store.data.users[Object.keys(this.props.poll.store.data.users)[0]]\n\n        this.newAnswer = m.prop('')\n\n        this.endDate = m.prop(this.props.poll.endDate() === ' UTC' ? '' : this.getDateTime(new Date(this.props.poll.endDate())))\n    }\n\n    className() {\n        return 'PollDiscussionModal Modal--small';\n    }\n\n    title() {\n        return app.translator.trans('reflar-polls.forum.modal.edit_title');\n    }\n\n    getDateTime(date = new Date()) {\n        if (isNaN(date)) {\n            date = new Date()\n        }\n        var checkTargets = [\n            date.getMonth() + 1,\n            date.getDate(),\n            date.getHours(),\n            date.getMinutes()\n        ];\n\n        checkTargets.forEach((target, i) => {\n            if (target < 10) {\n                checkTargets[i] = \"0\" + target;\n            }\n        })\n\n        return date.getFullYear() + '-' + checkTargets[0] + '-' + checkTargets[1] + ' ' + checkTargets[2] + ':' + checkTargets[3]\n    }\n\n    config(isInitalized) {\n        if (isInitalized) return;\n\n        var oDTP1;\n\n        $('#dtBox').DateTimePicker({\n            init: function () {\n                oDTP1 = this;\n            },\n            dateTimeFormat: \"yyyy-MM-dd HH:mm\",\n            minDateTime: this.getDateTime(),\n            settingValueOfElement: (value) => {\n                this.endDate(value);\n\n                app.request({\n                    method: 'PATCH',\n                    url: `${app.forum.attribute('apiUrl')}/reflar/polls/${this.props.poll.id()}/endDate`,\n                    data: {\n                        date: new Date(value),\n                        user_id: this.pollCreator.id()\n                    }\n                });\n            }\n        });\n    }\n\n    content() {\n        return [\n            <div className=\"Modal-body\">\n                <div className=\"PollDiscussionModal-form\">\n                    <div>\n                        <fieldset>\n                            <input type=\"text\" name=\"question\" className=\"FormControl\" value={this.question()} oninput={m.withAttr('value', this.updateQuestion.bind(this))} placeholder={app.translator.trans('reflar-polls.forum.modal.question_placeholder')}/>\n                        </fieldset>\n                    </div>\n\n                    <h4>{app.translator.trans('reflar-polls.forum.modal.answers')}</h4>\n\n                    {\n                        this.answers.map((answer, i) => (\n                            <div className='Form-group'>\n                                <fieldset className=\"Poll-answer-input\">\n                                    <input className=\"FormControl\"\n                                           type=\"text\"\n                                           oninput={m.withAttr('value', this.updateAnswer.bind(this, answer))}\n                                           value={answer.answer()}\n                                           placeholder={app.translator.trans('reflar-polls.forum.modal.answer_placeholder') + ' #' + (i + 1)}/>\n                                </fieldset>\n                                {i + 1 >= 3 ?\n                                    Button.component({\n                                        type: 'button',\n                                        className: 'Button Button--warning Poll-answer-button',\n                                        icon: 'fa fa-minus',\n                                        onclick: i + 1 >= 3 ? this.removeOption.bind(this, answer) : ''\n                                    }) : ''}\n                                <div className=\"clear\"></div>\n                            </div>\n                        ))\n                    }\n                    <div className='Form-group'>\n                        <fieldset className=\"Poll-answer-input\">\n                            <input className=\"FormControl\"\n                                   type=\"text\"\n                                   oninput={m.withAttr('value', this.newAnswer)}\n                                   placeholder={app.translator.trans('reflar-polls.forum.modal.answer_placeholder') + ' #' + (this.answers.length + 1)}/>\n                        </fieldset>\n                        {Button.component({\n                            type: 'button',\n                            className: 'Button Button--warning Poll-answer-button',\n                            icon: 'fa fa-plus',\n                            onclick: this.addAnswer.bind(this)\n                        })}\n                    </div>\n                    <div className=\"clear\"></div>\n                    <div style=\"margin-top: 20px\" className='Form-group'>\n                        <fieldset style=\"margin-bottom: 15px\" className=\"Poll-answer-input\">\n                            <input style=\"opacity: 1\" className=\"FormControl\" type=\"text\" data-field=\"datetime\" value={this.endDate() || app.translator.trans('reflar-polls.forum.modal.date_placeholder')} id=\"dtInput\" data-min={this.getDateTime()} readonly/>\n                            <div id=\"dtBox\"></div>\n                        </fieldset>\n                    </div>\n                    <div className=\"clear\"></div>\n                </div>\n                {Button.component({\n                    className: 'Button Button--primary PollModal-SubmitButton',\n                    children: app.translator.trans('reflar-polls.forum.modal.submit'),\n                    onclick: () => {\n                        app.modal.close()\n                    }\n                })}\n            </div>\n        ];\n    }\n\n\n    onhide() {\n        this.props.poll.answers = m.prop(this.answers)\n        this.props.poll.question = this.question\n        if (this.endDate() !== '') {\n            this.props.poll.endDate = this.endDate\n        }\n        m.redraw.strategy('all')\n    }\n\n    addAnswer(answer) {\n        var data = {\n            answer: this.newAnswer(),\n            poll_id: this.props.poll.id(),\n            user_id: this.pollCreator.id()\n        }\n        if (this.answers.length < 10) {\n            app.store.createRecord('answers').save(data).then(\n                answer => {\n                    this.answers.push(answer);\n\n                    this.newAnswer('');\n                    m.redraw.strategy('all')\n                    m.redraw();\n                }\n            );\n        } else {\n            alert(app.translator.trans('reflar-polls.forum.modal.max'))\n        }\n    }\n\n\n    removeOption(option) {\n        app.request({\n            method: 'DELETE',\n            url: `${app.forum.attribute('apiUrl')}/reflar/polls/answers/${option.data.id}`,\n            data: this.pollCreator.id()\n        });\n        this.answers.some((answer, i) => {\n            if (answer.data.id === option.data.id) {\n                this.answers.splice(i, 1);\n                return true;\n            }\n        })\n    }\n\n    updateAnswer(answerToUpdate, value) {\n        app.request({\n            method: 'PATCH',\n            url: `${app.forum.attribute('apiUrl')}/reflar/polls/answers/${answerToUpdate.data.id}`,\n            data: {\n                answer: value,\n                user_id: this.pollCreator.id()\n            }\n        });\n        this.answers.some((answer) => {\n            if (answer.data.id === answerToUpdate.data.id) {\n                answer.data.attributes.answer = value;\n                return true;\n            }\n        })\n    }\n\n    updateQuestion(question) {\n        if (question === '') {\n            alert(app.translator.trans('reflar-polls.forum.modal.include_question'))\n            this.question('')\n            return\n        }\n        app.request({\n            method: 'PATCH',\n            url: `${app.forum.attribute('apiUrl')}/reflar/polls/${this.props.poll.id()}`,\n            data: {\n                question: question,\n                user_id: this.pollCreator.id()\n            }\n        });\n        this.question = m.prop(question)\n        m.redraw()\n    }\n}\n","import {extend} from 'flarum/extend';\nimport Modal from 'flarum/components/Modal';\nimport Button from 'flarum/components/Button';\nimport DiscussionComposer from 'flarum/components/DiscussionComposer';\nimport Switch from \"flarum/components/Switch\";\nimport DateTimePicker from \"DateTimePicker\";\n\nexport default class PollModal extends Modal {\n    init() {\n        super.init();\n        this.answer = [];\n\n        this.question = m.prop('');\n        this.answer[0] = m.prop('');\n        this.answer[1] = m.prop('');\n\n        this.endDate = m.prop();\n        this.publicPoll = m.prop(false);\n\n        if (this.props.poll) {\n            var poll = this.props.poll\n            this.answer = Object.values(poll.answers)\n            this.question(poll.question)\n            this.endDate(isNaN(poll.endDate) ? '' : this.getDateTime(poll.endDate))\n            this.publicPoll(poll.publicPoll)\n        }\n    }\n\n    className() {\n        return 'PollDiscussionModal Modal--small';\n    }\n\n    getDateTime(date = new Date()) {\n        if (isNaN(date)) {\n            date = new Date()\n        }\n        var checkTargets = [\n            date.getMonth() + 1,\n            date.getDate(),\n            date.getHours(),\n            date.getMinutes()\n        ];\n\n        checkTargets.forEach((target, i) => {\n            if (target < 10) {\n                checkTargets[i] = \"0\" + target;\n            }\n        })\n\n        return date.getFullYear() + '-' + checkTargets[0] + '-' + checkTargets[1] +  ' ' + checkTargets[2] + ':' + checkTargets[3]\n    }\n\n    title() {\n        return app.translator.trans('reflar-polls.forum.modal.add_title');\n    }\n\n    config() {\n        var oDTP1;\n\n        $('#dtBox').DateTimePicker({\n            init: function () {\n                oDTP1 = this;\n            },\n            dateTimeFormat: \"yyyy-MM-dd HH:mm\",\n            minDateTime: this.getDateTime(),\n            settingValueOfElement: (value) => {\n                this.endDate(value)\n            }\n        });\n    }\n\n    content() {\n        return [\n            <div className=\"Modal-body\">\n                <div className=\"PollDiscussionModal-form\">\n                    <div>\n                        <fieldset>\n                            <input type=\"text\" name=\"question\" className=\"FormControl\" bidi={this.question} placeholder={app.translator.trans('reflar-polls.forum.modal.question_placeholder')}/>\n                        </fieldset>\n                    </div>\n\n                    <h4>{app.translator.trans('reflar-polls.forum.modal.answers')}</h4>\n\n                    {\n                        Object.keys(this.answer).map((el, i) => (\n                            <div className={this.answer[i + 1] === '' ? 'Form-group hide' : 'Form-group'}>\n                                <fieldset className=\"Poll-answer-input\">\n                                    <input className=\"FormControl\"\n                                           type=\"text\"\n                                           name={'answer' + (i + 1)}\n                                           bidi={this.answer[i]}\n                                           placeholder={app.translator.trans('reflar-polls.forum.modal.answer_placeholder') + ' #' + (i + 1)}/>\n                                    <div id=\"dtBox\"></div>\n                                </fieldset>\n                                {i + 1 >= 3 ?\n                                    Button.component({\n                                        type: 'button',\n                                        className: 'Button Button--warning Poll-answer-button',\n                                        icon: 'fa fa-minus',\n                                        onclick: i + 1 >= 3 ? this.removeOption.bind(this, i) : ''\n                                    }) : ''}\n                                <div className=\"clear\"></div>\n                            </div>\n                        ))\n                    }\n\n                    {Button.component({\n                        className: 'Button Button--primary PollModal-Button',\n                        children: app.translator.trans('reflar-polls.forum.modal.add'),\n                        onclick: this.addOption.bind(this)\n                    })}\n\n                    <div className='Form-group'>\n                        <fieldset style=\"margin-bottom: 15px\" className=\"Poll-answer-input\">\n                            <input style=\"opacity: 1; color: inherit\" className=\"FormControl\" type=\"text\" data-field=\"datetime\" value={this.endDate() || app.translator.trans('reflar-polls.forum.modal.date_placeholder')} id=\"dtInput\" data-min={this.getDateTime()} readonly/>\n                        </fieldset>\n                        <div className=\"clear\"></div>\n                        {Switch.component({\n                            state: this.publicPoll() || false,\n                            children: app.translator.trans('reflar-polls.forum.modal.switch'),\n                            onchange: this.publicPoll\n                        })}\n                        <div className=\"clear\"></div>\n                        {\n                            Button.component({\n                                type: 'submit',\n                                className: 'Button Button--primary PollModal-SubmitButton',\n                                children: app.translator.trans('reflar-polls.forum.modal.submit')\n                            })\n                        }\n                    </div>\n                </div>\n            </div>\n        ];\n    }\n\n    addOption() {\n        if (this.answer.length < 11) {\n            this.answer.push(m.prop(''));\n        } else {\n            alert(app.translator.trans('reflar-polls.forum.modal.max'))\n        }\n    }\n\n    removeOption(option) {\n        this.answer.forEach((answer, i) => {\n            if (i === option) {\n                this.answer.splice(i, 1)\n            }\n        })\n    }\n\n    objectSize(obj) {\n        var size = 0, key;\n        for (key in obj) {\n            if (obj[key] !== '') size++;\n        }\n        return size;\n    }\n\n    onsubmit(e) {\n        e.preventDefault();\n        let pollArray = {\n            question: this.question(),\n            answers: {},\n            endDate: new Date(this.endDate()),\n            publicPoll: this.publicPoll()\n        };\n\n        if (this.question() === '') {\n            alert(app.translator.trans('reflar-polls.forum.modal.include_question'))\n            return\n        }\n\n        // Add answers to PollArray\n        this.answer.map((answer, i) => {\n            if (answer() !== '') {\n                pollArray['answers'][i] = answer\n            }\n        });\n\n        if (this.objectSize(pollArray.answers) < 2) {\n            alert(app.translator.trans('reflar-polls.forum.modal.min'))\n            return\n        }\n\n        // Add data to DiscussionComposer post data\n        extend(DiscussionComposer.prototype, 'data', function (data) {\n            data.poll = pollArray;\n        });\n\n        app.modal.close();\n\n        m.redraw.strategy('none');\n    }\n}","import {extend} from 'flarum/extend';\nimport Button from 'flarum/components/Button';\nimport Component from 'flarum/Component';\nimport LogInModal from 'flarum/components/LogInModal';\n\nimport ShowVotersModal from './ShowVotersModal';\n\nexport default class PollVote extends Component {\n    init() {\n        this.poll = this.props.poll;\n        this.votes = this.poll.votes();\n        this.voted = m.prop(false);\n        this.user = app.session.user;\n        this.answers = []\n\n        this.poll.answers().forEach(answer => {\n            this.answers[answer.id()] = answer;\n        })\n\n        if (this.user !== undefined) {\n            if (!this.user.canVote()) {\n                this.voted(true)\n            } else {\n                app.store.find('reflar/polls/votes', {\n                    poll_id: this.poll.id(),\n                    user_id: this.user.id()\n                }).then((data) => {\n                    if (data[0] !== undefined) {\n                        this.voted(data[0])\n                    } else if (this.poll.isEnded()) {\n                        this.voted(true)\n                    }\n\n                    m.redraw();\n                });\n            }\n        }\n\n    }\n\n    showVoters() {\n        app.modal.show(new ShowVotersModal(this.poll))\n    }\n\n    onError(el, error) {\n        el.srcElement.checked = false\n\n        app.alerts.show(error.alert)\n    }\n\n    changeVote(answer, el) {\n        var oldVoteId = this.voted().id()\n        var oldAnswerId = this.voted().option_id()\n        app.request({\n            method: 'PATCH',\n            url: `${app.forum.attribute('apiUrl')}/reflar/polls/votes/${answer.id()}`,\n            errorHandler: this.onError.bind(this, el),\n            data: {\n                option_id: answer.id(),\n                poll_id: this.poll.id()\n            }\n        }).then(\n            response => {\n                this.answers[answer.id()].data.attributes.votes++;\n                this.answers[oldAnswerId].data.attributes.votes--;\n                this.votes.some((vote, i) => {\n                    if (vote.data.id === oldVoteId) {\n                        this.votes[i].data.attributes.option_id = response.data.attributes.option_id\n                    }\n                })\n                this.poll.data.relationships.votes.data.some(vote => {\n                    if (typeof vote.id === \"function\") {\n                        var id = vote.id()\n                    } else {\n                        var id = vote.id\n                    }\n                    if (oldVoteId === parseInt(id)) {\n                        vote.option_id = m.prop(response.data.attributes.option_id);\n                        return true;\n                    }\n                })\n                this.poll.votes = m.prop(this.votes)\n                m.redraw.strategy('all')\n                m.redraw()\n            }\n        )\n    }\n\n    view() {\n\n        if (this.voted() !== false) {\n            return (\n                <div>\n                    <h3>{this.poll.question()}</h3>\n                    {this.answers.map((item) => {\n                        let voted = false;\n                        if (this.voted() !== true) {\n                            voted = parseInt(this.voted().option_id()) === item.data.attributes.id;\n                            m.redraw()\n                        }\n                        let percent = Math.round((item.votes() / this.poll.votes().length) * 100)\n                        return (\n                            <div className='PollOption PollVoted'>\n                                <div\n                                    title={item.votes() >= 1 ? item.votes() + ' ' + app.translator.trans('reflar-polls.forum.tooltip.vote') : item.votes() + ' ' + app.translator.trans('reflar-polls.forum.tooltip.votes')}\n                                    className='PollBar'\n                                    data-selected={voted}\n                                    config={\n                                        function (element) {\n                                            $(element).tooltip({placement: 'right'});\n                                        }\n                                    }>\n                                    {!this.poll.isEnded() && this.voted !== true ?\n                                        <label className=\"checkbox\">\n                                            {voted ?\n                                                <input onchange={this.changeVote.bind(this, item)} type=\"checkbox\" checked/>\n                                                :\n                                                <input onchange={this.changeVote.bind(this, item)} type=\"checkbox\"/>\n                                            }\n                                            <span className=\"checkmark\"/>\n                                        </label>\n                                        : ''}\n                                    <div style={'--width: ' + percent + '%'} className=\"PollOption-active\"/>\n                                    <label style={!this.poll.isEnded() ? \"margin-left: 25px\" : ''} className=\"PollAnswer\"><span>{item.answer()}</span></label>\n                                    <label><span className={percent !== 100 ? 'PollPercent PollPercent--option' : 'PollPercent'}>{percent}%</span></label>\n                                </div>\n                            </div>\n                        )\n                    })\n                    }\n                    <div className=\"clear\"/>\n                    {this.poll.isPublic() ?\n                        Button.component({\n                            className: 'Button Button--primary PublicPollButton',\n                            children: app.translator.trans('reflar-polls.forum.public_poll'),\n                            onclick: () => {\n                                app.modal.show(new ShowVotersModal({votes: this.votes, answers: this.answers}))\n                            }\n                        }) : ''}\n                    <div className=\"clear\"/>\n                    {!this.user.canVote() ? (\n                        <div className=\"helpText PollInfoText\">{app.translator.trans('reflar-polls.forum.no_permission')}</div>\n                    ) : this.poll.isEnded() ? (\n                        <div className=\"helpText PollInfoText\">{app.translator.trans('reflar-polls.forum.poll_ended')}</div>\n                    ) : !isNaN(new Date(this.poll.endDate())) ? (\n                        <div className=\"helpText PollInfoText\">\n                            <i class=\"icon fa fa-clock-o\"></i> {app.translator.trans('reflar-polls.forum.days_remaining', {time: moment(this.poll.endDate()).fromNow()})}\n                        </div>\n                    ) : ''}\n                    <div className=\"clear\"/>\n                </div>\n            );\n\n        } else {\n            return (\n                <div>\n                    <h3>{this.poll.question()}</h3>\n                    {\n                        this.answers.map((item) => (\n                            <div className=\"PollOption\">\n                                <div className='PollBar'>\n                                    <label className=\"checkbox\">\n                                        <input type=\"checkbox\" onchange={this.addVote.bind(this, item)}/>\n                                        <span>{item.answer()}</span>\n                                        <span className=\"checkmark\"/>\n                                    </label>\n                                </div>\n                            </div>\n                        ))\n                    }\n                    <div className=\"clear\"/>\n                    {this.poll.isPublic() && app.session.user !== undefined ?\n                        Button.component({\n                            className: 'Button Button--primary PublicPollButton',\n                            children: app.translator.trans('reflar-polls.forum.public_poll'),\n                            onclick: () => {\n                                app.modal.show(new ShowVotersModal(this.poll))\n                            }\n                        }) : ''}\n                    {this.poll.isEnded() ? (\n                        <div className=\"helpText PollInfoText\">{app.translator.trans('reflar-polls.forum.poll_ended')}</div>\n                    ) : !isNaN(new Date(this.poll.endDate())) ? (\n                        <div className=\"helpText PollInfoText\">\n                            <i class=\"icon fa fa-clock-o\"></i> {app.translator.trans('reflar-polls.forum.days_remaining', {time: moment(this.poll.endDate()).fromNow()})}\n                        </div>\n                    ) : ''}\n                </div>\n            );\n        }\n    }\n\n    addVote(answer, el) {\n        if (this.user === undefined) {\n            app.modal.show(new LogInModal())\n            el.srcElement.checked = false\n        } else {\n            app.store.createRecord('votes').save({\n                poll_id: this.poll.id(),\n                option_id: answer.id()\n            }).then(\n                vote => {\n                    this.answers[answer.id()].data.attributes.votes++;\n                    this.voted(vote);\n                    this.poll.data.relationships.votes.data.push(vote)\n                    this.votes.push(vote)\n                    m.redraw()\n                })\n        }\n    }\n}\n","import Modal from 'flarum/components/Modal';\nimport ItemList from 'flarum/utils/ItemList';\nimport avatar from 'flarum/helpers/avatar';\nimport username from 'flarum/helpers/username';\nimport listItems from 'flarum/helpers/listItems';\n\nexport default class ShowVotersModal extends Modal {\n    className() {\n        return 'Modal--small';\n    }\n\n    title() {\n        return app.translator.trans('reflar-polls.forum.votes_modal.title');\n    }\n\n    getUsers(answer) {\n        let votes = []\n        if (typeof this.props.votes === 'function') {\n            votes = this.props.votes()\n        } else {\n            votes = this.props.votes\n        }\n        const items = new ItemList();\n        var counter = 0;\n\n        votes.map(vote => {\n            var user = app.store.getById('users', vote.data.attributes.user_id)\n\n            if (parseInt(answer.id()) === parseInt(vote.data.attributes.option_id)) {\n                counter++\n                items.add(user.id(), (\n                    <a href={app.route.user(user)} config={m.route}>\n                        {avatar(user)} {' '}\n                        {username(user)}\n                    </a>\n                ))\n            }\n        })\n        \n       if (counter === 0) {\n           items.add('none', (\n               <h4 style=\"color: #000\">{app.translator.trans('reflar-polls.forum.modal.no_voters')}</h4>\n           ))\n       }\n\n        return items;\n    }\n\n    content() {\n        if (typeof this.props.answers === 'function') {\n            this.answers = this.props.answers()\n        } else {\n            this.answers = this.props.answers\n        }\n        return (\n            <div className=\"Modal-body\">\n                <ul className=\"VotesModal-list\">\n                    {this.answers.map(answer => (\n                        <div>\n                            <h2>{answer.answer() + ':'}</h2>\n                            {listItems(this.getUsers(answer).toArray())}\n                        </div>\n                    ))}\n                </ul>\n            </div>\n        )\n    }\n}\n","import app from 'flarum/app';\nimport {extend, override} from 'flarum/extend';\n\nimport DiscussionComposer from 'flarum/components/DiscussionComposer';\n\nimport Model from 'flarum/Model';\nimport Question from '../common/models/Question';\nimport Answer from '../common/models/Answer';\nimport Vote from '../common/models/Vote';\nimport Discussion from 'flarum/models/Discussion';\nimport User from 'flarum/models/User';\n\nimport addPollBadege from './addPollBadge'\nimport PollControl from './PollControl';\nimport PollDiscussion from './PollDiscussion';\nimport PollModal from './components/PollModal';\n\napp.initializers.add('reflar-polls', app => {\n    // Relationships\n    app.store.models.answers = Answer;\n    app.store.models.questions = Question;\n    app.store.models.votes = Vote;\n\n    Discussion.prototype.Poll = Model.hasOne('Poll');\n\n    User.prototype.canEditPolls = Model.attribute('canEditPolls');\n    User.prototype.canStartPolls = Model.attribute('canStartPolls');\n    User.prototype.canSelfEditPolls = Model.attribute('canSelfEditPolls');\n    User.prototype.canVote = Model.attribute('canVote');\n\t\n    DiscussionComposer.prototype.addPoll = function(data) {\n        app.modal.show(new PollModal(data));\n    };\n\n    // Add button to DiscussionComposer header\n    extend(DiscussionComposer.prototype, 'headerItems', function (items) {\n        if (app.session.user.canStartPolls()) {\n            items.add('polls', (\n                <a className=\"DiscussionComposer-poll\" onclick={this.addPoll.bind(this, this.data())}>\n                    {this.data().poll\n                        ?\n                        <span className=\"PollLabel\">{app.translator.trans('reflar-polls.forum.composer_discussion.edit')}</span>\n                        :\n                        <span className=\"PollLabel\">{app.translator.trans('reflar-polls.forum.composer_discussion.add_poll')}</span>}\n\n                </a>), 1);\n        }\n    });\n\n    extend(DiscussionComposer.prototype, 'onsubmit', function() {\n        extend(DiscussionComposer.prototype, 'data', function (data) {\n            data.poll = undefined;\n        });\n    })\n\n    addPollBadege();\n    PollDiscussion();\n    PollControl();\n});\n","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['components/Badge'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/CommentPost'];","module.exports = flarum.core.compat['components/DiscussionComposer'];","module.exports = flarum.core.compat['components/LogInModal'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['components/Switch'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/avatar'];","module.exports = flarum.core.compat['helpers/listItems'];","module.exports = flarum.core.compat['helpers/username'];","module.exports = flarum.core.compat['models/Discussion'];","module.exports = flarum.core.compat['models/User'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['utils/PostControls'];","module.exports = flarum.core.compat['utils/mixin'];","module.exports = jQuery;"],"sourceRoot":""}