{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@fof/polls/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/typeof.js","webpack://@fof/polls/./node_modules/@babel/runtime/regenerator/index.js","webpack://@fof/polls/webpack/bootstrap","webpack://@fof/polls/webpack/runtime/compat get default export","webpack://@fof/polls/webpack/runtime/define property getters","webpack://@fof/polls/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/polls/webpack/runtime/make namespace object","webpack://@fof/polls/external root \"flarum.core.compat['forum/app']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/extend']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Badge']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/components/DiscussionList']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/models/Discussion']\"","webpack://@fof/polls/./src/forum/addDiscussionBadge.js","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/components/DiscussionComposer']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/components/ReplyComposer']\"","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@fof/polls/external root \"flarum.core.compat['common/Component']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Switch']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/construct.js","webpack://@fof/polls/./src/forum/components/form/FormError.js","webpack://@fof/polls/./src/forum/states/PollFormState.ts","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Page']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@fof/polls/./src/forum/components/ComposePollHero.tsx","webpack://@fof/polls/external root \"flarum.core.compat['common/helpers/listItems']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/SelectDropdown']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@fof/polls/./src/forum/components/ComposePollPage.tsx","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/SubtreeRetainer']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Dropdown']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Link']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/helpers/highlight']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/utils/slidable']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@fof/polls/./src/forum/components/Poll/PollPage.tsx","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/abbreviateNumber']\"","webpack://@fof/polls/./src/forum/components/Poll/PollListItem.tsx","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Placeholder']\"","webpack://@fof/polls/./src/forum/components/Poll/PollList.js","webpack://@fof/polls/external root \"flarum.core.compat['forum/components/LogInModal']\"","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://@fof/polls/external root \"flarum.core.compat['common/states/PaginatedListState']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/EventEmitter']\"","webpack://@fof/polls/./src/forum/states/PollListState.ts","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://@fof/polls/./src/forum/components/Poll/PollOptionLabel.tsx","webpack://@fof/polls/./src/forum/components/Poll/PollOptionInput.tsx","webpack://@fof/polls/./src/forum/components/Poll/PollOption.tsx","webpack://@fof/polls/./src/forum/components/Poll/PollResultNumber.tsx","webpack://@fof/polls/./src/forum/components/Poll/PollResult.tsx","webpack://@fof/polls/./src/forum/components/Poll/PollOptions.tsx","webpack://@fof/polls/external root \"flarum.core.compat['common/helpers/avatar']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/helpers/username']\"","webpack://@fof/polls/./src/forum/components/ListVotersModal.js","webpack://@fof/polls/./src/forum/states/PollState.ts","webpack://@fof/polls/./src/forum/components/PollView.tsx","webpack://@fof/polls/./src/forum/components/PollsPage.tsx","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Separator']\"","webpack://@fof/polls/./src/forum/utils/PollControls.tsx","webpack://@fof/polls/./src/forum/components/PollForm.js","webpack://@fof/polls/./src/forum/components/CreatePollModal.js","webpack://@fof/polls/./src/forum/addComposerItems.js","webpack://@fof/polls/external root \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Tooltip']\"","webpack://@fof/polls/./src/forum/components/EditPollModal.js","webpack://@fof/polls/./src/forum/components/PostPoll.js","webpack://@fof/polls/external root \"flarum.core.compat['forum/components/DiscussionPage']\"","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@fof/polls/external root \"flarum.core.compat['forum/utils/PostControls']\"","webpack://@fof/polls/./src/forum/components/PollViewPage.tsx","webpack://@fof/polls/./src/forum/components/index.ts","webpack://@fof/polls/external root \"flarum.core.compat['common/Model']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/computed']\"","webpack://@fof/polls/./src/forum/models/Poll.ts","webpack://@fof/polls/./src/forum/models/PollOption.ts","webpack://@fof/polls/./src/forum/models/PollVote.ts","webpack://@fof/polls/./src/forum/models/index.ts","webpack://@fof/polls/./src/forum/states/index.ts","webpack://@fof/polls/external root \"flarum.core.compat['common/extenders']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/models/Post']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/models/Forum']\"","webpack://@fof/polls/./src/forum/extend.ts","webpack://@fof/polls/./src/forum/index.ts","webpack://@fof/polls/./src/forum/addPostControls.js","webpack://@fof/polls/./src/forum/addPollsToPost.js","webpack://@fof/polls/./src/forum/addNavItem.ts"],"sourcesContent":["var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return e;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var t,\n    e = {},\n    r = Object.prototype,\n    n = r.hasOwnProperty,\n    o = Object.defineProperty || function (t, e, r) {\n      t[e] = r.value;\n    },\n    i = \"function\" == typeof Symbol ? Symbol : {},\n    a = i.iterator || \"@@iterator\",\n    c = i.asyncIterator || \"@@asyncIterator\",\n    u = i.toStringTag || \"@@toStringTag\";\n  function define(t, e, r) {\n    return Object.defineProperty(t, e, {\n      value: r,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), t[e];\n  }\n  try {\n    define({}, \"\");\n  } catch (t) {\n    define = function define(t, e, r) {\n      return t[e] = r;\n    };\n  }\n  function wrap(t, e, r, n) {\n    var i = e && e.prototype instanceof Generator ? e : Generator,\n      a = Object.create(i.prototype),\n      c = new Context(n || []);\n    return o(a, \"_invoke\", {\n      value: makeInvokeMethod(t, r, c)\n    }), a;\n  }\n  function tryCatch(t, e, r) {\n    try {\n      return {\n        type: \"normal\",\n        arg: t.call(e, r)\n      };\n    } catch (t) {\n      return {\n        type: \"throw\",\n        arg: t\n      };\n    }\n  }\n  e.wrap = wrap;\n  var h = \"suspendedStart\",\n    l = \"suspendedYield\",\n    f = \"executing\",\n    s = \"completed\",\n    y = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var p = {};\n  define(p, a, function () {\n    return this;\n  });\n  var d = Object.getPrototypeOf,\n    v = d && d(d(values([])));\n  v && v !== r && n.call(v, a) && (p = v);\n  var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p);\n  function defineIteratorMethods(t) {\n    [\"next\", \"throw\", \"return\"].forEach(function (e) {\n      define(t, e, function (t) {\n        return this._invoke(e, t);\n      });\n    });\n  }\n  function AsyncIterator(t, e) {\n    function invoke(r, o, i, a) {\n      var c = tryCatch(t[r], t, o);\n      if (\"throw\" !== c.type) {\n        var u = c.arg,\n          h = u.value;\n        return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) {\n          invoke(\"next\", t, i, a);\n        }, function (t) {\n          invoke(\"throw\", t, i, a);\n        }) : e.resolve(h).then(function (t) {\n          u.value = t, i(u);\n        }, function (t) {\n          return invoke(\"throw\", t, i, a);\n        });\n      }\n      a(c.arg);\n    }\n    var r;\n    o(this, \"_invoke\", {\n      value: function value(t, n) {\n        function callInvokeWithMethodAndArg() {\n          return new e(function (e, r) {\n            invoke(t, n, e, r);\n          });\n        }\n        return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(e, r, n) {\n    var o = h;\n    return function (i, a) {\n      if (o === f) throw new Error(\"Generator is already running\");\n      if (o === s) {\n        if (\"throw\" === i) throw a;\n        return {\n          value: t,\n          done: !0\n        };\n      }\n      for (n.method = i, n.arg = a;;) {\n        var c = n.delegate;\n        if (c) {\n          var u = maybeInvokeDelegate(c, n);\n          if (u) {\n            if (u === y) continue;\n            return u;\n          }\n        }\n        if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) {\n          if (o === h) throw o = s, n.arg;\n          n.dispatchException(n.arg);\n        } else \"return\" === n.method && n.abrupt(\"return\", n.arg);\n        o = f;\n        var p = tryCatch(e, r, n);\n        if (\"normal\" === p.type) {\n          if (o = n.done ? s : l, p.arg === y) continue;\n          return {\n            value: p.arg,\n            done: n.done\n          };\n        }\n        \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(e, r) {\n    var n = r.method,\n      o = e.iterator[n];\n    if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y;\n    var i = tryCatch(o, e.iterator, r.arg);\n    if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y;\n    var a = i.arg;\n    return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y);\n  }\n  function pushTryEntry(t) {\n    var e = {\n      tryLoc: t[0]\n    };\n    1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e);\n  }\n  function resetTryEntry(t) {\n    var e = t.completion || {};\n    e.type = \"normal\", delete e.arg, t.completion = e;\n  }\n  function Context(t) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], t.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(e) {\n    if (e || \"\" === e) {\n      var r = e[a];\n      if (r) return r.call(e);\n      if (\"function\" == typeof e.next) return e;\n      if (!isNaN(e.length)) {\n        var o = -1,\n          i = function next() {\n            for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next;\n            return next.value = t, next.done = !0, next;\n          };\n        return i.next = i;\n      }\n    }\n    throw new TypeError(_typeof(e) + \" is not iterable\");\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), o(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) {\n    var e = \"function\" == typeof t && t.constructor;\n    return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name));\n  }, e.mark = function (t) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t;\n  }, e.awrap = function (t) {\n    return {\n      __await: t\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () {\n    return this;\n  }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) {\n    void 0 === i && (i = Promise);\n    var a = new AsyncIterator(wrap(t, r, n, o), i);\n    return e.isGeneratorFunction(r) ? a : a.next().then(function (t) {\n      return t.done ? t.value : a.next();\n    });\n  }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () {\n    return this;\n  }), define(g, \"toString\", function () {\n    return \"[object Generator]\";\n  }), e.keys = function (t) {\n    var e = Object(t),\n      r = [];\n    for (var n in e) r.push(n);\n    return r.reverse(), function next() {\n      for (; r.length;) {\n        var t = r.pop();\n        if (t in e) return next.value = t, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, e.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(e) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var t = this.tryEntries[0].completion;\n      if (\"throw\" === t.type) throw t.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(e) {\n      if (this.done) throw e;\n      var r = this;\n      function handle(n, o) {\n        return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o;\n      }\n      for (var o = this.tryEntries.length - 1; o >= 0; --o) {\n        var i = this.tryEntries[o],\n          a = i.completion;\n        if (\"root\" === i.tryLoc) return handle(\"end\");\n        if (i.tryLoc <= this.prev) {\n          var c = n.call(i, \"catchLoc\"),\n            u = n.call(i, \"finallyLoc\");\n          if (c && u) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          } else if (c) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n          } else {\n            if (!u) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(t, e) {\n      for (var r = this.tryEntries.length - 1; r >= 0; --r) {\n        var o = this.tryEntries[r];\n        if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) {\n          var i = o;\n          break;\n        }\n      }\n      i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null);\n      var a = i ? i.completion : {};\n      return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a);\n    },\n    complete: function complete(t, e) {\n      if (\"throw\" === t.type) throw t.arg;\n      return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y;\n    },\n    finish: function finish(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y;\n      }\n    },\n    \"catch\": function _catch(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.tryLoc === t) {\n          var n = r.completion;\n          if (\"throw\" === n.type) {\n            var o = n.arg;\n            resetTryEntry(r);\n          }\n          return o;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(e, r, n) {\n      return this.delegate = {\n        iterator: values(e),\n        resultName: r,\n        nextLoc: n\n      }, \"next\" === this.method && (this.arg = t), y;\n    }\n  }, e;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Badge'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Discussion'];","import app from 'flarum/forum/app';\n\nimport { extend } from 'flarum/common/extend';\nimport Badge from 'flarum/common/components/Badge';\nimport DiscussionList from 'flarum/forum/components/DiscussionList';\nimport Discussion from 'flarum/common/models/Discussion';\n\nexport default () => {\n  extend(DiscussionList.prototype, 'requestParams', (params) => {\n    params.include.push('poll');\n  });\n\n  extend(Discussion.prototype, 'badges', function (badges) {\n    if (this.hasPoll()) {\n      badges.add(\n        'poll',\n        Badge.component({\n          type: 'poll',\n          label: app.translator.trans('fof-polls.forum.tooltip.badge'),\n          icon: 'fas fa-signal',\n        }),\n        5\n      );\n    }\n  });\n};\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/classList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionComposer'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/ReplyComposer'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Switch'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extractText'];","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _isNativeReflectConstruct() {\n  try {\n    var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n  } catch (t) {}\n  return (_isNativeReflectConstruct = function _isNativeReflectConstruct() {\n    return !!t;\n  })();\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n      _cache.set(Class, Wrapper);\n    }\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  try {\n    return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n  } catch (e) {\n    return typeof fn === \"function\";\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(t, e, r) {\n  if (isNativeReflectConstruct()) return Reflect.construct.apply(null, arguments);\n  var o = [null];\n  o.push.apply(o, e);\n  var p = new (t.bind.apply(t, o))();\n  return r && setPrototypeOf(p, r.prototype), p;\n}","export default class FormError extends Error {}\n","import app from 'flarum/forum/app';\nimport Poll from '../models/Poll';\n\nexport default class PollFormState {\n  poll: Poll;\n  loading: boolean;\n  deleting: boolean;\n  expandedGroup: string;\n\n  static createNewPoll() {\n    const poll = app.store.createRecord<Poll>('polls');\n    poll.pushAttributes({\n      question: '',\n      endDate: '',\n      publicPoll: false,\n      allowMultipleVotes: false,\n      hideVotes: false,\n      allowChangeVote: false,\n      maxVotes: 0,\n    });\n    poll.pushData({ relationships: { options: [] } });\n    return poll;\n  }\n\n  constructor(poll: Poll) {\n    if (!poll) {\n      poll = PollFormState.createNewPoll();\n    }\n\n    this.loading = false;\n    this.deleting = false;\n    this.poll = poll;\n    this.expandedGroup = 'setup';\n  }\n\n  isExpanded(groupKey: string) {\n    return this.expandedGroup === groupKey;\n  }\n\n  expand(groupKey: string) {\n    this.expandedGroup = groupKey;\n    m.redraw();\n  }\n\n  async save(data: any) {\n    this.loading = true;\n    m.redraw();\n\n    try {\n      this.poll = await this.poll.save(data);\n    } finally {\n      this.loading = false;\n      m.redraw();\n    }\n  }\n\n  async delete() {\n    this.loading = true;\n    m.redraw();\n\n    try {\n      await this.poll.delete();\n      this.deleting = true;\n    } finally {\n      this.loading = false;\n      m.redraw();\n    }\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Page'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","import Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport Poll from '../models/Poll';\nimport ItemList from 'flarum/common/utils/ItemList';\n\nexport interface ComposePollHeroAttrs extends ComponentAttrs {\n  poll: Poll;\n}\n\nexport default class ComposePollHero extends Component<ComposePollHeroAttrs> {\n  poll!: Poll;\n\n  oninit(vnode: Mithril.Vnode<ComposePollHeroAttrs>): void {\n    super.oninit(vnode);\n\n    this.poll = this.attrs.poll;\n  }\n\n  view(): Mithril.Children {\n    return (\n      <div className=\"ComposeGoodieCollectionHero Hero IndexPageHero\">\n        <div className=\"container\">\n          <div className=\"containerNarrow\">\n            <h2 className=\"Hero-title\">{app.translator.trans(`fof-polls.forum.compose.${!!this.poll.id() ? 'edit' : 'add'}_title`)}</h2>\n            <div className=\"IndexPageHero-controls\">{this.controlItems().toArray()}</div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  controlItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add(\n      'edit',\n      <LinkButton\n        icon=\"far fa-edit\"\n        className=\"Button Button--secondary IndexPage-newDiscussion GoodiesManagerLink\"\n        itemClassName=\"App-primaryControl\"\n        href={app.route('fof.polls.list')}\n      >\n        {app.translator.trans('fof-polls.forum.compose.polls_manager')}\n      </LinkButton>\n    );\n\n    if (this.poll.exists) {\n      items.add(\n        'view',\n        <LinkButton\n          icon=\"far fa-arrow-up-right-from-square\"\n          className=\"Button Button--secondary IndexPage-newDiscussion GoodiePreviewLink\"\n          itemClassName=\"App-primaryControl\"\n          href={app.route('fof.polls.view', { id: this.poll.id() })}\n        >\n          {app.translator.trans('fof-polls.forum.compose.polls_preview')}\n        </LinkButton>\n      );\n    }\n\n    return items;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/listItems'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/SelectDropdown'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport Page from 'flarum/common/components/Page';\nimport Poll from '../models/Poll';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport PollForm from './PollForm';\nimport PollFormState from '../states/PollFormState';\nimport ComposePollHero from './ComposePollHero';\nimport Button from 'flarum/common/components/Button';\nimport listItems from 'flarum/common/helpers/listItems';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport SelectDropdown from 'flarum/common/components/SelectDropdown';\nimport IndexPage from 'flarum/forum/components/IndexPage';\n\nexport default class ComposePollPage extends Page {\n  poll: Poll | null | undefined = null;\n\n  loading: boolean = false;\n\n  oninit(vnode: Mithril.Vnode) {\n    super.oninit(vnode);\n\n    // Get the `edit` parameter from the URL\n    const editId = m.route.param('id');\n    if (editId) {\n      this.poll = app.store.getById<Poll>('poll', editId);\n\n      if (!this.poll) {\n        this.loading = true;\n\n        app.store.find<Poll>('fof/polls', editId).then((item) => {\n          this.poll = item;\n          this.loading = false;\n          app.setTitle(app.translator.trans(`fof-polls.forum.compose.${!!this.poll?.id() ? 'edit' : 'add'}_title`) as string);\n          m.redraw();\n        });\n      }\n    } else {\n      this.poll = PollFormState.createNewPoll();\n    }\n\n    app.history.push('compose-poll', app.translator.trans(`fof-polls.forum.compose.${!!this.poll?.id() ? 'edit' : 'add'}_title`) as string);\n    this.bodyClass = 'App--compose-poll';\n    app.setTitle(app.translator.trans(`fof-polls.forum.compose.${!!this.poll?.id() ? 'edit' : 'add'}_title`) as string);\n  }\n\n  view(): Mithril.Children {\n    // prevent users from accessing the page if they can't start global polls\n    if (!app.forum.attribute<boolean>('canStartGlobalPolls')) {\n      m.route.set('/');\n      return;\n    }\n\n    if (this.loading) {\n      return <LoadingIndicator />;\n    }\n\n    return (\n      <div className=\"ComposePollCollectionPage\">\n        <ComposePollHero poll={this.poll} />\n        <div className=\"container\">\n          <div className=\"sideNavContainer\">\n            <nav className=\"PollsPage-nav sideNav\">\n              <ul>{listItems(this.sidebarItems().toArray())}</ul>\n            </nav>\n            <div className=\"sideNavOffset\">\n              <PollForm poll={this.poll} onsubmit={this.onsubmit.bind(this)} />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  async onsubmit(data: Object, state: PollFormState) {\n    const isNew = state.poll.id() === undefined;\n    await state.save(data);\n\n    const alertAttrs = isNew\n      ? {\n          type: 'success',\n          controls: [\n            <Button\n              className=\"Button Button--link\"\n              onclick={() =>\n                m.route.set(\n                  app.route('fof.polls.compose', {\n                    id: state.poll.id(),\n                  })\n                )\n              }\n            >\n              {app.translator.trans('fof-polls.forum.compose.continue_editing')}\n            </Button>,\n          ],\n        }\n      : {\n          type: 'success',\n        };\n\n    // Show success alert\n    const alertId = app.alerts.show(alertAttrs, app.translator.trans('fof-polls.forum.compose.success'));\n\n    // Hide alert after 10 seconds\n    setTimeout(() => app.alerts.dismiss(alertId), 10000);\n\n    if (isNew) {\n      m.route.set(app.route('fof.polls.list'));\n    }\n  }\n\n  sidebarItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add(\n      'nav',\n      <SelectDropdown\n        buttonClassName=\"Button\"\n        className=\"App-titleControl\"\n        accessibleToggleLabel={app.translator.trans('core.forum.index.toggle_sidenav_dropdown_accessible_label')}\n      >\n        {this.navItems().toArray()}\n      </SelectDropdown>\n    );\n\n    return items;\n  }\n\n  navItems() {\n    return IndexPage.prototype.navItems();\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/SubtreeRetainer'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Dropdown'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/highlight'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/utils/slidable'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport Page from 'flarum/common/components/Page';\n\nexport default class PollPage extends Page {\n  view(): Mithril.Children {\n    return <p>PollPage</p>;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/abbreviateNumber'];","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport type { PollListParams } from '../../states/PollListState';\nimport SubtreeRetainer from 'flarum/common/utils/SubtreeRetainer';\nimport classList from 'flarum/common/utils/classList';\nimport Dropdown from 'flarum/common/components/Dropdown';\nimport Link from 'flarum/common/components/Link';\nimport highlight from 'flarum/common/helpers/highlight';\nimport slidable from 'flarum/forum/utils/slidable';\nimport icon from 'flarum/common/helpers/icon';\nimport PollPage from './PollPage';\nimport abbreviateNumber from 'flarum/common/utils/abbreviateNumber';\nimport Poll from '../../models/Poll';\nimport PollControls from '../../utils/PollControls';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport listItems from 'flarum/common/helpers/listItems';\n\nexport interface IPollListItemAttrs extends ComponentAttrs {\n  poll: Poll;\n  params: PollListParams;\n}\n\n/**\n * The `PollListItem` component shows a single poll in the\n * poll list.\n */\nexport default class PollListItem<CustomAttrs extends IPollListItemAttrs = IPollListItemAttrs> extends Component<CustomAttrs> {\n  /**\n   * Ensures that the poll will not be redrawn\n   * unless new data comes in.\n   */\n  subtree!: SubtreeRetainer;\n  poll!: Poll;\n\n  highlightRegExp?: RegExp;\n\n  oninit(vnode: Mithril.Vnode<CustomAttrs, this>) {\n    super.oninit(vnode);\n\n    this.poll = this.attrs.poll;\n\n    this.subtree = new SubtreeRetainer(\n      () => this.poll.freshness,\n      () => {\n        const time = app.session.user && app.session.user.markedAllAsReadAt();\n        return time && time.getTime();\n      },\n      () => this.active()\n    );\n  }\n\n  elementAttrs() {\n    return {\n      className: classList('PollListItem', {\n        active: this.active(),\n        'PollListItem--hidden': this.poll.isHidden(),\n        Slidable: 'ontouchstart' in window,\n      }),\n    };\n  }\n\n  view() {\n    const controls = PollControls.controls(this.poll, this).toArray();\n    const attrs = this.elementAttrs();\n\n    return (\n      <div {...attrs}>\n        {this.controlsView(controls)}\n        {this.contentView()}\n        {this.slidableUnderneathView()}\n      </div>\n    );\n  }\n\n  controlsView(controls: Mithril.ChildArray): Mithril.Children {\n    return (\n      !!controls.length && (\n        <Dropdown\n          icon=\"fas fa-ellipsis-v\"\n          className=\"UserCard-controls PollListItem-controls\"\n          menuClassName=\"Dropdown-menu--right\"\n          buttonClassName=\"Button Button--icon Button--flat\"\n          accessibleToggleLabel={app.translator.trans('fof-polls.forum.poll_controls.toggle_dropdown_accessible_label')}\n        >\n          {controls}\n        </Dropdown>\n      )\n    );\n  }\n\n  slidableUnderneathView(): Mithril.Children {\n    const isUnread = this.poll.isUnread();\n\n    return (\n      <span\n        className={classList('Slidable-underneath Slidable-underneath--left Slidable-underneath--elastic', { disabled: !isUnread })}\n        onclick={this.markAsRead.bind(this)}\n      >\n        {icon('fas fa-check')}\n      </span>\n    );\n  }\n\n  contentView(): Mithril.Children {\n    // const isUnread = this.poll.isUnread();\n    // const isRead = this.poll.isRead();\n\n    return (\n      //   <div className={classList('PollListItem-content', 'Slidable-content', { unread: isUnread, read: isRead })}>\n      <div className={classList('PollListItem-content')}>\n        {this.mainView()}\n        {this.infoView()}\n      </div>\n    );\n  }\n\n  mainView(): Mithril.Children {\n    return (\n      <Link href={app.route('fof.polls.view', { id: this.poll.id() })} className=\"PollListItem-main\">\n        <h2 className=\"PollListItem-title\">{highlight(this.poll.question(), this.highlightRegExp)}</h2>\n      </Link>\n    );\n  }\n\n  infoView() {\n    return (\n      <div>\n        {this.poll.subtitle() && <p className=\"PollListItem-subtitle helpText\">{this.poll.subtitle()}</p>}\n        <ul className=\"UserCard-info\">{listItems(this.infoItems().toArray())}</ul>\n      </div>\n    );\n  }\n\n  oncreate(vnode: Mithril.VnodeDOM<CustomAttrs, this>) {\n    super.oncreate(vnode);\n\n    // If we're on a touch device, set up the discussion row to be slidable.\n    // This allows the user to drag the row to either side of the screen to\n    // reveal controls.\n    if ('ontouchstart' in window) {\n      const slidableInstance = slidable(this.element);\n\n      this.$('.PollListItem-controls').on('hidden.bs.dropdown', () => slidableInstance.reset());\n    }\n  }\n\n  onbeforeupdate(vnode: Mithril.VnodeDOM<CustomAttrs, this>) {\n    super.onbeforeupdate(vnode);\n\n    return this.subtree.needsRebuild();\n  }\n\n  /**\n   * Determine whether or not the discussion is currently being viewed.\n   */\n  active() {\n    return app.current.matches(PollPage, { poll: this.poll });\n  }\n\n  /**\n   * Mark the poll as read.\n   */\n  markAsRead() {\n    if (this.poll.isUnread()) {\n      this.poll.save({ lastVotedNumber: this.poll.voteCount() });\n      m.redraw();\n    }\n  }\n\n  infoItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n    const active = !this.poll.hasEnded();\n    const activeView = this.poll.endDate()\n      ? [\n          icon('fas fa-clock'),\n          ' ',\n          active\n            ? app.translator.trans('fof-polls.forum.days_remaining', { time: dayjs(this.poll.endDate()).fromNow() })\n            : app.translator.trans('fof-polls.forum.poll_ended'),\n        ]\n      : [icon('fas fa-om'), ' ', app.translator.trans('fof-polls.forum.poll_never_ends')];\n\n    items.add('active', <span className={classList('UserCard-lastSeen', { active })}>{activeView}</span>);\n\n    const voteCount = this.poll.voteCount();\n    if (voteCount !== undefined) {\n      items.add(\n        'discussion-count',\n        <div className=\"userStat\">\n          {icon('fas fa-poll fa-fw')}\n          {[\n            ' ',\n            app.translator.trans('fof-polls.forum.polls_count', {\n              count: abbreviateNumber(voteCount),\n            }),\n          ]}\n        </div>,\n        70\n      );\n    }\n\n    return items;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Placeholder'];","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport PollListItem from './PollListItem';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Placeholder from 'flarum/common/components/Placeholder';\nimport classList from 'flarum/common/utils/classList';\n\n/**\n * The `PollList` component displays a list of polls.\n */\nexport default class PollList extends Component {\n  view() {\n    /**\n     * @type {import('../../states/PollListState').default}\n     */\n    const state = this.attrs.state;\n    const params = state.getParams();\n    const isLoading = state.isInitialLoading() || state.isLoadingNext();\n\n    let loading;\n\n    if (isLoading) {\n      loading = <LoadingIndicator />;\n    } else if (state.hasNext()) {\n      loading = (\n        <Button className=\"Button\" onclick={state.loadNext.bind(state)}>\n          {app.translator.trans('fof-polls.forum.polls_list.load_more_button')}\n        </Button>\n      );\n    }\n\n    if (state.isEmpty()) {\n      const text = app.translator.trans('fof-polls.forum.polls_list.empty_text');\n      return (\n        <div className=\"PollList\">\n          <Placeholder text={text} />\n        </div>\n      );\n    }\n\n    const pageSize = state.pageSize;\n\n    return (\n      <div className={classList('PollList', { 'PollList--searchResults': state.isSearchResults() })}>\n        <ul aria-busy={isLoading} className=\"PollList-polls\">\n          {state.getPages().map((pg) => {\n            return pg.items.map((poll) => (\n              <li key={poll.id()} data-id={poll.id()}>\n                <PollListItem poll={poll} params={params} />\n              </li>\n            ));\n          })}\n        </ul>\n        <div className=\"PollList-loadMore\">{loading}</div>\n      </div>\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/LogInModal'];","export default function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : String(i);\n}","import _typeof from \"./typeof.js\";\nexport default function toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/states/PaginatedListState'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/EventEmitter'];","import app from 'flarum/forum/app';\nimport PaginatedListState, { Page, PaginatedListParams, PaginatedListRequestParams } from 'flarum/common/states/PaginatedListState';\nimport Poll from '../models/Poll';\nimport { ApiResponsePlural } from 'flarum/common/Store';\nimport EventEmitter from 'flarum/common/utils/EventEmitter';\n\nexport interface PollListParams extends PaginatedListParams {\n  sort?: string;\n}\n\nconst globalEventEmitter = new EventEmitter();\n\nexport default class PollListState<P extends PollListParams = PollListParams> extends PaginatedListState<Poll, P> {\n  protected extraPolls: Poll[] = [];\n  protected eventEmitter: EventEmitter;\n\n  constructor(params: P, page: number = 1) {\n    super(params, page, 20);\n\n    this.eventEmitter = globalEventEmitter.on('poll.deleted', this.deletePoll.bind(this));\n  }\n\n  get type(): string {\n    return 'fof/polls';\n  }\n\n  requestParams(): PaginatedListRequestParams {\n    const params = {\n      include: ['options', 'votes'],\n      filter: this.params.filter || {},\n      sort: this.sortMap()[this.params.sort ?? ''],\n    };\n\n    if (this.params.q) {\n      params.filter.q = this.params.q;\n    }\n\n    return params;\n  }\n\n  protected loadPage(page: number = 1): Promise<ApiResponsePlural<Poll>> {\n    const preloadedPolls = app.preloadedApiDocument<Poll[]>();\n\n    if (preloadedPolls) {\n      this.initialLoading = false;\n\n      return Promise.resolve(preloadedPolls);\n    }\n\n    return super.loadPage(page);\n  }\n\n  clear(): void {\n    super.clear();\n\n    this.extraPolls = [];\n  }\n\n  /**\n   * Get a map of sort keys (which appear in the URL, and are used for\n   * translation) to the API sort value that they represent.\n   */\n  sortMap() {\n    const map: any = {};\n\n    if (this.params.q) {\n      map.relevance = '';\n    }\n    map.newest = '-createdAt';\n    map.oldest = 'createdAt';\n\n    return map;\n  }\n\n  /**\n   * In the last request, has the user searched for a poll?\n   */\n  isSearchResults(): boolean {\n    return !!this.params.q;\n  }\n\n  removePoll(poll: Poll): void {\n    this.eventEmitter.emit('poll.deleted', poll);\n  }\n\n  deletePoll(poll: Poll): void {\n    for (const page of this.pages) {\n      const index = page.items.indexOf(poll);\n\n      if (index !== -1) {\n        page.items.splice(index, 1);\n        break;\n      }\n    }\n\n    const index = this.extraPolls.indexOf(poll);\n\n    if (index !== -1) {\n      this.extraPolls.splice(index);\n    }\n\n    m.redraw();\n  }\n\n  /**\n   * Add a poll to the top of the list.\n   */\n  addPoll(poll: Poll): void {\n    this.removePoll(poll);\n    this.extraPolls.unshift(poll);\n\n    m.redraw();\n  }\n\n  protected getAllItems(): Poll[] {\n    return this.extraPolls.concat(super.getAllItems());\n  }\n\n  public getPages(): Page<Poll>[] {\n    const pages = super.getPages();\n\n    if (this.extraPolls.length) {\n      return [\n        {\n          number: -1,\n          items: this.extraPolls,\n        },\n        ...pages,\n      ];\n    }\n\n    return pages;\n  }\n}\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}","import type Mithril from 'mithril';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\n\ninterface PollOptionLabelAttrs extends ComponentAttrs {\n  text: String;\n  id: Number;\n}\n\nexport default class PollOptionLabel extends Component<PollOptionLabelAttrs> {\n  view(): Mithril.Children {\n    return (\n      <span id={`vote_${this.attrs.id}_label`} className=\"PollOption-label\">\n        {this.attrs.text}\n      </span>\n    );\n  }\n}\n","import type Mithril from 'mithril';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\n\ninterface PollOptionInputAttrs extends ComponentAttrs {\n  id: Number; // for example 1\n  name: String; // for example privacy-setting\n  value: String; // for example Private to Project Members\n  isResult?: Boolean;\n  onchange: (e: Event) => void;\n}\n\nexport default class PollOptionInput extends Component<PollOptionInputAttrs> {\n  view(): Mithril.Children {\n    const { isResult } = this.attrs;\n    return (\n      <input\n        type=\"radio\"\n        name={this.attrs.name}\n        value={this.attrs.value}\n        style={{ opacity: isResult ? 0 : 1 }}\n        className=\"PollOption-input\"\n        aria-labelledby={`${this.attrs.name}-${this.attrs.id}-label`}\n        aria-describedby={`${this.attrs.name}-${this.attrs.id}-description`}\n        onchange={this.attrs.onchange}\n      />\n    );\n  }\n}\n","import type Mithril from 'mithril';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport PollOptionLabel from './PollOptionLabel';\nimport PollOptionInput from './PollOptionInput';\nimport PollOptionModel from '../../models/PollOption';\n\ninterface PollOptionAttrs extends ComponentAttrs {\n  option: PollOptionModel;\n  onchange: (e: Event) => void;\n}\n\nexport default class PollOption extends Component<PollOptionAttrs> {\n  view(): Mithril.Children {\n    const option = this.attrs.option;\n    return (\n      <label className=\"PollOption\">\n        <PollOptionInput id={option.id()} isResult={false} name=\"vote\" value=\"Vote for this option\" onchange={this.attrs.onchange} />\n        <span className=\"PollOption-information\">\n          <PollOptionLabel id={option.id()} text={option.answer()} />\n        </span>\n      </label>\n    );\n  }\n}\n","import type Mithril from 'mithril';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\n\ninterface PollResultsNumberAttrs extends ComponentAttrs {\n  number: Number;\n}\n\nexport default class PollResultsNumber extends Component<PollResultsNumberAttrs> {\n  view(): Mithril.Children {\n    return <span className=\"PollResult-number\">{this.attrs.number} %</span>;\n  }\n}\n","import type Mithril from 'mithril';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport PollOptionLabel from './PollOptionLabel';\nimport PollResultsNumber from './PollResultNumber';\nimport PollOptionInput from './PollOptionInput';\nimport PollOptionModel from '../../models/PollOption';\nimport PollState from '../../states/PollState';\nimport abbreviateNumber from 'flarum/common/utils/abbreviateNumber';\n\ninterface PollResultsAttrs extends ComponentAttrs {\n  option: PollOptionModel;\n  state: PollState;\n}\n\nexport default class PollResults extends Component<PollResultsAttrs> {\n  view(): Mithril.Children {\n    const option = this.attrs.option;\n    const state = this.attrs.state;\n    let voteCount = option.voteCount();\n    if (!voteCount) {\n      voteCount = 0;\n    } else {\n      voteCount = (voteCount * 100) / state.overallVoteCount();\n    }\n\n    return (\n      <label className=\"PollResult\">\n        <PollOptionInput id={option.id()} isResult={false} name=\"vote\" value=\"Vote for this option\" />\n        <span className=\"PollResult-information\">\n          <div className=\"PollResult-row\">\n            <PollOptionLabel text={option.answer()} />\n            <PollResultsNumber number={abbreviateNumber(voteCount)} />\n          </div>\n\n          <progress type=\"range\" min=\"0\" max={state.overallVoteCount()} value={voteCount} className=\"PollResult-bar\" />\n        </span>\n      </label>\n    );\n  }\n}\n","import type Mithril from 'mithril';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport PollOption from './PollOption';\nimport PollOptionModel from '../../models/PollOption';\nimport PollResult from './PollResult';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport PollState from '../../states/PollState';\n\ninterface PollOptionsAttrs extends ComponentAttrs {\n  options: PollOptionModel[];\n  state: PollState;\n}\n\nexport default class PollOptions extends Component<PollOptionsAttrs> {\n  view(): Mithril.Children {\n    return <div className=\"Poll-options list-layout\">{this.pollOptions().toArray()}</div>;\n  }\n\n  pollOptions(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n    const state = this.attrs.state;\n\n    if (state.showCheckMarks) {\n      this.attrs.options.forEach((option: PollOptionModel): void => {\n        items.add('option' + option.id(), <PollOption option={option} onchange={state.changeVote.bind(state, option)} />);\n      });\n    } else {\n      this.attrs.options.forEach((option: PollOptionModel): void => {\n        items.add('result' + option.id(), <PollResult option={option} state={state} />);\n      });\n    }\n\n    return items;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/avatar'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/username'];","import app from 'flarum/forum/app';\n\nimport Modal from 'flarum/common/components/Modal';\nimport avatar from 'flarum/common/helpers/avatar';\nimport username from 'flarum/common/helpers/username';\nimport Link from 'flarum/common/components/Link';\nimport Stream from 'flarum/common/utils/Stream';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\n\nexport default class ListVotersModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.loading = Stream(true);\n\n    app.store\n      .find('fof/polls', this.attrs.poll.id(), {\n        include: 'votes,votes.user,votes.option',\n      })\n      .then(() => this.loading(false))\n      .finally(() => m.redraw());\n  }\n\n  className() {\n    return 'Modal--medium VotesModal';\n  }\n\n  title() {\n    return app.translator.trans('fof-polls.forum.votes_modal.title');\n  }\n\n  content() {\n    return <div className=\"Modal-body\">{this.loading() ? <LoadingIndicator /> : this.attrs.poll.options().map(this.optionContent.bind(this))}</div>;\n  }\n\n  optionContent(opt) {\n    const votes = (this.attrs.poll.votes() || []).filter((v) => opt.id() === v.option().id());\n\n    return (\n      <div className=\"VotesModal-option\">\n        <h2>{opt.answer() + ':'}</h2>\n\n        {votes.length ? (\n          <div className=\"VotesModal-list\">{votes.map(this.voteContent.bind(this))}</div>\n        ) : (\n          <h4>{app.translator.trans('fof-polls.forum.modal.no_voters')}</h4>\n        )}\n      </div>\n    );\n  }\n\n  voteContent(vote) {\n    const user = vote.user();\n    const attrs = user && { href: app.route.user(user) };\n\n    return (\n      <Link {...attrs}>\n        {avatar(user)} {username(user)}\n      </Link>\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport Poll from '../models/Poll';\nimport LogInModal from 'flarum/forum/components/LogInModal';\nimport PollOption from '../models/PollOption';\nimport PollVote from '../models/PollVote';\nimport ListVotersModal from '../components/ListVotersModal';\n\nexport default class PollState {\n  protected poll: Poll;\n  protected pendingSubmit: boolean;\n  protected pendingOptions: Set<string> | null;\n  public loadingOptions: boolean;\n  public useSubmitUI: boolean;\n  public showCheckMarks: boolean;\n\n  constructor(poll: Poll) {\n    this.poll = poll;\n    this.pendingSubmit = false;\n    this.pendingOptions = null;\n    this.loadingOptions = false;\n    this.useSubmitUI = !poll?.canChangeVote() && poll?.allowMultipleVotes();\n    this.showCheckMarks = !app.session.user || (!poll.hasEnded() && poll.canVote() && (!this.hasVoted() || poll.canChangeVote()));\n  }\n\n  hasVoted() {\n    return this.poll.myVotes().length > 0;\n  }\n\n  overallVoteCount() {\n    const options = this.poll.options();\n    return Math.max(\n      100,\n      (options ? options : []).reduce((max, option) => max + option!.voteCount(), 0)\n    );\n  }\n\n  showButton() {\n    return this.useSubmitUI && this.pendingSubmit;\n  }\n\n  changeVote(option: PollOption, evt: Event) {\n    const target = evt.target as HTMLInputElement;\n\n    if (!app.session.user) {\n      app.modal.show(LogInModal);\n      target.checked = false;\n      return;\n    }\n\n    const optionIds = this.pendingOptions || new Set(this.poll.myVotes().map((v: PollVote) => v.option().id()));\n    const isUnvoting = optionIds.delete(option.id()!);\n    const allowsMultiple = this.poll.allowMultipleVotes();\n\n    if (!allowsMultiple) {\n      optionIds.clear();\n    }\n\n    if (!isUnvoting) {\n      optionIds.add(option.id()!);\n    }\n\n    this.pendingOptions = optionIds.size ? optionIds : null;\n    this.pendingSubmit = !!this.pendingOptions;\n    m.redraw();\n  }\n\n  hasSelectedOptions(): boolean {\n    return this.pendingSubmit;\n  }\n\n  onsubmit(): Promise<void> {\n    return this.submit(this.pendingOptions!, () => {\n      this.pendingOptions = null;\n      this.pendingSubmit = false;\n    });\n  }\n\n  submit(optionIds: Set<string>, cb: Function | null, onerror: Function | null = null) {\n    this.loadingOptions = true;\n    m.redraw();\n\n    return app\n      .request({\n        method: 'PATCH',\n        url: `${app.forum.attribute('apiUrl')}/fof/polls/${this.poll.id()}/votes`,\n        body: {\n          data: {\n            optionIds: Array.from(optionIds),\n          },\n        },\n      })\n      .then((res) => {\n        app.store.pushPayload(res);\n        cb?.();\n      })\n      .catch((err) => {\n        onerror?.(err);\n      })\n      .finally(() => {\n        this.loadingOptions = false;\n        this.showCheckMarks = false;\n        m.redraw();\n      });\n  }\n\n  showVoters = () => {\n    // Load all the votes only when opening the votes list\n    app.modal.show(ListVotersModal, {\n      poll: this.poll,\n    });\n  };\n\n  /**\n   * Attempting to use the `tooltipVisible` attr on the Tooltip component set to 'false' when no vote count\n   * caused the tooltip to break on click. This is a workaround to hide the tooltip when no vote count is available,\n   * called on 'onremove' of the Tooltip component. It doesn't always work as intended either, but it does the job.\n   */\n  hideOptionTooltip(vnode) {\n    vnode.attrs.tooltipVisible = false;\n    vnode.state.updateVisibility();\n  }\n\n  /**\n   * Alert before navigating away using browser's 'beforeunload' event\n   */\n  preventClose = (e: Event): boolean | void => {\n    if (this.pendingOptions) {\n      e.preventDefault();\n      return true;\n    }\n  };\n}\n","import type Mithril from 'mithril';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport app from 'flarum/forum/app';\nimport PollOptions from './Poll/PollOptions';\nimport PollImage from './Poll/PollImage';\nimport PollModel from '../models/Poll';\nimport PollState from '../states/PollState';\nimport Button from 'flarum/common/components/Button';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport PollControls from '../utils/PollControls';\nimport Dropdown from 'flarum/common/components/Dropdown';\n\ninterface PollAttrs extends ComponentAttrs {\n  poll: PollModel;\n}\n\nexport default class PollView extends Component<PollAttrs, PollState> {\n  oninit(vnode: Mithril.Vnode<ComponentAttrs, this>) {\n    super.oninit(vnode);\n    this.state = new PollState(this.attrs.poll);\n  }\n\n  view(): Mithril.Children {\n    const poll = this.attrs.poll;\n    const state = this.state;\n    const controls = PollControls.controls(poll, this);\n\n    controls.add(\n      'view',\n      <Button onclick={state.showVoters} icon=\"fas fa-poll\">\n        {app.translator.trans('fof-polls.forum.public_poll')}\n      </Button>\n    );\n\n    return (\n      <div className=\"Poll\" data-id={poll.id()}>\n        {this.controlsView(controls.toArray())}\n        {/* <div className=\"Poll-image\">\n          <PollImage image={poll.image()} />\n        </div> */}\n        <div className=\"Poll-wrapper\">{this.createMainView().toArray()}</div>\n      </div>\n    );\n  }\n\n  createMainView(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n    const poll = this.attrs.poll;\n\n    items.add('title', <h2 className=\"Poll-title\">{poll.question()}</h2>);\n    items.add('subtitle', <p className=\"Poll-subtitle\">{poll.subtitle()}</p>);\n    items.add('form', <form>{this.createFormItems().toArray()}</form>);\n\n    return items;\n  }\n\n  createFormItems(): ItemList<Mithril.Children> {\n    const state = this.state;\n    const items = new ItemList<Mithril.Children>();\n    const poll = this.attrs.poll;\n    const infoItems = this.infoItems(poll.maxVotes());\n\n    items.add(\n      'elements',\n      <fieldset>\n        <legend className=\"sr-only\">app.translator.trans('fof-polls.forum.answers')</legend>\n        <PollOptions options={poll.options()} state={state} />\n      </fieldset>\n    );\n    items.add(\n      'sticky',\n      <div className=\"Poll-sticky\">\n        {!infoItems.isEmpty() && <div className=\"helpText PollInfoText\">{infoItems.toArray()}</div>}\n        <Button\n          className=\"Button Button--primary Poll-submit\"\n          loading={state.loadingOptions}\n          onclick={state.onsubmit.bind(state)}\n          disabled={!state.hasSelectedOptions()}\n        >\n          {app.translator.trans('fof-polls.forum.poll.submit_button')}\n        </Button>\n      </div>\n    );\n    return items;\n  }\n\n  deletePoll(): void {\n    PollControls.deleteAction(this.attrs.poll);\n  }\n\n  editPoll(): void {\n    PollControls.editAction(this.attrs.poll);\n  }\n\n  controlsView(controls: Mithril.ChildArray): Mithril.Children {\n    return (\n      !!controls.length && (\n        <Dropdown\n          icon=\"fas fa-ellipsis-v\"\n          className=\"PollListItem-controls\"\n          menuClassName=\"Dropdown-menu--right\"\n          buttonClassName=\"Button Button--icon Button--flat\"\n          accessibleToggleLabel={app.translator.trans('fof-polls.forum.poll_controls.toggle_dropdown_accessible_label')}\n        >\n          {controls}\n        </Dropdown>\n      )\n    );\n  }\n\n  infoItems(maxVotes: number) {\n    const items = new ItemList<Mithril.Children>();\n    const poll = this.attrs.poll;\n\n    if (app.session.user && !poll.canVote() && !poll.hasEnded()) {\n      items.add(\n        'no-permission',\n        <span>\n          <i className=\"icon fas fa-times-circle fa-fw\" />\n          {app.translator.trans('fof-polls.forum.no_permission')}\n        </span>\n      );\n    }\n\n    if (poll.endDate()) {\n      items.add(\n        'end-date',\n        <span>\n          <i class=\"icon fas fa-clock fa-fw\" />\n          {poll.hasEnded()\n            ? app.translator.trans('fof-polls.forum.poll_ended')\n            : app.translator.trans('fof-polls.forum.days_remaining', { time: dayjs(poll.endDate()).fromNow() })}\n        </span>\n      );\n    }\n\n    if (poll.canVote()) {\n      items.add(\n        'max-votes',\n        <span>\n          <i className=\"icon fas fa-poll fa-fw\" />\n          {app.translator.trans('fof-polls.forum.max_votes_allowed', { max: maxVotes })}\n        </span>\n      );\n\n      if (!poll.canChangeVote()) {\n        items.add(\n          'cannot-change-vote',\n          <span>\n            <i className={`icon fas fa-${this.state.hasVoted() ? 'times' : 'exclamation'}-circle fa-fw`} />\n            {app.translator.trans('fof-polls.forum.poll.cannot_change_vote')}\n          </span>\n        );\n      }\n    }\n\n    return items;\n  }\n}\n","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport listItems from 'flarum/common/helpers/listItems';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Page, { IPageAttrs } from 'flarum/common/components/Page';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport PollList from './Poll/PollList';\nimport LogInModal from 'flarum/forum/components/LogInModal';\nimport extractText from 'flarum/common/utils/extractText';\nimport PollListState from '../states/PollListState';\nimport Button from 'flarum/common/components/Button';\nimport SelectDropdown from 'flarum/common/components/SelectDropdown';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport PollModel from '../models/Poll';\nimport PollView from './PollView';\n\nexport default class PollsPage extends Page<IPageAttrs, PollListState> {\n  loading: boolean = false;\n  poll: PollModel | null = null;\n\n  oninit(vnode: Mithril.Vnode) {\n    super.oninit(vnode);\n\n    this.state = new PollListState({\n      sort: m.route.param('sort'),\n      filter: m.route.param('filter'),\n    });\n\n    this.state.refresh();\n\n    app.setTitle(extractText(app.translator.trans('fof-polls.forum.page.nav')));\n  }\n\n  oncreate(vnode: Mithril.Vnode) {\n    super.oncreate(vnode);\n  }\n\n  view(): Mithril.Children {\n    if (this.loading) {\n      return <LoadingIndicator />;\n    }\n\n    if (this.poll) {\n      return (\n        <div className=\"PollsPage\">\n          <div className=\"container\">\n            <PollView poll={this.poll} />\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"PollsPage\">\n        {IndexPage.prototype.hero()}\n        <div className=\"container\">\n          <div className=\"sideNavContainer\">\n            <nav className=\"PollsPage-nav sideNav\">\n              <ul>{listItems(this.sidebarItems().toArray())}</ul>\n            </nav>\n            <div className=\"PollsPage-results sideNavOffset\">\n              <div className=\"IndexPage-toolbar\">\n                <ul className=\"IndexPage-toolbar-view\">{listItems(this.viewItems().toArray())}</ul>\n                <ul className=\"IndexPage-toolbar-action\">{listItems(this.actionItems().toArray())}</ul>\n              </div>\n              <PollList state={this.state} />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  sidebarItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n    const canStartPoll = app.forum.attribute<boolean>('canStartGlobalPolls');\n\n    items.add(\n      'newGlobalPoll',\n      <Button\n        icon=\"fas fa-edit\"\n        className=\"Button Button--primary App-primaryControl PollsPage-newPoll\"\n        itemClassName=\"App-primaryControl\"\n        onclick={() => {\n          this.newPollAction();\n        }}\n        disabled={!canStartPoll}\n      >\n        {app.translator.trans(`fof-polls.forum.poll.${canStartPoll ? 'start_poll_button' : 'cannot_start_poll_button'}`)}\n      </Button>\n    );\n\n    items.add(\n      'nav',\n      <SelectDropdown\n        buttonClassName=\"Button\"\n        className=\"App-titleControl\"\n        accessibleToggleLabel={app.translator.trans('core.forum.index.toggle_sidenav_dropdown_accessible_label')}\n      >\n        {this.navItems().toArray()}\n      </SelectDropdown>\n    );\n\n    return items;\n  }\n\n  actionItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add(\n      'refresh',\n      Button.component({\n        title: app.translator.trans('fof-polls.forum.page.refresh_tooltip'),\n        icon: 'fas fa-sync',\n        className: 'Button Button--icon',\n        onclick: () => {\n          this.state.refresh();\n        },\n      })\n    );\n\n    return items;\n  }\n\n  viewItems() {\n    return IndexPage.prototype.viewItems();\n  }\n\n  navItems() {\n    return IndexPage.prototype.navItems();\n  }\n\n  /**\n   * Change to create new poll page\n   */\n  newPollAction(): void {\n    if (!app.session.user) {\n      app.modal.show(LogInModal);\n      return;\n    }\n\n    m.route.set(app.route('fof.polls.compose'));\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Separator'];","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport Poll from '../models/Poll';\nimport Component from 'flarum/common/Component';\nimport ComposePollPage from '../components/ComposePollPage';\nimport PollsPage from '../components/PollsPage';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Separator from 'flarum/common/components/Separator';\nimport Button from 'flarum/common/components/Button';\n\n/**\n * The `UserControls` utility constructs a list of buttons for a user which\n * perform actions on it.\n */\nexport default {\n  /**\n   * Get a list of controls for a user.\n   */\n  controls(poll: Poll, context: Component): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    ['poll', 'moderation', 'destructive'].forEach((section) => {\n      const controls: Mithril.Children[] = this[section + 'Controls'](poll, context).toArray();\n      if (controls.length) {\n        controls.forEach((item) => items.add(item.itemName, item));\n        items.add(section + 'Separator', <Separator />);\n      }\n    });\n\n    return items;\n  },\n\n  /**\n   * Get controls for direct modifcation actions on polls (e.g. vote, view voters).\n   */\n  pollControls(poll: Poll, context: Component): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    return items;\n  },\n\n  /**\n   * Get controls for a user pertaining to moderation (e.g. suspend, edit).\n   */\n  moderationControls(poll: Poll, context: Component): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    if (poll.canEdit()) {\n      items.add(\n        'edit',\n        <Button icon=\"fas fa-pen\" onclick={this.editAction.bind(this, poll)}>\n          {app.translator.trans(`fof-polls.forum.poll_controls.edit_label`)}\n        </Button>\n      );\n    }\n\n    return items;\n  },\n\n  /**\n   * Get controls for a user which are destructive (e.g. delete).\n   * @protected\n   */\n  destructiveControls(poll: Poll, context: Component): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    if (poll.canDelete()) {\n      items.add(\n        'delete',\n        <Button icon=\"fas fa-times\" onclick={this.deleteAction.bind(this, poll)}>\n          {app.translator.trans(`fof-polls.forum.poll_controls.delete_label`)}\n        </Button>\n      );\n    }\n\n    return items;\n  },\n\n  /**\n   * Delete the user.\n   */\n  async deleteAction(poll: Poll): Promise<void> {\n    if (!confirm(app.translator.trans(`fof-polls.forum.poll_controls.delete_confirmation`) as string)) {\n      return;\n    }\n\n    return poll\n      .delete()\n      .then(() => {\n        this.showDeletionAlert(poll, 'success');\n        if (app.current.matches(ComposePollPage, { id: poll.id() }) || app.current.matches(PollsPage, { id: poll.id() })) {\n          app.history.back();\n        } else {\n          window.location.reload();\n        }\n      })\n      .catch(() => this.showDeletionAlert(poll, 'error'));\n  },\n\n  /**\n   * Show deletion alert of poll\n   */\n  showDeletionAlert(poll: Poll, type: string): void {\n    const message = {\n      success: `$fof-polls.forum.poll_controls.delete_success_message`,\n      error: `fof-polls.forum.poll_controls.delete_error_message`,\n    }[type]!;\n\n    app.alerts.show({ type }, app.translator.trans(message, { poll: poll }));\n  },\n\n  /**\n   * Edit the poll.\n   */\n  editAction(poll: Poll): void {\n    m.route.set(app.route('fof.polls.compose', { id: poll.id() }));\n  },\n};\n","import Component from 'flarum/common/Component';\nimport app from 'flarum/forum/app';\nimport Button from 'flarum/common/components/Button';\nimport Switch from 'flarum/common/components/Switch';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Stream from 'flarum/common/utils/Stream';\nimport extractText from 'flarum/common/utils/extractText';\nimport FormError from './form/FormError';\nimport PollFormState from '../states/PollFormState';\nimport PollControls from '../utils/PollControls';\n\nexport default class PollForm extends Component {\n  /** @type {PollFormState} */\n  state;\n\n  /** @type {PollOption[]} */\n  options;\n\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.state = new PollFormState(this.attrs.poll);\n\n    // state handles poll initialization\n    const poll = this.state.poll;\n\n    //@todo way the options are destructured into options (answers) and optionImageUrls\n    this.options = poll.options();\n    this.optionAnswers = this.options.map((o) => Stream(o.answer()));\n    this.optionImageUrls = this.options.map((o) => Stream(o.imageUrl()));\n\n    this.question = Stream(poll.question());\n    this.subtitle = Stream(poll.subtitle());\n    this.endDate = Stream(this.formatDate(poll.endDate()));\n    this.publicPoll = Stream(poll.publicPoll());\n    this.allowMultipleVotes = Stream(poll.allowMultipleVotes());\n    this.hideVotes = Stream(poll.hideVotes());\n    this.allowChangeVote = Stream(poll.allowChangeVote());\n    this.maxVotes = Stream(poll.maxVotes() || 0);\n\n    this.datepickerMinDate = this.formatDate(undefined);\n\n    // Replace minimum of 'today' for poll end date only if the poll is not already closed\n    if (this.endDate() && dayjs(poll.endDate).isAfter(dayjs())) {\n      this.datepickerMinDate = this.formatDate(poll.endDate);\n    }\n  }\n\n  view() {\n    return (\n      <form onsubmit={this.onsubmit.bind(this)}>\n        <div className=\"PollDiscussionModal-form\">{this.fields().toArray()}</div>\n      </form>\n    );\n  }\n\n  fields() {\n    const items = new ItemList();\n\n    items.add(\n      'question',\n      <div className=\"Form-group\">\n        <label className=\"label\">{app.translator.trans('fof-polls.forum.modal.question_placeholder')}</label>\n\n        <input type=\"text\" name=\"question\" className=\"FormControl\" bidi={this.question} />\n      </div>,\n      100\n    );\n\n    items.add(\n      'subtitle',\n      <div className=\"Form-group\">\n        <label className=\"label\">{app.translator.trans('fof-polls.forum.modal.subtitle_placeholder')}</label>\n\n        <input type=\"text\" name=\"subtitle\" className=\"FormControl\" bidi={this.subtitle} />\n      </div>,\n      95\n    );\n\n    items.add(\n      'answers',\n      <div className=\"PollModal--answers Form-group\">\n        <label className=\"label PollModal--answers-title\">\n          <span>{app.translator.trans('fof-polls.forum.modal.options_label')}</span>\n\n          {Button.component({\n            className: 'Button PollModal--button Button--icon small',\n            icon: 'fas fa-plus',\n            onclick: this.addOption.bind(this),\n          })}\n        </label>\n\n        {this.displayOptions()}\n      </div>,\n      80\n    );\n\n    items.add(\n      'date',\n      <div className=\"Form-group\">\n        <label className=\"label\">{app.translator.trans('fof-polls.forum.modal.date_placeholder')}</label>\n\n        <div className=\"PollModal--date\">\n          <input\n            className=\"FormControl\"\n            type=\"datetime-local\"\n            name=\"date\"\n            bidi={this.endDate}\n            min={this.datepickerMinDate}\n            max={this.formatDate('2038')}\n          />\n          {Button.component({\n            className: 'Button PollModal--button Button--icon',\n            icon: 'fas fa-times',\n            onclick: this.endDate.bind(this, null),\n          })}\n        </div>\n\n        {this.endDate() && (\n          <p className=\"helpText\">\n            <i class=\"icon fas fa-clock\" />\n            &nbsp;\n            {dayjs(this.endDate()).isBefore(dayjs())\n              ? app.translator.trans('fof-polls.forum.poll_ended')\n              : app.translator.trans('fof-polls.forum.days_remaining', { time: dayjs(this.endDate()).fromNow() })}\n          </p>\n        )}\n      </div>,\n      40\n    );\n\n    items.add(\n      'public',\n      <div className=\"Form-group\">\n        {Switch.component(\n          {\n            state: this.publicPoll() || false,\n            onchange: this.publicPoll,\n          },\n          app.translator.trans('fof-polls.forum.modal.public_poll_label')\n        )}\n      </div>,\n      20\n    );\n\n    items.add(\n      'hide-votes',\n      <div className=\"Form-group\">\n        <Switch state={this.endDate() && this.hideVotes()} onchange={this.hideVotes} disabled={!this.endDate()}>\n          {app.translator.trans('fof-polls.forum.modal.hide_votes_label')}\n        </Switch>\n      </div>,\n      20\n    );\n\n    items.add(\n      'allow-change-vote',\n      <div className=\"Form-group\">\n        <Switch state={this.allowChangeVote()} onchange={this.allowChangeVote}>\n          {app.translator.trans('fof-polls.forum.modal.allow_change_vote_label')}\n        </Switch>\n      </div>,\n      20\n    );\n\n    items.add(\n      'allow-multiple-votes',\n      <div className=\"Form-group\">\n        {Switch.component(\n          {\n            state: this.allowMultipleVotes() || false,\n            onchange: this.allowMultipleVotes,\n          },\n          app.translator.trans('fof-polls.forum.modal.allow_multiple_votes_label')\n        )}\n      </div>,\n      15\n    );\n\n    if (this.allowMultipleVotes()) {\n      items.add(\n        'max-votes',\n        <div className=\"Form-group\">\n          <label className=\"label\">{app.translator.trans('fof-polls.forum.modal.max_votes_label')}</label>\n\n          <input type=\"number\" min=\"0\" max={this.options.length} name=\"maxVotes\" className=\"FormControl\" bidi={this.maxVotes} />\n\n          <p className=\"helpText\">{app.translator.trans('fof-polls.forum.modal.max_votes_help')}</p>\n        </div>,\n        15\n      );\n    }\n\n    items.add(\n      'submit',\n      <div className=\"Form-group\">\n        <Button type=\"submit\" className=\"Button Button--primary PollModal-SubmitButton\" icon=\"fas fa-save\" loading={this.state.loading}>\n          {app.translator.trans('fof-polls.forum.modal.submit')}\n        </Button>\n        {this.state.poll.exists && (\n          <Button className=\"Button Button--secondary\" icon=\"fas fa-trash-alt\" loading={this.state.deleting} onclick={this.delete.bind(this)}>\n            {app.translator.trans('fof-polls.forum.modal.delete')}\n          </Button>\n        )}\n      </div>,\n      -10\n    );\n\n    return items;\n  }\n\n  displayOptions() {\n    return Object.keys(this.options).map((option, i) => (\n      <div className=\"Form-group\">\n        <fieldset className=\"Poll-answer-input\">\n          <input\n            className=\"FormControl\"\n            type=\"text\"\n            name={'answer' + (i + 1)}\n            bidi={this.optionAnswers[i]}\n            placeholder={app.translator.trans('fof-polls.forum.modal.option_placeholder') + ' #' + (i + 1)}\n          />\n          {app.forum.attribute('allowPollOptionImage') ? (\n            <input\n              className=\"FormControl\"\n              type=\"text\"\n              name={'answerImage' + (i + 1)}\n              bidi={this.optionImageUrls[i]}\n              placeholder={app.translator.trans('fof-polls.forum.modal.image_option_placeholder') + ' #' + (i + 1)}\n            />\n          ) : null}\n        </fieldset>\n        {i >= 2\n          ? Button.component({\n              type: 'button',\n              className: 'Button PollModal--button Button--icon',\n              icon: 'fas fa-minus',\n              onclick: i >= 2 ? this.removeOption.bind(this, i) : '',\n            })\n          : ''}\n      </div>\n    ));\n  }\n\n  addOption() {\n    const max = Math.max(app.forum.attribute('pollMaxOptions'), 2);\n\n    if (this.options.length < max) {\n      this.options.push(app.store.createRecord('poll_options'));\n      this.optionAnswers.push(Stream(''));\n      this.optionImageUrls.push(Stream(''));\n    } else {\n      alert(extractText(app.translator.trans('fof-polls.forum.modal.max', { max })));\n    }\n  }\n\n  removeOption(i) {\n    this.options.splice(i, 1);\n    this.optionAnswers.splice(i, 1);\n    this.optionImageUrls.splice(i, 1);\n  }\n\n  data() {\n    if (this.question() === '') {\n      throw new FormError(app.translator.trans('fof-polls.forum.modal.include_question'));\n    }\n\n    if (this.options.length < 2) {\n      throw new FormError(app.translator.trans('fof-polls.forum.modal.min'));\n    }\n\n    const pollExists = this.state.poll.exists;\n    const options = this.options.map((option, i) => {\n      option.pushAttributes({\n        answer: this.optionAnswers[i](),\n        imageUrl: this.optionImageUrls[i](),\n      });\n\n      return pollExists ? option.data : option.data.attributes;\n    });\n\n    return {\n      question: this.question(),\n      subtitle: this.subtitle(),\n      endDate: this.dateToTimestamp(this.endDate()),\n      publicPoll: this.publicPoll(),\n      hideVotes: this.hideVotes(),\n      allowChangeVote: this.allowChangeVote(),\n      allowMultipleVotes: this.allowMultipleVotes(),\n      maxVotes: this.maxVotes(),\n      options,\n    };\n  }\n\n  async onsubmit(event) {\n    event.preventDefault();\n\n    try {\n      await this.attrs.onsubmit(this.data(), this.state);\n    } catch (error) {\n      if (error instanceof FormError) {\n        app.alerts.show({ type: 'error' }, error.message);\n      } else {\n        console.error(error);\n        // Show error alert\n        app.alerts.show({ type: 'error' }, app.translator.trans('fof-polls.forum.modal.error'));\n      }\n    }\n  }\n\n  async delete() {\n    this.state.loading = true;\n    try {\n      await PollControls.deleteAction(this.state.poll);\n      this.state.deleting = true;\n    } finally {\n      this.state.loading = false;\n      m.redraw();\n    }\n  }\n\n  formatDate(date, def = false) {\n    const dayjsDate = dayjs(date);\n\n    if (date === false || !dayjsDate.isValid()) return def !== false ? this.formatDate(def) : null;\n\n    return dayjsDate.format('YYYY-MM-DDTHH:mm');\n  }\n\n  dateToTimestamp(date) {\n    const dayjsDate = dayjs(date);\n\n    if (!date || !dayjsDate.isValid()) return false;\n\n    return dayjsDate.format();\n  }\n}\n","import app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport PollForm from './PollForm';\n\nexport default class CreatePollModal extends Modal {\n  title() {\n    return app.translator.trans('fof-polls.forum.modal.add_title');\n  }\n\n  className() {\n    return 'PollDiscussionModal Modal--medium';\n  }\n\n  content() {\n    return [\n      <div className=\"Modal-body\">\n        <PollForm poll={this.attrs.poll} onsubmit={this.onsubmit.bind(this)}></PollForm>\n      </div>,\n    ];\n  }\n\n  onsubmit(data) {\n    this.hide();\n    this.attrs.onsubmit(data);\n  }\n}\n","import app from 'flarum/forum/app';\n\nimport { extend } from 'flarum/common/extend';\nimport classList from 'flarum/common/utils/classList';\nimport DiscussionComposer from 'flarum/forum/components/DiscussionComposer';\nimport ReplyComposer from 'flarum/forum/components/ReplyComposer';\n\nimport CreatePollModal from './components/CreatePollModal';\n\nexport const addToComposer = (composer) => {\n  composer.prototype.addPoll = function () {\n    app.modal.show(CreatePollModal, {\n      poll: this.composer.fields.poll,\n      onsubmit: (poll) => (this.composer.fields.poll = poll),\n    });\n  };\n\n  // Add button to DiscussionComposer header\n  extend(composer.prototype, 'headerItems', function (items) {\n    const discussion = this.composer.body?.attrs?.discussion;\n    const canStartPoll = discussion?.canStartPoll() ?? app.forum.canStartPolls();\n\n    if (canStartPoll) {\n      items.add(\n        'polls',\n        <a className=\"ComposerBody-poll\" onclick={this.addPoll.bind(this)}>\n          <span className={classList('PollLabel', !this.composer.fields.poll && 'none')}>\n            {app.translator.trans(`fof-polls.forum.composer_discussion.${this.composer.fields.poll ? 'edit' : 'add'}_poll`)}\n          </span>\n        </a>,\n        1\n      );\n    }\n  });\n\n  extend(composer.prototype, 'data', function (data) {\n    if (this.composer.fields.poll) {\n      data.poll = this.composer.fields.poll;\n    }\n  });\n};\n\nexport default () => {\n  addToComposer(DiscussionComposer);\n  addToComposer(ReplyComposer);\n};\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/CommentPost'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Tooltip'];","import app from 'flarum/forum/app';\nimport CreatePollModal from './CreatePollModal';\n\nexport default class EditPollModal extends CreatePollModal {\n  title() {\n    return app.translator.trans('fof-polls.forum.modal.edit_title');\n  }\n\n  async onsubmit(data, state) {\n    await state.save(data);\n\n    // Show success alert\n    const alertId = app.alerts.show(\n      {\n        type: 'success',\n      },\n      app.translator.trans('fof-polls.forum.compose.success')\n    );\n\n    // Hide alert after 10 seconds\n    setTimeout(() => app.alerts.dismiss(alertId), 10000);\n  }\n}\n","import app from 'flarum/forum/app';\n\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport LogInModal from 'flarum/forum/components/LogInModal';\nimport ListVotersModal from './ListVotersModal';\nimport classList from 'flarum/common/utils/classList';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport icon from 'flarum/common/helpers/icon';\nimport EditPollModal from './EditPollModal';\n\nexport default class PostPoll extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.loadingOptions = false;\n\n    this.useSubmitUI = !this.attrs.poll?.canChangeVote() && this.attrs.poll?.allowMultipleVotes();\n    this.pendingSubmit = false;\n    this.pendingOptions = null;\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    this.preventClose = this.preventClose.bind(this);\n    window.addEventListener('beforeunload', this.preventClose);\n  }\n\n  onremove(vnode) {\n    super.onremove(vnode);\n\n    window.removeEventListener('beforeunload', this.preventClose);\n  }\n\n  view() {\n    const poll = this.attrs.poll;\n    const options = poll.options() || [];\n    let maxVotes = poll.allowMultipleVotes() ? poll.maxVotes() : 1;\n\n    if (maxVotes === 0) maxVotes = options.length;\n\n    const infoItems = this.infoItems(maxVotes);\n\n    return (\n      <div className=\"Post-poll\" data-id={poll.id()}>\n        <div className=\"PollHeading\">\n          <div className=\"PollHeading-title-container\">\n            <h3 className=\"PollHeading-title\">{poll.question()}</h3>\n            {poll.subtitle() && <p className=\"helpText PollHeading-subtitle\">{poll.subtitle()}</p>}\n          </div>\n\n          <div className=\"PollHeading-actions\">\n            {poll.canSeeVoters() && (\n              <Tooltip text={app.translator.trans('fof-polls.forum.public_poll')}>\n                <Button className=\"Button PollHeading-voters\" onclick={this.showVoters.bind(this)} icon=\"fas fa-poll\" />\n              </Tooltip>\n            )}\n\n            {poll.canEdit() && (\n              <Tooltip text={app.translator.trans('fof-polls.forum.moderation.edit')}>\n                <Button className=\"Button PollHeading-edit\" onclick={app.modal.show.bind(app.modal, EditPollModal, { poll })} icon=\"fas fa-pen\" />\n              </Tooltip>\n            )}\n            {poll.canDelete() && (\n              <Tooltip text={app.translator.trans('fof-polls.forum.moderation.delete')}>\n                <Button className=\"Button PollHeading-delete\" onclick={this.deletePoll.bind(this)} icon=\"fas fa-trash\" />\n              </Tooltip>\n            )}\n          </div>\n        </div>\n\n        <div>\n          <div className=\"PollOptions\">{options.map(this.viewOption.bind(this))}</div>\n\n          <div className=\"Poll-sticky\">\n            {!infoItems.isEmpty() && <div className=\"helpText PollInfoText\">{infoItems.toArray()}</div>}\n\n            {this.useSubmitUI && this.pendingSubmit && (\n              <Button className=\"Button Button--primary Poll-submit\" loading={this.loadingOptions} onclick={this.onsubmit.bind(this)}>\n                {app.translator.trans('fof-polls.forum.poll.submit_button')}\n              </Button>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  infoItems(maxVotes) {\n    const items = new ItemList();\n    const poll = this.attrs.poll;\n    const hasVoted = poll.myVotes()?.length > 0;\n\n    if (app.session.user && !poll.canVote() && !poll.hasEnded()) {\n      items.add(\n        'no-permission',\n        <span>\n          <i className=\"icon fas fa-times-circle fa-fw\" />\n          {app.translator.trans('fof-polls.forum.no_permission')}\n        </span>\n      );\n    }\n\n    if (poll.endDate()) {\n      items.add(\n        'end-date',\n        <span>\n          <i class=\"icon fas fa-clock fa-fw\" />\n          {poll.hasEnded()\n            ? app.translator.trans('fof-polls.forum.poll_ended')\n            : app.translator.trans('fof-polls.forum.days_remaining', { time: dayjs(poll.endDate()).fromNow() })}\n        </span>\n      );\n    }\n\n    if (poll.canVote()) {\n      items.add(\n        'max-votes',\n        <span>\n          <i className=\"icon fas fa-poll fa-fw\" />\n          {app.translator.trans('fof-polls.forum.max_votes_allowed', { max: maxVotes })}\n        </span>\n      );\n\n      if (!poll.canChangeVote()) {\n        items.add(\n          'cannot-change-vote',\n          <span>\n            <i className={`icon fas fa-${hasVoted ? 'times' : 'exclamation'}-circle fa-fw`} />\n            {app.translator.trans('fof-polls.forum.poll.cannot_change_vote')}\n          </span>\n        );\n      }\n    }\n\n    return items;\n  }\n\n  viewOption(opt) {\n    const poll = this.attrs.poll;\n    const hasVoted = poll.myVotes()?.length > 0;\n    const totalVotes = poll.voteCount();\n\n    const voted = this.pendingOptions ? this.pendingOptions.has(opt.id()) : poll.myVotes()?.some?.((vote) => vote.option() === opt);\n    const votes = opt.voteCount();\n    const percent = totalVotes > 0 ? Math.round((votes / totalVotes) * 100) : 0;\n\n    // isNaN(null) is false, so we have to check type directly now that API always returns the field\n    const canSeeVoteCount = typeof votes === 'number';\n    const isDisabled = this.loadingOptions || (hasVoted && !poll.canChangeVote());\n    const width = canSeeVoteCount ? percent : (Number(voted) / (poll.myVotes()?.length || 1)) * 100;\n\n    const showCheckmark = !app.session.user || (!poll.hasEnded() && poll.canVote() && (!hasVoted || poll.canChangeVote()));\n\n    const bar = (\n      <div className=\"PollBar\" data-selected={!!voted} style={`--poll-option-width: ${width}%`}>\n        {showCheckmark && (\n          <label className=\"PollAnswer-checkbox checkbox\">\n            <input onchange={this.changeVote.bind(this, opt)} type=\"checkbox\" checked={voted} disabled={isDisabled} />\n            <span className=\"checkmark\" />\n          </label>\n        )}\n\n        <div className=\"PollAnswer-text\">\n          <span className=\"PollAnswer-text-answer\">{opt.answer()}</span>\n          {voted && !showCheckmark && icon('fas fa-check-circle', { className: 'PollAnswer-check' })}\n          {canSeeVoteCount && <span className={classList('PollPercent', percent !== 100 && 'PollPercent--option')}>{percent}%</span>}\n        </div>\n\n        {opt.imageUrl() ? <img className=\"PollAnswer-image\" src={opt.imageUrl()} alt={opt.answer()} /> : null}\n      </div>\n    );\n\n    return (\n      <div\n        className={classList('PollOption', hasVoted && 'PollVoted', poll.hasEnded() && 'PollEnded', opt.imageUrl() && 'PollOption-hasImage')}\n        data-id={opt.id()}\n      >\n        {canSeeVoteCount ? (\n          <Tooltip text={app.translator.trans('fof-polls.forum.tooltip.votes', { count: votes })} onremove={this.hideOptionTooltip}>\n            {bar}\n          </Tooltip>\n        ) : (\n          bar\n        )}\n      </div>\n    );\n  }\n\n  changeVote(option, evt) {\n    if (!app.session.user) {\n      app.modal.show(LogInModal);\n      evt.target.checked = false;\n      return;\n    }\n\n    const optionIds = this.pendingOptions || new Set(this.attrs.poll.myVotes().map?.((v) => v.option().id()));\n    const isUnvoting = optionIds.delete(option.id());\n    const allowsMultiple = this.attrs.poll.allowMultipleVotes();\n\n    if (!allowsMultiple) {\n      optionIds.clear();\n    }\n\n    if (!isUnvoting) {\n      optionIds.add(option.id());\n    }\n\n    if (this.useSubmitUI) {\n      this.pendingOptions = optionIds.size ? optionIds : null;\n      this.pendingSubmit = !!this.pendingOptions;\n      return;\n    }\n\n    return this.submit(optionIds, null, () => (evt.target.checked = isUnvoting));\n  }\n\n  onsubmit() {\n    return this.submit(this.pendingOptions, () => {\n      this.pendingOptions = null;\n      this.pendingSubmit = false;\n    });\n  }\n\n  submit(optionIds, cb, onerror) {\n    this.loadingOptions = true;\n    m.redraw();\n\n    return app\n      .request({\n        method: 'PATCH',\n        url: `${app.forum.attribute('apiUrl')}/fof/polls/${this.attrs.poll.id()}/votes`,\n        body: {\n          data: {\n            optionIds: Array.from(optionIds),\n          },\n        },\n      })\n      .then((res) => {\n        app.store.pushPayload(res);\n        cb?.();\n      })\n      .catch((err) => {\n        onerror?.(err);\n      })\n      .finally(() => {\n        this.loadingOptions = false;\n\n        m.redraw();\n      });\n  }\n\n  showVoters() {\n    // Load all the votes only when opening the votes list\n    app.modal.show(ListVotersModal, {\n      poll: this.attrs.poll,\n      post: this.attrs.post,\n    });\n  }\n\n  deletePoll() {\n    if (confirm(app.translator.trans('fof-polls.forum.moderation.delete_confirm'))) {\n      this.attrs.poll.delete().then(() => {\n        m.redraw.sync();\n      });\n    }\n  }\n\n  /**\n   * Attempting to use the `tooltipVisible` attr on the Tooltip component set to 'false' when no vote count\n   * caused the tooltip to break on click. This is a workaround to hide the tooltip when no vote count is available,\n   * called on 'onremove' of the Tooltip component. It doesn't always work as intended either, but it does the job.\n   */\n  hideOptionTooltip(vnode) {\n    vnode.attrs.tooltipVisible = false;\n    vnode.state.updateVisibility();\n  }\n\n  /**\n   * Alert before navigating away using browser's 'beforeunload' event\n   */\n  preventClose(e) {\n    if (this.pendingOptions) {\n      e.preventDefault();\n      return true;\n    }\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionPage'];","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/utils/PostControls'];","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport Page from 'flarum/common/components/Page';\nimport PollModel from '../models/Poll';\nimport extractText from 'flarum/common/utils/extractText';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport PollView from './PollView';\n\nexport default class PollViewPage extends Page {\n  poll: PollModel | null | undefined = null;\n  loading: boolean = false;\n\n  oninit(vnode: Mithril.Vnode) {\n    super.oninit(vnode);\n\n    const editId = m.route.param('id');\n    this.poll = app.store.getById<PollModel>('poll', editId);\n\n    if (!this.poll) {\n      this.loading = true;\n\n      app.store.find<PollModel>('fof/polls', editId).then((item) => {\n        this.poll = item;\n        this.loading = false;\n        app.setTitle(extractText(app.translator.trans('fof-polls.forum.page.poll_detail')));\n        m.redraw();\n      });\n    }\n  }\n\n  view(): Mithril.Children {\n    if (this.loading) {\n      return <LoadingIndicator />;\n    }\n\n    return (\n      <div className=\"PollsPage\">\n        <div className=\"container\">\n          <PollView poll={this.poll} />\n        </div>\n      </div>\n    );\n  }\n}\n","import CreatePollModal from './CreatePollModal';\nimport PostPoll from './PostPoll';\nimport EditPollModal from './EditPollModal';\nimport ListVotersModal from './ListVotersModal';\nimport PollForm from './PollForm';\nimport ComposePollHero from './ComposePollHero';\nimport ComposePollPage from './ComposePollPage';\nimport PollsPage from './PollsPage';\nimport PollView from './PollView';\nimport PollViewPage from './PollViewPage';\n\nexport const components = {\n  CreatePollModal,\n  PostPoll,\n  EditPollModal,\n  ListVotersModal,\n  PollForm,\n  ComposePollHero,\n  ComposePollPage,\n  PollsPage,\n  PollView,\n  PollViewPage,\n};\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/computed'];","import Model from 'flarum/common/Model';\nimport PollOption from './PollOption';\nimport PollVote from './PollVote';\nimport computed from 'flarum/common/utils/computed';\n\nexport default class Poll extends Model {\n  question() {\n    return Model.attribute<string>('question').call(this);\n  }\n\n  subtitle() {\n    return Model.attribute<string | null>('subtitle').call(this);\n  }\n\n  hasEnded() {\n    return Model.attribute<boolean>('hasEnded').call(this);\n  }\n\n  endDate() {\n    return Model.attribute('endDate', Model.transformDate).call(this);\n  }\n\n  publicPoll() {\n    return Model.attribute<boolean>('publicPoll').call(this);\n  }\n\n  hideVotes() {\n    return Model.attribute<boolean>('hideVotes').call(this);\n  }\n\n  allowChangeVote() {\n    return Model.attribute<boolean>('allowChangeVote').call(this);\n  }\n\n  allowMultipleVotes() {\n    return Model.attribute<boolean>('allowMultipleVotes').call(this);\n  }\n\n  maxVotes() {\n    return Model.attribute<number>('maxVotes').call(this);\n  }\n\n  voteCount() {\n    return Model.attribute<number>('voteCount').call(this);\n  }\n\n  canVote() {\n    return Model.attribute<boolean>('canVote').call(this);\n  }\n\n  canEdit() {\n    return Model.attribute<boolean>('canEdit').call(this);\n  }\n\n  canDelete() {\n    return Model.attribute<boolean>('canDelete').call(this);\n  }\n\n  canSeeVoters() {\n    return Model.attribute<boolean>('canSeeVoters').call(this);\n  }\n\n  canChangeVote() {\n    return Model.attribute<boolean>('canChangeVote').call(this);\n  }\n\n  options() {\n    return Model.hasMany<PollOption>('options').call(this);\n  }\n\n  votes() {\n    return Model.hasMany<PollVote>('votes').call(this);\n  }\n\n  myVotes(): PollVote[] {\n    const myVotes = Model.hasMany<PollVote>('myVotes').call(this);\n    return myVotes ? (myVotes as PollVote[]) : [];\n  }\n\n  isGlobal() {\n    return Model.attribute<boolean>('isGlobal').call(this);\n  }\n\n  isHidden() {\n    return computed<boolean, this>('hiddenAt', (hiddenAt) => !!hiddenAt).call(this);\n  }\n\n  // TODO: These two don't make sense as of now\n  isUnread() {\n    return false;\n  }\n\n  apiEndpoint() {\n    /** @ts-ignore */\n    return `/fof/polls${this.exists ? `/${this.data.id}` : ''}`;\n  }\n}\n","import Model from 'flarum/common/Model';\nimport Poll from './Poll';\nimport PollVote from './PollVote';\n\nexport default class PollOption extends Model {\n  answer() {\n    return Model.attribute<string>('answer').call(this);\n  }\n\n  imageUrl() {\n    return Model.attribute<string>('imageUrl').call(this);\n  }\n\n  voteCount() {\n    return Model.attribute<number>('voteCount').call(this);\n  }\n\n  poll() {\n    return Model.hasOne<Poll>('polls').call(this);\n  }\n\n  votes() {\n    return Model.hasMany<PollVote>('votes').call(this);\n  }\n\n  apiEndpoint() {\n    /** @ts-ignore */\n    return `/fof/polls/answers${this.exists ? `/${this.data.id}` : ''}`;\n  }\n}\n","import Model from 'flarum/common/Model';\nimport Poll from './Poll';\nimport PollOption from './PollOption';\nimport User from 'flarum/common/models/User';\n\nexport default class PollVote extends Model {\n  poll() {\n    return Model.hasOne<Poll>('poll').call(this);\n  }\n\n  option() {\n    return Model.hasOne<PollOption>('option').call(this);\n  }\n\n  user() {\n    return Model.hasOne<User>('user').call(this);\n  }\n\n  pollId() {\n    return Model.attribute<number>('pollId').call(this);\n  }\n\n  optionId() {\n    return Model.attribute<number>('optionId').call(this);\n  }\n\n  apiEndpoint() {\n    return `/fof/polls/${this.pollId()}/vote`;\n  }\n}\n","import Poll from './Poll';\nimport PollOption from './PollOption';\nimport PollVote from './PollVote';\n\nexport const models = {\n  Poll,\n  PollOption,\n  PollVote,\n};\n","import PollFormState from './PollFormState';\nimport PollListState from './PollListState';\nimport PollState from './PollState';\n\nexport const states = {\n  PollFormState,\n  PollListState,\n  PollState,\n};\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extenders'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Post'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Forum'];","import Extend from 'flarum/common/extenders';\nimport Post from 'flarum/common/models/Post';\nimport Forum from 'flarum/common/models/Forum';\nimport Discussion from 'flarum/common/models/Discussion';\nimport Poll from './models/Poll';\nimport PollOption from './models/PollOption';\nimport PollVote from './models/PollVote';\nimport PollsPage from './components/PollsPage';\nimport ComposePollPage from './components/ComposePollPage';\nimport PollViewPage from './components/PollViewPage';\n\nexport default [\n  new Extend.Routes() //\n    .add('fof.polls.list', '/polls', PollsPage)\n    .add('fof.polls.view', '/polls/view/:id', PollViewPage)\n    .add('fof.polls.compose', '/polls/composer', ComposePollPage),\n\n  new Extend.Store() //\n    .add('polls', Poll)\n    .add('poll_options', PollOption)\n    .add('poll_votes', PollVote),\n\n  new Extend.Model(Post) //\n    .hasMany<Poll>('polls')\n    .attribute<boolean>('canStartPoll'),\n\n  new Extend.Model(Forum) //\n    .attribute<boolean>('canStartPolls'),\n\n  new Extend.Model(Discussion) //\n    .attribute<boolean>('hasPoll')\n    .attribute<boolean>('canStartPoll'),\n];\n","import app from 'flarum/forum/app';\n\nimport addDiscussionBadge from './addDiscussionBadge';\nimport addComposerItems from './addComposerItems';\nimport addPollsToPost from './addPollsToPost';\nimport addPostControls from './addPostControls';\nimport addNavItem from './addNavItem';\n\nexport * from './components';\nexport * from './models';\nexport * from './states';\n\napp.initializers.add('fof/polls', () => {\n  addDiscussionBadge();\n  addComposerItems();\n  addPollsToPost();\n  addPostControls();\n  addNavItem();\n});\n\nexport { default as extend } from './extend';\n","import app from 'flarum/forum/app';\n\nimport { extend } from 'flarum/common/extend';\nimport PostControls from 'flarum/forum/utils/PostControls';\nimport CreatePollModal from './components/CreatePollModal';\nimport Button from 'flarum/common/components/Button';\n\nexport default () => {\n  const createPoll = (post) =>\n    app.modal.show(CreatePollModal, {\n      onsubmit: (data) =>\n        app.store\n          .createRecord('polls')\n          .save(\n            {\n              ...data,\n              relationships: {\n                post,\n              },\n            },\n            {\n              data: {\n                include: 'options,myVotes,myVotes.option',\n              },\n            }\n          )\n          .then((poll) => {\n            post.rawRelationship('polls')?.push?.({ type: 'polls', id: poll.id() });\n\n            return poll;\n          }),\n    });\n\n  extend(PostControls, 'moderationControls', function (items, post) {\n    if (!post.isHidden() && post.canStartPoll()) {\n      items.add(\n        'addPoll',\n        <Button icon=\"fas fa-poll\" onclick={createPoll.bind(this, post)}>\n          {app.translator.trans('fof-polls.forum.moderation.add')}\n        </Button>\n      );\n    }\n  });\n};\n","import app from 'flarum/forum/app';\n\nimport { extend } from 'flarum/common/extend';\nimport CommentPost from 'flarum/forum/components/CommentPost';\nimport PostPoll from './components/PostPoll';\nimport DiscussionPage from 'flarum/forum/components/DiscussionPage';\n\nexport default () => {\n  extend(CommentPost.prototype, 'content', function (content) {\n    const post = this.attrs.post;\n\n    if ((!post.isHidden() || this.revealContent) && post.polls()) {\n      for (const poll of post.polls()) {\n        if (poll) {\n          content.push(<PostPoll post={post} poll={poll} />);\n        }\n      }\n    }\n  });\n\n  extend(CommentPost.prototype, 'oninit', function () {\n    this.subtree.check(() => {\n      const polls = this.attrs.post.polls();\n\n      const checks = polls?.map?.(\n        (poll) =>\n          poll && [\n            poll.data?.attributes,\n            poll.options().map?.((option) => option?.data?.attributes),\n            poll.myVotes().map?.((vote) => vote.option()?.id()),\n          ]\n      );\n\n      return JSON.stringify(checks);\n    });\n  });\n\n  extend(DiscussionPage.prototype, 'oncreate', function () {\n    if (app.pusher) {\n      app.pusher.then((binding) => {\n        // We will listen for updates to all polls and options\n        // Even if that model is not in the current discussion, it doesn't really matter\n        binding.channels.main.bind('updatedPollOptions', (data) => {\n          const poll = app.store.getById('polls', data['pollId']);\n\n          if (poll) {\n            poll.pushAttributes({\n              voteCount: data['pollVoteCount'],\n            });\n\n            // Not redrawing here, as the option below should trigger the redraw already\n          }\n\n          const changedOptions = data['options'];\n\n          for (const optionId in changedOptions) {\n            const option = app.store.getById('poll_options', optionId);\n\n            if (option && option.voteCount() !== undefined) {\n              option.pushAttributes({\n                voteCount: changedOptions[optionId],\n              });\n            }\n          }\n\n          m.redraw();\n        });\n      });\n    }\n  });\n\n  extend(DiscussionPage.prototype, 'onremove', function () {\n    if (app.pusher) {\n      app.pusher.then((binding) => {\n        binding.channels.main.unbind('updatedPollOptions');\n      });\n    }\n  });\n};\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport LinkButton from 'flarum/common/components/LinkButton';\n\nexport default function addNavItem() {\n  extend(IndexPage.prototype, 'navItems', (items) => {\n    items.add(\n      'fof-polls-list',\n      LinkButton.component(\n        {\n          href: app.route('fof.polls.list'),\n          icon: 'fas fa-poll',\n        },\n        app.translator.trans('fof-polls.forum.page.nav')\n      ),\n      35\n    );\n  });\n}\n"],"names":["_typeof","require","_regeneratorRuntime","module","exports","e","__esModule","t","r","Object","prototype","n","hasOwnProperty","o","defineProperty","value","i","Symbol","a","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","call","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","this","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","length","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","delegateYield","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","Function","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","getter","definition","key","get","obj","prop","flarum","core","compat","_setPrototypeOf","bind","_inheritsLoose","subClass","superClass","asyncGeneratorStep","gen","reject","_next","_throw","info","error","_asyncToGenerator","fn","self","args","arguments","apply","err","_getPrototypeOf","_isNativeReflectConstruct","Boolean","valueOf","Reflect","construct","_wrapNativeSuper","Class","_cache","Map","toString","indexOf","isNativeFunction","has","set","Wrapper","isNativeReflectConstruct","FormError","_Error","PollFormState","poll","loading","deleting","expandedGroup","createNewPoll","app","createRecord","pushAttributes","question","endDate","publicPoll","allowMultipleVotes","hideVotes","allowChangeVote","maxVotes","pushData","relationships","options","_proto","isExpanded","groupKey","expand","m","redraw","save","_save","_callee","data","_context","_x","_delete2","_callee2","_context2","ComposePollHero","_Component","_this","_len","Array","_key","concat","oninit","vnode","attrs","view","className","trans","id","controlItems","toArray","items","ItemList","add","LinkButton","icon","itemClassName","href","exists","Component","ComposePollPage","_Page","_this$poll","_this$poll2","_this2","editId","route","param","getById","find","item","_this2$poll","bodyClass","attribute","LoadingIndicator","listItems","sidebarItems","PollForm","onsubmit","_onsubmit","state","isNew","alertAttrs","alertId","controls","Button","onclick","show","setTimeout","dismiss","_x2","SelectDropdown","buttonClassName","accessibleToggleLabel","navItems","IndexPage","Page","PollPage","PollListItem","subtree","highlightRegExp","SubtreeRetainer","freshness","time","user","markedAllAsReadAt","getTime","active","elementAttrs","classList","isHidden","Slidable","window","PollControls","controlsView","contentView","slidableUnderneathView","Dropdown","menuClassName","isUnread","disabled","markAsRead","mainView","infoView","Link","highlight","subtitle","infoItems","oncreate","slidableInstance","slidable","element","$","on","onbeforeupdate","needsRebuild","matches","lastVotedNumber","voteCount","hasEnded","activeView","dayjs","fromNow","count","abbreviateNumber","PollList","params","getParams","isLoading","isInitialLoading","isLoadingNext","hasNext","loadNext","isEmpty","text","Placeholder","pageSize","isSearchResults","getPages","map","pg","toPropertyKey","toPrimitive","String","_defineProperties","target","props","descriptor","globalEventEmitter","EventEmitter","PollListState","_PaginatedListState","page","extraPolls","eventEmitter","deletePoll","ReferenceError","_assertThisInitialized","Constructor","protoProps","requestParams","_this$params$sort","include","filter","sort","sortMap","q","loadPage","preloadedPolls","initialLoading","clear","relevance","newest","oldest","removePoll","emit","_step","_iterator","_createForOfIteratorHelperLoose","pages","index","splice","addPoll","unshift","getAllItems","number","PaginatedListState","PollOptionLabel","PollOptionInput","isResult","style","opacity","onchange","PollOption","option","answer","PollResultsNumber","PollResults","overallVoteCount","min","max","PollOptions","pollOptions","showCheckMarks","changeVote","PollResult","ListVotersModal","_Modal","Stream","title","content","optionContent","opt","votes","voteContent","vote","avatar","username","Modal","PollState","pendingSubmit","pendingOptions","loadingOptions","useSubmitUI","showVoters","preventClose","preventDefault","canChangeVote","canVote","hasVoted","myVotes","Math","reduce","showButton","evt","LogInModal","checked","optionIds","Set","isUnvoting","size","hasSelectedOptions","submit","cb","onerror","_this3","url","body","from","res","pushPayload","hideOptionTooltip","tooltipVisible","updateVisibility","PollView","createMainView","createFormItems","deleteAction","editPoll","editAction","class","PollsPage","refresh","extractText","hero","viewItems","actionItems","canStartPoll","newPollAction","context","section","itemName","Separator","pollControls","moderationControls","canEdit","destructiveControls","canDelete","confirm","showDeletionAlert","back","location","reload","message","success","optionAnswers","optionImageUrls","imageUrl","formatDate","datepickerMinDate","isAfter","fields","bidi","addOption","displayOptions","isBefore","Switch","placeholder","removeOption","alert","pollExists","attributes","dateToTimestamp","event","t0","console","date","def","dayjsDate","isValid","format","CreatePollModal","hide","addToComposer","composer","extend","_this$composer$body","_discussion$canStartP","discussion","canStartPolls","EditPollModal","_CreatePollModal","PostPoll","_this$attrs$poll","_this$attrs$poll2","addEventListener","onremove","removeEventListener","canSeeVoters","Tooltip","viewOption","_poll$myVotes","_poll$myVotes2","_poll$myVotes3","_poll$myVotes4","totalVotes","voted","some","percent","round","canSeeVoteCount","isDisabled","width","Number","showCheckmark","bar","src","alt","_this$attrs$poll$myVo","_this$attrs$poll$myVo2","post","sync","_extends","assign","source","PollViewPage","components","Poll","_Model","Model","isGlobal","computed","hiddenAt","apiEndpoint","PollVote","pollId","optionId","models","states","Extend","Post","hasMany","Forum","Discussion","createPoll","DiscussionList","badges","hasPoll","Badge","label","DiscussionComposer","ReplyComposer","CommentPost","revealContent","polls","check","checks","_poll$data","_poll$options$map","_poll$options","_poll$myVotes$map","_option$data","_vote$option","JSON","stringify","DiscussionPage","binding","channels","main","changedOptions","unbind","_post$rawRelationship","rawRelationship","PostControls"],"sourceRoot":""}